{"version":3,"sources":["webpack:///./node_modules/avalanche/dist/apis/platformvm/validationtx.js","webpack:///./node_modules/avalanche/dist/common/jrpcapi.js","webpack:///./node_modules/avalanche/dist/apis/info/api.js","webpack:///./node_modules/avalanche/dist/apis/platformvm/outputs.js","webpack:///./node_modules/avalanche/dist/common/output.js","webpack:///./node_modules/avalanche/dist/apis/platformvm/utxos.js","webpack:///./node_modules/avalanche/dist/common/nbytes.js","webpack:///./node_modules/avalanche/dist/common/secp256k1.js","webpack:///./node_modules/avalanche/dist/avalanche.js","webpack:///./node_modules/avalanche/dist/apis/health/api.js","webpack:///./node_modules/avalanche/dist/apis/platformvm/createsubnettx.js","webpack:///./node_modules/avalanche/dist/common/apibase.js","webpack:///./node_modules/avalanche/dist/common/keychain.js","webpack:///./node_modules/avalanche/dist/apis/info/index.js","webpack:///./node_modules/avalanche/dist/common/input.js","webpack:///./node_modules/avalanche/dist/common/assetamount.js","webpack:///./node_modules/avalanche/dist/apis/platformvm/keychain.js","webpack:///./node_modules/avalanche/dist/apis/platformvm/inputs.js","webpack:///./node_modules/avalanche/dist/apis/platformvm/importtx.js","webpack:///./node_modules/avalanche/dist/common/index.js","webpack:///./node_modules/avalanche/dist/apis/health/index.js","webpack:///./node_modules/avalanche/dist/common/utxos.js","webpack:///./node_modules/avalanche/dist/apis/keystore/index.js","webpack:///./node_modules/avalanche/dist/apis/platformvm/index.js","webpack:///./node_modules/avalanche/dist/common/interfaces.js","webpack:///./node_modules/avalanche/dist/apis/metrics/api.js","webpack:///./node_modules/avalanche/dist/apis/platformvm/api.js","webpack:///./node_modules/avalanche/dist/common/evmtx.js","webpack:///./node_modules/avalanche/dist/apis/platformvm/exporttx.js","webpack:///./node_modules/avalanche/dist/apis/metrics/index.js","webpack:///./node_modules/avalanche/dist/apis/platformvm/tx.js","webpack:///./node_modules/avalanche/dist/apis/platformvm/constants.js","webpack:///./node_modules/avalanche/dist/common/tx.js","webpack:///./node_modules/avalanche/dist/common/credentials.js","webpack:///./node_modules/avalanche/dist/apis/platformvm/credentials.js","webpack:///./node_modules/avalanche/dist/apis/platformvm/basetx.js","webpack:///./node_modules/avalanche/dist/common/restapi.js","webpack:///./node_modules/avalanche/dist/apis/keystore/api.js"],"names":["__importDefault","this","mod","__esModule","Object","defineProperty","exports","value","AddValidatorTx","AddDelegatorTx","WeightedValidatorTx","ValidatorTx","bn_js_1","bintools_1","basetx_1","outputs_1","buffer_1","constants_1","constants_2","helperfunctions_1","outputs_2","serialization_1","bintools","default","getInstance","serializer","Serialization","BaseTx","networkid","blockchainid","outs","ins","memo","nodeID","startTime","endTime","super","_typeName","_typeID","undefined","Buffer","alloc","fromBNToBuffer","encoding","fields","serialize","assign","encoder","deserialize","decoder","bufferToNodeIDString","fromBufferToBN","bytes","offset","fromBuffer","copyFrom","superbuff","toBuffer","bsize","length","concat","DefaultNetworkID","weight","stakeAmount","stakeOuts","rewardOwners","PlatformVMConstants","ADDDELEGATORTX","getTxType","map","s","xferout","TransferableOutput","ParseableOutput","getWeight","val","i","add","getOutput","getAmount","getOuts","getStakeOuts","numstakeouts","outcount","readUInt32BE","push","numouts","writeUInt32BE","barr","sort","comparator","out","ro","newbase","args","delegationFee","ADDVALIDATORTX","Error","parseFloat","toFixed","getDelegationFeeBuffer","dbuff","delegatorMultiplier","dBuff","buffnum","superBuff","feeBuff","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","JRPCAPI","apibase_1","APIBase","core","baseurl","jrpcVersion","rpcid","callMethod","method","params","ep","rpc","id","jsonrpc","headers","axConf","baseURL","getProtocol","getIP","getPort","responseType","post","JSON","stringify","resp","status","data","parse","getRPCID","InfoAPI","jrpcapi_1","getBlockchainID","alias","response","blockchainID","getNetworkID","networkID","getNetworkName","networkName","getNodeID","getNodeVersion","version","getTxFee","txFee","creationTxFee","isBootstrapped","chain","peers","SECPOwnerOutput","StakeableLockOut","SECPTransferOutput","AmountOutput","SelectOutputClass","output_1","outputid","SECPXFEROUTPUTID","SECPOWNEROUTPUTID","STAKEABLELOCKOUTID","StandardTransferableOutput","arguments","output","assetID","ASSETIDLEN","StandardParseableOutput","StandardAmountOutput","newout","create","amount","addresses","locktime","threshold","stakeableLocktime","transferableOutput","synchronize","outobj","getAddresses","a","addr","Address","numaddrs","getLocktime","getThreshold","amountValue","outbuff","xferoutBuff","Output","BaseNFTOutput","OutputOwners","nbytes_1","NBytes","cb58Encode","addrbuff","b58ToBuffer","validateChecksum","newbuff","getSize","b","compare","Serializable","getAddressIdx","address","toString","getAddress","idx","meetsThreshold","asOf","now","UnixNow","qualified","getSpenders","lte","j","addrs","bufferToB58","aoutid","getOutputID","abuff","boutid","bbuff","asort","bsort","outid","sorta","sortb","getAssetID","parseableBuff","clone","groupID","getGroupID","UTXOSet","AssetAmountDestination","UTXO","inputs_1","utxos_1","tx_1","exporttx_1","importtx_1","assetamount_1","validationtx_1","createsubnettx_1","StandardUTXO","codecid","txid","outputidx","assetid","serialized","cb58Decode","utxo","codecID","LATESTCODEC","StandardAssetAmountDestination","StandardUTXOSet","getConsumableUXTO","stakeable","getAllUTXOs","filter","stakeableOutput","getStakeableLocktime","lt","getMinimumSpendable","aad","utxoArray","tmpUTXOArray","forEach","getTypeID","stakeableLockOut1","stakeableLockOut2","toNumber","index","assetKey","fromAddresses","getSenders","assetExists","assetAmount","getAssetAmount","isFinished","lockedStakeable","unlocked","amountOutput","input","SECPTransferInput","locked","gt","StakeableLockIn","ParseableInput","spendAmount","spenders","spender","addSignatureIdx","txID","getTxID","outputIdx","getOutputIdx","transferInput","TransferableInput","addInput","canComplete","zero","assetAmounts","getAmounts","change","getChange","isStakeableLockChange","getStakeableLockChange","lockedChange","getAssetIDString","lockedOutputs","lockedOutput","parseableOutput","getTransferableOutput","outputAmountRemaining","sub","newChangeOutput","newLockedChangeOutput","transferOutput","addChange","newOutput","newLockedOutput","addOutput","unlockedChange","getChangeAddresses","totalAmountSpent","getSpent","stakeableLockedAmount","getStakeableLockSpent","totalUnlockedSpent","amountBurnt","getBurn","totalUnlockedAvailable","unlockedAmount","getDestinations","buildBaseTx","toAddresses","changeAddresses","fee","feeAssetID","eq","addAssetAmount","_feeCheck","minSpendableErr","getInputs","getAllOutputs","baseTx","UnsignedTx","buildImportTx","atomics","sourceChain","importIns","feepaid","feeAssetStr","amt","infeeamount","assetStr","gte","xferin","from","getInput","spendout","feeRemaining","importTx","ImportTx","buildExportTx","avaxAssetID","destinationChain","exportouts","Defaults","network","X","getChangeOutputs","getOutputs","exportTx","ExportTx","buildAddDelegatorTx","rewardLocktime","rewardThreshold","rewardAddresses","rewardOutputOwners","UTx","buildAddValidatorTx","buildCreateSubnetTx","subnetOwnerAddresses","subnetOwnerThreshold","CreateSubnetTx","utxos","utxoid","utxoidCleaned","addressUTXOs","addressCleaned","utxobalance","utxovar","newset","allUTXOs","addArray","b58str","emsg","buff","__createBinding","o","m","k","k2","enumerable","get","__setModuleDefault","v","__importStar","hasOwnProperty","call","SECP256k1KeyChain","SECP256k1KeyPair","elliptic","create_hash_1","keychain_1","EC","ec","ecparams","curve","BN","n","constructor","StandardKeyPair","_sigFromSigBuffer","sig","r","recoveryParam","readUIntBE","sigOpt","generateKey","keypair","genKeyPair","privk","getPrivate","padStart","pubk","getPublic","importKey","keyFromPrivate","addressFromPublicKey","keyFromPublic","sha256","update","digest","ripesha","getPrivateKeyString","getPublicKeyString","sign","msg","sigObj","canonical","recovery","writeUInt8","toArray","verify","recover","recoverPubKey","encodeCompressed","StandardKeyChain","newKey","addKey","axios_1","AvalancheCore","ip","port","protocol","hrp","auth","apis","setAddress","url","getURL","setNetworkID","netid","getPreferredHRP","getHRP","setHRP","setAuthToken","_setHeaders","addAPI","apiName","ConstructorFN","api","_request","xhrmethod","getdata","postdata","axiosConfig","config","request","xhrdata","RequestResponseData","statusText","delete","put","patch","HealthAPI","getLiveness","subnetOwners","CREATESUBNETTX","typeID","db_1","setBaseURL","db","backup","getAll","clearAll","getNamespace","setAll","getBaseURL","getDB","getPrivateKey","getPublicKey","keys","values","kp","getAddressStrings","getAddressString","removeKey","key","kaddr","hasKey","getKey","__exportStar","p","StandardAmountInput","StandardTransferableInput","StandardParseableInput","Input","credentials_1","sigCount","sigIdxs","getSigIdxs","addressIdx","sigidx","SigIdx","setSource","sidx","sigbuff","getInputID","inbuff","inid","getUTXOID","AssetAmount","burn","spent","stakeableLockSpent","stakeableLockChange","finished","stakeableLocked","total","destinations","senders","amounts","amountkey","inputs","outputs","aa","assetHexStr","KeyChain","KeyPair","secp256k1_1","chainid","addressToString","getChainID","setChainID","newkp","makeKey","pk","split","newkc","kc","AmountInput","SelectInputClass","input_1","inputid","SECPINPUTID","STAKEABLELOCKINID","getCredentialID","SECPCREDENTIAL","transferableInput","xferinBuff","credentials_2","IMPORTTX","numIns","Array","isArray","ii","anIn","sigs","cred","SelectCredentialClass","sigidxs","getSource","signval","Signature","addSignature","getCodecID","readUInt8","getCodecIDBuffer","outputidbuffer","includes","utxoX","parseUTXO","console","log","message","remove","removeArray","removed","getUTXO","utxoids","results","getAllUTXOStrings","u","getUTXOIDs","spendable","entries","indexOf","getBalance","asset","spend","getAssetIDs","Set","merge","utxoset","hasUTXOIDs","utxos1","utxos2","process","intersection","us1","us2","difference","symDifference","union","mergeByRule","mergeRule","uSet","overwrite","added","lambda","MetricsAPI","restapi_1","RESTAPI","getMetrics","PlatformVMAPI","payload_1","keychain","PlatformChainID","blockchainAlias","AVAXAssetID","minValidatorStake","minDelegatorStake","getBlockchainAlias","setBlockchainAlias","refreshBlockchainID","parseAddress","ADDRESSLENGTH","addressFromBuffer","getAVAXAssetID","refresh","getStakingAssetID","setAVAXAssetID","getDefaultTxFee","setTxFee","getDefaultCreationTxFee","getCreationTxFee","setCreationTxFee","keyChain","newKeyChain","checkGooseEgg","utx","outTotal","outputTotal","getOutputTotal","ONEAVAX","mul","createBlockchain","username","password","subnetID","vmID","fxIDs","name","genesis","genesisData","getBlockchainStatus","createAddress","listAddresses","getCurrentValidators","getPendingValidators","sampleValidators","sampleSize","size","validators","addValidator","rewardAddress","delegationFeeRate","getTime","addSubnetValidator","addDelegator","createSubnet","controlKeys","validatedBy","validates","blockchainIDs","getBlockchains","blockchains","exportAVAX","to","importAVAX","issueTx","tx","Transaction","txobj","Tx","getCurrentSupply","supply","getHeight","height","getMinStake","setMinStake","getStake","staked","getSubnets","ids","subnets","exportKey","privateKey","getTx","getTxStatus","includeReason","getUTXOs","limit","startIndex","persistOpts","has","getName","selfArray","self","getMergeRule","set","getOverwrite","ownerAddresses","_cleanAddressArray","stringToAddress","srcChain","atomicUTXOs","PayloadBase","getPayload","builtUnsignedTx","prefixes","rewards","minStake","NodeIDStringToBuffer","owners","caller","EVMStandardTx","EVMStandardUnsignedTx","EVMStandardBaseTx","transaction","codecBuf","writeUInt16BE","getInputTotal","aIDHex","txtype","basebuff","unsignedTx","credentials","getUnsignedTx","c","txbuff","credlen","credential","credid","credbuff","exportOuts","EXPORTTX","numOuts","eo","getExportOutputs","anOut","SelectTxClass","BASETX","StandardUnsignedTx","readUInt16BE","StandardTx","numcreds","SECPFXID","SUBNETAUTHID","LOCKEDSTAKEABLES","ADDSUBNETVALIDATORTX","CREATECHAINTX","ADVANCETIMETX","REWARDVALIDATORTX","BLOCKCHAINIDLEN","SYMBOLMAXLEN","ASSETNAMELEN","StandardBaseTx","numins","getMemo","memolen","getTransaction","getIns","getTotalOuts","Credential","source","sigarray","sigArray","siglen","writeInt32BE","SECPCredential","newbasetx","tx_2","newOut","newIn","incount","contentType","acceptType","prepHeaders","getContentType","getAcceptType","KeystoreAPI","createUser","success","exportUser","user","importUser","listUsers","users","deleteUser"],"mappings":"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","file":"js/chunk-vendors~89a8b29a.5eb90af9.js","sourcesContent":["\"use strict\";\n/**\n * @packageDocumentation\n * @module API-PlatformVM-ValidationTx\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AddValidatorTx = exports.AddDelegatorTx = exports.WeightedValidatorTx = exports.ValidatorTx = void 0;\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nconst bintools_1 = __importDefault(require(\"../../utils/bintools\"));\nconst basetx_1 = require(\"./basetx\");\nconst outputs_1 = require(\"../platformvm/outputs\");\nconst buffer_1 = require(\"buffer/\");\nconst constants_1 = require(\"./constants\");\nconst constants_2 = require(\"../../utils/constants\");\nconst helperfunctions_1 = require(\"../../utils/helperfunctions\");\nconst outputs_2 = require(\"./outputs\");\nconst serialization_1 = require(\"../../utils/serialization\");\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\nconst serializer = serialization_1.Serialization.getInstance();\n/**\n * Abstract class representing an transactions with validation information.\n */\nclass ValidatorTx extends basetx_1.BaseTx {\n    constructor(networkid, blockchainid, outs, ins, memo, nodeID, startTime, endTime) {\n        super(networkid, blockchainid, outs, ins, memo);\n        this._typeName = \"ValidatorTx\";\n        this._typeID = undefined;\n        this.nodeID = buffer_1.Buffer.alloc(20);\n        this.startTime = buffer_1.Buffer.alloc(8);\n        this.endTime = buffer_1.Buffer.alloc(8);\n        this.nodeID = nodeID;\n        this.startTime = bintools.fromBNToBuffer(startTime, 8);\n        this.endTime = bintools.fromBNToBuffer(endTime, 8);\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"nodeID\": serializer.encoder(this.nodeID, encoding, \"Buffer\", \"nodeID\"), \"startTime\": serializer.encoder(this.startTime, encoding, \"Buffer\", \"decimalString\"), \"endTime\": serializer.encoder(this.endTime, encoding, \"Buffer\", \"decimalString\") });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.nodeID = serializer.decoder(fields[\"nodeID\"], encoding, \"nodeID\", \"Buffer\", 20);\n        this.startTime = serializer.decoder(fields[\"startTime\"], encoding, \"decimalString\", \"Buffer\", 8);\n        this.endTime = serializer.decoder(fields[\"endTime\"], encoding, \"decimalString\", \"Buffer\", 8);\n    }\n    /**\n     * Returns a {@link https://github.com/feross/buffer|Buffer} for the stake amount.\n     */\n    getNodeID() {\n        return this.nodeID;\n    }\n    /**\n     * Returns a string for the nodeID amount.\n     */\n    getNodeIDString() {\n        return helperfunctions_1.bufferToNodeIDString(this.nodeID);\n    }\n    /**\n     * Returns a {@link https://github.com/indutny/bn.js/|BN} for the stake amount.\n     */\n    getStartTime() {\n        return bintools.fromBufferToBN(this.startTime);\n    }\n    /**\n     * Returns a {@link https://github.com/indutny/bn.js/|BN} for the stake amount.\n     */\n    getEndTime() {\n        return bintools.fromBufferToBN(this.endTime);\n    }\n    fromBuffer(bytes, offset = 0) {\n        offset = super.fromBuffer(bytes, offset);\n        this.nodeID = bintools.copyFrom(bytes, offset, offset + 20);\n        offset += 20;\n        this.startTime = bintools.copyFrom(bytes, offset, offset + 8);\n        offset += 8;\n        this.endTime = bintools.copyFrom(bytes, offset, offset + 8);\n        offset += 8;\n        return offset;\n    }\n    /**\n     * Returns a {@link https://github.com/feross/buffer|Buffer} representation of the [[ValidatorTx]].\n     */\n    toBuffer() {\n        const superbuff = super.toBuffer();\n        const bsize = superbuff.length + this.nodeID.length + this.startTime.length + this.endTime.length;\n        return buffer_1.Buffer.concat([\n            superbuff,\n            this.nodeID,\n            this.startTime,\n            this.endTime\n        ], bsize);\n    }\n}\nexports.ValidatorTx = ValidatorTx;\nclass WeightedValidatorTx extends ValidatorTx {\n    /**\n     * Class representing an unsigned AddSubnetValidatorTx transaction.\n     *\n     * @param networkid Optional. Networkid, [[DefaultNetworkID]]\n     * @param blockchainid Optional. Blockchainid, default Buffer.alloc(32, 16)\n     * @param outs Optional. Array of the [[TransferableOutput]]s\n     * @param ins Optional. Array of the [[TransferableInput]]s\n     * @param memo Optional. {@link https://github.com/feross/buffer|Buffer} for the memo field\n     * @param nodeID Optional. The node ID of the validator being added.\n     * @param startTime Optional. The Unix time when the validator starts validating the Primary Network.\n     * @param endTime Optional. The Unix time when the validator stops validating the Primary Network (and staked AVAX is returned).\n     * @param weight Optional. The amount of nAVAX the validator is staking.\n     */\n    constructor(networkid = constants_2.DefaultNetworkID, blockchainid = buffer_1.Buffer.alloc(32, 16), outs = undefined, ins = undefined, memo = undefined, nodeID = undefined, startTime = undefined, endTime = undefined, weight = undefined) {\n        super(networkid, blockchainid, outs, ins, memo, nodeID, startTime, endTime);\n        this._typeName = \"WeightedValidatorTx\";\n        this._typeID = undefined;\n        this.weight = buffer_1.Buffer.alloc(8);\n        if (typeof weight !== undefined) {\n            this.weight = bintools.fromBNToBuffer(weight, 8);\n        }\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"weight\": serializer.encoder(this.weight, encoding, \"Buffer\", \"decimalString\") });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.weight = serializer.decoder(fields[\"weight\"], encoding, \"decimalString\", \"Buffer\", 8);\n    }\n    /**\n     * Returns a {@link https://github.com/indutny/bn.js/|BN} for the stake amount.\n     */\n    getWeight() {\n        return bintools.fromBufferToBN(this.weight);\n    }\n    /**\n     * Returns a {@link https://github.com/feross/buffer|Buffer} for the stake amount.\n     */\n    getWeightBuffer() {\n        return this.weight;\n    }\n    fromBuffer(bytes, offset = 0) {\n        offset = super.fromBuffer(bytes, offset);\n        this.weight = bintools.copyFrom(bytes, offset, offset + 8);\n        offset += 8;\n        return offset;\n    }\n    /**\n     * Returns a {@link https://github.com/feross/buffer|Buffer} representation of the [[AddSubnetValidatorTx]].\n     */\n    toBuffer() {\n        const superbuff = super.toBuffer();\n        return buffer_1.Buffer.concat([superbuff, this.weight]);\n    }\n}\nexports.WeightedValidatorTx = WeightedValidatorTx;\n/* Must implement later, the signing process isn't friendly to AvalancheJS\n\nexport class AddSubnetValidatorTx extends WeightedValidatorTx {\n    protected subnetID:Buffer = Buffer.alloc(32);\n    protected subnetAddrs:Array<Buffer> = [];\n    protected subnetAuthIdxs:Array<Buffer> = [];\n\n\n    getTxType = ():number => {\n        return PlatformVMConstants.ADDSUBNETVALIDATORTX;\n    }\n\n\n    getSubnetID = ():Buffer => {\n        return this.subnetID;\n    }\n\n\n    getSubnetIDString = ():string => {\n        return bintools.cb58Encode(this.subnetID);\n    }\n\n\n    getSubnetAuthAddresses = ():Array<Buffer> => {\n        return this.subnetAddrs;\n    }\n\n\n    setSubnetAuthAddresses = (addrs:Array<Buffer>):void => {\n        this.subnetAddrs = addrs;\n    }\n\n    calcSubnetAuthIdxs = (addrs:Array<Buffer>):Array<Buffer> => {\n        let idxs:Array<Buffer> = [];\n        addrs = addrs.sort();\n        for(let i = 0; i < addrs.length; i++){\n            let idx:Buffer = Buffer.alloc(4);\n            idx.writeUInt32BE(i,0);\n            idxs.push(idx);\n        }\n    }\n\n\n    getSubnetAuthIdxs = ():Array<Buffer> => {\n        return this.subnetAddrs;\n    }\n\n    fromBuffer(bytes:Buffer, offset:number = 0):number {\n        offset = super.fromBuffer(bytes, offset);\n        this.subnetID = bintools.copyFrom(bytes, offset, offset + 32);\n        offset += 32;\n        let sublenbuff:Buffer = bintools.copyFrom(bytes, offset, offset + 4);\n        offset += 4;\n        let sublen:number = sublenbuff.readUInt32BE(0);\n        for(let i = 0; i < sublen; i++){\n\n        }\n        offset = this.subnetAuth.fromBuffer(bytes, offset);\n        return offset;\n    }\n\n\n    toBuffer():Buffer {\n        const superbuff:Buffer = super.toBuffer();\n\n        return Buffer.concat([superbuff, this.subnetID, subAuth], superbuff.length + this.subnetID.length + subAuth.length);\n    }\n\n\n    sign(msg:Buffer, kc:KeyChain):Array<Credential> {\n        let creds:Array<SECPCredential> = super.sign(msg, kc);\n        const cred:SECPCredential = SelectCredentialClass(PlatformVMConstants.SECPCREDENTIAL) as SECPCredential;\n        for(let i = 0; i  < this.subnetAuth.length ; i++) {\n            if(!kc.hasKey(this.subnetAuth[i])) {\n                throw new Error(\"AddSubnetValidatorTx.sign -- specified address in subnetAuth not existent in provided keychain.\");\n            }\n            \n            let kp:KeyPair = kc.getKey(this.subnetAuth[i]);\n            const signval:Buffer = kp.sign(msg);\n            const sig:Signature = new Signature();\n            sig.fromBuffer(signval);\n            cred.addSignature(sig);\n        }\n        creds.push(cred);\n        return creds;\n    }\n\n\n    constructor(\n        networkid:number = DefaultNetworkID,\n        blockchainid:Buffer = Buffer.alloc(32, 16),\n        outs:Array<TransferableOutput> = undefined,\n        ins:Array<TransferableInput> = undefined,\n        memo:Buffer = undefined,\n        nodeID:Buffer = undefined,\n        startTime:BN = undefined,\n        endTime:BN = undefined,\n        weight:BN = undefined,\n        subnetID:Buffer = undefined,\n        subnetAuth:Array<Buffer> = undefined\n    ) {\n        super(networkid, blockchainid, outs, ins, memo, nodeID, startTime, endTime, weight);\n        if(typeof subnetID !== undefined){\n            this.subnetID = subnetID;\n        }\n        if(typeof subnetAuth !== undefined) {\n            this.subnetAuth = subnetAuth;\n        }\n    }\n\n}\n*/\n/**\n * Class representing an unsigned AddDelegatorTx transaction.\n */\nclass AddDelegatorTx extends WeightedValidatorTx {\n    /**\n     * Class representing an unsigned AddDelegatorTx transaction.\n     *\n     * @param networkid Optional. Networkid, [[DefaultNetworkID]]\n     * @param blockchainid Optional. Blockchainid, default Buffer.alloc(32, 16)\n     * @param outs Optional. Array of the [[TransferableOutput]]s\n     * @param ins Optional. Array of the [[TransferableInput]]s\n     * @param memo Optional. {@link https://github.com/feross/buffer|Buffer} for the memo field\n     * @param nodeID Optional. The node ID of the validator being added.\n     * @param startTime Optional. The Unix time when the validator starts validating the Primary Network.\n     * @param endTime Optional. The Unix time when the validator stops validating the Primary Network (and staked AVAX is returned).\n     * @param stakeAmount Optional. The amount of nAVAX the validator is staking.\n     * @param stakeOuts Optional. The outputs used in paying the stake.\n     * @param rewardOwners Optional. The [[ParseableOutput]] containing a [[SECPOwnerOutput]] for the rewards.\n     */\n    constructor(networkid = constants_2.DefaultNetworkID, blockchainid = buffer_1.Buffer.alloc(32, 16), outs = undefined, ins = undefined, memo = undefined, nodeID = undefined, startTime = undefined, endTime = undefined, stakeAmount = undefined, stakeOuts = undefined, rewardOwners = undefined) {\n        super(networkid, blockchainid, outs, ins, memo, nodeID, startTime, endTime, stakeAmount);\n        this._typeName = \"AddDelegatorTx\";\n        this._typeID = constants_1.PlatformVMConstants.ADDDELEGATORTX;\n        this.stakeOuts = [];\n        this.rewardOwners = undefined;\n        /**\n           * Returns the id of the [[AddDelegatorTx]]\n           */\n        this.getTxType = () => {\n            return this._typeID;\n        };\n        if (typeof stakeOuts !== undefined) {\n            this.stakeOuts = stakeOuts;\n        }\n        this.rewardOwners = rewardOwners;\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"stakeOuts\": this.stakeOuts.map((s) => s.serialize(encoding)), \"rewardOwners\": this.rewardOwners.serialize(encoding) });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.stakeOuts = fields[\"stakeOuts\"].map((s) => {\n            let xferout = new outputs_1.TransferableOutput();\n            xferout.deserialize(s, encoding);\n            return xferout;\n        });\n        this.rewardOwners = new outputs_2.ParseableOutput();\n        this.rewardOwners.deserialize(fields[\"rewardOwners\"], encoding);\n    }\n    /**\n     * Returns a {@link https://github.com/indutny/bn.js/|BN} for the stake amount.\n     */\n    getStakeAmount() {\n        return this.getWeight();\n    }\n    /**\n     * Returns a {@link https://github.com/feross/buffer|Buffer} for the stake amount.\n     */\n    getStakeAmountBuffer() {\n        return this.weight;\n    }\n    /**\n     * Returns the array of outputs being staked.\n     */\n    getStakeOuts() {\n        return this.stakeOuts;\n    }\n    /**\n     * Should match stakeAmount. Used in sanity checking.\n     */\n    getStakeOutsTotal() {\n        let val = new bn_js_1.default(0);\n        for (let i = 0; i < this.stakeOuts.length; i++) {\n            val = val.add(this.stakeOuts[i].getOutput().getAmount());\n        }\n        return val;\n    }\n    /**\n     * Returns a {@link https://github.com/feross/buffer|Buffer} for the reward address.\n     */\n    getRewardOwners() {\n        return this.rewardOwners;\n    }\n    getTotalOuts() {\n        return [...this.getOuts(), ...this.getStakeOuts()];\n    }\n    fromBuffer(bytes, offset = 0) {\n        offset = super.fromBuffer(bytes, offset);\n        const numstakeouts = bintools.copyFrom(bytes, offset, offset + 4);\n        offset += 4;\n        const outcount = numstakeouts.readUInt32BE(0);\n        this.stakeOuts = [];\n        for (let i = 0; i < outcount; i++) {\n            const xferout = new outputs_1.TransferableOutput();\n            offset = xferout.fromBuffer(bytes, offset);\n            this.stakeOuts.push(xferout);\n        }\n        this.rewardOwners = new outputs_2.ParseableOutput();\n        offset = this.rewardOwners.fromBuffer(bytes, offset);\n        return offset;\n    }\n    /**\n     * Returns a {@link https://github.com/feross/buffer|Buffer} representation of the [[AddDelegatorTx]].\n     */\n    toBuffer() {\n        const superbuff = super.toBuffer();\n        let bsize = superbuff.length;\n        const numouts = buffer_1.Buffer.alloc(4);\n        numouts.writeUInt32BE(this.stakeOuts.length, 0);\n        let barr = [super.toBuffer(), numouts];\n        bsize += numouts.length;\n        this.stakeOuts = this.stakeOuts.sort(outputs_1.TransferableOutput.comparator());\n        for (let i = 0; i < this.stakeOuts.length; i++) {\n            let out = this.stakeOuts[i].toBuffer();\n            barr.push(out);\n            bsize += out.length;\n        }\n        let ro = this.rewardOwners.toBuffer();\n        barr.push(ro);\n        bsize += ro.length;\n        return buffer_1.Buffer.concat(barr, bsize);\n    }\n    clone() {\n        let newbase = new AddDelegatorTx();\n        newbase.fromBuffer(this.toBuffer());\n        return newbase;\n    }\n    create(...args) {\n        return new AddDelegatorTx(...args);\n    }\n}\nexports.AddDelegatorTx = AddDelegatorTx;\nclass AddValidatorTx extends AddDelegatorTx {\n    /**\n     * Class representing an unsigned AddValidatorTx transaction.\n     *\n     * @param networkid Optional. Networkid, [[DefaultNetworkID]]\n     * @param blockchainid Optional. Blockchainid, default Buffer.alloc(32, 16)\n     * @param outs Optional. Array of the [[TransferableOutput]]s\n     * @param ins Optional. Array of the [[TransferableInput]]s\n     * @param memo Optional. {@link https://github.com/feross/buffer|Buffer} for the memo field\n     * @param nodeID Optional. The node ID of the validator being added.\n     * @param startTime Optional. The Unix time when the validator starts validating the Primary Network.\n     * @param endTime Optional. The Unix time when the validator stops validating the Primary Network (and staked AVAX is returned).\n     * @param stakeAmount Optional. The amount of nAVAX the validator is staking.\n     * @param stakeOuts Optional. The outputs used in paying the stake.\n     * @param rewardOwners Optional. The [[ParseableOutput]] containing the [[SECPOwnerOutput]] for the rewards.\n     * @param delegationFee Optional. The percent fee this validator charges when others delegate stake to them.\n     * Up to 4 decimal places allowed; additional decimal places are ignored. Must be between 0 and 100, inclusive.\n     * For example, if delegationFeeRate is 1.2345 and someone delegates to this validator, then when the delegation\n     * period is over, 1.2345% of the reward goes to the validator and the rest goes to the delegator.\n     */\n    constructor(networkid = constants_2.DefaultNetworkID, blockchainid = buffer_1.Buffer.alloc(32, 16), outs = undefined, ins = undefined, memo = undefined, nodeID = undefined, startTime = undefined, endTime = undefined, stakeAmount = undefined, stakeOuts = undefined, rewardOwners = undefined, delegationFee = undefined) {\n        super(networkid, blockchainid, outs, ins, memo, nodeID, startTime, endTime, stakeAmount, stakeOuts, rewardOwners);\n        this._typeName = \"AddValidatorTx\";\n        this._typeID = constants_1.PlatformVMConstants.ADDVALIDATORTX;\n        this.delegationFee = 0;\n        /**\n           * Returns the id of the [[AddValidatorTx]]\n           */\n        this.getTxType = () => {\n            return this._typeID;\n        };\n        if (typeof delegationFee === \"number\") {\n            if (delegationFee >= 0 && delegationFee <= 100) {\n                this.delegationFee = parseFloat(delegationFee.toFixed(4));\n            }\n            else {\n                throw new Error(\"AddValidatorTx.constructor -- delegationFee must be in the range of 0 and 100, inclusively.\");\n            }\n        }\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"delegationFee\": serializer.encoder(this.getDelegationFeeBuffer(), encoding, \"Buffer\", \"decimalString\", 4) });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        let dbuff = serializer.decoder(fields[\"delegationFee\"], encoding, \"decimalString\", \"Buffer\", 4);\n        this.delegationFee = dbuff.readUInt32BE(0) / AddValidatorTx.delegatorMultiplier;\n    }\n    /**\n     * Returns the delegation fee (represents a percentage from 0 to 100);\n     */\n    getDelegationFee() {\n        return this.delegationFee;\n    }\n    /**\n     * Returns the binary representation of the delegation fee as a {@link https://github.com/feross/buffer|Buffer}.\n     */\n    getDelegationFeeBuffer() {\n        let dBuff = buffer_1.Buffer.alloc(4);\n        let buffnum = parseFloat(this.delegationFee.toFixed(4)) * AddValidatorTx.delegatorMultiplier;\n        dBuff.writeUInt32BE(buffnum, 0);\n        return dBuff;\n    }\n    fromBuffer(bytes, offset = 0) {\n        offset = super.fromBuffer(bytes, offset);\n        let dbuff = bintools.copyFrom(bytes, offset, offset + 4);\n        offset += 4;\n        this.delegationFee = dbuff.readUInt32BE(0) / AddValidatorTx.delegatorMultiplier;\n        return offset;\n    }\n    toBuffer() {\n        let superBuff = super.toBuffer();\n        let feeBuff = this.getDelegationFeeBuffer();\n        return buffer_1.Buffer.concat([superBuff, feeBuff]);\n    }\n}\nexports.AddValidatorTx = AddValidatorTx;\nAddValidatorTx.delegatorMultiplier = 10000;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsaWRhdGlvbnR4LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2FwaXMvcGxhdGZvcm12bS92YWxpZGF0aW9udHgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7Ozs7O0FBRUgsa0RBQXVCO0FBQ3ZCLG9FQUE0QztBQUM1QyxxQ0FBa0M7QUFDbEMsbURBQTJEO0FBRTNELG9DQUFpQztBQUNqQywyQ0FBa0Q7QUFDbEQscURBQXlEO0FBQ3pELGlFQUFtRTtBQUNuRSx1Q0FBMEQ7QUFDMUQsNkRBQThFO0FBRTlFOztHQUVHO0FBQ0gsTUFBTSxRQUFRLEdBQUcsa0JBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUN4QyxNQUFNLFVBQVUsR0FBRyw2QkFBYSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBRS9DOztHQUVHO0FBQ0gsTUFBc0IsV0FBWSxTQUFRLGVBQU07SUE0RTVDLFlBQ0ksU0FBZ0IsRUFDaEIsWUFBbUIsRUFDbkIsSUFBOEIsRUFDOUIsR0FBNEIsRUFDNUIsSUFBWSxFQUNaLE1BQWMsRUFDZCxTQUFhLEVBQ2IsT0FBVztRQUVYLEtBQUssQ0FBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFyRjFDLGNBQVMsR0FBRyxhQUFhLENBQUM7UUFDMUIsWUFBTyxHQUFHLFNBQVMsQ0FBQztRQWtCcEIsV0FBTSxHQUFVLGVBQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDakMsY0FBUyxHQUFVLGVBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkMsWUFBTyxHQUFVLGVBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFpRXZDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxD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LCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICogQG1vZHVsZSBBUEktUGxhdGZvcm1WTS1WYWxpZGF0aW9uVHhcbiAqL1xuXG5pbXBvcnQgQk4gZnJvbSAnYm4uanMnO1xuaW1wb3J0IEJpblRvb2xzIGZyb20gJy4uLy4uL3V0aWxzL2JpbnRvb2xzJztcbmltcG9ydCB7IEJhc2VUeCB9IGZyb20gJy4vYmFzZXR4JztcbmltcG9ydCB7IFRyYW5zZmVyYWJsZU91dHB1dCB9IGZyb20gJy4uL3BsYXRmb3Jtdm0vb3V0cHV0cyc7XG5pbXBvcnQgeyBUcmFuc2ZlcmFibGVJbnB1dCB9IGZyb20gJy4uL3BsYXRmb3Jtdm0vaW5wdXRzJztcbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ2J1ZmZlci8nO1xuaW1wb3J0IHsgUGxhdGZvcm1WTUNvbnN0YW50cyB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IERlZmF1bHROZXR3b3JrSUQgfSBmcm9tICcuLi8uLi91dGlscy9jb25zdGFudHMnO1xuaW1wb3J0IHsgYnVmZmVyVG9Ob2RlSURTdHJpbmcgfSBmcm9tICcuLi8uLi91dGlscy9oZWxwZXJmdW5jdGlvbnMnO1xuaW1wb3J0IHsgQW1vdW50T3V0cHV0LCBQYXJzZWFibGVPdXRwdXQgfSBmcm9tICcuL291dHB1dHMnO1xuaW1wb3J0IHsgU2VyaWFsaXphdGlvbiwgU2VyaWFsaXplZEVuY29kaW5nIH0gZnJvbSAnLi4vLi4vdXRpbHMvc2VyaWFsaXphdGlvbic7XG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5jb25zdCBiaW50b29scyA9IEJpblRvb2xzLmdldEluc3RhbmNlKCk7XG5jb25zdCBzZXJpYWxpemVyID0gU2VyaWFsaXphdGlvbi5nZXRJbnN0YW5jZSgpO1xuXG4vKipcbiAqIEFic3RyYWN0IGNsYXNzIHJlcHJlc2VudGluZyBhbiB0cmFuc2FjdGlvbnMgd2l0aCB2YWxpZGF0aW9uIGluZm9ybWF0aW9uLlxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVmFsaWRhdG9yVHggZXh0ZW5kcyBCYXNlVHgge1xuICAgIHByb3RlY3RlZCBfdHlwZU5hbWUgPSBcIlZhbGlkYXRvclR4XCI7XG4gICAgcHJvdGVjdGVkIF90eXBlSUQgPSB1bmRlZmluZWQ7XG5cbiAgICBzZXJpYWxpemUoZW5jb2Rpbmc6U2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIik6b2JqZWN0IHtcbiAgICAgICAgbGV0IGZpZWxkczpvYmplY3QgPSBzdXBlci5zZXJpYWxpemUoZW5jb2RpbmcpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZmllbGRzLFxuICAgICAgICAgICAgXCJub2RlSURcIjpzZXJpYWxpemVyLmVuY29kZXIodGhpcy5ub2RlSUQsIGVuY29kaW5nLCBcIkJ1ZmZlclwiLCBcIm5vZGVJRFwiKSxcbiAgICAgICAgICAgIFwic3RhcnRUaW1lXCI6c2VyaWFsaXplci5lbmNvZGVyKHRoaXMuc3RhcnRUaW1lLCBlbmNvZGluZywgXCJCdWZmZXJcIiwgXCJkZWNpbWFsU3RyaW5nXCIpLFxuICAgICAgICAgICAgXCJlbmRUaW1lXCI6c2VyaWFsaXplci5lbmNvZGVyKHRoaXMuZW5kVGltZSwgZW5jb2RpbmcsIFwiQnVmZmVyXCIsIFwiZGVjaW1hbFN0cmluZ1wiKVxuICAgICAgICB9XG4gICAgfTtcbiAgICBkZXNlcmlhbGl6ZShmaWVsZHM6b2JqZWN0LCBlbmNvZGluZzpTZXJpYWxpemVkRW5jb2RpbmcgPSBcImhleFwiKSB7XG4gICAgICAgIHN1cGVyLmRlc2VyaWFsaXplKGZpZWxkcywgZW5jb2RpbmcpO1xuICAgICAgICB0aGlzLm5vZGVJRCA9IHNlcmlhbGl6ZXIuZGVjb2RlcihmaWVsZHNbXCJub2RlSURcIl0sIGVuY29kaW5nLCBcIm5vZGVJRFwiLCBcIkJ1ZmZlclwiLCAyMCk7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gc2VyaWFsaXplci5kZWNvZGVyKGZpZWxkc1tcInN0YXJ0VGltZVwiXSwgZW5jb2RpbmcsIFwiZGVjaW1hbFN0cmluZ1wiLCBcIkJ1ZmZlclwiLCA4KTtcbiAgICAgICAgdGhpcy5lbmRUaW1lID0gc2VyaWFsaXplci5kZWNvZGVyKGZpZWxkc1tcImVuZFRpbWVcIl0sIGVuY29kaW5nLCBcImRlY2ltYWxTdHJpbmdcIiwgXCJCdWZmZXJcIiwgOCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIG5vZGVJRDpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoMjApO1xuICAgIHByb3RlY3RlZCBzdGFydFRpbWU6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDgpO1xuICAgIHByb3RlY3RlZCBlbmRUaW1lOkJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyg4KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBmb3IgdGhlIHN0YWtlIGFtb3VudC5cbiAgICAgKi9cbiAgICBnZXROb2RlSUQoKTpCdWZmZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5ub2RlSUQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHN0cmluZyBmb3IgdGhlIG5vZGVJRCBhbW91bnQuXG4gICAgICovXG4gICAgZ2V0Tm9kZUlEU3RyaW5nKCk6c3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGJ1ZmZlclRvTm9kZUlEU3RyaW5nKHRoaXMubm9kZUlEKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59IGZvciB0aGUgc3Rha2UgYW1vdW50LlxuICAgICAqL1xuICAgIGdldFN0YXJ0VGltZSgpe1xuICAgICAgICByZXR1cm4gYmludG9vbHMuZnJvbUJ1ZmZlclRvQk4odGhpcy5zdGFydFRpbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfSBmb3IgdGhlIHN0YWtlIGFtb3VudC5cbiAgICAgKi9cbiAgICBnZXRFbmRUaW1lKCkge1xuICAgICAgICByZXR1cm4gYmludG9vbHMuZnJvbUJ1ZmZlclRvQk4odGhpcy5lbmRUaW1lKTtcbiAgICB9XG5cbiAgICBmcm9tQnVmZmVyKGJ5dGVzOkJ1ZmZlciwgb2Zmc2V0Om51bWJlciA9IDApOm51bWJlciB7XG4gICAgICAgIG9mZnNldCA9IHN1cGVyLmZyb21CdWZmZXIoYnl0ZXMsIG9mZnNldCk7XG4gICAgICAgIHRoaXMubm9kZUlEID0gYmludG9vbHMuY29weUZyb20oYnl0ZXMsIG9mZnNldCwgb2Zmc2V0ICsgMjApO1xuICAgICAgICBvZmZzZXQgKz0gMjA7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gYmludG9vbHMuY29weUZyb20oYnl0ZXMsIG9mZnNldCwgb2Zmc2V0ICsgOCk7XG4gICAgICAgIG9mZnNldCArPSA4O1xuICAgICAgICB0aGlzLmVuZFRpbWUgPSBiaW50b29scy5jb3B5RnJvbShieXRlcywgb2Zmc2V0LCBvZmZzZXQgKyA4KTtcbiAgICAgICAgb2Zmc2V0ICs9IDg7XG4gICAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBbW1ZhbGlkYXRvclR4XV0uXG4gICAgICovXG4gICAgdG9CdWZmZXIoKTpCdWZmZXIge1xuICAgICAgICBjb25zdCBzdXBlcmJ1ZmY6QnVmZmVyID0gc3VwZXIudG9CdWZmZXIoKTtcbiAgICAgICAgY29uc3QgYnNpemU6bnVtYmVyID0gc3VwZXJidWZmLmxlbmd0aCArIHRoaXMubm9kZUlELmxlbmd0aCArIHRoaXMuc3RhcnRUaW1lLmxlbmd0aCArIHRoaXMuZW5kVGltZS5sZW5ndGg7XG4gICAgICAgIHJldHVybiBCdWZmZXIuY29uY2F0KFtcbiAgICAgICAgICAgIHN1cGVyYnVmZixcbiAgICAgICAgICAgIHRoaXMubm9kZUlELFxuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUsXG4gICAgICAgICAgICB0aGlzLmVuZFRpbWVcbiAgICAgICAgXSwgYnNpemUpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgbmV0d29ya2lkOm51bWJlciwgXG4gICAgICAgIGJsb2NrY2hhaW5pZDpCdWZmZXIsIFxuICAgICAgICBvdXRzOkFycmF5PFRyYW5zZmVyYWJsZU91dHB1dD4sIFxuICAgICAgICBpbnM6QXJyYXk8VHJhbnNmZXJhYmxlSW5wdXQ+LCBcbiAgICAgICAgbWVtbz86QnVmZmVyLCBcbiAgICAgICAgbm9kZUlEPzpCdWZmZXIsIFxuICAgICAgICBzdGFydFRpbWU/OkJOLCBcbiAgICAgICAgZW5kVGltZT86Qk5cbiAgICApIHtcbiAgICAgICAgc3VwZXIobmV0d29ya2lkLCBibG9ja2NoYWluaWQsIG91dHMsIGlucywgbWVtbyk7XG4gICAgICAgIHRoaXMubm9kZUlEID0gbm9kZUlEO1xuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IGJpbnRvb2xzLmZyb21CTlRvQnVmZmVyKHN0YXJ0VGltZSwgOCk7XG4gICAgICAgIHRoaXMuZW5kVGltZSA9IGJpbnRvb2xzLmZyb21CTlRvQnVmZmVyKGVuZFRpbWUsIDgpO1xuICAgIH1cblxufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgV2VpZ2h0ZWRWYWxpZGF0b3JUeCBleHRlbmRzIFZhbGlkYXRvclR4IHtcbiAgICBwcm90ZWN0ZWQgX3R5cGVOYW1lID0gXCJXZWlnaHRlZFZhbGlkYXRvclR4XCI7XG4gICAgcHJvdGVjdGVkIF90eXBlSUQgPSB1bmRlZmluZWQ7XG5cbiAgICBzZXJpYWxpemUoZW5jb2Rpbmc6U2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIik6b2JqZWN0IHtcbiAgICAgICAgbGV0IGZpZWxkczpvYmplY3QgPSBzdXBlci5zZXJpYWxpemUoZW5jb2RpbmcpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZmllbGRzLFxuICAgICAgICAgICAgXCJ3ZWlnaHRcIjogc2VyaWFsaXplci5lbmNvZGVyKHRoaXMud2VpZ2h0LCBlbmNvZGluZywgXCJCdWZmZXJcIiwgXCJkZWNpbWFsU3RyaW5nXCIpXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGRlc2VyaWFsaXplKGZpZWxkczpvYmplY3QsIGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICAgICAgc3VwZXIuZGVzZXJpYWxpemUoZmllbGRzLCBlbmNvZGluZyk7XG4gICAgICAgIHRoaXMud2VpZ2h0ID0gc2VyaWFsaXplci5kZWNvZGVyKGZpZWxkc1tcIndlaWdodFwiXSwgZW5jb2RpbmcsIFwiZGVjaW1hbFN0cmluZ1wiLCBcIkJ1ZmZlclwiLCA4KTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgd2VpZ2h0OkJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyg4KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfSBmb3IgdGhlIHN0YWtlIGFtb3VudC5cbiAgICAgKi9cbiAgICBnZXRXZWlnaHQoKTpCTiB7XG4gICAgICAgIHJldHVybiBiaW50b29scy5mcm9tQnVmZmVyVG9CTih0aGlzLndlaWdodCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IGZvciB0aGUgc3Rha2UgYW1vdW50LlxuICAgICAqL1xuICAgIGdldFdlaWdodEJ1ZmZlcigpOkJ1ZmZlciB7XG4gICAgICAgIHJldHVybiB0aGlzLndlaWdodDtcbiAgICB9XG5cbiAgICBmcm9tQnVmZmVyKGJ5dGVzOkJ1ZmZlciwgb2Zmc2V0Om51bWJlciA9IDApOm51bWJlciB7XG4gICAgICAgIG9mZnNldCA9IHN1cGVyLmZyb21CdWZmZXIoYnl0ZXMsIG9mZnNldCk7XG4gICAgICAgIHRoaXMud2VpZ2h0ID0gYmludG9vbHMuY29weUZyb20oYnl0ZXMsIG9mZnNldCwgb2Zmc2V0ICsgOCk7XG4gICAgICAgIG9mZnNldCArPSA4O1xuICAgICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSByZXByZXNlbnRhdGlvbiBvZiB0aGUgW1tBZGRTdWJuZXRWYWxpZGF0b3JUeF1dLlxuICAgICAqL1xuICAgIHRvQnVmZmVyKCk6QnVmZmVyIHtcbiAgICAgICAgY29uc3Qgc3VwZXJidWZmOkJ1ZmZlciA9IHN1cGVyLnRvQnVmZmVyKCk7XG4gICAgICAgIHJldHVybiBCdWZmZXIuY29uY2F0KFtzdXBlcmJ1ZmYsIHRoaXMud2VpZ2h0XSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xhc3MgcmVwcmVzZW50aW5nIGFuIHVuc2lnbmVkIEFkZFN1Ym5ldFZhbGlkYXRvclR4IHRyYW5zYWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5ldHdvcmtpZCBPcHRpb25hbC4gTmV0d29ya2lkLCBbW0RlZmF1bHROZXR3b3JrSURdXVxuICAgICAqIEBwYXJhbSBibG9ja2NoYWluaWQgT3B0aW9uYWwuIEJsb2NrY2hhaW5pZCwgZGVmYXVsdCBCdWZmZXIuYWxsb2MoMzIsIDE2KVxuICAgICAqIEBwYXJhbSBvdXRzIE9wdGlvbmFsLiBBcnJheSBvZiB0aGUgW1tUcmFuc2ZlcmFibGVPdXRwdXRdXXNcbiAgICAgKiBAcGFyYW0gaW5zIE9wdGlvbmFsLiBBcnJheSBvZiB0aGUgW1tUcmFuc2ZlcmFibGVJbnB1dF1dc1xuICAgICAqIEBwYXJhbSBtZW1vIE9wdGlvbmFsLiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBmb3IgdGhlIG1lbW8gZmllbGRcbiAgICAgKiBAcGFyYW0gbm9kZUlEIE9wdGlvbmFsLiBUaGUgbm9kZSBJRCBvZiB0aGUgdmFsaWRhdG9yIGJlaW5nIGFkZGVkLlxuICAgICAqIEBwYXJhbSBzdGFydFRpbWUgT3B0aW9uYWwuIFRoZSBVbml4IHRpbWUgd2hlbiB0aGUgdmFsaWRhdG9yIHN0YXJ0cyB2YWxpZGF0aW5nIHRoZSBQcmltYXJ5IE5ldHdvcmsuXG4gICAgICogQHBhcmFtIGVuZFRpbWUgT3B0aW9uYWwuIFRoZSBVbml4IHRpbWUgd2hlbiB0aGUgdmFsaWRhdG9yIHN0b3BzIHZhbGlkYXRpbmcgdGhlIFByaW1hcnkgTmV0d29yayAoYW5kIHN0YWtlZCBBVkFYIGlzIHJldHVybmVkKS5cbiAgICAgKiBAcGFyYW0gd2VpZ2h0IE9wdGlvbmFsLiBUaGUgYW1vdW50IG9mIG5BVkFYIHRoZSB2YWxpZGF0b3IgaXMgc3Rha2luZy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgbmV0d29ya2lkOm51bWJlciA9IERlZmF1bHROZXR3b3JrSUQsIFxuICAgICAgICBibG9ja2NoYWluaWQ6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDMyLCAxNiksIFxuICAgICAgICBvdXRzOkFycmF5PFRyYW5zZmVyYWJsZU91dHB1dD4gPSB1bmRlZmluZWQsIFxuICAgICAgICBpbnM6QXJyYXk8VHJhbnNmZXJhYmxlSW5wdXQ+ID0gdW5kZWZpbmVkLCBcbiAgICAgICAgbWVtbzpCdWZmZXIgPSB1bmRlZmluZWQsIFxuICAgICAgICBub2RlSUQ6QnVmZmVyID0gdW5kZWZpbmVkLCBcbiAgICAgICAgc3RhcnRUaW1lOkJOID0gdW5kZWZpbmVkLCBcbiAgICAgICAgZW5kVGltZTpCTiA9IHVuZGVmaW5lZCxcbiAgICAgICAgd2VpZ2h0OkJOID0gdW5kZWZpbmVkLFxuICAgICkge1xuICAgICAgICBzdXBlcihuZXR3b3JraWQsIGJsb2NrY2hhaW5pZCwgb3V0cywgaW5zLCBtZW1vLCBub2RlSUQsIHN0YXJ0VGltZSwgZW5kVGltZSk7XG4gICAgICAgIGlmKHR5cGVvZiB3ZWlnaHQgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICB0aGlzLndlaWdodCA9IGJpbnRvb2xzLmZyb21CTlRvQnVmZmVyKHdlaWdodCwgOCk7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cbi8qIE11c3QgaW1wbGVtZW50IGxhdGVyLCB0aGUgc2lnbmluZyBwcm9jZXNzIGlzbid0IGZyaWVuZGx5IHRvIEF2YWxhbmNoZUpTXG5cbmV4cG9ydCBjbGFzcyBBZGRTdWJuZXRWYWxpZGF0b3JUeCBleHRlbmRzIFdlaWdodGVkVmFsaWRhdG9yVHgge1xuICAgIHByb3RlY3RlZCBzdWJuZXRJRDpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoMzIpO1xuICAgIHByb3RlY3RlZCBzdWJuZXRBZGRyczpBcnJheTxCdWZmZXI+ID0gW107XG4gICAgcHJvdGVjdGVkIHN1Ym5ldEF1dGhJZHhzOkFycmF5PEJ1ZmZlcj4gPSBbXTtcblxuXG4gICAgZ2V0VHhUeXBlID0gKCk6bnVtYmVyID0+IHtcbiAgICAgICAgcmV0dXJuIFBsYXRmb3JtVk1Db25zdGFudHMuQUREU1VCTkVUVkFMSURBVE9SVFg7XG4gICAgfVxuXG5cbiAgICBnZXRTdWJuZXRJRCA9ICgpOkJ1ZmZlciA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnN1Ym5ldElEO1xuICAgIH1cblxuXG4gICAgZ2V0U3VibmV0SURTdHJpbmcgPSAoKTpzdHJpbmcgPT4ge1xuICAgICAgICByZXR1cm4gYmludG9vbHMuY2I1OEVuY29kZSh0aGlzLnN1Ym5ldElEKTtcbiAgICB9XG5cblxuICAgIGdldFN1Ym5ldEF1dGhBZGRyZXNzZXMgPSAoKTpBcnJheTxCdWZmZXI+ID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VibmV0QWRkcnM7XG4gICAgfVxuXG5cbiAgICBzZXRTdWJuZXRBdXRoQWRkcmVzc2VzID0gKGFkZHJzOkFycmF5PEJ1ZmZlcj4pOnZvaWQgPT4ge1xuICAgICAgICB0aGlzLnN1Ym5ldEFkZHJzID0gYWRkcnM7XG4gICAgfVxuXG4gICAgY2FsY1N1Ym5ldEF1dGhJZHhzID0gKGFkZHJzOkFycmF5PEJ1ZmZlcj4pOkFycmF5PEJ1ZmZlcj4gPT4ge1xuICAgICAgICBsZXQgaWR4czpBcnJheTxCdWZmZXI+ID0gW107XG4gICAgICAgIGFkZHJzID0gYWRkcnMuc29ydCgpO1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYWRkcnMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgbGV0IGlkeDpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoNCk7XG4gICAgICAgICAgICBpZHgud3JpdGVVSW50MzJCRShpLDApO1xuICAgICAgICAgICAgaWR4cy5wdXNoKGlkeCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIGdldFN1Ym5ldEF1dGhJZHhzID0gKCk6QXJyYXk8QnVmZmVyPiA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnN1Ym5ldEFkZHJzO1xuICAgIH1cblxuICAgIGZyb21CdWZmZXIoYnl0ZXM6QnVmZmVyLCBvZmZzZXQ6bnVtYmVyID0gMCk6bnVtYmVyIHtcbiAgICAgICAgb2Zmc2V0ID0gc3VwZXIuZnJvbUJ1ZmZlcihieXRlcywgb2Zmc2V0KTtcbiAgICAgICAgdGhpcy5zdWJuZXRJRCA9IGJpbnRvb2xzLmNvcHlGcm9tKGJ5dGVzLCBvZmZzZXQsIG9mZnNldCArIDMyKTtcbiAgICAgICAgb2Zmc2V0ICs9IDMyO1xuICAgICAgICBsZXQgc3VibGVuYnVmZjpCdWZmZXIgPSBiaW50b29scy5jb3B5RnJvbShieXRlcywgb2Zmc2V0LCBvZmZzZXQgKyA0KTtcbiAgICAgICAgb2Zmc2V0ICs9IDQ7XG4gICAgICAgIGxldCBzdWJsZW46bnVtYmVyID0gc3VibGVuYnVmZi5yZWFkVUludDMyQkUoMCk7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzdWJsZW47IGkrKyl7XG5cbiAgICAgICAgfVxuICAgICAgICBvZmZzZXQgPSB0aGlzLnN1Ym5ldEF1dGguZnJvbUJ1ZmZlcihieXRlcywgb2Zmc2V0KTtcbiAgICAgICAgcmV0dXJuIG9mZnNldDtcbiAgICB9XG5cblxuICAgIHRvQnVmZmVyKCk6QnVmZmVyIHtcbiAgICAgICAgY29uc3Qgc3VwZXJidWZmOkJ1ZmZlciA9IHN1cGVyLnRvQnVmZmVyKCk7XG5cbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5jb25jYXQoW3N1cGVyYnVmZiwgdGhpcy5zdWJuZXRJRCwgc3ViQXV0aF0sIHN1cGVyYnVmZi5sZW5ndGggKyB0aGlzLnN1Ym5ldElELmxlbmd0aCArIHN1YkF1dGgubGVuZ3RoKTtcbiAgICB9XG5cblxuICAgIHNpZ24obXNnOkJ1ZmZlciwga2M6S2V5Q2hhaW4pOkFycmF5PENyZWRlbnRpYWw+IHtcbiAgICAgICAgbGV0IGNyZWRzOkFycmF5PFNFQ1BDcmVkZW50aWFsPiA9IHN1cGVyLnNpZ24obXNnLCBrYyk7XG4gICAgICAgIGNvbnN0IGNyZWQ6U0VDUENyZWRlbnRpYWwgPSBTZWxlY3RDcmVkZW50aWFsQ2xhc3MoUGxhdGZvcm1WTUNvbnN0YW50cy5TRUNQQ1JFREVOVElBTCkgYXMgU0VDUENyZWRlbnRpYWw7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgIDwgdGhpcy5zdWJuZXRBdXRoLmxlbmd0aCA7IGkrKykge1xuICAgICAgICAgICAgaWYoIWtjLmhhc0tleSh0aGlzLnN1Ym5ldEF1dGhbaV0pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWRkU3VibmV0VmFsaWRhdG9yVHguc2lnbiAtLSBzcGVjaWZpZWQgYWRkcmVzcyBpbiBzdWJuZXRBdXRoIG5vdCBleGlzdGVudCBpbiBwcm92aWRlZCBrZXljaGFpbi5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBrcDpLZXlQYWlyID0ga2MuZ2V0S2V5KHRoaXMuc3VibmV0QXV0aFtpXSk7XG4gICAgICAgICAgICBjb25zdCBzaWdudmFsOkJ1ZmZlciA9IGtwLnNpZ24obXNnKTtcbiAgICAgICAgICAgIGNvbnN0IHNpZzpTaWduYXR1cmUgPSBuZXcgU2lnbmF0dXJlKCk7XG4gICAgICAgICAgICBzaWcuZnJvbUJ1ZmZlcihzaWdudmFsKTtcbiAgICAgICAgICAgIGNyZWQuYWRkU2lnbmF0dXJlKHNpZyk7XG4gICAgICAgIH1cbiAgICAgICAgY3JlZHMucHVzaChjcmVkKTtcbiAgICAgICAgcmV0dXJuIGNyZWRzO1xuICAgIH1cblxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIG5ldHdvcmtpZDpudW1iZXIgPSBEZWZhdWx0TmV0d29ya0lELCBcbiAgICAgICAgYmxvY2tjaGFpbmlkOkJ1ZmZlciA9IEJ1ZmZlci5hbGxvYygzMiwgMTYpLCBcbiAgICAgICAgb3V0czpBcnJheTxUcmFuc2ZlcmFibGVPdXRwdXQ+ID0gdW5kZWZpbmVkLCBcbiAgICAgICAgaW5zOkFycmF5PFRyYW5zZmVyYWJsZUlucHV0PiA9IHVuZGVmaW5lZCwgXG4gICAgICAgIG1lbW86QnVmZmVyID0gdW5kZWZpbmVkLCBcbiAgICAgICAgbm9kZUlEOkJ1ZmZlciA9IHVuZGVmaW5lZCwgXG4gICAgICAgIHN0YXJ0VGltZTpCTiA9IHVuZGVmaW5lZCwgXG4gICAgICAgIGVuZFRpbWU6Qk4gPSB1bmRlZmluZWQsXG4gICAgICAgIHdlaWdodDpCTiA9IHVuZGVmaW5lZCxcbiAgICAgICAgc3VibmV0SUQ6QnVmZmVyID0gdW5kZWZpbmVkLFxuICAgICAgICBzdWJuZXRBdXRoOkFycmF5PEJ1ZmZlcj4gPSB1bmRlZmluZWRcbiAgICApIHtcbiAgICAgICAgc3VwZXIobmV0d29ya2lkLCBibG9ja2NoYWluaWQsIG91dHMsIGlucywgbWVtbywgbm9kZUlELCBzdGFydFRpbWUsIGVuZFRpbWUsIHdlaWdodCk7XG4gICAgICAgIGlmKHR5cGVvZiBzdWJuZXRJRCAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIHRoaXMuc3VibmV0SUQgPSBzdWJuZXRJRDtcbiAgICAgICAgfVxuICAgICAgICBpZih0eXBlb2Ygc3VibmV0QXV0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnN1Ym5ldEF1dGggPSBzdWJuZXRBdXRoO1xuICAgICAgICB9XG4gICAgfVxuXG59XG4qL1xuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhbiB1bnNpZ25lZCBBZGREZWxlZ2F0b3JUeCB0cmFuc2FjdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEFkZERlbGVnYXRvclR4IGV4dGVuZHMgV2VpZ2h0ZWRWYWxpZGF0b3JUeCB7XG4gICAgcHJvdGVjdGVkIF90eXBlTmFtZSA9IFwiQWRkRGVsZWdhdG9yVHhcIjtcbiAgICBwcm90ZWN0ZWQgX3R5cGVJRCA9IFBsYXRmb3JtVk1Db25zdGFudHMuQUREREVMRUdBVE9SVFg7XG5cbiAgICBzZXJpYWxpemUoZW5jb2Rpbmc6U2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIik6b2JqZWN0IHtcbiAgICAgICAgbGV0IGZpZWxkczpvYmplY3QgPSBzdXBlci5zZXJpYWxpemUoZW5jb2RpbmcpO1xuICAgICAgICByZXR1cm4gIHtcbiAgICAgICAgICAgIC4uLmZpZWxkcyxcbiAgICAgICAgICAgIFwic3Rha2VPdXRzXCI6IHRoaXMuc3Rha2VPdXRzLm1hcCgocykgPT4gcy5zZXJpYWxpemUoZW5jb2RpbmcpKSxcbiAgICAgICAgICAgIFwicmV3YXJkT3duZXJzXCI6IHRoaXMucmV3YXJkT3duZXJzLnNlcmlhbGl6ZShlbmNvZGluZylcbiAgICAgICAgfVxuICAgIH07XG4gICAgZGVzZXJpYWxpemUoZmllbGRzOm9iamVjdCwgZW5jb2Rpbmc6U2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIikge1xuICAgICAgICBzdXBlci5kZXNlcmlhbGl6ZShmaWVsZHMsIGVuY29kaW5nKTtcbiAgICAgICAgdGhpcy5zdGFrZU91dHMgPSBmaWVsZHNbXCJzdGFrZU91dHNcIl0ubWFwKChzOm9iamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IHhmZXJvdXQ6VHJhbnNmZXJhYmxlT3V0cHV0ID0gbmV3IFRyYW5zZmVyYWJsZU91dHB1dCgpO1xuICAgICAgICAgICAgeGZlcm91dC5kZXNlcmlhbGl6ZShzLCBlbmNvZGluZyk7XG4gICAgICAgICAgICByZXR1cm4geGZlcm91dDtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmV3YXJkT3duZXJzID0gbmV3IFBhcnNlYWJsZU91dHB1dCgpO1xuICAgICAgICB0aGlzLnJld2FyZE93bmVycy5kZXNlcmlhbGl6ZShmaWVsZHNbXCJyZXdhcmRPd25lcnNcIl0sIGVuY29kaW5nKTtcbiAgICB9XG4gICAgXG4gICAgcHJvdGVjdGVkIHN0YWtlT3V0czpBcnJheTxUcmFuc2ZlcmFibGVPdXRwdXQ+ID0gW107XG4gICAgcHJvdGVjdGVkIHJld2FyZE93bmVyczpQYXJzZWFibGVPdXRwdXQgPSB1bmRlZmluZWQ7XG4gIFxuICAgIC8qKlxuICAgICAgICogUmV0dXJucyB0aGUgaWQgb2YgdGhlIFtbQWRkRGVsZWdhdG9yVHhdXVxuICAgICAgICovXG4gICAgZ2V0VHhUeXBlID0gKCk6bnVtYmVyID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl90eXBlSUQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59IGZvciB0aGUgc3Rha2UgYW1vdW50LlxuICAgICAqL1xuICAgIGdldFN0YWtlQW1vdW50KCk6Qk4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRXZWlnaHQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gZm9yIHRoZSBzdGFrZSBhbW91bnQuXG4gICAgICovXG4gICAgZ2V0U3Rha2VBbW91bnRCdWZmZXIoKTpCdWZmZXIge1xuICAgICAgICByZXR1cm4gdGhpcy53ZWlnaHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYXJyYXkgb2Ygb3V0cHV0cyBiZWluZyBzdGFrZWQuXG4gICAgICovXG4gICAgZ2V0U3Rha2VPdXRzKCk6QXJyYXk8VHJhbnNmZXJhYmxlT3V0cHV0PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YWtlT3V0cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG91bGQgbWF0Y2ggc3Rha2VBbW91bnQuIFVzZWQgaW4gc2FuaXR5IGNoZWNraW5nLlxuICAgICAqL1xuICAgIGdldFN0YWtlT3V0c1RvdGFsKCk6Qk4ge1xuICAgICAgICBsZXQgdmFsOkJOID0gbmV3IEJOKDApO1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5zdGFrZU91dHMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgIHZhbCA9IHZhbC5hZGQoKHRoaXMuc3Rha2VPdXRzW2ldLmdldE91dHB1dCgpIGFzIEFtb3VudE91dHB1dCkuZ2V0QW1vdW50KCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBmb3IgdGhlIHJld2FyZCBhZGRyZXNzLlxuICAgICAqL1xuICAgIGdldFJld2FyZE93bmVycygpOlBhcnNlYWJsZU91dHB1dCB7XG4gICAgICAgIHJldHVybiB0aGlzLnJld2FyZE93bmVycztcbiAgICB9XG4gICAgXG4gICAgZ2V0VG90YWxPdXRzKCk6QXJyYXk8VHJhbnNmZXJhYmxlT3V0cHV0PiB7XG4gICAgICAgIHJldHVybiBbLi4udGhpcy5nZXRPdXRzKCkgYXMgQXJyYXk8VHJhbnNmZXJhYmxlT3V0cHV0PiwgLi4udGhpcy5nZXRTdGFrZU91dHMoKV07XG4gICAgfVxuXG4gICAgZnJvbUJ1ZmZlcihieXRlczpCdWZmZXIsIG9mZnNldDpudW1iZXIgPSAwKTpudW1iZXIge1xuICAgICAgICBvZmZzZXQgPSBzdXBlci5mcm9tQnVmZmVyKGJ5dGVzLCBvZmZzZXQpO1xuICAgICAgICBjb25zdCBudW1zdGFrZW91dHMgPSBiaW50b29scy5jb3B5RnJvbShieXRlcywgb2Zmc2V0LCBvZmZzZXQgKyA0KTtcbiAgICAgICAgb2Zmc2V0ICs9IDQ7XG4gICAgICAgIGNvbnN0IG91dGNvdW50Om51bWJlciA9IG51bXN0YWtlb3V0cy5yZWFkVUludDMyQkUoMCk7XG4gICAgICAgIHRoaXMuc3Rha2VPdXRzID0gW107XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBvdXRjb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCB4ZmVyb3V0OlRyYW5zZmVyYWJsZU91dHB1dCA9IG5ldyBUcmFuc2ZlcmFibGVPdXRwdXQoKTtcbiAgICAgICAgICAgIG9mZnNldCA9IHhmZXJvdXQuZnJvbUJ1ZmZlcihieXRlcywgb2Zmc2V0KTtcbiAgICAgICAgICAgIHRoaXMuc3Rha2VPdXRzLnB1c2goeGZlcm91dCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXdhcmRPd25lcnMgPSBuZXcgUGFyc2VhYmxlT3V0cHV0KCk7XG4gICAgICAgIG9mZnNldCA9IHRoaXMucmV3YXJkT3duZXJzLmZyb21CdWZmZXIoYnl0ZXMsIG9mZnNldCk7XG4gICAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBbW0FkZERlbGVnYXRvclR4XV0uXG4gICAgICovXG4gICAgdG9CdWZmZXIoKTpCdWZmZXIge1xuICAgICAgICBjb25zdCBzdXBlcmJ1ZmY6QnVmZmVyID0gc3VwZXIudG9CdWZmZXIoKTtcbiAgICAgICAgbGV0IGJzaXplOm51bWJlciA9IHN1cGVyYnVmZi5sZW5ndGg7XG4gICAgICAgIGNvbnN0IG51bW91dHM6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDQpO1xuICAgICAgICBudW1vdXRzLndyaXRlVUludDMyQkUodGhpcy5zdGFrZU91dHMubGVuZ3RoLCAwKTtcbiAgICAgICAgbGV0IGJhcnI6QXJyYXk8QnVmZmVyPiA9IFtzdXBlci50b0J1ZmZlcigpLCBudW1vdXRzXTtcbiAgICAgICAgYnNpemUgKz0gbnVtb3V0cy5sZW5ndGg7XG4gICAgICAgIHRoaXMuc3Rha2VPdXRzID0gdGhpcy5zdGFrZU91dHMuc29ydChUcmFuc2ZlcmFibGVPdXRwdXQuY29tcGFyYXRvcigpKTtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuc3Rha2VPdXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgb3V0OkJ1ZmZlciA9IHRoaXMuc3Rha2VPdXRzW2ldLnRvQnVmZmVyKCk7XG4gICAgICAgICAgICBiYXJyLnB1c2gob3V0KTtcbiAgICAgICAgICAgIGJzaXplICs9IG91dC5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJvOkJ1ZmZlciA9IHRoaXMucmV3YXJkT3duZXJzLnRvQnVmZmVyKCk7XG4gICAgICAgIGJhcnIucHVzaChybyk7XG4gICAgICAgIGJzaXplICs9IHJvLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5jb25jYXQoYmFyciwgYnNpemUpO1xuICAgIH1cblxuICAgIGNsb25lKCk6dGhpcyB7XG4gICAgICAgIGxldCBuZXdiYXNlOkFkZERlbGVnYXRvclR4ID0gbmV3IEFkZERlbGVnYXRvclR4KCk7XG4gICAgICAgIG5ld2Jhc2UuZnJvbUJ1ZmZlcih0aGlzLnRvQnVmZmVyKCkpO1xuICAgICAgICByZXR1cm4gbmV3YmFzZSBhcyB0aGlzO1xuICAgIH1cblxuICAgIGNyZWF0ZSguLi5hcmdzOmFueVtdKTp0aGlzIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZGREZWxlZ2F0b3JUeCguLi5hcmdzKSBhcyB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsYXNzIHJlcHJlc2VudGluZyBhbiB1bnNpZ25lZCBBZGREZWxlZ2F0b3JUeCB0cmFuc2FjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuZXR3b3JraWQgT3B0aW9uYWwuIE5ldHdvcmtpZCwgW1tEZWZhdWx0TmV0d29ya0lEXV1cbiAgICAgKiBAcGFyYW0gYmxvY2tjaGFpbmlkIE9wdGlvbmFsLiBCbG9ja2NoYWluaWQsIGRlZmF1bHQgQnVmZmVyLmFsbG9jKDMyLCAxNilcbiAgICAgKiBAcGFyYW0gb3V0cyBPcHRpb25hbC4gQXJyYXkgb2YgdGhlIFtbVHJhbnNmZXJhYmxlT3V0cHV0XV1zXG4gICAgICogQHBhcmFtIGlucyBPcHRpb25hbC4gQXJyYXkgb2YgdGhlIFtbVHJhbnNmZXJhYmxlSW5wdXRdXXNcbiAgICAgKiBAcGFyYW0gbWVtbyBPcHRpb25hbC4ge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gZm9yIHRoZSBtZW1vIGZpZWxkXG4gICAgICogQHBhcmFtIG5vZGVJRCBPcHRpb25hbC4gVGhlIG5vZGUgSUQgb2YgdGhlIHZhbGlkYXRvciBiZWluZyBhZGRlZC5cbiAgICAgKiBAcGFyYW0gc3RhcnRUaW1lIE9wdGlvbmFsLiBUaGUgVW5peCB0aW1lIHdoZW4gdGhlIHZhbGlkYXRvciBzdGFydHMgdmFsaWRhdGluZyB0aGUgUHJpbWFyeSBOZXR3b3JrLlxuICAgICAqIEBwYXJhbSBlbmRUaW1lIE9wdGlvbmFsLiBUaGUgVW5peCB0aW1lIHdoZW4gdGhlIHZhbGlkYXRvciBzdG9wcyB2YWxpZGF0aW5nIHRoZSBQcmltYXJ5IE5ldHdvcmsgKGFuZCBzdGFrZWQgQVZBWCBpcyByZXR1cm5lZCkuXG4gICAgICogQHBhcmFtIHN0YWtlQW1vdW50IE9wdGlvbmFsLiBUaGUgYW1vdW50IG9mIG5BVkFYIHRoZSB2YWxpZGF0b3IgaXMgc3Rha2luZy5cbiAgICAgKiBAcGFyYW0gc3Rha2VPdXRzIE9wdGlvbmFsLiBUaGUgb3V0cHV0cyB1c2VkIGluIHBheWluZyB0aGUgc3Rha2UuXG4gICAgICogQHBhcmFtIHJld2FyZE93bmVycyBPcHRpb25hbC4gVGhlIFtbUGFyc2VhYmxlT3V0cHV0XV0gY29udGFpbmluZyBhIFtbU0VDUE93bmVyT3V0cHV0XV0gZm9yIHRoZSByZXdhcmRzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBuZXR3b3JraWQ6bnVtYmVyID0gRGVmYXVsdE5ldHdvcmtJRCwgXG4gICAgICAgIGJsb2NrY2hhaW5pZDpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoMzIsIDE2KSwgXG4gICAgICAgIG91dHM6QXJyYXk8VHJhbnNmZXJhYmxlT3V0cHV0PiA9IHVuZGVmaW5lZCwgXG4gICAgICAgIGluczpBcnJheTxUcmFuc2ZlcmFibGVJbnB1dD4gPSB1bmRlZmluZWQsIFxuICAgICAgICBtZW1vOkJ1ZmZlciA9IHVuZGVmaW5lZCwgXG4gICAgICAgIG5vZGVJRDpCdWZmZXIgPSB1bmRlZmluZWQsIFxuICAgICAgICBzdGFydFRpbWU6Qk4gPSB1bmRlZmluZWQsIFxuICAgICAgICBlbmRUaW1lOkJOID0gdW5kZWZpbmVkLFxuICAgICAgICBzdGFrZUFtb3VudDpCTiA9IHVuZGVmaW5lZCxcbiAgICAgICAgc3Rha2VPdXRzOkFycmF5PFRyYW5zZmVyYWJsZU91dHB1dD4gPSB1bmRlZmluZWQsXG4gICAgICAgIHJld2FyZE93bmVyczpQYXJzZWFibGVPdXRwdXQgPSB1bmRlZmluZWRcbiAgICApIHtcbiAgICAgICAgc3VwZXIobmV0d29ya2lkLCBibG9ja2NoYWluaWQsIG91dHMsIGlucywgbWVtbywgbm9kZUlELCBzdGFydFRpbWUsIGVuZFRpbWUsIHN0YWtlQW1vdW50KTtcbiAgICAgICAgaWYodHlwZW9mIHN0YWtlT3V0cyAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIHRoaXMuc3Rha2VPdXRzID0gc3Rha2VPdXRzXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXdhcmRPd25lcnMgPSByZXdhcmRPd25lcnM7XG4gICAgfVxuICB9XG5cbmV4cG9ydCBjbGFzcyBBZGRWYWxpZGF0b3JUeCBleHRlbmRzIEFkZERlbGVnYXRvclR4IHtcbiAgICBwcm90ZWN0ZWQgX3R5cGVOYW1lID0gXCJBZGRWYWxpZGF0b3JUeFwiO1xuICAgIHByb3RlY3RlZCBfdHlwZUlEID0gUGxhdGZvcm1WTUNvbnN0YW50cy5BRERWQUxJREFUT1JUWDtcblxuICAgIHNlcmlhbGl6ZShlbmNvZGluZzpTZXJpYWxpemVkRW5jb2RpbmcgPSBcImhleFwiKTpvYmplY3Qge1xuICAgICAgICBsZXQgZmllbGRzOm9iamVjdCA9IHN1cGVyLnNlcmlhbGl6ZShlbmNvZGluZyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5maWVsZHMsXG4gICAgICAgICAgICBcImRlbGVnYXRpb25GZWVcIjogc2VyaWFsaXplci5lbmNvZGVyKHRoaXMuZ2V0RGVsZWdhdGlvbkZlZUJ1ZmZlcigpLCBlbmNvZGluZywgXCJCdWZmZXJcIiwgXCJkZWNpbWFsU3RyaW5nXCIsIDQpXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGRlc2VyaWFsaXplKGZpZWxkczpvYmplY3QsIGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICAgICAgc3VwZXIuZGVzZXJpYWxpemUoZmllbGRzLCBlbmNvZGluZyk7XG4gICAgICAgIGxldCBkYnVmZjpCdWZmZXIgPSBzZXJpYWxpemVyLmRlY29kZXIoZmllbGRzW1wiZGVsZWdhdGlvbkZlZVwiXSwgZW5jb2RpbmcsIFwiZGVjaW1hbFN0cmluZ1wiLCBcIkJ1ZmZlclwiLCA0KTtcbiAgICAgICAgdGhpcy5kZWxlZ2F0aW9uRmVlID0gZGJ1ZmYucmVhZFVJbnQzMkJFKDApIC8gQWRkVmFsaWRhdG9yVHguZGVsZWdhdG9yTXVsdGlwbGllcjtcbiAgICB9XG4gIFxuXG5cbiAgICBwcm90ZWN0ZWQgZGVsZWdhdGlvbkZlZTpudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgc3RhdGljIGRlbGVnYXRvck11bHRpcGxpZXI6bnVtYmVyID0gMTAwMDA7XG5cbiAgICAvKipcbiAgICAgICAqIFJldHVybnMgdGhlIGlkIG9mIHRoZSBbW0FkZFZhbGlkYXRvclR4XV1cbiAgICAgICAqL1xuICAgIGdldFR4VHlwZSA9ICgpOm51bWJlciA9PiB7XG4gICAgcmV0dXJuIHRoaXMuX3R5cGVJRDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkZWxlZ2F0aW9uIGZlZSAocmVwcmVzZW50cyBhIHBlcmNlbnRhZ2UgZnJvbSAwIHRvIDEwMCk7XG4gICAgICovXG4gICAgZ2V0RGVsZWdhdGlvbkZlZSgpOm51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRpb25GZWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYmluYXJ5IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBkZWxlZ2F0aW9uIGZlZSBhcyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9LlxuICAgICAqL1xuICAgIGdldERlbGVnYXRpb25GZWVCdWZmZXIoKTpCdWZmZXIge1xuICAgICAgICBsZXQgZEJ1ZmY6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDQpO1xuICAgICAgICBsZXQgYnVmZm51bTpudW1iZXIgPSBwYXJzZUZsb2F0KHRoaXMuZGVsZWdhdGlvbkZlZS50b0ZpeGVkKDQpKSAqIEFkZFZhbGlkYXRvclR4LmRlbGVnYXRvck11bHRpcGxpZXI7XG4gICAgICAgIGRCdWZmLndyaXRlVUludDMyQkUoYnVmZm51bSwgMCk7XG4gICAgICAgIHJldHVybiBkQnVmZjtcbiAgICB9XG5cbiAgICBmcm9tQnVmZmVyKGJ5dGVzOkJ1ZmZlciwgb2Zmc2V0Om51bWJlciA9IDApOm51bWJlciB7XG4gICAgICAgIG9mZnNldCA9IHN1cGVyLmZyb21CdWZmZXIoYnl0ZXMsIG9mZnNldCk7XG4gICAgICAgIGxldCBkYnVmZjpCdWZmZXIgPSBiaW50b29scy5jb3B5RnJvbShieXRlcywgb2Zmc2V0LCBvZmZzZXQgKyA0KTtcbiAgICAgICAgb2Zmc2V0ICs9IDQ7XG4gICAgICAgIHRoaXMuZGVsZWdhdGlvbkZlZSA9IGRidWZmLnJlYWRVSW50MzJCRSgwKSAvIEFkZFZhbGlkYXRvclR4LmRlbGVnYXRvck11bHRpcGxpZXI7XG4gICAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgfVxuXG4gICAgdG9CdWZmZXIoKTpCdWZmZXIge1xuICAgICAgICBsZXQgc3VwZXJCdWZmOkJ1ZmZlciA9IHN1cGVyLnRvQnVmZmVyKCk7XG4gICAgICAgIGxldCBmZWVCdWZmOkJ1ZmZlciA9IHRoaXMuZ2V0RGVsZWdhdGlvbkZlZUJ1ZmZlcigpO1xuICAgICAgICByZXR1cm4gQnVmZmVyLmNvbmNhdChbc3VwZXJCdWZmLCBmZWVCdWZmXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xhc3MgcmVwcmVzZW50aW5nIGFuIHVuc2lnbmVkIEFkZFZhbGlkYXRvclR4IHRyYW5zYWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5ldHdvcmtpZCBPcHRpb25hbC4gTmV0d29ya2lkLCBbW0RlZmF1bHROZXR3b3JrSURdXVxuICAgICAqIEBwYXJhbSBibG9ja2NoYWluaWQgT3B0aW9uYWwuIEJsb2NrY2hhaW5pZCwgZGVmYXVsdCBCdWZmZXIuYWxsb2MoMzIsIDE2KVxuICAgICAqIEBwYXJhbSBvdXRzIE9wdGlvbmFsLiBBcnJheSBvZiB0aGUgW1tUcmFuc2ZlcmFibGVPdXRwdXRdXXNcbiAgICAgKiBAcGFyYW0gaW5zIE9wdGlvbmFsLiBBcnJheSBvZiB0aGUgW1tUcmFuc2ZlcmFibGVJbnB1dF1dc1xuICAgICAqIEBwYXJhbSBtZW1vIE9wdGlvbmFsLiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBmb3IgdGhlIG1lbW8gZmllbGRcbiAgICAgKiBAcGFyYW0gbm9kZUlEIE9wdGlvbmFsLiBUaGUgbm9kZSBJRCBvZiB0aGUgdmFsaWRhdG9yIGJlaW5nIGFkZGVkLlxuICAgICAqIEBwYXJhbSBzdGFydFRpbWUgT3B0aW9uYWwuIFRoZSBVbml4IHRpbWUgd2hlbiB0aGUgdmFsaWRhdG9yIHN0YXJ0cyB2YWxpZGF0aW5nIHRoZSBQcmltYXJ5IE5ldHdvcmsuXG4gICAgICogQHBhcmFtIGVuZFRpbWUgT3B0aW9uYWwuIFRoZSBVbml4IHRpbWUgd2hlbiB0aGUgdmFsaWRhdG9yIHN0b3BzIHZhbGlkYXRpbmcgdGhlIFByaW1hcnkgTmV0d29yayAoYW5kIHN0YWtlZCBBVkFYIGlzIHJldHVybmVkKS5cbiAgICAgKiBAcGFyYW0gc3Rha2VBbW91bnQgT3B0aW9uYWwuIFRoZSBhbW91bnQgb2YgbkFWQVggdGhlIHZhbGlkYXRvciBpcyBzdGFraW5nLlxuICAgICAqIEBwYXJhbSBzdGFrZU91dHMgT3B0aW9uYWwuIFRoZSBvdXRwdXRzIHVzZWQgaW4gcGF5aW5nIHRoZSBzdGFrZS5cbiAgICAgKiBAcGFyYW0gcmV3YXJkT3duZXJzIE9wdGlvbmFsLiBUaGUgW1tQYXJzZWFibGVPdXRwdXRdXSBjb250YWluaW5nIHRoZSBbW1NFQ1BPd25lck91dHB1dF1dIGZvciB0aGUgcmV3YXJkcy5cbiAgICAgKiBAcGFyYW0gZGVsZWdhdGlvbkZlZSBPcHRpb25hbC4gVGhlIHBlcmNlbnQgZmVlIHRoaXMgdmFsaWRhdG9yIGNoYXJnZXMgd2hlbiBvdGhlcnMgZGVsZWdhdGUgc3Rha2UgdG8gdGhlbS4gXG4gICAgICogVXAgdG8gNCBkZWNpbWFsIHBsYWNlcyBhbGxvd2VkOyBhZGRpdGlvbmFsIGRlY2ltYWwgcGxhY2VzIGFyZSBpZ25vcmVkLiBNdXN0IGJlIGJldHdlZW4gMCBhbmQgMTAwLCBpbmNsdXNpdmUuIFxuICAgICAqIEZvciBleGFtcGxlLCBpZiBkZWxlZ2F0aW9uRmVlUmF0ZSBpcyAxLjIzNDUgYW5kIHNvbWVvbmUgZGVsZWdhdGVzIHRvIHRoaXMgdmFsaWRhdG9yLCB0aGVuIHdoZW4gdGhlIGRlbGVnYXRpb24gXG4gICAgICogcGVyaW9kIGlzIG92ZXIsIDEuMjM0NSUgb2YgdGhlIHJld2FyZCBnb2VzIHRvIHRoZSB2YWxpZGF0b3IgYW5kIHRoZSByZXN0IGdvZXMgdG8gdGhlIGRlbGVnYXRvci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgbmV0d29ya2lkOm51bWJlciA9IERlZmF1bHROZXR3b3JrSUQsIFxuICAgICAgICBibG9ja2NoYWluaWQ6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDMyLCAxNiksIFxuICAgICAgICBvdXRzOkFycmF5PFRyYW5zZmVyYWJsZU91dHB1dD4gPSB1bmRlZmluZWQsIFxuICAgICAgICBpbnM6QXJyYXk8VHJhbnNmZXJhYmxlSW5wdXQ+ID0gdW5kZWZpbmVkLCBcbiAgICAgICAgbWVtbzpCdWZmZXIgPSB1bmRlZmluZWQsIFxuICAgICAgICBub2RlSUQ6QnVmZmVyID0gdW5kZWZpbmVkLCBcbiAgICAgICAgc3RhcnRUaW1lOkJOID0gdW5kZWZpbmVkLCBcbiAgICAgICAgZW5kVGltZTpCTiA9IHVuZGVmaW5lZCxcbiAgICAgICAgc3Rha2VBbW91bnQ6Qk4gPSB1bmRlZmluZWQsXG4gICAgICAgIHN0YWtlT3V0czpBcnJheTxUcmFuc2ZlcmFibGVPdXRwdXQ+ID0gdW5kZWZpbmVkLFxuICAgICAgICByZXdhcmRPd25lcnM6UGFyc2VhYmxlT3V0cHV0ID0gdW5kZWZpbmVkLFxuICAgICAgICBkZWxlZ2F0aW9uRmVlOm51bWJlciA9IHVuZGVmaW5lZFxuICAgICkge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG5ldHdvcmtpZCwgXG4gICAgICAgICAgICBibG9ja2NoYWluaWQsIFxuICAgICAgICAgICAgb3V0cywgXG4gICAgICAgICAgICBpbnMsIFxuICAgICAgICAgICAgbWVtbywgXG4gICAgICAgICAgICBub2RlSUQsIFxuICAgICAgICAgICAgc3RhcnRUaW1lLCBcbiAgICAgICAgICAgIGVuZFRpbWUsXG4gICAgICAgICAgICBzdGFrZUFtb3VudCxcbiAgICAgICAgICAgIHN0YWtlT3V0cyxcbiAgICAgICAgICAgIHJld2FyZE93bmVyc1xuICAgICAgICApO1xuICAgICAgICBpZih0eXBlb2YgZGVsZWdhdGlvbkZlZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgaWYoZGVsZWdhdGlvbkZlZSA+PSAwICYmIGRlbGVnYXRpb25GZWUgPD0gMTAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0aW9uRmVlID0gcGFyc2VGbG9hdChkZWxlZ2F0aW9uRmVlLnRvRml4ZWQoNCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBZGRWYWxpZGF0b3JUeC5jb25zdHJ1Y3RvciAtLSBkZWxlZ2F0aW9uRmVlIG11c3QgYmUgaW4gdGhlIHJhbmdlIG9mIDAgYW5kIDEwMCwgaW5jbHVzaXZlbHkuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSJdfQ==","\"use strict\";\n/**\n * @packageDocumentation\n * @module Common-JRPCAPI\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JRPCAPI = void 0;\nconst bintools_1 = __importDefault(require(\"../utils/bintools\"));\nconst apibase_1 = require(\"./apibase\");\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\nclass JRPCAPI extends apibase_1.APIBase {\n    /**\n       *\n       * @param core Reference to the Avalanche instance using this endpoint\n       * @param baseurl Path of the APIs baseurl - ex: \"/ext/bc/avm\"\n       * @param jrpcVersion The jrpc version to use, default \"2.0\".\n       */\n    constructor(core, baseurl, jrpcVersion = '2.0') {\n        super(core, baseurl);\n        this.jrpcVersion = '2.0';\n        this.rpcid = 1;\n        this.callMethod = (method, params, baseurl) => __awaiter(this, void 0, void 0, function* () {\n            const ep = baseurl || this.baseurl;\n            const rpc = {};\n            rpc.id = this.rpcid;\n            rpc.method = method;\n            // Set parameters if exists\n            if (params) {\n                rpc.params = params;\n            }\n            else if (this.jrpcVersion === '1.0') {\n                rpc.params = [];\n            }\n            if (this.jrpcVersion !== '1.0') {\n                rpc.jsonrpc = this.jrpcVersion;\n            }\n            const headers = { 'Content-Type': 'application/json;charset=UTF-8' };\n            const axConf = {\n                baseURL: `${this.core.getProtocol()}://${this.core.getIP()}:${this.core.getPort()}`,\n                responseType: 'json',\n            };\n            return this.core.post(ep, {}, JSON.stringify(rpc), headers, axConf)\n                .then((resp) => {\n                if (resp.status >= 200 && resp.status < 300) {\n                    this.rpcid += 1;\n                    if (typeof resp.data === 'string') {\n                        resp.data = JSON.parse(resp.data);\n                    }\n                    if (typeof resp.data === 'object' && (resp.data === null || 'error' in resp.data)) {\n                        throw new Error(`Error returned: ${JSON.stringify(resp.data)}`);\n                    }\n                }\n                return resp;\n            });\n        });\n        /**\n           * Returns the rpcid, a strictly-increasing number, starting from 1, indicating the next\n           * request ID that will be sent.\n           */\n        this.getRPCID = () => this.rpcid;\n        this.jrpcVersion = jrpcVersion;\n        this.rpcid = 1;\n    }\n}\nexports.JRPCAPI = JRPCAPI;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianJwY2FwaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tb24vanJwY2FwaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7OztHQUdHOzs7Ozs7Ozs7Ozs7Ozs7QUFHSCxpRUFBeUM7QUFFekMsdUNBQXlEO0FBRXpEOztHQUVHO0FBQ0gsTUFBTSxRQUFRLEdBQUcsa0JBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUV4QyxNQUFhLE9BQVEsU0FBUSxpQkFBTztJQW9EbEM7Ozs7O1NBS0s7SUFDTCxZQUFZLElBQWtCLEVBQUUsT0FBYyxFQUFFLGNBQXFCLEtBQUs7UUFDeEUsS0FBSyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztRQTFEYixnQkFBVyxHQUFVLEtBQUssQ0FBQztRQUUzQixVQUFLLEdBQUcsQ0FBQyxDQUFDO1FBRXBCLGVBQVUsR0FBRyxDQUFPLE1BQWEsRUFDL0IsTUFBOEIsRUFDOUIsT0FBZSxFQUErQixFQUFFO1lBQ2hELE1BQU0sRUFBRSxHQUFHLE9BQU8sSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ25DLE1BQU0sR0FBRyxHQUFPLEVBQUUsQ0FBQztZQUNuQixHQUFHLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7WUFDcEIsR0FBRyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7WUFFcEIsMkJBQTJCO1lBQzNCLElBQUksTUFBTSxFQUFFO2dCQUNWLEdBQUcsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO2FBQ3JCO2lCQUFNLElBQUksSUFBSSxDQUFDLFdBQVcsS0FBSyxLQUFLLEVBQUU7Z0JBQ3JDLEdBQUcsQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO2FBQ2pCO1lBRUQsSUFBSSxJQUFJLENBQUMsV0FBVyxLQUFLLEtBQUssRUFBRTtnQkFDOUIsR0FBRyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO2FBQ2hDO1lBRUQsTUFBTSxPQUFPLEdBQVUsRUFBRSxjQUFjLEVBQUUsZ0NBQWdDLEVBQUUsQ0FBQztZQUU1RSxNQUFNLE1BQU0sR0FBc0I7Z0JBQ2hDLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxFQUFFO2dCQUNuRixZQUFZLEVBQUUsTUFBTTthQUNyQixDQUFDO1lBRUYsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEVBQUUsT0FBTyxFQUFFLE1BQU0sQ0FBQztpQkFDaEUsSUFBSSxDQUFDLENBQUMsSUFBd0IsRUFBRSxFQUFFO2dCQUNqQyxJQUFJLElBQUksQ0FBQyxNQUFNLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsR0FBRyxFQUFFO29CQUMzQyxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQztvQkFDaEIsSUFBSSxPQUFPLElBQUksQ0FBQyxJQUFJLEtBQUssUUFBUSxFQUFFO3dCQUNqQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO3FCQUNuQztvQkFDRCxJQUFJLE9BQU8sSUFBSSxDQUFDLElBQUksS0FBSyxRQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxLQUFLLElBQUksSUFBSSxPQUFPLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO3dCQUNqRixNQUFNLElBQUksS0FBSyxDQUFDLG1CQUFtQixJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7cUJBQ2pFO2lCQUNGO2dCQUNELE9BQU8sSUFBSSxDQUFDO1lBQ2QsQ0FBQyxDQUFDLENBQUM7UUFDUCxDQUFDLENBQUEsQ0FBQztRQUVGOzs7YUFHSztRQUNMLGFBQVEsR0FBRyxHQUFVLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBVWpDLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO1FBQy9CLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO0lBQ2pCLENBQUM7Q0FDRjtBQS9ERCwwQkErREMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICogQG1vZHVsZSBDb21tb24tSlJQQ0FQSVxuICovXG5cbmltcG9ydCB7IEF4aW9zUmVxdWVzdENvbmZpZyB9IGZyb20gJ2F4aW9zJztcbmltcG9ydCBCaW5Ub29scyBmcm9tICcuLi91dGlscy9iaW50b29scyc7XG5pbXBvcnQgQXZhbGFuY2hlQ29yZSBmcm9tICcuLi9hdmFsYW5jaGUnO1xuaW1wb3J0IHsgQVBJQmFzZSwgUmVxdWVzdFJlc3BvbnNlRGF0YSB9IGZyb20gJy4vYXBpYmFzZSc7XG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5jb25zdCBiaW50b29scyA9IEJpblRvb2xzLmdldEluc3RhbmNlKCk7XG5cbmV4cG9ydCBjbGFzcyBKUlBDQVBJIGV4dGVuZHMgQVBJQmFzZSB7XG4gIHByb3RlY3RlZCBqcnBjVmVyc2lvbjpzdHJpbmcgPSAnMi4wJztcblxuICBwcm90ZWN0ZWQgcnBjaWQgPSAxO1xuXG4gIGNhbGxNZXRob2QgPSBhc3luYyAobWV0aG9kOnN0cmluZyxcbiAgICBwYXJhbXM/OkFycmF5PG9iamVjdD4gfCBvYmplY3QsXG4gICAgYmFzZXVybD86c3RyaW5nKTpQcm9taXNlPFJlcXVlc3RSZXNwb25zZURhdGE+ID0+IHtcbiAgICBjb25zdCBlcCA9IGJhc2V1cmwgfHwgdGhpcy5iYXNldXJsO1xuICAgIGNvbnN0IHJwYzphbnkgPSB7fTtcbiAgICBycGMuaWQgPSB0aGlzLnJwY2lkO1xuICAgIHJwYy5tZXRob2QgPSBtZXRob2Q7XG5cbiAgICAvLyBTZXQgcGFyYW1ldGVycyBpZiBleGlzdHNcbiAgICBpZiAocGFyYW1zKSB7XG4gICAgICBycGMucGFyYW1zID0gcGFyYW1zO1xuICAgIH0gZWxzZSBpZiAodGhpcy5qcnBjVmVyc2lvbiA9PT0gJzEuMCcpIHtcbiAgICAgIHJwYy5wYXJhbXMgPSBbXTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5qcnBjVmVyc2lvbiAhPT0gJzEuMCcpIHtcbiAgICAgIHJwYy5qc29ucnBjID0gdGhpcy5qcnBjVmVyc2lvbjtcbiAgICB9XG5cbiAgICBjb25zdCBoZWFkZXJzOm9iamVjdCA9IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgnIH07XG5cbiAgICBjb25zdCBheENvbmY6QXhpb3NSZXF1ZXN0Q29uZmlnID0ge1xuICAgICAgYmFzZVVSTDogYCR7dGhpcy5jb3JlLmdldFByb3RvY29sKCl9Oi8vJHt0aGlzLmNvcmUuZ2V0SVAoKX06JHt0aGlzLmNvcmUuZ2V0UG9ydCgpfWAsXG4gICAgICByZXNwb25zZVR5cGU6ICdqc29uJyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRoaXMuY29yZS5wb3N0KGVwLCB7fSwgSlNPTi5zdHJpbmdpZnkocnBjKSwgaGVhZGVycywgYXhDb25mKVxuICAgICAgLnRoZW4oKHJlc3A6UmVxdWVzdFJlc3BvbnNlRGF0YSkgPT4ge1xuICAgICAgICBpZiAocmVzcC5zdGF0dXMgPj0gMjAwICYmIHJlc3Auc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgICAgdGhpcy5ycGNpZCArPSAxO1xuICAgICAgICAgIGlmICh0eXBlb2YgcmVzcC5kYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmVzcC5kYXRhID0gSlNPTi5wYXJzZShyZXNwLmRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHlwZW9mIHJlc3AuZGF0YSA9PT0gJ29iamVjdCcgJiYgKHJlc3AuZGF0YSA9PT0gbnVsbCB8fCAnZXJyb3InIGluIHJlc3AuZGF0YSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgcmV0dXJuZWQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzcC5kYXRhKX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3A7XG4gICAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBycGNpZCwgYSBzdHJpY3RseS1pbmNyZWFzaW5nIG51bWJlciwgc3RhcnRpbmcgZnJvbSAxLCBpbmRpY2F0aW5nIHRoZSBuZXh0XG4gICAgICogcmVxdWVzdCBJRCB0aGF0IHdpbGwgYmUgc2VudC5cbiAgICAgKi9cbiAgZ2V0UlBDSUQgPSAoKTpudW1iZXIgPT4gdGhpcy5ycGNpZDtcblxuICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb3JlIFJlZmVyZW5jZSB0byB0aGUgQXZhbGFuY2hlIGluc3RhbmNlIHVzaW5nIHRoaXMgZW5kcG9pbnRcbiAgICAgKiBAcGFyYW0gYmFzZXVybCBQYXRoIG9mIHRoZSBBUElzIGJhc2V1cmwgLSBleDogXCIvZXh0L2JjL2F2bVwiXG4gICAgICogQHBhcmFtIGpycGNWZXJzaW9uIFRoZSBqcnBjIHZlcnNpb24gdG8gdXNlLCBkZWZhdWx0IFwiMi4wXCIuXG4gICAgICovXG4gIGNvbnN0cnVjdG9yKGNvcmU6QXZhbGFuY2hlQ29yZSwgYmFzZXVybDpzdHJpbmcsIGpycGNWZXJzaW9uOnN0cmluZyA9ICcyLjAnKSB7XG4gICAgc3VwZXIoY29yZSwgYmFzZXVybCk7XG4gICAgdGhpcy5qcnBjVmVyc2lvbiA9IGpycGNWZXJzaW9uO1xuICAgIHRoaXMucnBjaWQgPSAxO1xuICB9XG59XG5cblxuXG5cblxuIl19","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InfoAPI = void 0;\nconst jrpcapi_1 = require(\"../../common/jrpcapi\");\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\n/**\n * Class for interacting with a node's InfoAPI.\n *\n * @category RPCAPIs\n *\n * @remarks This extends the [[JRPCAPI]] class. This class should not be directly called. Instead, use the [[Avalanche.addAPI]] function to register this interface with Avalanche.\n */\nclass InfoAPI extends jrpcapi_1.JRPCAPI {\n    constructor(core, baseurl = '/ext/info') {\n        super(core, baseurl);\n        /**\n         * Fetches the blockchainID from the node for a given alias.\n         *\n         * @param alias The blockchain alias to get the blockchainID\n         *\n         * @returns Returns a Promise<string> containing the base 58 string representation of the blockchainID.\n         */\n        this.getBlockchainID = (alias) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                alias,\n            };\n            return this.callMethod('info.getBlockchainID', params)\n                .then((response) => response.data.result.blockchainID);\n        });\n        /**\n         * Fetches the networkID from the node.\n         *\n         * @returns Returns a Promise<number> of the networkID.\n         */\n        this.getNetworkID = () => __awaiter(this, void 0, void 0, function* () {\n            const params = {};\n            return this.callMethod('info.getNetworkID', params)\n                .then((response) => response.data.result.networkID);\n        });\n        /**\n         * Fetches the network name this node is running on\n         *\n         * @returns Returns a Promise<string> containing the network name.\n         */\n        this.getNetworkName = () => __awaiter(this, void 0, void 0, function* () {\n            return this.callMethod('info.getNetworkName')\n                .then((response) => response.data.result.networkName);\n        });\n        /**\n         * Fetches the nodeID from the node.\n         *\n         * @returns Returns a Promise<string> of the nodeID.\n         */\n        this.getNodeID = () => __awaiter(this, void 0, void 0, function* () {\n            const params = {};\n            return this.callMethod('info.getNodeID', params)\n                .then((response) => response.data.result.nodeID);\n        });\n        /**\n         * Fetches the version of Gecko this node is running\n         *\n         * @returns Returns a Promise<string> containing the version of Gecko.\n         */\n        this.getNodeVersion = () => __awaiter(this, void 0, void 0, function* () {\n            return this.callMethod('info.getNodeVersion')\n                .then((response) => response.data.result.version);\n        });\n        /**\n         * Fetches the transaction fee from the node.\n         *\n         * @returns Returns a Promise<object> of the transaction fee in nAVAX.\n         */\n        this.getTxFee = () => __awaiter(this, void 0, void 0, function* () {\n            return this.callMethod('info.getTxFee')\n                .then((response) => {\n                return {\n                    txFee: new bn_js_1.default(response.data.result.txFee, 10),\n                    creationTxFee: new bn_js_1.default(response.data.result.creationTxFee, 10)\n                };\n            });\n        });\n        /**\n         * Check whether a given chain is done bootstrapping\n         * @param chain The ID or alias of a chain.\n         *\n         * @returns Returns a Promise<boolean> of whether the chain has completed bootstrapping.\n         */\n        this.isBootstrapped = (chain) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                chain\n            };\n            return this.callMethod('info.isBootstrapped', params)\n                .then((response) => response.data.result.isBootstrapped);\n        });\n        /**\n         * Returns the peers connected to the node.\n         *\n         * @returns Promise for the list of connected peers in <ip>:<port> format.\n         */\n        this.peers = () => __awaiter(this, void 0, void 0, function* () {\n            return this.callMethod('info.peers')\n                .then((response) => response.data.result.peers);\n        });\n    }\n}\nexports.InfoAPI = InfoAPI;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2FwaXMvaW5mby9hcGkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBS0Esa0RBQStDO0FBRS9DLGtEQUF1QjtBQUV2Qjs7Ozs7O0dBTUc7QUFDSCxNQUFhLE9BQVEsU0FBUSxpQkFBTztJQTJGbEMsWUFBWSxJQUFrQixFQUFFLFVBQWlCLFdBQVc7UUFBSSxLQUFLLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBMUZyRjs7Ozs7O1dBTUc7UUFDSCxvQkFBZSxHQUFHLENBQU8sS0FBWSxFQUFrQixFQUFFO1lBQ3ZELE1BQU0sTUFBTSxHQUFPO2dCQUNqQixLQUFLO2FBQ04sQ0FBQztZQUNGLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxzQkFBc0IsRUFBRSxNQUFNLENBQUM7aUJBQ25ELElBQUksQ0FBQyxDQUFDLFFBQTRCLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQy9FLENBQUMsQ0FBQSxDQUFDO1FBRUY7Ozs7V0FJRztRQUNILGlCQUFZLEdBQUcsR0FBeUIsRUFBRTtZQUN4QyxNQUFNLE1BQU0sR0FBTyxFQUFFLENBQUM7WUFDdEIsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLG1CQUFtQixFQUFFLE1BQU0sQ0FBQztpQkFDaEQsSUFBSSxDQUFDLENBQUMsUUFBNEIsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDNUUsQ0FBQyxDQUFBLENBQUM7UUFFRjs7OztXQUlHO1FBQ0gsbUJBQWMsR0FBRyxHQUF5QixFQUFFO1lBQUMsT0FBQSxJQUFJLENBQUMsVUFBVSxDQUFDLHFCQUFxQixDQUFDO2lCQUNoRixJQUFJLENBQUMsQ0FBQyxRQUE0QixFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQTtVQUFBLENBQUM7UUFFNUU7Ozs7V0FJRztRQUNILGNBQVMsR0FBRyxHQUF5QixFQUFFO1lBQ3JDLE1BQU0sTUFBTSxHQUFPLEVBQUUsQ0FBQztZQUN0QixPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsZ0JBQWdCLEVBQUUsTUFBTSxDQUFDO2lCQUM3QyxJQUFJLENBQUMsQ0FBQyxRQUE0QixFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN6RSxDQUFDLENBQUEsQ0FBQztRQUVGOzs7O1dBSUc7UUFDSCxtQkFBYyxHQUFHLEdBQXlCLEVBQUU7WUFBQyxPQUFBLElBQUksQ0FBQyxVQUFVLENBQUMscUJBQXFCLENBQUM7aUJBQ2hGLElBQUksQ0FBQyxDQUFDLFFBQTRCLEVBQUUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1VBQUEsQ0FBQztRQUV4RTs7OztXQUlHO1FBQ0gsYUFBUSxHQUFHLEdBQStDLEVBQUU7WUFDMUQsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLGVBQWUsQ0FBQztpQkFDbEMsSUFBSSxDQUFDLENBQUMsUUFBNEIsRUFBRSxFQUFFO2dCQUNyQyxPQUFPO29CQUNMLEtBQUssRUFBRSxJQUFJLGVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDO29CQUM3QyxhQUFhLEVBQUUsSUFBSSxlQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxFQUFFLEVBQUUsQ0FBQztpQkFDOUQsQ0FBQTtZQUNILENBQUMsQ0FBQyxDQUFDO1FBQ1QsQ0FBQyxDQUFBLENBQUM7UUFFRjs7Ozs7V0FLRztRQUNILG1CQUFjLEdBQUcsQ0FBTyxLQUFZLEVBQW1CLEVBQUU7WUFDdkQsTUFBTSxNQUFNLEdBQU87Z0JBQ2pCLEtBQUs7YUFDTixDQUFDO1lBQ0YsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLHFCQUFxQixFQUFFLE1BQU0sQ0FBQztpQkFDaEQsSUFBSSxDQUFDLENBQUMsUUFBNEIsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDbkYsQ0FBQyxDQUFBLENBQUM7UUFFRjs7OztXQUlHO1FBQ0gsVUFBSyxHQUFHLEdBQWdDLEVBQUU7WUFBQyxPQUFBLElBQUksQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDO2lCQUNyRSxJQUFJLENBQUMsQ0FBQyxRQUE0QixFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQTtVQUFBLENBQUM7SUFFZ0IsQ0FBQztDQUN4RjtBQTVGRCwwQkE0RkMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICogQG1vZHVsZSBBUEktSW5mb1xuICovXG5pbXBvcnQgQXZhbGFuY2hlQ29yZSBmcm9tICcuLi8uLi9hdmFsYW5jaGUnO1xuaW1wb3J0IHsgSlJQQ0FQSSB9IGZyb20gJy4uLy4uL2NvbW1vbi9qcnBjYXBpJztcbmltcG9ydCB7IFJlcXVlc3RSZXNwb25zZURhdGEgfSBmcm9tICcuLi8uLi9jb21tb24vYXBpYmFzZSc7XG5pbXBvcnQgQk4gZnJvbSBcImJuLmpzXCI7XG5cbi8qKlxuICogQ2xhc3MgZm9yIGludGVyYWN0aW5nIHdpdGggYSBub2RlJ3MgSW5mb0FQSS5cbiAqXG4gKiBAY2F0ZWdvcnkgUlBDQVBJc1xuICpcbiAqIEByZW1hcmtzIFRoaXMgZXh0ZW5kcyB0aGUgW1tKUlBDQVBJXV0gY2xhc3MuIFRoaXMgY2xhc3Mgc2hvdWxkIG5vdCBiZSBkaXJlY3RseSBjYWxsZWQuIEluc3RlYWQsIHVzZSB0aGUgW1tBdmFsYW5jaGUuYWRkQVBJXV0gZnVuY3Rpb24gdG8gcmVnaXN0ZXIgdGhpcyBpbnRlcmZhY2Ugd2l0aCBBdmFsYW5jaGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbmZvQVBJIGV4dGVuZHMgSlJQQ0FQSSB7XG4gIC8qKlxuICAgKiBGZXRjaGVzIHRoZSBibG9ja2NoYWluSUQgZnJvbSB0aGUgbm9kZSBmb3IgYSBnaXZlbiBhbGlhcy5cbiAgICpcbiAgICogQHBhcmFtIGFsaWFzIFRoZSBibG9ja2NoYWluIGFsaWFzIHRvIGdldCB0aGUgYmxvY2tjaGFpbklEXG4gICAqXG4gICAqIEByZXR1cm5zIFJldHVybnMgYSBQcm9taXNlPHN0cmluZz4gY29udGFpbmluZyB0aGUgYmFzZSA1OCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGJsb2NrY2hhaW5JRC5cbiAgICovXG4gIGdldEJsb2NrY2hhaW5JRCA9IGFzeW5jIChhbGlhczpzdHJpbmcpOlByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgY29uc3QgcGFyYW1zOmFueSA9IHtcbiAgICAgIGFsaWFzLFxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuY2FsbE1ldGhvZCgnaW5mby5nZXRCbG9ja2NoYWluSUQnLCBwYXJhbXMpXG4gICAgICAudGhlbigocmVzcG9uc2U6UmVxdWVzdFJlc3BvbnNlRGF0YSkgPT4gcmVzcG9uc2UuZGF0YS5yZXN1bHQuYmxvY2tjaGFpbklEKTtcbiAgfTtcblxuICAvKipcbiAgICogRmV0Y2hlcyB0aGUgbmV0d29ya0lEIGZyb20gdGhlIG5vZGUuXG4gICAqXG4gICAqIEByZXR1cm5zIFJldHVybnMgYSBQcm9taXNlPG51bWJlcj4gb2YgdGhlIG5ldHdvcmtJRC5cbiAgICovXG4gIGdldE5ldHdvcmtJRCA9IGFzeW5jICgpOlByb21pc2U8bnVtYmVyPiA9PiB7XG4gICAgY29uc3QgcGFyYW1zOmFueSA9IHt9O1xuICAgIHJldHVybiB0aGlzLmNhbGxNZXRob2QoJ2luZm8uZ2V0TmV0d29ya0lEJywgcGFyYW1zKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3BvbnNlLmRhdGEucmVzdWx0Lm5ldHdvcmtJRCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEZldGNoZXMgdGhlIG5ldHdvcmsgbmFtZSB0aGlzIG5vZGUgaXMgcnVubmluZyBvblxuICAgKlxuICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgUHJvbWlzZTxzdHJpbmc+IGNvbnRhaW5pbmcgdGhlIG5ldHdvcmsgbmFtZS5cbiAgICovXG4gIGdldE5ldHdvcmtOYW1lID0gYXN5bmMgKCk6UHJvbWlzZTxzdHJpbmc+ID0+IHRoaXMuY2FsbE1ldGhvZCgnaW5mby5nZXROZXR3b3JrTmFtZScpXG4gICAgLnRoZW4oKHJlc3BvbnNlOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3BvbnNlLmRhdGEucmVzdWx0Lm5ldHdvcmtOYW1lKTtcblxuICAvKipcbiAgICogRmV0Y2hlcyB0aGUgbm9kZUlEIGZyb20gdGhlIG5vZGUuXG4gICAqXG4gICAqIEByZXR1cm5zIFJldHVybnMgYSBQcm9taXNlPHN0cmluZz4gb2YgdGhlIG5vZGVJRC5cbiAgICovXG4gIGdldE5vZGVJRCA9IGFzeW5jICgpOlByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgY29uc3QgcGFyYW1zOmFueSA9IHt9O1xuICAgIHJldHVybiB0aGlzLmNhbGxNZXRob2QoJ2luZm8uZ2V0Tm9kZUlEJywgcGFyYW1zKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3BvbnNlLmRhdGEucmVzdWx0Lm5vZGVJRCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEZldGNoZXMgdGhlIHZlcnNpb24gb2YgR2Vja28gdGhpcyBub2RlIGlzIHJ1bm5pbmdcbiAgICpcbiAgICogQHJldHVybnMgUmV0dXJucyBhIFByb21pc2U8c3RyaW5nPiBjb250YWluaW5nIHRoZSB2ZXJzaW9uIG9mIEdlY2tvLlxuICAgKi9cbiAgZ2V0Tm9kZVZlcnNpb24gPSBhc3luYyAoKTpQcm9taXNlPHN0cmluZz4gPT4gdGhpcy5jYWxsTWV0aG9kKCdpbmZvLmdldE5vZGVWZXJzaW9uJylcbiAgICAudGhlbigocmVzcG9uc2U6UmVxdWVzdFJlc3BvbnNlRGF0YSkgPT4gcmVzcG9uc2UuZGF0YS5yZXN1bHQudmVyc2lvbik7XG5cbiAgLyoqXG4gICAqIEZldGNoZXMgdGhlIHRyYW5zYWN0aW9uIGZlZSBmcm9tIHRoZSBub2RlLlxuICAgKlxuICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgUHJvbWlzZTxvYmplY3Q+IG9mIHRoZSB0cmFuc2FjdGlvbiBmZWUgaW4gbkFWQVguXG4gICAqL1xuICBnZXRUeEZlZSA9IGFzeW5jICgpOlByb21pc2U8e3R4RmVlOkJOLCBjcmVhdGlvblR4RmVlOkJOfT4gPT4ge1xuICAgIHJldHVybiB0aGlzLmNhbGxNZXRob2QoJ2luZm8uZ2V0VHhGZWUnKVxuICAgICAgICAudGhlbigocmVzcG9uc2U6UmVxdWVzdFJlc3BvbnNlRGF0YSkgPT4ge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eEZlZTogbmV3IEJOKHJlc3BvbnNlLmRhdGEucmVzdWx0LnR4RmVlLCAxMCksXG4gICAgICAgICAgICBjcmVhdGlvblR4RmVlOiBuZXcgQk4ocmVzcG9uc2UuZGF0YS5yZXN1bHQuY3JlYXRpb25UeEZlZSwgMTApXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQ2hlY2sgd2hldGhlciBhIGdpdmVuIGNoYWluIGlzIGRvbmUgYm9vdHN0cmFwcGluZ1xuICAgKiBAcGFyYW0gY2hhaW4gVGhlIElEIG9yIGFsaWFzIG9mIGEgY2hhaW4uXG4gICAqXG4gICAqIEByZXR1cm5zIFJldHVybnMgYSBQcm9taXNlPGJvb2xlYW4+IG9mIHdoZXRoZXIgdGhlIGNoYWluIGhhcyBjb21wbGV0ZWQgYm9vdHN0cmFwcGluZy5cbiAgICovXG4gIGlzQm9vdHN0cmFwcGVkID0gYXN5bmMgKGNoYWluOnN0cmluZyk6UHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgY29uc3QgcGFyYW1zOmFueSA9IHtcbiAgICAgIGNoYWluXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5jYWxsTWV0aG9kKCdpbmZvLmlzQm9vdHN0cmFwcGVkJywgcGFyYW1zKVxuICAgICAgICAudGhlbigocmVzcG9uc2U6UmVxdWVzdFJlc3BvbnNlRGF0YSkgPT4gcmVzcG9uc2UuZGF0YS5yZXN1bHQuaXNCb290c3RyYXBwZWQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBwZWVycyBjb25uZWN0ZWQgdG8gdGhlIG5vZGUuXG4gICAqXG4gICAqIEByZXR1cm5zIFByb21pc2UgZm9yIHRoZSBsaXN0IG9mIGNvbm5lY3RlZCBwZWVycyBpbiA8aXA+Ojxwb3J0PiBmb3JtYXQuXG4gICAqL1xuICBwZWVycyA9IGFzeW5jICgpOlByb21pc2U8QXJyYXk8c3RyaW5nPj4gPT4gdGhpcy5jYWxsTWV0aG9kKCdpbmZvLnBlZXJzJylcbiAgICAudGhlbigocmVzcG9uc2U6UmVxdWVzdFJlc3BvbnNlRGF0YSkgPT4gcmVzcG9uc2UuZGF0YS5yZXN1bHQucGVlcnMpO1xuXG4gIGNvbnN0cnVjdG9yKGNvcmU6QXZhbGFuY2hlQ29yZSwgYmFzZXVybDpzdHJpbmcgPSAnL2V4dC9pbmZvJykgeyBzdXBlcihjb3JlLCBiYXNldXJsKTsgfVxufVxuIl19","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SECPOwnerOutput = exports.StakeableLockOut = exports.SECPTransferOutput = exports.AmountOutput = exports.ParseableOutput = exports.TransferableOutput = exports.SelectOutputClass = void 0;\n/**\n * @packageDocumentation\n * @module API-PlatformVM-Outputs\n */\nconst buffer_1 = require(\"buffer/\");\nconst bintools_1 = __importDefault(require(\"../../utils/bintools\"));\nconst constants_1 = require(\"./constants\");\nconst output_1 = require(\"../../common/output\");\nconst serialization_1 = require(\"../../utils/serialization\");\nconst bintools = bintools_1.default.getInstance();\nconst serializer = serialization_1.Serialization.getInstance();\n/**\n * Takes a buffer representing the output and returns the proper Output instance.\n *\n * @param outputid A number representing the inputID parsed prior to the bytes passed in\n *\n * @returns An instance of an [[Output]]-extended class.\n */\nexports.SelectOutputClass = (outputid, ...args) => {\n    if (outputid == constants_1.PlatformVMConstants.SECPXFEROUTPUTID) {\n        return new SECPTransferOutput(...args);\n    }\n    else if (outputid == constants_1.PlatformVMConstants.SECPOWNEROUTPUTID) {\n        return new SECPOwnerOutput(...args);\n    }\n    else if (outputid == constants_1.PlatformVMConstants.STAKEABLELOCKOUTID) {\n        return new StakeableLockOut(...args);\n    }\n    throw new Error(\"Error - SelectOutputClass: unknown outputid \" + outputid);\n};\nclass TransferableOutput extends output_1.StandardTransferableOutput {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"TransferableOutput\";\n        this._typeID = undefined;\n    }\n    //serialize is inherited\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.output = exports.SelectOutputClass(fields[\"output\"][\"_typeID\"]);\n        this.output.deserialize(fields[\"output\"], encoding);\n    }\n    fromBuffer(bytes, offset = 0) {\n        this.assetID = bintools.copyFrom(bytes, offset, offset + constants_1.PlatformVMConstants.ASSETIDLEN);\n        offset += constants_1.PlatformVMConstants.ASSETIDLEN;\n        const outputid = bintools.copyFrom(bytes, offset, offset + 4).readUInt32BE(0);\n        offset += 4;\n        this.output = exports.SelectOutputClass(outputid);\n        return this.output.fromBuffer(bytes, offset);\n    }\n}\nexports.TransferableOutput = TransferableOutput;\nclass ParseableOutput extends output_1.StandardParseableOutput {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"ParseableOutput\";\n        this._typeID = undefined;\n    }\n    //serialize is inherited\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.output = exports.SelectOutputClass(fields[\"output\"][\"_typeID\"]);\n        this.output.deserialize(fields[\"output\"], encoding);\n    }\n    fromBuffer(bytes, offset = 0) {\n        const outputid = bintools.copyFrom(bytes, offset, offset + 4).readUInt32BE(0);\n        offset += 4;\n        this.output = exports.SelectOutputClass(outputid);\n        return this.output.fromBuffer(bytes, offset);\n    }\n}\nexports.ParseableOutput = ParseableOutput;\nclass AmountOutput extends output_1.StandardAmountOutput {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"AmountOutput\";\n        this._typeID = undefined;\n    }\n    //serialize and deserialize both are inherited\n    /**\n     * @param assetID An assetID which is wrapped around the Buffer of the Output\n     */\n    makeTransferable(assetID) {\n        return new TransferableOutput(assetID, this);\n    }\n    select(id, ...args) {\n        return exports.SelectOutputClass(id, ...args);\n    }\n}\nexports.AmountOutput = AmountOutput;\n/**\n * An [[Output]] class which specifies an Output that carries an ammount for an assetID and uses secp256k1 signature scheme.\n */\nclass SECPTransferOutput extends AmountOutput {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"SECPTransferOutput\";\n        this._typeID = constants_1.PlatformVMConstants.SECPXFEROUTPUTID;\n    }\n    //serialize and deserialize both are inherited\n    /**\n     * Returns the outputID for this output\n     */\n    getOutputID() {\n        return this._typeID;\n    }\n    create(...args) {\n        return new SECPTransferOutput(...args);\n    }\n    clone() {\n        const newout = this.create();\n        newout.fromBuffer(this.toBuffer());\n        return newout;\n    }\n}\nexports.SECPTransferOutput = SECPTransferOutput;\n/**\n * An [[Output]] class which specifies an input that has a locktime which can also enable staking of the value held, preventing transfers but not validation.\n */\nclass StakeableLockOut extends AmountOutput {\n    /**\n     * A [[Output]] class which specifies a [[ParseableOutput]] that has a locktime which can also enable staking of the value held, preventing transfers but not validation.\n     *\n     * @param amount A {@link https://github.com/indutny/bn.js/|BN} representing the amount in the output\n     * @param addresses An array of {@link https://github.com/feross/buffer|Buffer}s representing addresses\n     * @param locktime A {@link https://github.com/indutny/bn.js/|BN} representing the locktime\n     * @param threshold A number representing the the threshold number of signers required to sign the transaction\n     * @param stakeableLocktime A {@link https://github.com/indutny/bn.js/|BN} representing the stakeable locktime\n     * @param transferableOutput A [[ParseableOutput]] which is embedded into this output.\n     */\n    constructor(amount = undefined, addresses = undefined, locktime = undefined, threshold = undefined, stakeableLocktime = undefined, transferableOutput = undefined) {\n        super(amount, addresses, locktime, threshold);\n        this._typeName = \"StakeableLockOut\";\n        this._typeID = constants_1.PlatformVMConstants.STAKEABLELOCKOUTID;\n        if (typeof stakeableLocktime !== \"undefined\") {\n            this.stakeableLocktime = bintools.fromBNToBuffer(stakeableLocktime, 8);\n        }\n        if (typeof transferableOutput !== \"undefined\") {\n            this.transferableOutput = transferableOutput;\n            this.synchronize();\n        }\n    }\n    //serialize and deserialize both are inherited\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        let outobj = Object.assign(Object.assign({}, fields), { \"stakeableLocktime\": serializer.encoder(this.stakeableLocktime, encoding, \"Buffer\", \"decimalString\", 8), \"transferableOutput\": this.transferableOutput.serialize(encoding) });\n        delete outobj[\"addresses\"];\n        delete outobj[\"locktime\"];\n        delete outobj[\"threshold\"];\n        delete outobj[\"amount\"];\n        return outobj;\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        fields[\"addresses\"] = [];\n        fields[\"locktime\"] = \"0\";\n        fields[\"threshold\"] = \"1\";\n        fields[\"amount\"] = \"99\";\n        super.deserialize(fields, encoding);\n        this.stakeableLocktime = serializer.decoder(fields[\"stakeableLocktime\"], encoding, \"decimalString\", \"Buffer\", 8);\n        this.transferableOutput = new ParseableOutput();\n        this.transferableOutput.deserialize(fields[\"transferableOutput\"], encoding);\n        this.synchronize();\n    }\n    //call this every time you load in data\n    synchronize() {\n        let output = this.transferableOutput.getOutput();\n        this.addresses = output.getAddresses().map((a) => {\n            let addr = new output_1.Address();\n            addr.fromBuffer(a);\n            return addr;\n        });\n        this.numaddrs = buffer_1.Buffer.alloc(4);\n        this.numaddrs.writeUInt32BE(this.addresses.length, 0);\n        this.locktime = bintools.fromBNToBuffer(output.getLocktime(), 8);\n        this.threshold = buffer_1.Buffer.alloc(4);\n        this.threshold.writeUInt32BE(output.getThreshold(), 0);\n        this.amount = bintools.fromBNToBuffer(output.getAmount(), 8);\n        this.amountValue = output.getAmount();\n    }\n    getStakeableLocktime() {\n        return bintools.fromBufferToBN(this.stakeableLocktime);\n    }\n    getTransferableOutput() {\n        return this.transferableOutput;\n    }\n    /**\n     * @param assetID An assetID which is wrapped around the Buffer of the Output\n     */\n    makeTransferable(assetID) {\n        return new TransferableOutput(assetID, this);\n    }\n    select(id, ...args) {\n        return exports.SelectOutputClass(id, ...args);\n    }\n    /**\n     * Popuates the instance from a {@link https://github.com/feross/buffer|Buffer} representing the [[StakeableLockOut]] and returns the size of the output.\n     */\n    fromBuffer(outbuff, offset = 0) {\n        this.stakeableLocktime = bintools.copyFrom(outbuff, offset, offset + 8);\n        offset += 8;\n        this.transferableOutput = new ParseableOutput();\n        offset = this.transferableOutput.fromBuffer(outbuff, offset);\n        this.synchronize();\n        return offset;\n    }\n    /**\n     * Returns the buffer representing the [[StakeableLockOut]] instance.\n     */\n    toBuffer() {\n        let xferoutBuff = this.transferableOutput.toBuffer();\n        const bsize = this.stakeableLocktime.length + xferoutBuff.length;\n        const barr = [this.stakeableLocktime, xferoutBuff];\n        return buffer_1.Buffer.concat(barr, bsize);\n    }\n    /**\n     * Returns the outputID for this output\n     */\n    getOutputID() {\n        return this._typeID;\n    }\n    create(...args) {\n        return new StakeableLockOut(...args);\n    }\n    clone() {\n        const newout = this.create();\n        newout.fromBuffer(this.toBuffer());\n        return newout;\n    }\n}\nexports.StakeableLockOut = StakeableLockOut;\n/**\n * An [[Output]] class which only specifies an Output ownership and uses secp256k1 signature scheme.\n */\nclass SECPOwnerOutput extends output_1.Output {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"SECPOwnerOutput\";\n        this._typeID = constants_1.PlatformVMConstants.SECPOWNEROUTPUTID;\n    }\n    //serialize and deserialize both are inherited\n    /**\n     * Returns the outputID for this output\n     */\n    getOutputID() {\n        return this._typeID;\n    }\n    /**\n     *\n     * @param assetID An assetID which is wrapped around the Buffer of the Output\n     */\n    makeTransferable(assetID) {\n        return new TransferableOutput(assetID, this);\n    }\n    create(...args) {\n        return new SECPOwnerOutput(...args);\n    }\n    clone() {\n        const newout = this.create();\n        newout.fromBuffer(this.toBuffer());\n        return newout;\n    }\n    select(id, ...args) {\n        return exports.SelectOutputClass(id, ...args);\n    }\n}\nexports.SECPOwnerOutput = SECPOwnerOutput;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3V0cHV0cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hcGlzL3BsYXRmb3Jtdm0vb3V0cHV0cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7O0dBR0c7QUFDSCxvQ0FBaUM7QUFDakMsb0VBQTRDO0FBQzVDLDJDQUFrRDtBQUNsRCxnREFBaUk7QUFDakksNkRBQThFO0FBRzlFLE1BQU0sUUFBUSxHQUFHLGtCQUFRLENBQUMsV0FBVyxFQUFFLENBQUM7QUFDeEMsTUFBTSxVQUFVLEdBQUcsNkJBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUUvQzs7Ozs7O0dBTUc7QUFDVSxRQUFBLGlCQUFpQixHQUFHLENBQUMsUUFBZSxFQUFFLEdBQUcsSUFBZSxFQUFTLEVBQUU7SUFDNUUsSUFBRyxRQUFRLElBQUksK0JBQW1CLENBQUMsZ0JBQWdCLEVBQUM7UUFDbEQsT0FBTyxJQUFJLGtCQUFrQixDQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7S0FDekM7U0FBTSxJQUFHLFFBQVEsSUFBSSwrQkFBbUIsQ0FBQyxpQkFBaUIsRUFBRTtRQUMzRCxPQUFPLElBQUksZUFBZSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7S0FDckM7U0FBTSxJQUFHLFFBQVEsSUFBSSwrQkFBbUIsQ0FBQyxrQkFBa0IsRUFBRTtRQUM1RCxPQUFPLElBQUksZ0JBQWdCLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztLQUN0QztJQUNELE1BQU0sSUFBSSxLQUFLLENBQUMsOENBQThDLEdBQUcsUUFBUSxDQUFDLENBQUM7QUFDL0UsQ0FBQyxDQUFBO0FBRUQsTUFBYSxrQkFBbUIsU0FBUSxtQ0FBMEI7SUFBbEU7O1FBQ1ksY0FBUyxHQUFHLG9CQUFvQixDQUFDO1FBQ2pDLFlBQU8sR0FBRyxTQUFTLENBQUM7SUFtQmhDLENBQUM7SUFqQkMsd0JBQXdCO0lBRXhCLFdBQVcsQ0FBQyxNQUFhLEVBQUUsV0FBOEIsS0FBSztRQUM1RCxLQUFL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RUFBRSxHQUFHLElBQVc7UUFDOUIsT0FBTyx5QkFBaUIsQ0FBQyxFQUFFLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztJQUN4QyxDQUFDO0NBQ0Y7QUFsQ0QsMENBa0NDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqIEBtb2R1bGUgQVBJLVBsYXRmb3JtVk0tT3V0cHV0c1xuICovXG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tICdidWZmZXIvJztcbmltcG9ydCBCaW5Ub29scyBmcm9tICcuLi8uLi91dGlscy9iaW50b29scyc7XG5pbXBvcnQgeyBQbGF0Zm9ybVZNQ29uc3RhbnRzIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgT3V0cHV0LCBTdGFuZGFyZEFtb3VudE91dHB1dCwgU3RhbmRhcmRUcmFuc2ZlcmFibGVPdXRwdXQsIFN0YW5kYXJkUGFyc2VhYmxlT3V0cHV0LCBBZGRyZXNzIH0gZnJvbSAnLi4vLi4vY29tbW9uL291dHB1dCc7XG5pbXBvcnQgeyBTZXJpYWxpemF0aW9uLCBTZXJpYWxpemVkRW5jb2RpbmcgfSBmcm9tICcuLi8uLi91dGlscy9zZXJpYWxpemF0aW9uJztcbmltcG9ydCBCTiBmcm9tICdibi5qcyc7XG5cbmNvbnN0IGJpbnRvb2xzID0gQmluVG9vbHMuZ2V0SW5zdGFuY2UoKTtcbmNvbnN0IHNlcmlhbGl6ZXIgPSBTZXJpYWxpemF0aW9uLmdldEluc3RhbmNlKCk7XG5cbi8qKlxuICogVGFrZXMgYSBidWZmZXIgcmVwcmVzZW50aW5nIHRoZSBvdXRwdXQgYW5kIHJldHVybnMgdGhlIHByb3BlciBPdXRwdXQgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIG91dHB1dGlkIEEgbnVtYmVyIHJlcHJlc2VudGluZyB0aGUgaW5wdXRJRCBwYXJzZWQgcHJpb3IgdG8gdGhlIGJ5dGVzIHBhc3NlZCBpblxuICpcbiAqIEByZXR1cm5zIEFuIGluc3RhbmNlIG9mIGFuIFtbT3V0cHV0XV0tZXh0ZW5kZWQgY2xhc3MuXG4gKi9cbmV4cG9ydCBjb25zdCBTZWxlY3RPdXRwdXRDbGFzcyA9IChvdXRwdXRpZDpudW1iZXIsIC4uLmFyZ3M6QXJyYXk8YW55Pik6T3V0cHV0ID0+IHtcbiAgICBpZihvdXRwdXRpZCA9PSBQbGF0Zm9ybVZNQ29uc3RhbnRzLlNFQ1BYRkVST1VUUFVUSUQpe1xuICAgICAgcmV0dXJuIG5ldyBTRUNQVHJhbnNmZXJPdXRwdXQoIC4uLmFyZ3MpO1xuICAgIH0gZWxzZSBpZihvdXRwdXRpZCA9PSBQbGF0Zm9ybVZNQ29uc3RhbnRzLlNFQ1BPV05FUk9VVFBVVElEKSB7XG4gICAgICByZXR1cm4gbmV3IFNFQ1BPd25lck91dHB1dCguLi5hcmdzKTtcbiAgICB9IGVsc2UgaWYob3V0cHV0aWQgPT0gUGxhdGZvcm1WTUNvbnN0YW50cy5TVEFLRUFCTEVMT0NLT1VUSUQpIHtcbiAgICAgIHJldHVybiBuZXcgU3Rha2VhYmxlTG9ja091dCguLi5hcmdzKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgLSBTZWxlY3RPdXRwdXRDbGFzczogdW5rbm93biBvdXRwdXRpZCBcIiArIG91dHB1dGlkKTtcbn1cblxuZXhwb3J0IGNsYXNzIFRyYW5zZmVyYWJsZU91dHB1dCBleHRlbmRzIFN0YW5kYXJkVHJhbnNmZXJhYmxlT3V0cHV0e1xuICBwcm90ZWN0ZWQgX3R5cGVOYW1lID0gXCJUcmFuc2ZlcmFibGVPdXRwdXRcIjtcbiAgcHJvdGVjdGVkIF90eXBlSUQgPSB1bmRlZmluZWQ7XG5cbiAgLy9zZXJpYWxpemUgaXMgaW5oZXJpdGVkXG5cbiAgZGVzZXJpYWxpemUoZmllbGRzOm9iamVjdCwgZW5jb2Rpbmc6U2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIikge1xuICAgIHN1cGVyLmRlc2VyaWFsaXplKGZpZWxkcywgZW5jb2RpbmcpO1xuICAgIHRoaXMub3V0cHV0ID0gU2VsZWN0T3V0cHV0Q2xhc3MoZmllbGRzW1wib3V0cHV0XCJdW1wiX3R5cGVJRFwiXSk7XG4gICAgdGhpcy5vdXRwdXQuZGVzZXJpYWxpemUoZmllbGRzW1wib3V0cHV0XCJdLCBlbmNvZGluZyk7XG4gIH1cblxuICBmcm9tQnVmZmVyKGJ5dGVzOkJ1ZmZlciwgb2Zmc2V0Om51bWJlciA9IDApOm51bWJlciB7XG4gICAgdGhpcy5hc3NldElEID0gYmludG9vbHMuY29weUZyb20oYnl0ZXMsIG9mZnNldCwgb2Zmc2V0ICsgUGxhdGZvcm1WTUNvbnN0YW50cy5BU1NFVElETEVOKTtcbiAgICBvZmZzZXQgKz0gUGxhdGZvcm1WTUNvbnN0YW50cy5BU1NFVElETEVOO1xuICAgIGNvbnN0IG91dHB1dGlkOm51bWJlciA9IGJpbnRvb2xzLmNvcHlGcm9tKGJ5dGVzLCBvZmZzZXQsIG9mZnNldCArIDQpLnJlYWRVSW50MzJCRSgwKTtcbiAgICBvZmZzZXQgKz0gNDtcbiAgICB0aGlzLm91dHB1dCA9IFNlbGVjdE91dHB1dENsYXNzKG91dHB1dGlkKTtcbiAgICByZXR1cm4gdGhpcy5vdXRwdXQuZnJvbUJ1ZmZlcihieXRlcywgb2Zmc2V0KTtcbiAgfVxuXG59XG5cbmV4cG9ydCBjbGFzcyBQYXJzZWFibGVPdXRwdXQgZXh0ZW5kcyBTdGFuZGFyZFBhcnNlYWJsZU91dHB1dHtcbiAgcHJvdGVjdGVkIF90eXBlTmFtZSA9IFwiUGFyc2VhYmxlT3V0cHV0XCI7XG4gIHByb3RlY3RlZCBfdHlwZUlEID0gdW5kZWZpbmVkO1xuXG4gIC8vc2VyaWFsaXplIGlzIGluaGVyaXRlZFxuXG4gIGRlc2VyaWFsaXplKGZpZWxkczpvYmplY3QsIGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICBzdXBlci5kZXNlcmlhbGl6ZShmaWVsZHMsIGVuY29kaW5nKTtcbiAgICB0aGlzLm91dHB1dCA9IFNlbGVjdE91dHB1dENsYXNzKGZpZWxkc1tcIm91dHB1dFwiXVtcIl90eXBlSURcIl0pO1xuICAgIHRoaXMub3V0cHV0LmRlc2VyaWFsaXplKGZpZWxkc1tcIm91dHB1dFwiXSwgZW5jb2RpbmcpO1xuICB9XG5cbiAgZnJvbUJ1ZmZlcihieXRlczpCdWZmZXIsIG9mZnNldDpudW1iZXIgPSAwKTpudW1iZXIge1xuICAgIGNvbnN0IG91dHB1dGlkOm51bWJlciA9IGJpbnRvb2xzLmNvcHlGcm9tKGJ5dGVzLCBvZmZzZXQsIG9mZnNldCArIDQpLnJlYWRVSW50MzJCRSgwKTtcbiAgICBvZmZzZXQgKz0gNDtcbiAgICB0aGlzLm91dHB1dCA9IFNlbGVjdE91dHB1dENsYXNzKG91dHB1dGlkKTtcbiAgICByZXR1cm4gdGhpcy5vdXRwdXQuZnJvbUJ1ZmZlcihieXRlcywgb2Zmc2V0KTtcbiAgfVxufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQW1vdW50T3V0cHV0IGV4dGVuZHMgU3RhbmRhcmRBbW91bnRPdXRwdXQge1xuICBwcm90ZWN0ZWQgX3R5cGVOYW1lID0gXCJBbW91bnRPdXRwdXRcIjtcbiAgcHJvdGVjdGVkIF90eXBlSUQgPSB1bmRlZmluZWQ7XG5cbiAgLy9zZXJpYWxpemUgYW5kIGRlc2VyaWFsaXplIGJvdGggYXJlIGluaGVyaXRlZFxuXG4gIC8qKlxuICAgKiBAcGFyYW0gYXNzZXRJRCBBbiBhc3NldElEIHdoaWNoIGlzIHdyYXBwZWQgYXJvdW5kIHRoZSBCdWZmZXIgb2YgdGhlIE91dHB1dFxuICAgKi9cbiAgbWFrZVRyYW5zZmVyYWJsZShhc3NldElEOkJ1ZmZlcik6VHJhbnNmZXJhYmxlT3V0cHV0IHtcbiAgICByZXR1cm4gbmV3IFRyYW5zZmVyYWJsZU91dHB1dChhc3NldElELCB0aGlzKTtcbiAgfVxuXG4gIHNlbGVjdChpZDpudW1iZXIsIC4uLmFyZ3M6IGFueVtdKTpPdXRwdXQge1xuICAgIHJldHVybiBTZWxlY3RPdXRwdXRDbGFzcyhpZCwgLi4uYXJncyk7XG4gIH1cbn1cblxuLyoqXG4gKiBBbiBbW091dHB1dF1dIGNsYXNzIHdoaWNoIHNwZWNpZmllcyBhbiBPdXRwdXQgdGhhdCBjYXJyaWVzIGFuIGFtbW91bnQgZm9yIGFuIGFzc2V0SUQgYW5kIHVzZXMgc2VjcDI1NmsxIHNpZ25hdHVyZSBzY2hlbWUuXG4gKi9cbmV4cG9ydCBjbGFzcyBTRUNQVHJhbnNmZXJPdXRwdXQgZXh0ZW5kcyBBbW91bnRPdXRwdXQge1xuICBwcm90ZWN0ZWQgX3R5cGVOYW1lID0gXCJTRUNQVHJhbnNmZXJPdXRwdXRcIjtcbiAgcHJvdGVjdGVkIF90eXBlSUQgPSBQbGF0Zm9ybVZNQ29uc3RhbnRzLlNFQ1BYRkVST1VUUFVUSUQ7XG5cbiAgLy9zZXJpYWxpemUgYW5kIGRlc2VyaWFsaXplIGJvdGggYXJlIGluaGVyaXRlZFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBvdXRwdXRJRCBmb3IgdGhpcyBvdXRwdXRcbiAgICovXG4gIGdldE91dHB1dElEKCk6bnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fdHlwZUlEO1xuICB9XG5cbiAgY3JlYXRlKC4uLmFyZ3M6YW55W10pOnRoaXN7XG4gICAgcmV0dXJuIG5ldyBTRUNQVHJhbnNmZXJPdXRwdXQoLi4uYXJncykgYXMgdGhpcztcbiAgfVxuXG4gIGNsb25lKCk6dGhpcyB7XG4gICAgY29uc3QgbmV3b3V0OlNFQ1BUcmFuc2Zlck91dHB1dCA9IHRoaXMuY3JlYXRlKClcbiAgICBuZXdvdXQuZnJvbUJ1ZmZlcih0aGlzLnRvQnVmZmVyKCkpO1xuICAgIHJldHVybiBuZXdvdXQgYXMgdGhpcztcbiAgfVxufVxuXG4vKipcbiAqIEFuIFtbT3V0cHV0XV0gY2xhc3Mgd2hpY2ggc3BlY2lmaWVzIGFuIGlucHV0IHRoYXQgaGFzIGEgbG9ja3RpbWUgd2hpY2ggY2FuIGFsc28gZW5hYmxlIHN0YWtpbmcgb2YgdGhlIHZhbHVlIGhlbGQsIHByZXZlbnRpbmcgdHJhbnNmZXJzIGJ1dCBub3QgdmFsaWRhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0YWtlYWJsZUxvY2tPdXQgZXh0ZW5kcyBBbW91bnRPdXRwdXQge1xuICBwcm90ZWN0ZWQgX3R5cGVOYW1lID0gXCJTdGFrZWFibGVMb2NrT3V0XCI7XG4gIHByb3RlY3RlZCBfdHlwZUlEID0gUGxhdGZvcm1WTUNvbnN0YW50cy5TVEFLRUFCTEVMT0NLT1VUSUQ7XG5cbiAgLy9zZXJpYWxpemUgYW5kIGRlc2VyaWFsaXplIGJvdGggYXJlIGluaGVyaXRlZFxuXG4gIHNlcmlhbGl6ZShlbmNvZGluZzpTZXJpYWxpemVkRW5jb2RpbmcgPSBcImhleFwiKTpvYmplY3Qge1xuICAgIGxldCBmaWVsZHM6b2JqZWN0ID0gc3VwZXIuc2VyaWFsaXplKGVuY29kaW5nKTtcbiAgICBsZXQgb3V0b2JqOm9iamVjdCA9IHtcbiAgICAgIC4uLmZpZWxkcywgLy9pbmNsdWRlZCBhbnl3YXl5eXkuLi4gbm90IGlkZWFsXG4gICAgICBcInN0YWtlYWJsZUxvY2t0aW1lXCI6IHNlcmlhbGl6ZXIuZW5jb2Rlcih0aGlzLnN0YWtlYWJsZUxvY2t0aW1lLCBlbmNvZGluZywgXCJCdWZmZXJcIiwgXCJkZWNpbWFsU3RyaW5nXCIsIDgpLFxuICAgICAgXCJ0cmFuc2ZlcmFibGVPdXRwdXRcIjogdGhpcy50cmFuc2ZlcmFibGVPdXRwdXQuc2VyaWFsaXplKGVuY29kaW5nKVxuICAgIH07XG4gICAgZGVsZXRlIG91dG9ialtcImFkZHJlc3Nlc1wiXTtcbiAgICBkZWxldGUgb3V0b2JqW1wibG9ja3RpbWVcIl07XG4gICAgZGVsZXRlIG91dG9ialtcInRocmVzaG9sZFwiXTtcbiAgICBkZWxldGUgb3V0b2JqW1wiYW1vdW50XCJdO1xuICAgIHJldHVybiBvdXRvYmo7XG4gIH07XG4gIGRlc2VyaWFsaXplKGZpZWxkczpvYmplY3QsIGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICBmaWVsZHNbXCJhZGRyZXNzZXNcIl0gPSBbXTtcbiAgICBmaWVsZHNbXCJsb2NrdGltZVwiXSA9IFwiMFwiO1xuICAgIGZpZWxkc1tcInRocmVzaG9sZFwiXSA9ICBcIjFcIjtcbiAgICBmaWVsZHNbXCJhbW91bnRcIl0gPSBcIjk5XCI7XG4gICAgc3VwZXIuZGVzZXJpYWxpemUoZmllbGRzLCBlbmNvZGluZyk7XG4gICAgdGhpcy5zdGFrZWFibGVMb2NrdGltZSA9IHNlcmlhbGl6ZXIuZGVjb2RlcihmaWVsZHNbXCJzdGFrZWFibGVMb2NrdGltZVwiXSwgZW5jb2RpbmcsIFwiZGVjaW1hbFN0cmluZ1wiLCBcIkJ1ZmZlclwiLCA4KTtcbiAgICB0aGlzLnRyYW5zZmVyYWJsZU91dHB1dCA9IG5ldyBQYXJzZWFibGVPdXRwdXQoKTtcbiAgICB0aGlzLnRyYW5zZmVyYWJsZU91dHB1dC5kZXNlcmlhbGl6ZShmaWVsZHNbXCJ0cmFuc2ZlcmFibGVPdXRwdXRcIl0sIGVuY29kaW5nKTtcbiAgICB0aGlzLnN5bmNocm9uaXplKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgc3Rha2VhYmxlTG9ja3RpbWU6QnVmZmVyO1xuICBwcm90ZWN0ZWQgdHJhbnNmZXJhYmxlT3V0cHV0OlBhcnNlYWJsZU91dHB1dDtcblxuICAvL2NhbGwgdGhpcyBldmVyeSB0aW1lIHlvdSBsb2FkIGluIGRhdGFcbiAgcHJpdmF0ZSBzeW5jaHJvbml6ZSgpe1xuICAgIGxldCBvdXRwdXQ6QW1vdW50T3V0cHV0ID0gdGhpcy50cmFuc2ZlcmFibGVPdXRwdXQuZ2V0T3V0cHV0KCkgYXMgQW1vdW50T3V0cHV0O1xuICAgIHRoaXMuYWRkcmVzc2VzID0gb3V0cHV0LmdldEFkZHJlc3NlcygpLm1hcCgoYSkgPT4ge1xuICAgICAgbGV0IGFkZHI6QWRkcmVzcyA9IG5ldyBBZGRyZXNzKCk7XG4gICAgICBhZGRyLmZyb21CdWZmZXIoYSk7XG4gICAgICByZXR1cm4gYWRkcjtcbiAgICB9KTtcbiAgICB0aGlzLm51bWFkZHJzID0gQnVmZmVyLmFsbG9jKDQpO1xuICAgIHRoaXMubnVtYWRkcnMud3JpdGVVSW50MzJCRSh0aGlzLmFkZHJlc3Nlcy5sZW5ndGgsIDApO1xuICAgIHRoaXMubG9ja3RpbWUgPSBiaW50b29scy5mcm9tQk5Ub0J1ZmZlcihvdXRwdXQuZ2V0TG9ja3RpbWUoKSwgOCk7XG4gICAgdGhpcy50aHJlc2hvbGQgPSBCdWZmZXIuYWxsb2MoNCk7XG4gICAgdGhpcy50aHJlc2hvbGQud3JpdGVVSW50MzJCRShvdXRwdXQuZ2V0VGhyZXNob2xkKCksIDApO1xuICAgIHRoaXMuYW1vdW50ID0gYmludG9vbHMuZnJvbUJOVG9CdWZmZXIob3V0cHV0LmdldEFtb3VudCgpLCA4KTtcbiAgICB0aGlzLmFtb3VudFZhbHVlID0gb3V0cHV0LmdldEFtb3VudCgpO1xuICB9XG5cbiAgZ2V0U3Rha2VhYmxlTG9ja3RpbWUoKTpCTiB7XG4gICAgcmV0dXJuIGJpbnRvb2xzLmZyb21CdWZmZXJUb0JOKHRoaXMuc3Rha2VhYmxlTG9ja3RpbWUpO1xuICB9XG5cbiAgZ2V0VHJhbnNmZXJhYmxlT3V0cHV0KCk6UGFyc2VhYmxlT3V0cHV0IHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2ZlcmFibGVPdXRwdXQ7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIGFzc2V0SUQgQW4gYXNzZXRJRCB3aGljaCBpcyB3cmFwcGVkIGFyb3VuZCB0aGUgQnVmZmVyIG9mIHRoZSBPdXRwdXRcbiAgICovXG4gIG1ha2VUcmFuc2ZlcmFibGUoYXNzZXRJRDpCdWZmZXIpOlRyYW5zZmVyYWJsZU91dHB1dCB7XG4gICAgcmV0dXJuIG5ldyBUcmFuc2ZlcmFibGVPdXRwdXQoYXNzZXRJRCwgdGhpcyk7XG4gIH1cblxuICBzZWxlY3QoaWQ6bnVtYmVyLCAuLi5hcmdzOiBhbnlbXSk6T3V0cHV0IHtcbiAgICByZXR1cm4gU2VsZWN0T3V0cHV0Q2xhc3MoaWQsIC4uLmFyZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBvcHVhdGVzIHRoZSBpbnN0YW5jZSBmcm9tIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gcmVwcmVzZW50aW5nIHRoZSBbW1N0YWtlYWJsZUxvY2tPdXRdXSBhbmQgcmV0dXJucyB0aGUgc2l6ZSBvZiB0aGUgb3V0cHV0LlxuICAgKi9cbiAgZnJvbUJ1ZmZlcihvdXRidWZmOkJ1ZmZlciwgb2Zmc2V0Om51bWJlciA9IDApOm51bWJlciB7XG4gICAgdGhpcy5zdGFrZWFibGVMb2NrdGltZSA9IGJpbnRvb2xzLmNvcHlGcm9tKG91dGJ1ZmYsIG9mZnNldCwgb2Zmc2V0ICsgOCk7XG4gICAgb2Zmc2V0ICs9IDg7XG4gICAgdGhpcy50cmFuc2ZlcmFibGVPdXRwdXQgPSBuZXcgUGFyc2VhYmxlT3V0cHV0KCk7XG4gICAgb2Zmc2V0ID0gdGhpcy50cmFuc2ZlcmFibGVPdXRwdXQuZnJvbUJ1ZmZlcihvdXRidWZmLCBvZmZzZXQpO1xuICAgIHRoaXMuc3luY2hyb25pemUoKTtcbiAgICByZXR1cm4gb2Zmc2V0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGJ1ZmZlciByZXByZXNlbnRpbmcgdGhlIFtbU3Rha2VhYmxlTG9ja091dF1dIGluc3RhbmNlLlxuICAgKi9cbiAgdG9CdWZmZXIoKTpCdWZmZXIge1xuICAgIGxldCB4ZmVyb3V0QnVmZjpCdWZmZXIgPSB0aGlzLnRyYW5zZmVyYWJsZU91dHB1dC50b0J1ZmZlcigpO1xuICAgIGNvbnN0IGJzaXplOm51bWJlciA9IHRoaXMuc3Rha2VhYmxlTG9ja3RpbWUubGVuZ3RoICsgeGZlcm91dEJ1ZmYubGVuZ3RoO1xuICAgIGNvbnN0IGJhcnI6QXJyYXk8QnVmZmVyPiA9IFt0aGlzLnN0YWtlYWJsZUxvY2t0aW1lLCB4ZmVyb3V0QnVmZl07XG4gICAgcmV0dXJuIEJ1ZmZlci5jb25jYXQoYmFyciwgYnNpemUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG91dHB1dElEIGZvciB0aGlzIG91dHB1dFxuICAgKi9cbiAgZ2V0T3V0cHV0SUQoKTpudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl90eXBlSUQ7XG4gIH1cblxuICBjcmVhdGUoLi4uYXJnczphbnlbXSk6dGhpc3tcbiAgICByZXR1cm4gbmV3IFN0YWtlYWJsZUxvY2tPdXQoLi4uYXJncykgYXMgdGhpcztcbiAgfVxuXG4gIGNsb25lKCk6dGhpcyB7XG4gICAgY29uc3QgbmV3b3V0OlN0YWtlYWJsZUxvY2tPdXQgPSB0aGlzLmNyZWF0ZSgpXG4gICAgbmV3b3V0LmZyb21CdWZmZXIodGhpcy50b0J1ZmZlcigpKTtcbiAgICByZXR1cm4gbmV3b3V0IGFzIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQSBbW091dHB1dF1dIGNsYXNzIHdoaWNoIHNwZWNpZmllcyBhIFtbUGFyc2VhYmxlT3V0cHV0XV0gdGhhdCBoYXMgYSBsb2NrdGltZSB3aGljaCBjYW4gYWxzbyBlbmFibGUgc3Rha2luZyBvZiB0aGUgdmFsdWUgaGVsZCwgcHJldmVudGluZyB0cmFuc2ZlcnMgYnV0IG5vdCB2YWxpZGF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gYW1vdW50IEEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2JuLmpzL3xCTn0gcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgaW4gdGhlIG91dHB1dFxuICAgKiBAcGFyYW0gYWRkcmVzc2VzIEFuIGFycmF5IG9mIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9cyByZXByZXNlbnRpbmcgYWRkcmVzc2VzXG4gICAqIEBwYXJhbSBsb2NrdGltZSBBIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59IHJlcHJlc2VudGluZyB0aGUgbG9ja3RpbWVcbiAgICogQHBhcmFtIHRocmVzaG9sZCBBIG51bWJlciByZXByZXNlbnRpbmcgdGhlIHRoZSB0aHJlc2hvbGQgbnVtYmVyIG9mIHNpZ25lcnMgcmVxdWlyZWQgdG8gc2lnbiB0aGUgdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHN0YWtlYWJsZUxvY2t0aW1lIEEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2JuLmpzL3xCTn0gcmVwcmVzZW50aW5nIHRoZSBzdGFrZWFibGUgbG9ja3RpbWVcbiAgICogQHBhcmFtIHRyYW5zZmVyYWJsZU91dHB1dCBBIFtbUGFyc2VhYmxlT3V0cHV0XV0gd2hpY2ggaXMgZW1iZWRkZWQgaW50byB0aGlzIG91dHB1dC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGFtb3VudDpCTiA9IHVuZGVmaW5lZCwgYWRkcmVzc2VzOkFycmF5PEJ1ZmZlcj4gPSB1bmRlZmluZWQsIGxvY2t0aW1lOkJOID0gdW5kZWZpbmVkLCB0aHJlc2hvbGQ6bnVtYmVyID0gdW5kZWZpbmVkLCBzdGFrZWFibGVMb2NrdGltZTpCTiA9IHVuZGVmaW5lZCwgdHJhbnNmZXJhYmxlT3V0cHV0OlBhcnNlYWJsZU91dHB1dCA9IHVuZGVmaW5lZCkge1xuICAgIHN1cGVyKGFtb3VudCwgYWRkcmVzc2VzLCBsb2NrdGltZSwgdGhyZXNob2xkKTtcbiAgICBpZiAodHlwZW9mIHN0YWtlYWJsZUxvY2t0aW1lICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB0aGlzLnN0YWtlYWJsZUxvY2t0aW1lID0gYmludG9vbHMuZnJvbUJOVG9CdWZmZXIoc3Rha2VhYmxlTG9ja3RpbWUsIDgpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRyYW5zZmVyYWJsZU91dHB1dCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy50cmFuc2ZlcmFibGVPdXRwdXQgPSB0cmFuc2ZlcmFibGVPdXRwdXQ7XG4gICAgICB0aGlzLnN5bmNocm9uaXplKCk7XG4gICAgfVxuICB9XG59XG5cblxuLyoqXG4gKiBBbiBbW091dHB1dF1dIGNsYXNzIHdoaWNoIG9ubHkgc3BlY2lmaWVzIGFuIE91dHB1dCBvd25lcnNoaXAgYW5kIHVzZXMgc2VjcDI1NmsxIHNpZ25hdHVyZSBzY2hlbWUuXG4gKi9cbmV4cG9ydCBjbGFzcyBTRUNQT3duZXJPdXRwdXQgZXh0ZW5kcyBPdXRwdXQge1xuICBwcm90ZWN0ZWQgX3R5cGVOYW1lID0gXCJTRUNQT3duZXJPdXRwdXRcIjtcbiAgcHJvdGVjdGVkIF90eXBlSUQgPSBQbGF0Zm9ybVZNQ29uc3RhbnRzLlNFQ1BPV05FUk9VVFBVVElEO1xuXG4gIC8vc2VyaWFsaXplIGFuZCBkZXNlcmlhbGl6ZSBib3RoIGFyZSBpbmhlcml0ZWRcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgb3V0cHV0SUQgZm9yIHRoaXMgb3V0cHV0XG4gICAqL1xuICBnZXRPdXRwdXRJRCgpOm51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3R5cGVJRDtcbiAgfVxuXG4gIC8qKlxuICAgKiBcbiAgICogQHBhcmFtIGFzc2V0SUQgQW4gYXNzZXRJRCB3aGljaCBpcyB3cmFwcGVkIGFyb3VuZCB0aGUgQnVmZmVyIG9mIHRoZSBPdXRwdXRcbiAgICovXG4gIG1ha2VUcmFuc2ZlcmFibGUoYXNzZXRJRDpCdWZmZXIpOlRyYW5zZmVyYWJsZU91dHB1dCB7XG4gICAgcmV0dXJuIG5ldyBUcmFuc2ZlcmFibGVPdXRwdXQoYXNzZXRJRCwgdGhpcyk7XG4gIH1cblxuICBjcmVhdGUoLi4uYXJnczphbnlbXSk6dGhpc3tcbiAgICByZXR1cm4gbmV3IFNFQ1BPd25lck91dHB1dCguLi5hcmdzKSBhcyB0aGlzO1xuICB9XG5cbiAgY2xvbmUoKTp0aGlzIHtcbiAgICBjb25zdCBuZXdvdXQ6U0VDUE93bmVyT3V0cHV0ID0gdGhpcy5jcmVhdGUoKVxuICAgIG5ld291dC5mcm9tQnVmZmVyKHRoaXMudG9CdWZmZXIoKSk7XG4gICAgcmV0dXJuIG5ld291dCBhcyB0aGlzO1xuICB9XG5cbiAgc2VsZWN0KGlkOm51bWJlciwgLi4uYXJnczogYW55W10pOk91dHB1dCB7XG4gICAgcmV0dXJuIFNlbGVjdE91dHB1dENsYXNzKGlkLCAuLi5hcmdzKTtcbiAgfVxufSJdfQ==","\"use strict\";\n/**\n * @packageDocumentation\n * @module Common-Output\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseNFTOutput = exports.StandardAmountOutput = exports.StandardTransferableOutput = exports.StandardParseableOutput = exports.Output = exports.OutputOwners = exports.Address = void 0;\nconst buffer_1 = require(\"buffer/\");\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nconst bintools_1 = __importDefault(require(\"../utils/bintools\"));\nconst nbytes_1 = require(\"./nbytes\");\nconst helperfunctions_1 = require(\"../utils/helperfunctions\");\nconst serialization_1 = require(\"../utils/serialization\");\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\nconst serializer = serialization_1.Serialization.getInstance();\n/**\n * Class for representing an address used in [[Output]] types\n */\nclass Address extends nbytes_1.NBytes {\n    /**\n     * Class for representing an address used in [[Output]] types\n     */\n    constructor() {\n        super();\n        this._typeName = \"Address\";\n        this._typeID = undefined;\n        //serialize and deserialize both are inherited\n        this.bytes = buffer_1.Buffer.alloc(20);\n        this.bsize = 20;\n    }\n    /**\n       * Returns a base-58 representation of the [[Address]].\n       */\n    toString() {\n        return bintools.cb58Encode(this.toBuffer());\n    }\n    /**\n       * Takes a base-58 string containing an [[Address]], parses it, populates the class, and returns the length of the Address in bytes.\n       *\n       * @param bytes A base-58 string containing a raw [[Address]]\n       *\n       * @returns The length of the raw [[Address]]\n       */\n    fromString(addr) {\n        const addrbuff = bintools.b58ToBuffer(addr);\n        if (addrbuff.length === 24 && bintools.validateChecksum(addrbuff)) {\n            const newbuff = bintools.copyFrom(addrbuff, 0, addrbuff.length - 4);\n            if (newbuff.length === 20) {\n                this.bytes = newbuff;\n            }\n        }\n        else if (addrbuff.length === 24) {\n            throw new Error('Error - Address.fromString: invalid checksum on address');\n        }\n        else if (addrbuff.length === 20) {\n            this.bytes = addrbuff;\n        }\n        else {\n            /* istanbul ignore next */\n            throw new Error('Error - Address.fromString: invalid address');\n        }\n        return this.getSize();\n    }\n    clone() {\n        let newbase = new Address();\n        newbase.fromBuffer(this.toBuffer());\n        return newbase;\n    }\n    create(...args) {\n        return new Address();\n    }\n}\nexports.Address = Address;\n/**\n * Returns a function used to sort an array of [[Address]]es\n */\nAddress.comparator = () => (a, b) => buffer_1.Buffer.compare(a.toBuffer(), b.toBuffer());\n/**\n * Defines the most basic values for output ownership. Mostly inherited from, but can be used in population of NFT Owner data.\n */\nclass OutputOwners extends serialization_1.Serializable {\n    /**\n     * An [[Output]] class which contains addresses, locktimes, and thresholds.\n     *\n     * @param addresses An array of {@link https://github.com/feross/buffer|Buffer}s representing output owner's addresses\n     * @param locktime A {@link https://github.com/indutny/bn.js/|BN} representing the locktime\n     * @param threshold A number representing the the threshold number of signers required to sign the transaction\n     */\n    constructor(addresses = undefined, locktime = undefined, threshold = undefined) {\n        super();\n        this._typeName = \"OutputOwners\";\n        this._typeID = undefined;\n        this.locktime = buffer_1.Buffer.alloc(8);\n        this.threshold = buffer_1.Buffer.alloc(4);\n        this.numaddrs = buffer_1.Buffer.alloc(4);\n        this.addresses = [];\n        /**\n         * Returns the threshold of signers required to spend this output.\n         */\n        this.getThreshold = () => this.threshold.readUInt32BE(0);\n        /**\n         * Returns the a {@link https://github.com/indutny/bn.js/|BN} repersenting the UNIX Timestamp when the lock is made available.\n         */\n        this.getLocktime = () => bintools.fromBufferToBN(this.locktime);\n        /**\n         * Returns an array of {@link https://github.com/feross/buffer|Buffer}s for the addresses.\n         */\n        this.getAddresses = () => {\n            const result = [];\n            for (let i = 0; i < this.addresses.length; i++) {\n                result.push(this.addresses[i].toBuffer());\n            }\n            return result;\n        };\n        /**\n         * Returns the index of the address.\n         *\n         * @param address A {@link https://github.com/feross/buffer|Buffer} of the address to look up to return its index.\n         *\n         * @returns The index of the address.\n         */\n        this.getAddressIdx = (address) => {\n            for (let i = 0; i < this.addresses.length; i++) {\n                if (this.addresses[i].toBuffer().toString('hex') === address.toString('hex')) {\n                    return i;\n                }\n            }\n            /* istanbul ignore next */\n            return -1;\n        };\n        /**\n         * Returns the address from the index provided.\n         *\n         * @param idx The index of the address.\n         *\n         * @returns Returns the string representing the address.\n         */\n        this.getAddress = (idx) => {\n            if (idx < this.addresses.length) {\n                return this.addresses[idx].toBuffer();\n            }\n            throw new Error('Error - Output.getAddress: idx out of range');\n        };\n        /**\n         * Given an array of address {@link https://github.com/feross/buffer|Buffer}s and an optional timestamp, returns true if the addresses meet the threshold required to spend the output.\n         */\n        this.meetsThreshold = (addresses, asOf = undefined) => {\n            let now;\n            if (typeof asOf === 'undefined') {\n                now = helperfunctions_1.UnixNow();\n            }\n            else {\n                now = asOf;\n            }\n            const qualified = this.getSpenders(addresses, now);\n            const threshold = this.threshold.readUInt32BE(0);\n            if (qualified.length >= threshold) {\n                return true;\n            }\n            return false;\n        };\n        /**\n         * Given an array of addresses and an optional timestamp, select an array of address {@link https://github.com/feross/buffer|Buffer}s of qualified spenders for the output.\n         */\n        this.getSpenders = (addresses, asOf = undefined) => {\n            const qualified = [];\n            let now;\n            if (typeof asOf === 'undefined') {\n                now = helperfunctions_1.UnixNow();\n            }\n            else {\n                now = asOf;\n            }\n            const locktime = bintools.fromBufferToBN(this.locktime);\n            if (now.lte(locktime)) { // not unlocked, not spendable\n                return qualified;\n            }\n            const threshold = this.threshold.readUInt32BE(0);\n            for (let i = 0; i < this.addresses.length && qualified.length < threshold; i++) {\n                for (let j = 0; j < addresses.length && qualified.length < threshold; j++) {\n                    if (addresses[j].toString('hex') === this.addresses[i].toBuffer().toString('hex')) {\n                        qualified.push(addresses[j]);\n                    }\n                }\n            }\n            return qualified;\n        };\n        if (typeof addresses !== \"undefined\" && addresses.length) {\n            const addrs = [];\n            for (let i = 0; i < addresses.length; i++) {\n                addrs[i] = new Address();\n                addrs[i].fromBuffer(addresses[i]);\n            }\n            this.addresses = addrs;\n            this.addresses.sort(Address.comparator());\n            this.numaddrs.writeUInt32BE(this.addresses.length, 0);\n        }\n        if (typeof threshold !== undefined) {\n            this.threshold.writeUInt32BE((threshold || 1), 0);\n        }\n        if (typeof locktime !== \"undefined\") {\n            this.locktime = bintools.fromBNToBuffer(locktime, 8);\n        }\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"locktime\": serializer.encoder(this.locktime, encoding, \"Buffer\", \"decimalString\", 8), \"threshold\": serializer.encoder(this.threshold, encoding, \"Buffer\", \"decimalString\", 4), \"addresses\": this.addresses.map((a) => a.serialize(encoding)) });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.locktime = serializer.decoder(fields[\"locktime\"], encoding, \"decimalString\", \"Buffer\", 8);\n        this.threshold = serializer.decoder(fields[\"threshold\"], encoding, \"decimalString\", \"Buffer\", 4);\n        this.addresses = fields[\"addresses\"].map((a) => {\n            let addr = new Address();\n            addr.deserialize(a, encoding);\n            return addr;\n        });\n        this.numaddrs = buffer_1.Buffer.alloc(4);\n        this.numaddrs.writeUInt32BE(this.addresses.length, 0);\n    }\n    /**\n     * Returns a base-58 string representing the [[Output]].\n     */\n    fromBuffer(bytes, offset = 0) {\n        this.locktime = bintools.copyFrom(bytes, offset, offset + 8);\n        offset += 8;\n        this.threshold = bintools.copyFrom(bytes, offset, offset + 4);\n        offset += 4;\n        this.numaddrs = bintools.copyFrom(bytes, offset, offset + 4);\n        offset += 4;\n        const numaddrs = this.numaddrs.readUInt32BE(0);\n        this.addresses = [];\n        for (let i = 0; i < numaddrs; i++) {\n            const addr = new Address();\n            offset = addr.fromBuffer(bytes, offset);\n            this.addresses.push(addr);\n        }\n        this.addresses.sort(Address.comparator());\n        return offset;\n    }\n    /**\n     * Returns the buffer representing the [[Output]] instance.\n     */\n    toBuffer() {\n        this.addresses.sort(Address.comparator());\n        this.numaddrs.writeUInt32BE(this.addresses.length, 0);\n        let bsize = this.locktime.length + this.threshold.length + this.numaddrs.length;\n        const barr = [this.locktime, this.threshold, this.numaddrs];\n        for (let i = 0; i < this.addresses.length; i++) {\n            const b = this.addresses[i].toBuffer();\n            barr.push(b);\n            bsize += b.length;\n        }\n        return buffer_1.Buffer.concat(barr, bsize);\n    }\n    /**\n     * Returns a base-58 string representing the [[Output]].\n     */\n    toString() {\n        return bintools.bufferToB58(this.toBuffer());\n    }\n}\nexports.OutputOwners = OutputOwners;\nOutputOwners.comparator = () => (a, b) => {\n    const aoutid = buffer_1.Buffer.alloc(4);\n    aoutid.writeUInt32BE(a.getOutputID(), 0);\n    const abuff = a.toBuffer();\n    const boutid = buffer_1.Buffer.alloc(4);\n    boutid.writeUInt32BE(b.getOutputID(), 0);\n    const bbuff = b.toBuffer();\n    const asort = buffer_1.Buffer.concat([aoutid, abuff], aoutid.length + abuff.length);\n    const bsort = buffer_1.Buffer.concat([boutid, bbuff], boutid.length + bbuff.length);\n    return buffer_1.Buffer.compare(asort, bsort);\n};\nclass Output extends OutputOwners {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"Output\";\n        this._typeID = undefined;\n    }\n}\nexports.Output = Output;\nclass StandardParseableOutput extends serialization_1.Serializable {\n    /**\n     * Class representing an [[ParseableOutput]] for a transaction.\n     *\n     * @param output A number representing the InputID of the [[ParseableOutput]]\n     */\n    constructor(output = undefined) {\n        super();\n        this._typeName = \"StandardParseableOutput\";\n        this._typeID = undefined;\n        this.getOutput = () => this.output;\n        if (output instanceof Output) {\n            this.output = output;\n        }\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"output\": this.output.serialize(encoding) });\n    }\n    ;\n    toBuffer() {\n        const outbuff = this.output.toBuffer();\n        const outid = buffer_1.Buffer.alloc(4);\n        outid.writeUInt32BE(this.output.getOutputID(), 0);\n        const barr = [outid, outbuff];\n        return buffer_1.Buffer.concat(barr, outid.length + outbuff.length);\n    }\n}\nexports.StandardParseableOutput = StandardParseableOutput;\n/**\n * Returns a function used to sort an array of [[ParseableOutput]]s\n */\nStandardParseableOutput.comparator = () => (a, b) => {\n    const sorta = a.toBuffer();\n    const sortb = b.toBuffer();\n    return buffer_1.Buffer.compare(sorta, sortb);\n};\nclass StandardTransferableOutput extends StandardParseableOutput {\n    /**\n     * Class representing an [[StandardTransferableOutput]] for a transaction.\n     *\n     * @param assetID A {@link https://github.com/feross/buffer|Buffer} representing the assetID of the [[Output]]\n     * @param output A number representing the InputID of the [[StandardTransferableOutput]]\n     */\n    constructor(assetID = undefined, output = undefined) {\n        super(output);\n        this._typeName = \"StandardTransferableOutput\";\n        this._typeID = undefined;\n        this.assetID = undefined;\n        this.getAssetID = () => this.assetID;\n        if (typeof assetID !== 'undefined') {\n            this.assetID = assetID;\n        }\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"assetID\": serializer.encoder(this.assetID, encoding, \"Buffer\", \"cb58\") });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.assetID = serializer.decoder(fields[\"assetID\"], encoding, \"cb58\", \"Buffer\", 32);\n    }\n    toBuffer() {\n        const parseableBuff = super.toBuffer();\n        const barr = [this.assetID, parseableBuff];\n        return buffer_1.Buffer.concat(barr, this.assetID.length + parseableBuff.length);\n    }\n}\nexports.StandardTransferableOutput = StandardTransferableOutput;\n/**\n * An [[Output]] class which specifies a token amount .\n */\nclass StandardAmountOutput extends Output {\n    /**\n     * A [[StandardAmountOutput]] class which issues a payment on an assetID.\n     *\n     * @param amount A {@link https://github.com/indutny/bn.js/|BN} representing the amount in the output\n     * @param addresses An array of {@link https://github.com/feross/buffer|Buffer}s representing addresses\n     * @param locktime A {@link https://github.com/indutny/bn.js/|BN} representing the locktime\n     * @param threshold A number representing the the threshold number of signers required to sign the transaction\n     */\n    constructor(amount = undefined, addresses = undefined, locktime = undefined, threshold = undefined) {\n        super(addresses, locktime, threshold);\n        this._typeName = \"StandardAmountOutput\";\n        this._typeID = undefined;\n        this.amount = buffer_1.Buffer.alloc(8);\n        this.amountValue = new bn_js_1.default(0);\n        /**\n         * Returns the amount as a {@link https://github.com/indutny/bn.js/|BN}.\n         */\n        this.getAmount = () => this.amountValue.clone();\n        if (typeof amount !== \"undefined\") {\n            this.amountValue = amount.clone();\n            this.amount = bintools.fromBNToBuffer(amount, 8);\n        }\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"amount\": serializer.encoder(this.amount, encoding, \"Buffer\", \"decimalString\", 8) });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.amount = serializer.decoder(fields[\"amount\"], encoding, \"decimalString\", \"Buffer\", 8);\n        this.amountValue = bintools.fromBufferToBN(this.amount);\n    }\n    /**\n     * Popuates the instance from a {@link https://github.com/feross/buffer|Buffer} representing the [[StandardAmountOutput]] and returns the size of the output.\n     */\n    fromBuffer(outbuff, offset = 0) {\n        this.amount = bintools.copyFrom(outbuff, offset, offset + 8);\n        this.amountValue = bintools.fromBufferToBN(this.amount);\n        offset += 8;\n        return super.fromBuffer(outbuff, offset);\n    }\n    /**\n     * Returns the buffer representing the [[StandardAmountOutput]] instance.\n     */\n    toBuffer() {\n        const superbuff = super.toBuffer();\n        const bsize = this.amount.length + superbuff.length;\n        this.numaddrs.writeUInt32BE(this.addresses.length, 0);\n        const barr = [this.amount, superbuff];\n        return buffer_1.Buffer.concat(barr, bsize);\n    }\n}\nexports.StandardAmountOutput = StandardAmountOutput;\n/**\n * An [[Output]] class which specifies an NFT.\n */\nclass BaseNFTOutput extends Output {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"BaseNFTOutput\";\n        this._typeID = undefined;\n        this.groupID = buffer_1.Buffer.alloc(4);\n        /**\n         * Returns the groupID as a number.\n         */\n        this.getGroupID = () => {\n            return this.groupID.readUInt32BE(0);\n        };\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"groupID\": serializer.encoder(this.groupID, encoding, \"Buffer\", \"decimalString\", 4) });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.groupID = serializer.decoder(fields[\"groupID\"], encoding, \"decimalString\", \"Buffer\", 4);\n    }\n}\nexports.BaseNFTOutput = BaseNFTOutput;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3V0cHV0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvbW1vbi9vdXRwdXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7Ozs7O0FBRUgsb0NBQWlDO0FBQ2pDLGtEQUF1QjtBQUN2QixpRUFBeUM7QUFDekMscUNBQWtDO0FBQ2xDLDhEQUFtRDtBQUNuRCwwREFBeUY7QUFFekY7O0dBRUc7QUFDSCxNQUFNLFFBQVEsR0FBWSxrQkFBUSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQ2pELE1BQU0sVUFBVSxHQUFHLDZCQUFhLENBQUMsV0FBVyxFQUFFLENBQUM7QUFFL0M7O0dBRUc7QUFDSCxNQUFhLE9BQVEsU0FBUSxlQUFNO0lBMERqQzs7T0FFRztJQUNIO1FBQ0UsS0FBSyxFQUFFLENBQUM7UUE3REEsY0FBUyxHQUFHLFNBQVMsQ0FBQztRQUN0QixZQUFPLEdBQUcsU0FBUyxDQUFDO1FBRTlCLDhDQUE4QztRQUVwQyxVQUFLLEdBQUcsZUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN6QixVQUFLLEdBQUcsRUFBRSxDQUFDO0lBd0RyQixDQUFDO0lBL0NEOztTQUVLO0lBQ0wsUUFBUTtRQUNOLE9BQU8sUUFBUSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lBRUQ7Ozs7OztTQU1LO0lBQ0wsVUFBVSxDQUFDLElBQVc7UUFDcEIsTUFBTSxRQUFRLEdBQVUsUUFBUSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNuRCxJQUFJLFFBQVEsQ0FBQyxNQUFNLEtBQUssRUFBRSxJQUFJLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUNqRSxNQUFNLE9BQU8sR0FBVSxRQUFRLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUUsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FB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LENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTNDOztXQUVHO1FBQ0gsZUFBVSxHQUFHLEdBQVUsRUFBRTtZQUNyQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLENBQUMsQ0FBQTtJQUNILENBQUM7SUFwQkMsU0FBUyxDQUFDLFdBQThCLEtBQUs7UUFDM0MsSUFBSSxNQUFNLEdBQVUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUM5Qyx1Q0FDSyxNQUFNLEtBQ1QsU0FBUyxFQUFFLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLGVBQWUsRUFBRSxDQUFDLENBQUMsSUFDcEY7SUFDSCxDQUFDO0lBQUEsQ0FBQztJQUNGLFdBQVcsQ0FBQyxNQUFhLEVBQUUsV0FBOEIsS0FBSztRQUM1RCxLQUFLLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQztRQUNwQyxJQUFJLENBQUMsT0FBTyxHQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFLFFBQVEsRUFBRSxlQUFlLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQy9GLENBQUM7Q0FVRjtBQXhCRCxzQ0F3QkMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICogQG1vZHVsZSBDb21tb24tT3V0cHV0XG4gKi9cblxuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyLyc7XG5pbXBvcnQgQk4gZnJvbSAnYm4uanMnO1xuaW1wb3J0IEJpblRvb2xzIGZyb20gJy4uL3V0aWxzL2JpbnRvb2xzJztcbmltcG9ydCB7IE5CeXRlcyB9IGZyb20gJy4vbmJ5dGVzJztcbmltcG9ydCB7IFVuaXhOb3cgfSBmcm9tICcuLi91dGlscy9oZWxwZXJmdW5jdGlvbnMnO1xuaW1wb3J0IHsgU2VyaWFsaXphYmxlLCBTZXJpYWxpemF0aW9uLCBTZXJpYWxpemVkRW5jb2RpbmcgfSBmcm9tICcuLi91dGlscy9zZXJpYWxpemF0aW9uJztcblxuLyoqXG4gKiBAaWdub3JlXG4gKi9cbmNvbnN0IGJpbnRvb2xzOkJpblRvb2xzID0gQmluVG9vbHMuZ2V0SW5zdGFuY2UoKTtcbmNvbnN0IHNlcmlhbGl6ZXIgPSBTZXJpYWxpemF0aW9uLmdldEluc3RhbmNlKCk7XG5cbi8qKlxuICogQ2xhc3MgZm9yIHJlcHJlc2VudGluZyBhbiBhZGRyZXNzIHVzZWQgaW4gW1tPdXRwdXRdXSB0eXBlc1xuICovXG5leHBvcnQgY2xhc3MgQWRkcmVzcyBleHRlbmRzIE5CeXRlcyB7XG4gIHByb3RlY3RlZCBfdHlwZU5hbWUgPSBcIkFkZHJlc3NcIjtcbiAgcHJvdGVjdGVkIF90eXBlSUQgPSB1bmRlZmluZWQ7XG5cbiAgLy9zZXJpYWxpemUgYW5kIGRlc2VyaWFsaXplIGJvdGggYXJlIGluaGVyaXRlZFxuXG4gIHByb3RlY3RlZCBieXRlcyA9IEJ1ZmZlci5hbGxvYygyMCk7XG4gIHByb3RlY3RlZCBic2l6ZSA9IDIwO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24gdXNlZCB0byBzb3J0IGFuIGFycmF5IG9mIFtbQWRkcmVzc11dZXNcbiAgICovXG4gIHN0YXRpYyBjb21wYXJhdG9yID0gKClcbiAgICAgIDooYTpBZGRyZXNzLCBiOkFkZHJlc3MpID0+ICgxfC0xfDApID0+IChhOkFkZHJlc3MsIGI6QWRkcmVzcylcbiAgICAgIDooMXwtMXwwKSA9PiBCdWZmZXIuY29tcGFyZShhLnRvQnVmZmVyKCksIGIudG9CdWZmZXIoKSkgYXMgKDF8LTF8MCk7XG5cbiAgLyoqXG4gICAgICogUmV0dXJucyBhIGJhc2UtNTggcmVwcmVzZW50YXRpb24gb2YgdGhlIFtbQWRkcmVzc11dLlxuICAgICAqL1xuICB0b1N0cmluZygpOnN0cmluZyB7XG4gICAgcmV0dXJuIGJpbnRvb2xzLmNiNThFbmNvZGUodGhpcy50b0J1ZmZlcigpKTtcbiAgfVxuXG4gIC8qKlxuICAgICAqIFRha2VzIGEgYmFzZS01OCBzdHJpbmcgY29udGFpbmluZyBhbiBbW0FkZHJlc3NdXSwgcGFyc2VzIGl0LCBwb3B1bGF0ZXMgdGhlIGNsYXNzLCBhbmQgcmV0dXJucyB0aGUgbGVuZ3RoIG9mIHRoZSBBZGRyZXNzIGluIGJ5dGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJ5dGVzIEEgYmFzZS01OCBzdHJpbmcgY29udGFpbmluZyBhIHJhdyBbW0FkZHJlc3NdXVxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGxlbmd0aCBvZiB0aGUgcmF3IFtbQWRkcmVzc11dXG4gICAgICovXG4gIGZyb21TdHJpbmcoYWRkcjpzdHJpbmcpOm51bWJlciB7XG4gICAgY29uc3QgYWRkcmJ1ZmY6QnVmZmVyID0gYmludG9vbHMuYjU4VG9CdWZmZXIoYWRkcik7XG4gICAgaWYgKGFkZHJidWZmLmxlbmd0aCA9PT0gMjQgJiYgYmludG9vbHMudmFsaWRhdGVDaGVja3N1bShhZGRyYnVmZikpIHtcbiAgICAgIGNvbnN0IG5ld2J1ZmY6QnVmZmVyID0gYmludG9vbHMuY29weUZyb20oYWRkcmJ1ZmYsIDAsIGFkZHJidWZmLmxlbmd0aCAtIDQpO1xuICAgICAgaWYgKG5ld2J1ZmYubGVuZ3RoID09PSAyMCkge1xuICAgICAgICB0aGlzLmJ5dGVzID0gbmV3YnVmZjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGFkZHJidWZmLmxlbmd0aCA9PT0gMjQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgLSBBZGRyZXNzLmZyb21TdHJpbmc6IGludmFsaWQgY2hlY2tzdW0gb24gYWRkcmVzcycpO1xuICAgIH0gZWxzZSBpZiAoYWRkcmJ1ZmYubGVuZ3RoID09PSAyMCkge1xuICAgICAgdGhpcy5ieXRlcyA9IGFkZHJidWZmO1xuICAgIH0gZWxzZSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciAtIEFkZHJlc3MuZnJvbVN0cmluZzogaW52YWxpZCBhZGRyZXNzJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmdldFNpemUoKTtcbiAgfVxuXG4gIGNsb25lKCk6dGhpcyB7XG4gICAgbGV0IG5ld2Jhc2U6QWRkcmVzcyA9IG5ldyBBZGRyZXNzKCk7XG4gICAgbmV3YmFzZS5mcm9tQnVmZmVyKHRoaXMudG9CdWZmZXIoKSk7XG4gICAgcmV0dXJuIG5ld2Jhc2UgYXMgdGhpcztcbiAgfVxuXG4gIGNyZWF0ZSguLi5hcmdzOmFueVtdKTp0aGlzIHtcbiAgICByZXR1cm4gbmV3IEFkZHJlc3MoKSBhcyB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIENsYXNzIGZvciByZXByZXNlbnRpbmcgYW4gYWRkcmVzcyB1c2VkIGluIFtbT3V0cHV0XV0gdHlwZXNcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gIH1cbn1cblxuICAvKipcbiAgICogRGVmaW5lcyB0aGUgbW9zdCBiYXNpYyB2YWx1ZXMgZm9yIG91dHB1dCBvd25lcnNoaXAuIE1vc3RseSBpbmhlcml0ZWQgZnJvbSwgYnV0IGNhbiBiZSB1c2VkIGluIHBvcHVsYXRpb24gb2YgTkZUIE93bmVyIGRhdGEuXG4gICAqL1xuZXhwb3J0IGNsYXNzIE91dHB1dE93bmVycyBleHRlbmRzIFNlcmlhbGl6YWJsZSB7XG4gIHByb3RlY3RlZCBfdHlwZU5hbWUgPSBcIk91dHB1dE93bmVyc1wiO1xuICBwcm90ZWN0ZWQgX3R5cGVJRCA9IHVuZGVmaW5lZDtcblxuICBzZXJpYWxpemUoZW5jb2Rpbmc6U2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIik6b2JqZWN0IHtcbiAgICBsZXQgZmllbGRzOm9iamVjdCA9IHN1cGVyLnNlcmlhbGl6ZShlbmNvZGluZyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmZpZWxkcyxcbiAgICAgIFwibG9ja3RpbWVcIjogc2VyaWFsaXplci5lbmNvZGVyKHRoaXMubG9ja3RpbWUsIGVuY29kaW5nLCBcIkJ1ZmZlclwiLCBcImRlY2ltYWxTdHJpbmdcIiwgOCksXG4gICAgICBcInRocmVzaG9sZFwiOiBzZXJpYWxpemVyLmVuY29kZXIodGhpcy50aHJlc2hvbGQsIGVuY29kaW5nLCBcIkJ1ZmZlclwiLCBcImRlY2ltYWxTdHJpbmdcIiwgNCksXG4gICAgICBcImFkZHJlc3Nlc1wiOiB0aGlzLmFkZHJlc3Nlcy5tYXAoKGEpID0+IGEuc2VyaWFsaXplKGVuY29kaW5nKSlcbiAgICB9XG4gIH07XG4gIGRlc2VyaWFsaXplKGZpZWxkczpvYmplY3QsIGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICBzdXBlci5kZXNlcmlhbGl6ZShmaWVsZHMsIGVuY29kaW5nKTtcbiAgICB0aGlzLmxvY2t0aW1lID0gc2VyaWFsaXplci5kZWNvZGVyKGZpZWxkc1tcImxvY2t0aW1lXCJdLCBlbmNvZGluZywgXCJkZWNpbWFsU3RyaW5nXCIsIFwiQnVmZmVyXCIsIDgpO1xuICAgIHRoaXMudGhyZXNob2xkID0gc2VyaWFsaXplci5kZWNvZGVyKGZpZWxkc1tcInRocmVzaG9sZFwiXSwgZW5jb2RpbmcsIFwiZGVjaW1hbFN0cmluZ1wiLCBcIkJ1ZmZlclwiLCA0KTtcbiAgICB0aGlzLmFkZHJlc3NlcyA9IGZpZWxkc1tcImFkZHJlc3Nlc1wiXS5tYXAoKGE6b2JqZWN0KSA9PiB7XG4gICAgICBsZXQgYWRkcjpBZGRyZXNzID0gbmV3IEFkZHJlc3MoKTtcbiAgICAgIGFkZHIuZGVzZXJpYWxpemUoYSwgZW5jb2RpbmcpO1xuICAgICAgcmV0dXJuIGFkZHI7XG4gICAgfSk7XG4gICAgdGhpcy5udW1hZGRycyA9IEJ1ZmZlci5hbGxvYyg0KTtcbiAgICB0aGlzLm51bWFkZHJzLndyaXRlVUludDMyQkUodGhpcy5hZGRyZXNzZXMubGVuZ3RoLCAwKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBsb2NrdGltZTpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoOCk7XG4gIHByb3RlY3RlZCB0aHJlc2hvbGQ6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDQpO1xuICBwcm90ZWN0ZWQgbnVtYWRkcnM6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDQpO1xuICBwcm90ZWN0ZWQgYWRkcmVzc2VzOkFycmF5PEFkZHJlc3M+ID0gW107XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHRocmVzaG9sZCBvZiBzaWduZXJzIHJlcXVpcmVkIHRvIHNwZW5kIHRoaXMgb3V0cHV0LlxuICAgKi9cbiAgZ2V0VGhyZXNob2xkID0gKCk6bnVtYmVyID0+IHRoaXMudGhyZXNob2xkLnJlYWRVSW50MzJCRSgwKTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfSByZXBlcnNlbnRpbmcgdGhlIFVOSVggVGltZXN0YW1wIHdoZW4gdGhlIGxvY2sgaXMgbWFkZSBhdmFpbGFibGUuXG4gICAqL1xuICBnZXRMb2NrdGltZSA9ICgpOkJOID0+IGJpbnRvb2xzLmZyb21CdWZmZXJUb0JOKHRoaXMubG9ja3RpbWUpO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9cyBmb3IgdGhlIGFkZHJlc3Nlcy5cbiAgICovXG4gIGdldEFkZHJlc3NlcyA9ICgpOkFycmF5PEJ1ZmZlcj4gPT4ge1xuICAgIGNvbnN0IHJlc3VsdDpBcnJheTxCdWZmZXI+ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFkZHJlc3Nlcy5sZW5ndGg7IGkrKykge1xuICAgICAgcmVzdWx0LnB1c2godGhpcy5hZGRyZXNzZXNbaV0udG9CdWZmZXIoKSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBhZGRyZXNzLlxuICAgKlxuICAgKiBAcGFyYW0gYWRkcmVzcyBBIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IG9mIHRoZSBhZGRyZXNzIHRvIGxvb2sgdXAgdG8gcmV0dXJuIGl0cyBpbmRleC5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIGluZGV4IG9mIHRoZSBhZGRyZXNzLlxuICAgKi9cbiAgZ2V0QWRkcmVzc0lkeCA9IChhZGRyZXNzOkJ1ZmZlcik6bnVtYmVyID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYWRkcmVzc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5hZGRyZXNzZXNbaV0udG9CdWZmZXIoKS50b1N0cmluZygnaGV4JykgPT09IGFkZHJlc3MudG9TdHJpbmcoJ2hleCcpKSB7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIHJldHVybiAtMTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYWRkcmVzcyBmcm9tIHRoZSBpbmRleCBwcm92aWRlZC5cbiAgICpcbiAgICogQHBhcmFtIGlkeCBUaGUgaW5kZXggb2YgdGhlIGFkZHJlc3MuXG4gICAqXG4gICAqIEByZXR1cm5zIFJldHVybnMgdGhlIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGFkZHJlc3MuXG4gICAqL1xuICBnZXRBZGRyZXNzID0gKGlkeDpudW1iZXIpOkJ1ZmZlciA9PiB7XG4gICAgaWYgKGlkeCA8IHRoaXMuYWRkcmVzc2VzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHRoaXMuYWRkcmVzc2VzW2lkeF0udG9CdWZmZXIoKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciAtIE91dHB1dC5nZXRBZGRyZXNzOiBpZHggb3V0IG9mIHJhbmdlJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdpdmVuIGFuIGFycmF5IG9mIGFkZHJlc3Mge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn1zIGFuZCBhbiBvcHRpb25hbCB0aW1lc3RhbXAsIHJldHVybnMgdHJ1ZSBpZiB0aGUgYWRkcmVzc2VzIG1lZXQgdGhlIHRocmVzaG9sZCByZXF1aXJlZCB0byBzcGVuZCB0aGUgb3V0cHV0LlxuICAgKi9cbiAgbWVldHNUaHJlc2hvbGQgPSAoYWRkcmVzc2VzOkFycmF5PEJ1ZmZlcj4sIGFzT2Y6Qk4gPSB1bmRlZmluZWQpOmJvb2xlYW4gPT4ge1xuICAgIGxldCBub3c6Qk47XG4gICAgaWYgKHR5cGVvZiBhc09mID09PSAndW5kZWZpbmVkJykge1xuICAgICAgbm93ID0gVW5peE5vdygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBub3cgPSBhc09mO1xuICAgIH1cbiAgICBjb25zdCBxdWFsaWZpZWQ6QXJyYXk8QnVmZmVyPiA9IHRoaXMuZ2V0U3BlbmRlcnMoYWRkcmVzc2VzLCBub3cpO1xuICAgIGNvbnN0IHRocmVzaG9sZDpudW1iZXIgPSB0aGlzLnRocmVzaG9sZC5yZWFkVUludDMyQkUoMCk7XG4gICAgaWYgKHF1YWxpZmllZC5sZW5ndGggPj0gdGhyZXNob2xkKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdpdmVuIGFuIGFycmF5IG9mIGFkZHJlc3NlcyBhbmQgYW4gb3B0aW9uYWwgdGltZXN0YW1wLCBzZWxlY3QgYW4gYXJyYXkgb2YgYWRkcmVzcyB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfXMgb2YgcXVhbGlmaWVkIHNwZW5kZXJzIGZvciB0aGUgb3V0cHV0LlxuICAgKi9cbiAgZ2V0U3BlbmRlcnMgPSAoYWRkcmVzc2VzOkFycmF5PEJ1ZmZlcj4sIGFzT2Y6Qk4gPSB1bmRlZmluZWQpOkFycmF5PEJ1ZmZlcj4gPT4ge1xuICAgIGNvbnN0IHF1YWxpZmllZDpBcnJheTxCdWZmZXI+ID0gW107XG4gICAgbGV0IG5vdzpCTjtcbiAgICBpZiAodHlwZW9mIGFzT2YgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBub3cgPSBVbml4Tm93KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vdyA9IGFzT2Y7XG4gICAgfVxuICAgIGNvbnN0IGxvY2t0aW1lOkJOID0gYmludG9vbHMuZnJvbUJ1ZmZlclRvQk4odGhpcy5sb2NrdGltZSk7XG4gICAgaWYgKG5vdy5sdGUobG9ja3RpbWUpKSB7IC8vIG5vdCB1bmxvY2tlZCwgbm90IHNwZW5kYWJsZVxuICAgICAgcmV0dXJuIHF1YWxpZmllZDtcbiAgICB9XG5cbiAgICBjb25zdCB0aHJlc2hvbGQ6bnVtYmVyID0gdGhpcy50aHJlc2hvbGQucmVhZFVJbnQzMkJFKDApO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hZGRyZXNzZXMubGVuZ3RoICYmIHF1YWxpZmllZC5sZW5ndGggPCB0aHJlc2hvbGQ7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBhZGRyZXNzZXMubGVuZ3RoICYmIHF1YWxpZmllZC5sZW5ndGggPCB0aHJlc2hvbGQ7IGorKykge1xuICAgICAgICBpZiAoYWRkcmVzc2VzW2pdLnRvU3RyaW5nKCdoZXgnKSA9PT0gdGhpcy5hZGRyZXNzZXNbaV0udG9CdWZmZXIoKS50b1N0cmluZygnaGV4JykpIHtcbiAgICAgICAgICBxdWFsaWZpZWQucHVzaChhZGRyZXNzZXNbal0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHF1YWxpZmllZDtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhIGJhc2UtNTggc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgW1tPdXRwdXRdXS5cbiAgICovXG4gIGZyb21CdWZmZXIoYnl0ZXM6QnVmZmVyLCBvZmZzZXQ6bnVtYmVyID0gMCk6bnVtYmVyIHtcbiAgICB0aGlzLmxvY2t0aW1lID0gYmludG9vbHMuY29weUZyb20oYnl0ZXMsIG9mZnNldCwgb2Zmc2V0ICsgOCk7XG4gICAgb2Zmc2V0ICs9IDg7XG4gICAgdGhpcy50aHJlc2hvbGQgPSBiaW50b29scy5jb3B5RnJvbShieXRlcywgb2Zmc2V0LCBvZmZzZXQgKyA0KTtcbiAgICBvZmZzZXQgKz0gNDtcbiAgICB0aGlzLm51bWFkZHJzID0gYmludG9vbHMuY29weUZyb20oYnl0ZXMsIG9mZnNldCwgb2Zmc2V0ICsgNCk7XG4gICAgb2Zmc2V0ICs9IDQ7XG4gICAgY29uc3QgbnVtYWRkcnM6bnVtYmVyID0gdGhpcy5udW1hZGRycy5yZWFkVUludDMyQkUoMCk7XG4gICAgdGhpcy5hZGRyZXNzZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWFkZHJzOyBpKyspIHtcbiAgICAgIGNvbnN0IGFkZHI6QWRkcmVzcyA9IG5ldyBBZGRyZXNzKCk7XG4gICAgICBvZmZzZXQgPSBhZGRyLmZyb21CdWZmZXIoYnl0ZXMsIG9mZnNldCk7XG4gICAgICB0aGlzLmFkZHJlc3Nlcy5wdXNoKGFkZHIpO1xuICAgIH1cbiAgICB0aGlzLmFkZHJlc3Nlcy5zb3J0KEFkZHJlc3MuY29tcGFyYXRvcigpKTtcbiAgICByZXR1cm4gb2Zmc2V0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGJ1ZmZlciByZXByZXNlbnRpbmcgdGhlIFtbT3V0cHV0XV0gaW5zdGFuY2UuXG4gICAqL1xuICB0b0J1ZmZlcigpOkJ1ZmZlciB7XG4gICAgdGhpcy5hZGRyZXNzZXMuc29ydChBZGRyZXNzLmNvbXBhcmF0b3IoKSk7XG4gICAgdGhpcy5udW1hZGRycy53cml0ZVVJbnQzMkJFKHRoaXMuYWRkcmVzc2VzLmxlbmd0aCwgMCk7XG4gICAgbGV0IGJzaXplOm51bWJlciA9IHRoaXMubG9ja3RpbWUubGVuZ3RoICsgdGhpcy50aHJlc2hvbGQubGVuZ3RoICsgdGhpcy5udW1hZGRycy5sZW5ndGg7XG4gICAgY29uc3QgYmFycjpBcnJheTxCdWZmZXI+ID0gW3RoaXMubG9ja3RpbWUsIHRoaXMudGhyZXNob2xkLCB0aGlzLm51bWFkZHJzXTtcbiAgICBmb3IgKGxldCBpOm51bWJlciA9IDA7IGkgPCB0aGlzLmFkZHJlc3Nlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYjogQnVmZmVyID0gdGhpcy5hZGRyZXNzZXNbaV0udG9CdWZmZXIoKTtcbiAgICAgIGJhcnIucHVzaChiKTtcbiAgICAgIGJzaXplICs9IGIubGVuZ3RoO1xuICAgIH1cbiAgICByZXR1cm4gQnVmZmVyLmNvbmNhdChiYXJyLCBic2l6ZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGJhc2UtNTggc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgW1tPdXRwdXRdXS5cbiAgICovXG4gIHRvU3RyaW5nKCk6c3RyaW5nIHtcbiAgICByZXR1cm4gYmludG9vbHMuYnVmZmVyVG9CNTgodGhpcy50b0J1ZmZlcigpKTtcbiAgfVxuXG4gIHN0YXRpYyBjb21wYXJhdG9yID0gKCk6KGE6T3V0cHV0LCBiOk91dHB1dCkgPT4gKDF8LTF8MCkgPT4gKGE6T3V0cHV0LCBiOk91dHB1dCk6KDF8LTF8MCkgPT4ge1xuICAgIGNvbnN0IGFvdXRpZDpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoNCk7XG4gICAgYW91dGlkLndyaXRlVUludDMyQkUoYS5nZXRPdXRwdXRJRCgpLCAwKTtcbiAgICBjb25zdCBhYnVmZjpCdWZmZXIgPSBhLnRvQnVmZmVyKCk7XG5cbiAgICBjb25zdCBib3V0aWQ6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDQpO1xuICAgIGJvdXRpZC53cml0ZVVJbnQzMkJFKGIuZ2V0T3V0cHV0SUQoKSwgMCk7XG4gICAgY29uc3QgYmJ1ZmY6QnVmZmVyID0gYi50b0J1ZmZlcigpO1xuXG4gICAgY29uc3QgYXNvcnQ6QnVmZmVyID0gQnVmZmVyLmNvbmNhdChbYW91dGlkLCBhYnVmZl0sIGFvdXRpZC5sZW5ndGggKyBhYnVmZi5sZW5ndGgpO1xuICAgIGNvbnN0IGJzb3J0OkJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoW2JvdXRpZCwgYmJ1ZmZdLCBib3V0aWQubGVuZ3RoICsgYmJ1ZmYubGVuZ3RoKTtcbiAgICByZXR1cm4gQnVmZmVyLmNvbXBhcmUoYXNvcnQsIGJzb3J0KSBhcyAoMXwtMXwwKTtcbiAgfTtcblxuICAvKipcbiAgICogQW4gW1tPdXRwdXRdXSBjbGFzcyB3aGljaCBjb250YWlucyBhZGRyZXNzZXMsIGxvY2t0aW1lcywgYW5kIHRocmVzaG9sZHMuXG4gICAqXG4gICAqIEBwYXJhbSBhZGRyZXNzZXMgQW4gYXJyYXkgb2Yge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn1zIHJlcHJlc2VudGluZyBvdXRwdXQgb3duZXIncyBhZGRyZXNzZXNcbiAgICogQHBhcmFtIGxvY2t0aW1lIEEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2JuLmpzL3xCTn0gcmVwcmVzZW50aW5nIHRoZSBsb2NrdGltZVxuICAgKiBAcGFyYW0gdGhyZXNob2xkIEEgbnVtYmVyIHJlcHJlc2VudGluZyB0aGUgdGhlIHRocmVzaG9sZCBudW1iZXIgb2Ygc2lnbmVycyByZXF1aXJlZCB0byBzaWduIHRoZSB0cmFuc2FjdGlvblxuICAgKi9cbiAgY29uc3RydWN0b3IoYWRkcmVzc2VzOkFycmF5PEJ1ZmZlcj4gPSB1bmRlZmluZWQsIGxvY2t0aW1lOkJOID0gdW5kZWZpbmVkLCB0aHJlc2hvbGQ6bnVtYmVyID0gdW5kZWZpbmVkKSB7XG4gICAgc3VwZXIoKTtcbiAgICBpZih0eXBlb2YgYWRkcmVzc2VzICE9PSBcInVuZGVmaW5lZFwiICYmIGFkZHJlc3Nlcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGFkZHJzOkFycmF5PEFkZHJlc3M+ID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFkZHJlc3Nlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBhZGRyc1tpXSA9IG5ldyBBZGRyZXNzKCk7XG4gICAgICAgIGFkZHJzW2ldLmZyb21CdWZmZXIoYWRkcmVzc2VzW2ldKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuYWRkcmVzc2VzID0gYWRkcnM7XG4gICAgICB0aGlzLmFkZHJlc3Nlcy5zb3J0KEFkZHJlc3MuY29tcGFyYXRvcigpKTtcbiAgICAgIHRoaXMubnVtYWRkcnMud3JpdGVVSW50MzJCRSh0aGlzLmFkZHJlc3Nlcy5sZW5ndGgsIDApO1xuICAgIH1cbiAgICBpZih0eXBlb2YgdGhyZXNob2xkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMudGhyZXNob2xkLndyaXRlVUludDMyQkUoKHRocmVzaG9sZCB8fCAxKSwgMCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbG9ja3RpbWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRoaXMubG9ja3RpbWUgPSBiaW50b29scy5mcm9tQk5Ub0J1ZmZlcihsb2NrdGltZSwgOCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBPdXRwdXQgZXh0ZW5kcyBPdXRwdXRPd25lcnMge1xuICBwcm90ZWN0ZWQgX3R5cGVOYW1lID0gXCJPdXRwdXRcIjtcbiAgcHJvdGVjdGVkIF90eXBlSUQgPSB1bmRlZmluZWQ7XG4gIFxuICAvL3NlcmlhbGl6ZSBhbmQgZGVzZXJpYWxpemUgYm90aCBhcmUgaW5oZXJpdGVkXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG91dHB1dElEIGZvciB0aGUgb3V0cHV0IHdoaWNoIHRlbGxzIHBhcnNlcnMgd2hhdCB0eXBlIGl0IGlzXG4gICAqL1xuICBhYnN0cmFjdCBnZXRPdXRwdXRJRCgpOm51bWJlcjtcblxuICBhYnN0cmFjdCBjbG9uZSgpOnRoaXM7XG5cbiAgYWJzdHJhY3QgY3JlYXRlKC4uLmFyZ3M6YW55W10pOnRoaXM7XG5cbiAgYWJzdHJhY3Qgc2VsZWN0KGlkOm51bWJlciwgLi4uYXJnczphbnlbXSk6T3V0cHV0O1xuXG4gIC8qKlxuICAgKiBcbiAgICogQHBhcmFtIGFzc2V0SUQgQW4gYXNzZXRJRCB3aGljaCBpcyB3cmFwcGVkIGFyb3VuZCB0aGUgQnVmZmVyIG9mIHRoZSBPdXRwdXRcbiAgICogXG4gICAqIE11c3QgYmUgaW1wbGVtZW50ZWQgdG8gdXNlIHRoZSBhcHByb3ByaWF0ZSBUcmFuc2ZlcmFibGVPdXRwdXQgZm9yIHRoZSBWTS5cbiAgICovXG4gIGFic3RyYWN0IG1ha2VUcmFuc2ZlcmFibGUoYXNzZXRJRDpCdWZmZXIpOlN0YW5kYXJkVHJhbnNmZXJhYmxlT3V0cHV0O1xufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgU3RhbmRhcmRQYXJzZWFibGVPdXRwdXQgZXh0ZW5kcyBTZXJpYWxpemFibGUge1xuICBwcm90ZWN0ZWQgX3R5cGVOYW1lID0gXCJTdGFuZGFyZFBhcnNlYWJsZU91dHB1dFwiO1xuICBwcm90ZWN0ZWQgX3R5cGVJRCA9IHVuZGVmaW5lZDtcblxuICBzZXJpYWxpemUoZW5jb2Rpbmc6U2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIik6b2JqZWN0IHtcbiAgICBsZXQgZmllbGRzOm9iamVjdCA9IHN1cGVyLnNlcmlhbGl6ZShlbmNvZGluZyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmZpZWxkcyxcbiAgICAgIFwib3V0cHV0XCI6IHRoaXMub3V0cHV0LnNlcmlhbGl6ZShlbmNvZGluZylcbiAgICB9XG4gIH07XG5cbiAgcHJvdGVjdGVkIG91dHB1dDpPdXRwdXQ7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBmdW5jdGlvbiB1c2VkIHRvIHNvcnQgYW4gYXJyYXkgb2YgW1tQYXJzZWFibGVPdXRwdXRdXXNcbiAgICovXG4gIHN0YXRpYyBjb21wYXJhdG9yID0gKCk6KGE6U3RhbmRhcmRQYXJzZWFibGVPdXRwdXQsIGI6U3RhbmRhcmRQYXJzZWFibGVPdXRwdXQpID0+ICgxfC0xfDApID0+IChhOlN0YW5kYXJkUGFyc2VhYmxlT3V0cHV0LCBiOlN0YW5kYXJkUGFyc2VhYmxlT3V0cHV0KTooMXwtMXwwKSA9PiB7XG4gICAgY29uc3Qgc29ydGEgPSBhLnRvQnVmZmVyKCk7XG4gICAgY29uc3Qgc29ydGIgPSBiLnRvQnVmZmVyKCk7XG4gICAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHNvcnRhLCBzb3J0YikgYXMgKDF8LTF8MCk7XG4gIH07XG5cbiAgZ2V0T3V0cHV0ID0gKCk6T3V0cHV0ID0+IHRoaXMub3V0cHV0O1xuXG4gIC8vIG11c3QgYmUgaW1wbGVtZW50ZWQgdG8gc2VsZWN0IG91dHB1dCB0eXBlcyBmb3IgdGhlIFZNIGluIHF1ZXN0aW9uXG4gIGFic3RyYWN0IGZyb21CdWZmZXIoYnl0ZXM6QnVmZmVyLCBvZmZzZXQ/Om51bWJlcik6bnVtYmVyOyBcblxuICB0b0J1ZmZlcigpOkJ1ZmZlciB7XG4gICAgY29uc3Qgb3V0YnVmZjpCdWZmZXIgPSB0aGlzLm91dHB1dC50b0J1ZmZlcigpO1xuICAgIGNvbnN0IG91dGlkOkJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyg0KTtcbiAgICBvdXRpZC53cml0ZVVJbnQzMkJFKHRoaXMub3V0cHV0LmdldE91dHB1dElEKCksIDApO1xuICAgIGNvbnN0IGJhcnI6QXJyYXk8QnVmZmVyPiA9IFtvdXRpZCwgb3V0YnVmZl07XG4gICAgcmV0dXJuIEJ1ZmZlci5jb25jYXQoYmFyciwgb3V0aWQubGVuZ3RoICsgb3V0YnVmZi5sZW5ndGgpO1xuICB9XG4gIFxuICAvKipcbiAgICogQ2xhc3MgcmVwcmVzZW50aW5nIGFuIFtbUGFyc2VhYmxlT3V0cHV0XV0gZm9yIGEgdHJhbnNhY3Rpb24uXG4gICAqIFxuICAgKiBAcGFyYW0gb3V0cHV0IEEgbnVtYmVyIHJlcHJlc2VudGluZyB0aGUgSW5wdXRJRCBvZiB0aGUgW1tQYXJzZWFibGVPdXRwdXRdXVxuICAgKi9cbiAgY29uc3RydWN0b3Iob3V0cHV0Ok91dHB1dCA9IHVuZGVmaW5lZCkge1xuICAgIHN1cGVyKCk7XG4gICAgaWYgKG91dHB1dCBpbnN0YW5jZW9mIE91dHB1dCkge1xuICAgICAgdGhpcy5vdXRwdXQgPSBvdXRwdXQ7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTdGFuZGFyZFRyYW5zZmVyYWJsZU91dHB1dCBleHRlbmRzIFN0YW5kYXJkUGFyc2VhYmxlT3V0cHV0IHtcbiAgcHJvdGVjdGVkIF90eXBlTmFtZSA9IFwiU3RhbmRhcmRUcmFuc2ZlcmFibGVPdXRwdXRcIjtcbiAgcHJvdGVjdGVkIF90eXBlSUQgPSB1bmRlZmluZWQ7XG5cbiAgc2VyaWFsaXplKGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpOm9iamVjdCB7XG4gICAgbGV0IGZpZWxkczpvYmplY3QgPSBzdXBlci5zZXJpYWxpemUoZW5jb2RpbmcpO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5maWVsZHMsXG4gICAgICBcImFzc2V0SURcIjogc2VyaWFsaXplci5lbmNvZGVyKHRoaXMuYXNzZXRJRCwgZW5jb2RpbmcsIFwiQnVmZmVyXCIsIFwiY2I1OFwiKVxuICAgIH1cbiAgfTtcbiAgZGVzZXJpYWxpemUoZmllbGRzOm9iamVjdCwgZW5jb2Rpbmc6U2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIikge1xuICAgIHN1cGVyLmRlc2VyaWFsaXplKGZpZWxkcywgZW5jb2RpbmcpO1xuICAgIHRoaXMuYXNzZXRJRCA9IHNlcmlhbGl6ZXIuZGVjb2RlcihmaWVsZHNbXCJhc3NldElEXCJdLCBlbmNvZGluZywgXCJjYjU4XCIsIFwiQnVmZmVyXCIsIDMyKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhc3NldElEOkJ1ZmZlciA9IHVuZGVmaW5lZDtcblxuICBnZXRBc3NldElEID0gKCk6QnVmZmVyID0+IHRoaXMuYXNzZXRJRDtcblxuICAvLyBtdXN0IGJlIGltcGxlbWVudGVkIHRvIHNlbGVjdCBvdXRwdXQgdHlwZXMgZm9yIHRoZSBWTSBpbiBxdWVzdGlvblxuICBhYnN0cmFjdCBmcm9tQnVmZmVyKGJ5dGVzOkJ1ZmZlciwgb2Zmc2V0PzpudW1iZXIpOm51bWJlcjsgXG5cbiAgdG9CdWZmZXIoKTpCdWZmZXIge1xuICAgIGNvbnN0IHBhcnNlYWJsZUJ1ZmY6QnVmZmVyID0gc3VwZXIudG9CdWZmZXIoKTtcbiAgICBjb25zdCBiYXJyOkFycmF5PEJ1ZmZlcj4gPSBbdGhpcy5hc3NldElELCBwYXJzZWFibGVCdWZmXTtcbiAgICByZXR1cm4gQnVmZmVyLmNvbmNhdChiYXJyLCB0aGlzLmFzc2V0SUQubGVuZ3RoICsgcGFyc2VhYmxlQnVmZi5sZW5ndGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsYXNzIHJlcHJlc2VudGluZyBhbiBbW1N0YW5kYXJkVHJhbnNmZXJhYmxlT3V0cHV0XV0gZm9yIGEgdHJhbnNhY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSBhc3NldElEIEEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gcmVwcmVzZW50aW5nIHRoZSBhc3NldElEIG9mIHRoZSBbW091dHB1dF1dXG4gICAqIEBwYXJhbSBvdXRwdXQgQSBudW1iZXIgcmVwcmVzZW50aW5nIHRoZSBJbnB1dElEIG9mIHRoZSBbW1N0YW5kYXJkVHJhbnNmZXJhYmxlT3V0cHV0XV1cbiAgICovXG4gIGNvbnN0cnVjdG9yKGFzc2V0SUQ6QnVmZmVyID0gdW5kZWZpbmVkLCBvdXRwdXQ6T3V0cHV0ID0gdW5kZWZpbmVkKSB7XG4gICAgc3VwZXIob3V0cHV0KTtcbiAgICBpZiAodHlwZW9mIGFzc2V0SUQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmFzc2V0SUQgPSBhc3NldElEO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEFuIFtbT3V0cHV0XV0gY2xhc3Mgd2hpY2ggc3BlY2lmaWVzIGEgdG9rZW4gYW1vdW50IC5cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFN0YW5kYXJkQW1vdW50T3V0cHV0IGV4dGVuZHMgT3V0cHV0IHtcbiAgcHJvdGVjdGVkIF90eXBlTmFtZSA9IFwiU3RhbmRhcmRBbW91bnRPdXRwdXRcIjtcbiAgcHJvdGVjdGVkIF90eXBlSUQgPSB1bmRlZmluZWQ7XG5cbiAgc2VyaWFsaXplKGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpOm9iamVjdCB7XG4gICAgbGV0IGZpZWxkczpvYmplY3QgPSBzdXBlci5zZXJpYWxpemUoZW5jb2RpbmcpO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5maWVsZHMsXG4gICAgICBcImFtb3VudFwiOiBzZXJpYWxpemVyLmVuY29kZXIodGhpcy5hbW91bnQsIGVuY29kaW5nLCBcIkJ1ZmZlclwiLCBcImRlY2ltYWxTdHJpbmdcIiwgOClcbiAgICB9XG4gIH07XG4gIGRlc2VyaWFsaXplKGZpZWxkczpvYmplY3QsIGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICBzdXBlci5kZXNlcmlhbGl6ZShmaWVsZHMsIGVuY29kaW5nKTtcbiAgICB0aGlzLmFtb3VudCA9IHNlcmlhbGl6ZXIuZGVjb2RlcihmaWVsZHNbXCJhbW91bnRcIl0sIGVuY29kaW5nLCBcImRlY2ltYWxTdHJpbmdcIiwgXCJCdWZmZXJcIiwgOCk7XG4gICAgdGhpcy5hbW91bnRWYWx1ZSA9IGJpbnRvb2xzLmZyb21CdWZmZXJUb0JOKHRoaXMuYW1vdW50KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhbW91bnQ6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDgpO1xuICBwcm90ZWN0ZWQgYW1vdW50VmFsdWU6Qk4gPSBuZXcgQk4oMCk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFtb3VudCBhcyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59LlxuICAgKi9cbiAgZ2V0QW1vdW50ID0gKCk6Qk4gPT4gdGhpcy5hbW91bnRWYWx1ZS5jbG9uZSgpO1xuXG4gIC8qKlxuICAgKiBQb3B1YXRlcyB0aGUgaW5zdGFuY2UgZnJvbSBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHJlcHJlc2VudGluZyB0aGUgW1tTdGFuZGFyZEFtb3VudE91dHB1dF1dIGFuZCByZXR1cm5zIHRoZSBzaXplIG9mIHRoZSBvdXRwdXQuXG4gICAqL1xuICBmcm9tQnVmZmVyKG91dGJ1ZmY6QnVmZmVyLCBvZmZzZXQ6bnVtYmVyID0gMCk6bnVtYmVyIHtcbiAgICB0aGlzLmFtb3VudCA9IGJpbnRvb2xzLmNvcHlGcm9tKG91dGJ1ZmYsIG9mZnNldCwgb2Zmc2V0ICsgOCk7XG4gICAgdGhpcy5hbW91bnRWYWx1ZSA9IGJpbnRvb2xzLmZyb21CdWZmZXJUb0JOKHRoaXMuYW1vdW50KTtcbiAgICBvZmZzZXQgKz0gODtcbiAgICByZXR1cm4gc3VwZXIuZnJvbUJ1ZmZlcihvdXRidWZmLCBvZmZzZXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGJ1ZmZlciByZXByZXNlbnRpbmcgdGhlIFtbU3RhbmRhcmRBbW91bnRPdXRwdXRdXSBpbnN0YW5jZS5cbiAgICovXG4gIHRvQnVmZmVyKCk6QnVmZmVyIHtcbiAgICBjb25zdCBzdXBlcmJ1ZmY6QnVmZmVyID0gc3VwZXIudG9CdWZmZXIoKTtcbiAgICBjb25zdCBic2l6ZTpudW1iZXIgPSB0aGlzLmFtb3VudC5sZW5ndGggKyBzdXBlcmJ1ZmYubGVuZ3RoO1xuICAgIHRoaXMubnVtYWRkcnMud3JpdGVVSW50MzJCRSh0aGlzLmFkZHJlc3Nlcy5sZW5ndGgsIDApO1xuICAgIGNvbnN0IGJhcnI6QXJyYXk8QnVmZmVyPiA9IFt0aGlzLmFtb3VudCwgc3VwZXJidWZmXTtcbiAgICByZXR1cm4gQnVmZmVyLmNvbmNhdChiYXJyLCBic2l6ZSk7XG4gIH1cblxuICAvKipcbiAgICogQSBbW1N0YW5kYXJkQW1vdW50T3V0cHV0XV0gY2xhc3Mgd2hpY2ggaXNzdWVzIGEgcGF5bWVudCBvbiBhbiBhc3NldElELlxuICAgKlxuICAgKiBAcGFyYW0gYW1vdW50IEEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2JuLmpzL3xCTn0gcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgaW4gdGhlIG91dHB1dFxuICAgKiBAcGFyYW0gYWRkcmVzc2VzIEFuIGFycmF5IG9mIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9cyByZXByZXNlbnRpbmcgYWRkcmVzc2VzXG4gICAqIEBwYXJhbSBsb2NrdGltZSBBIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59IHJlcHJlc2VudGluZyB0aGUgbG9ja3RpbWVcbiAgICogQHBhcmFtIHRocmVzaG9sZCBBIG51bWJlciByZXByZXNlbnRpbmcgdGhlIHRoZSB0aHJlc2hvbGQgbnVtYmVyIG9mIHNpZ25lcnMgcmVxdWlyZWQgdG8gc2lnbiB0aGUgdHJhbnNhY3Rpb25cbiAgICovXG4gIGNvbnN0cnVjdG9yKGFtb3VudDpCTiA9IHVuZGVmaW5lZCwgYWRkcmVzc2VzOkFycmF5PEJ1ZmZlcj4gPSB1bmRlZmluZWQsIGxvY2t0aW1lOkJOID0gdW5kZWZpbmVkLCB0aHJlc2hvbGQ6bnVtYmVyID0gdW5kZWZpbmVkKSB7XG4gICAgc3VwZXIoYWRkcmVzc2VzLCBsb2NrdGltZSwgdGhyZXNob2xkKTtcbiAgICBpZiAodHlwZW9mIGFtb3VudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy5hbW91bnRWYWx1ZSA9IGFtb3VudC5jbG9uZSgpO1xuICAgICAgdGhpcy5hbW91bnQgPSBiaW50b29scy5mcm9tQk5Ub0J1ZmZlcihhbW91bnQsIDgpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEFuIFtbT3V0cHV0XV0gY2xhc3Mgd2hpY2ggc3BlY2lmaWVzIGFuIE5GVC5cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VORlRPdXRwdXQgZXh0ZW5kcyBPdXRwdXQge1xuICBwcm90ZWN0ZWQgX3R5cGVOYW1lID0gXCJCYXNlTkZUT3V0cHV0XCI7XG4gIHByb3RlY3RlZCBfdHlwZUlEID0gdW5kZWZpbmVkO1xuXG4gIHNlcmlhbGl6ZShlbmNvZGluZzpTZXJpYWxpemVkRW5jb2RpbmcgPSBcImhleFwiKTpvYmplY3Qge1xuICAgIGxldCBmaWVsZHM6b2JqZWN0ID0gc3VwZXIuc2VyaWFsaXplKGVuY29kaW5nKTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uZmllbGRzLFxuICAgICAgXCJncm91cElEXCI6IHNlcmlhbGl6ZXIuZW5jb2Rlcih0aGlzLmdyb3VwSUQsIGVuY29kaW5nLCBcIkJ1ZmZlclwiLCBcImRlY2ltYWxTdHJpbmdcIiwgNClcbiAgICB9XG4gIH07XG4gIGRlc2VyaWFsaXplKGZpZWxkczpvYmplY3QsIGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICBzdXBlci5kZXNlcmlhbGl6ZShmaWVsZHMsIGVuY29kaW5nKTtcbiAgICB0aGlzLmdyb3VwSUQgPSBzZXJpYWxpemVyLmRlY29kZXIoZmllbGRzW1wiZ3JvdXBJRFwiXSwgZW5jb2RpbmcsIFwiZGVjaW1hbFN0cmluZ1wiLCBcIkJ1ZmZlclwiLCA0KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBncm91cElEOkJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyg0KTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZ3JvdXBJRCBhcyBhIG51bWJlci5cbiAgICovXG4gIGdldEdyb3VwSUQgPSAoKTpudW1iZXIgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuZ3JvdXBJRC5yZWFkVUludDMyQkUoMCk7XG4gIH1cbn0iXX0=","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UTXOSet = exports.AssetAmountDestination = exports.UTXO = void 0;\n/**\n * @packageDocumentation\n * @module API-PlatformVM-UTXOs\n */\nconst buffer_1 = require(\"buffer/\");\nconst bintools_1 = __importDefault(require(\"../../utils/bintools\"));\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nconst outputs_1 = require(\"./outputs\");\nconst inputs_1 = require(\"./inputs\");\nconst helperfunctions_1 = require(\"../../utils/helperfunctions\");\nconst utxos_1 = require(\"../../common/utxos\");\nconst constants_1 = require(\"./constants\");\nconst tx_1 = require(\"./tx\");\nconst exporttx_1 = require(\"../platformvm/exporttx\");\nconst constants_2 = require(\"../../utils/constants\");\nconst importtx_1 = require(\"../platformvm/importtx\");\nconst basetx_1 = require(\"../platformvm/basetx\");\nconst assetamount_1 = require(\"../../common/assetamount\");\nconst validationtx_1 = require(\"./validationtx\");\nconst createsubnettx_1 = require(\"./createsubnettx\");\nconst serialization_1 = require(\"../../utils/serialization\");\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\nconst serializer = serialization_1.Serialization.getInstance();\n/**\n * Class for representing a single UTXO.\n */\nclass UTXO extends utxos_1.StandardUTXO {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"UTXO\";\n        this._typeID = undefined;\n    }\n    //serialize is inherited\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.output = outputs_1.SelectOutputClass(fields[\"output\"][\"_typeID\"]);\n        this.output.deserialize(fields[\"output\"], encoding);\n    }\n    fromBuffer(bytes, offset = 0) {\n        this.codecid = bintools.copyFrom(bytes, offset, offset + 2);\n        offset += 2;\n        this.txid = bintools.copyFrom(bytes, offset, offset + 32);\n        offset += 32;\n        this.outputidx = bintools.copyFrom(bytes, offset, offset + 4);\n        offset += 4;\n        this.assetid = bintools.copyFrom(bytes, offset, offset + 32);\n        offset += 32;\n        const outputid = bintools.copyFrom(bytes, offset, offset + 4).readUInt32BE(0);\n        offset += 4;\n        this.output = outputs_1.SelectOutputClass(outputid);\n        return this.output.fromBuffer(bytes, offset);\n    }\n    /**\n     * Takes a base-58 string containing a [[UTXO]], parses it, populates the class, and returns the length of the StandardUTXO in bytes.\n     *\n     * @param serialized A base-58 string containing a raw [[UTXO]]\n     *\n     * @returns The length of the raw [[UTXO]]\n     *\n     * @remarks\n     * unlike most fromStrings, it expects the string to be serialized in cb58 format\n     */\n    fromString(serialized) {\n        /* istanbul ignore next */\n        return this.fromBuffer(bintools.cb58Decode(serialized));\n    }\n    /**\n     * Returns a base-58 representation of the [[UTXO]].\n     *\n     * @remarks\n     * unlike most toStrings, this returns in cb58 serialization format\n     */\n    toString() {\n        /* istanbul ignore next */\n        return bintools.cb58Encode(this.toBuffer());\n    }\n    clone() {\n        const utxo = new UTXO();\n        utxo.fromBuffer(this.toBuffer());\n        return utxo;\n    }\n    create(codecID = constants_1.PlatformVMConstants.LATESTCODEC, txid = undefined, outputidx = undefined, assetid = undefined, output = undefined) {\n        return new UTXO(codecID, txid, outputidx, assetid, output);\n    }\n}\nexports.UTXO = UTXO;\nclass AssetAmountDestination extends assetamount_1.StandardAssetAmountDestination {\n}\nexports.AssetAmountDestination = AssetAmountDestination;\n/**\n * Class representing a set of [[UTXO]]s.\n */\nclass UTXOSet extends utxos_1.StandardUTXOSet {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"UTXOSet\";\n        this._typeID = undefined;\n        this.getConsumableUXTO = (asOf = helperfunctions_1.UnixNow(), stakeable = false) => {\n            return this.getAllUTXOs().filter((utxo) => {\n                if (stakeable) {\n                    // stakeable transactions can consume any UTXO.\n                    return true;\n                }\n                const output = utxo.getOutput();\n                if (!(output instanceof outputs_1.StakeableLockOut)) {\n                    // non-stakeable transactions can consume any UTXO that isn't locked.\n                    return true;\n                }\n                const stakeableOutput = output;\n                if (stakeableOutput.getStakeableLocktime().lt(asOf)) {\n                    // If the stakeable outputs locktime has ended, then this UTXO can still\n                    // be consumed by a non-stakeable transaction.\n                    return true;\n                }\n                // This output is locked and can't be consumed by a non-stakeable\n                // transaction.\n                return false;\n            });\n        };\n        this.getMinimumSpendable = (aad, asOf = helperfunctions_1.UnixNow(), locktime = new bn_js_1.default(0), threshold = 1, stakeable = false) => {\n            let utxoArray = this.getConsumableUXTO(asOf, stakeable);\n            let tmpUTXOArray = [];\n            if (stakeable) {\n                // If this is a stakeable transaction then have StakeableLockOut come before SECPTransferOutput\n                // so that users first stake locked tokens before staking unlocked tokens\n                utxoArray.forEach((utxo) => {\n                    // StakeableLockOuts\n                    if (utxo.getOutput().getTypeID() === 22) {\n                        tmpUTXOArray.push(utxo);\n                    }\n                });\n                // Sort the StakeableLockOuts by StakeableLocktime so that the greatest StakeableLocktime are spent first\n                tmpUTXOArray.sort((a, b) => {\n                    let stakeableLockOut1 = a.getOutput();\n                    let stakeableLockOut2 = b.getOutput();\n                    return stakeableLockOut2.getStakeableLocktime().toNumber() - stakeableLockOut1.getStakeableLocktime().toNumber();\n                });\n                utxoArray.forEach((utxo) => {\n                    // SECPTransferOutputs\n                    if (utxo.getOutput().getTypeID() === 7) {\n                        tmpUTXOArray.push(utxo);\n                    }\n                });\n                utxoArray = tmpUTXOArray;\n            }\n            // outs is a map from assetID to a tuple of (lockedStakeable, unlocked)\n            // which are arrays of outputs.\n            const outs = {};\n            // We only need to iterate over UTXOs until we have spent sufficient funds\n            // to met the requested amounts.\n            utxoArray.forEach((utxo, index) => {\n                const assetID = utxo.getAssetID();\n                const assetKey = assetID.toString(\"hex\");\n                const fromAddresses = aad.getSenders();\n                const output = utxo.getOutput();\n                if (!(output instanceof outputs_1.AmountOutput) || !aad.assetExists(assetKey) || !output.meetsThreshold(fromAddresses, asOf)) {\n                    // We should only try to spend fungible assets.\n                    // We should only spend {{ assetKey }}.\n                    // We need to be able to spend the output.\n                    return;\n                }\n                const assetAmount = aad.getAssetAmount(assetKey);\n                if (assetAmount.isFinished()) {\n                    // We've already spent the needed UTXOs for this assetID.\n                    return;\n                }\n                if (!(assetKey in outs)) {\n                    // If this is the first time spending this assetID, we need to\n                    // initialize the outs object correctly.\n                    outs[assetKey] = {\n                        lockedStakeable: [],\n                        unlocked: [],\n                    };\n                }\n                const amountOutput = output;\n                // amount is the amount of funds available from this UTXO.\n                const amount = amountOutput.getAmount();\n                // Set up the SECP input with the same amount as the output.\n                let input = new inputs_1.SECPTransferInput(amount);\n                let locked = false;\n                if (amountOutput instanceof outputs_1.StakeableLockOut) {\n                    const stakeableOutput = amountOutput;\n                    const stakeableLocktime = stakeableOutput.getStakeableLocktime();\n                    if (stakeableLocktime.gt(asOf)) {\n                        // Add a new input and mark it as being locked.\n                        input = new inputs_1.StakeableLockIn(amount, stakeableLocktime, new inputs_1.ParseableInput(input));\n                        // Mark this UTXO as having been re-locked.\n                        locked = true;\n                    }\n                }\n                assetAmount.spendAmount(amount, locked);\n                if (locked) {\n                    // Track the UTXO as locked.\n                    outs[assetKey].lockedStakeable.push(amountOutput);\n                }\n                else {\n                    // Track the UTXO as unlocked.\n                    outs[assetKey].unlocked.push(amountOutput);\n                }\n                // Get the indices of the outputs that should be used to authorize the\n                // spending of this input.\n                // TODO: getSpenders should return an array of indices rather than an\n                // array of addresses.\n                const spenders = amountOutput.getSpenders(fromAddresses, asOf);\n                spenders.forEach((spender) => {\n                    const idx = amountOutput.getAddressIdx(spender);\n                    if (idx === -1) {\n                        // This should never happen, which is why the error is thrown rather\n                        // than being returned. If this were to ever happen this would be an\n                        // error in the internal logic rather having called this function with\n                        // invalid arguments.\n                        /* istanbul ignore next */\n                        throw new Error('Error - UTXOSet.getMinimumSpendable: no such '\n                            + `address in output: ${spender}`);\n                    }\n                    input.addSignatureIdx(idx, spender);\n                });\n                const txID = utxo.getTxID();\n                const outputIdx = utxo.getOutputIdx();\n                const transferInput = new inputs_1.TransferableInput(txID, outputIdx, assetID, input);\n                aad.addInput(transferInput);\n            });\n            if (!aad.canComplete()) {\n                // After running through all the UTXOs, we still weren't able to get all\n                // the necessary funds, so this transaction can't be made.\n                return new Error('Error - UTXOSet.getMinimumSpendable: insufficient '\n                    + 'funds to create the transaction');\n            }\n            // TODO: We should separate the above functionality into a single function\n            // that just selects the UTXOs to consume.\n            const zero = new bn_js_1.default(0);\n            // assetAmounts is an array of asset descriptions and how much is left to\n            // spend for them.\n            const assetAmounts = aad.getAmounts();\n            assetAmounts.forEach((assetAmount) => {\n                // change is the amount that should be returned back to the source of the\n                // funds.\n                const change = assetAmount.getChange();\n                // isStakeableLockChange is if the change is locked or not.\n                const isStakeableLockChange = assetAmount.getStakeableLockChange();\n                // lockedChange is the amount of locked change that should be returned to\n                // the sender\n                const lockedChange = isStakeableLockChange ? change : zero.clone();\n                const assetID = assetAmount.getAssetID();\n                const assetKey = assetAmount.getAssetIDString();\n                const lockedOutputs = outs[assetKey].lockedStakeable;\n                lockedOutputs.forEach((lockedOutput, i) => {\n                    const stakeableLocktime = lockedOutput.getStakeableLocktime();\n                    const parseableOutput = lockedOutput.getTransferableOutput();\n                    // We know that parseableOutput contains an AmountOutput because the\n                    // first loop filters for fungible assets.\n                    const output = parseableOutput.getOutput();\n                    let outputAmountRemaining = output.getAmount();\n                    // The only output that could generate change is the last output.\n                    // Otherwise, any further UTXOs wouldn't have needed to be spent.\n                    if (i == lockedOutputs.length - 1 && lockedChange.gt(zero)) {\n                        // update outputAmountRemaining to no longer hold the change that we\n                        // are returning.\n                        outputAmountRemaining = outputAmountRemaining.sub(lockedChange);\n                        // Create the inner output.\n                        const newChangeOutput = outputs_1.SelectOutputClass(output.getOutputID(), lockedChange, output.getAddresses(), output.getLocktime(), output.getThreshold());\n                        // Wrap the inner output in the StakeableLockOut wrapper.\n                        let newLockedChangeOutput = outputs_1.SelectOutputClass(lockedOutput.getOutputID(), lockedChange, output.getAddresses(), output.getLocktime(), output.getThreshold(), stakeableLocktime, new outputs_1.ParseableOutput(newChangeOutput));\n                        const transferOutput = new outputs_1.TransferableOutput(assetID, newLockedChangeOutput);\n                        aad.addChange(transferOutput);\n                    }\n                    // We know that outputAmountRemaining > 0. Otherwise, we would never\n                    // have consumed this UTXO, as it would be only change.\n                    // Create the inner output.\n                    const newOutput = outputs_1.SelectOutputClass(output.getOutputID(), outputAmountRemaining, output.getAddresses(), output.getLocktime(), output.getThreshold());\n                    // Wrap the inner output in the StakeableLockOut wrapper.\n                    const newLockedOutput = outputs_1.SelectOutputClass(lockedOutput.getOutputID(), outputAmountRemaining, output.getAddresses(), output.getLocktime(), output.getThreshold(), stakeableLocktime, new outputs_1.ParseableOutput(newOutput));\n                    const transferOutput = new outputs_1.TransferableOutput(assetID, newLockedOutput);\n                    aad.addOutput(transferOutput);\n                });\n                // unlockedChange is the amount of unlocked change that should be returned\n                // to the sender\n                const unlockedChange = isStakeableLockChange ? zero.clone() : change;\n                if (unlockedChange.gt(zero)) {\n                    const newChangeOutput = new outputs_1.SECPTransferOutput(unlockedChange, aad.getChangeAddresses(), zero.clone(), // make sure that we don't lock the change output.\n                    1);\n                    const transferOutput = new outputs_1.TransferableOutput(assetID, newChangeOutput);\n                    aad.addChange(transferOutput);\n                }\n                // totalAmountSpent is the total amount of tokens consumed.\n                const totalAmountSpent = assetAmount.getSpent();\n                // stakeableLockedAmount is the total amount of locked tokens consumed.\n                const stakeableLockedAmount = assetAmount.getStakeableLockSpent();\n                // totalUnlockedSpent is the total amount of unlocked tokens consumed.\n                const totalUnlockedSpent = totalAmountSpent.sub(stakeableLockedAmount);\n                // amountBurnt is the amount of unlocked tokens that must be burn.\n                const amountBurnt = assetAmount.getBurn();\n                // totalUnlockedAvailable is the total amount of unlocked tokens available\n                // to be produced.\n                const totalUnlockedAvailable = totalUnlockedSpent.sub(amountBurnt);\n                // unlockedAmount is the amount of unlocked tokens that should be sent.\n                const unlockedAmount = totalUnlockedAvailable.sub(unlockedChange);\n                if (unlockedAmount.gt(zero)) {\n                    const newOutput = new outputs_1.SECPTransferOutput(unlockedAmount, aad.getDestinations(), locktime, threshold);\n                    const transferOutput = new outputs_1.TransferableOutput(assetID, newOutput);\n                    aad.addOutput(transferOutput);\n                }\n            });\n            return undefined;\n        };\n        /**\n         * Creates an [[UnsignedTx]] wrapping a [[BaseTx]]. For more granular control, you may create your own\n         * [[UnsignedTx]] wrapping a [[BaseTx]] manually (with their corresponding [[TransferableInput]]s and [[TransferableOutput]]s).\n         *\n         * @param networkid The number representing NetworkID of the node\n         * @param blockchainid The {@link https://github.com/feross/buffer|Buffer} representing the BlockchainID for the transaction\n         * @param amount The amount of the asset to be spent in its smallest denomination, represented as {@link https://github.com/indutny/bn.js/|BN}.\n         * @param assetID {@link https://github.com/feross/buffer|Buffer} of the asset ID for the UTXO\n         * @param toAddresses The addresses to send the funds\n         * @param fromAddresses The addresses being used to send the funds from the UTXOs {@link https://github.com/feross/buffer|Buffer}\n         * @param changeAddresses Optional. The addresses that can spend the change remaining from the spent UTXOs. Default: toAddresses\n         * @param fee Optional. The amount of fees to burn in its smallest denomination, represented as {@link https://github.com/indutny/bn.js/|BN}\n         * @param feeAssetID Optional. The assetID of the fees being burned. Default: assetID\n         * @param memo Optional. Contains arbitrary data, up to 256 bytes\n         * @param asOf Optional. The timestamp to verify the transaction against as a {@link https://github.com/indutny/bn.js/|BN}\n         * @param locktime Optional. The locktime field created in the resulting outputs\n         * @param threshold Optional. The number of signatures required to spend the funds in the resultant UTXO\n         *\n         * @returns An unsigned transaction created from the passed in parameters.\n         *\n         */\n        this.buildBaseTx = (networkid, blockchainid, amount, assetID, toAddresses, fromAddresses, changeAddresses = undefined, fee = undefined, feeAssetID = undefined, memo = undefined, asOf = helperfunctions_1.UnixNow(), locktime = new bn_js_1.default(0), threshold = 1) => {\n            if (threshold > toAddresses.length) {\n                /* istanbul ignore next */\n                throw new Error(`Error - UTXOSet.buildBaseTx: threshold is greater than number of addresses`);\n            }\n            if (typeof changeAddresses === \"undefined\") {\n                changeAddresses = toAddresses;\n            }\n            if (typeof feeAssetID === \"undefined\") {\n                feeAssetID = assetID;\n            }\n            const zero = new bn_js_1.default(0);\n            if (amount.eq(zero)) {\n                return undefined;\n            }\n            const aad = new AssetAmountDestination(toAddresses, fromAddresses, changeAddresses);\n            if (assetID.toString(\"hex\") === feeAssetID.toString(\"hex\")) {\n                aad.addAssetAmount(assetID, amount, fee);\n            }\n            else {\n                aad.addAssetAmount(assetID, amount, zero);\n                if (this._feeCheck(fee, feeAssetID)) {\n                    aad.addAssetAmount(feeAssetID, zero, fee);\n                }\n            }\n            let ins = [];\n            let outs = [];\n            const minSpendableErr = this.getMinimumSpendable(aad, asOf, locktime, threshold);\n            if (typeof minSpendableErr === \"undefined\") {\n                ins = aad.getInputs();\n                outs = aad.getAllOutputs();\n            }\n            else {\n                throw minSpendableErr;\n            }\n            const baseTx = new basetx_1.BaseTx(networkid, blockchainid, outs, ins, memo);\n            return new tx_1.UnsignedTx(baseTx);\n        };\n        /**\n          * Creates an unsigned ImportTx transaction.\n          *\n          * @param networkid The number representing NetworkID of the node\n          * @param blockchainid The {@link https://github.com/feross/buffer|Buffer} representing the BlockchainID for the transaction\n          * @param toAddresses The addresses to send the funds\n          * @param fromAddresses The addresses being used to send the funds from the UTXOs {@link https://github.com/feross/buffer|Buffer}\n          * @param changeAddresses Optional. The addresses that can spend the change remaining from the spent UTXOs. Default: toAddresses\n          * @param importIns An array of [[TransferableInput]]s being imported\n          * @param sourceChain A {@link https://github.com/feross/buffer|Buffer} for the chainid where the imports are coming from.\n          * @param fee Optional. The amount of fees to burn in its smallest denomination, represented as {@link https://github.com/indutny/bn.js/|BN}. Fee will come from the inputs first, if they can.\n          * @param feeAssetID Optional. The assetID of the fees being burned.\n          * @param memo Optional contains arbitrary bytes, up to 256 bytes\n          * @param asOf Optional. The timestamp to verify the transaction against as a {@link https://github.com/indutny/bn.js/|BN}\n          * @param locktime Optional. The locktime field created in the resulting outputs\n          * @param threshold Optional. The number of signatures required to spend the funds in the resultant UTXO\n          * @returns An unsigned transaction created from the passed in parameters.\n          *\n          */\n        this.buildImportTx = (networkid, blockchainid, toAddresses, fromAddresses, changeAddresses, atomics, sourceChain = undefined, fee = undefined, feeAssetID = undefined, memo = undefined, asOf = helperfunctions_1.UnixNow(), locktime = new bn_js_1.default(0), threshold = 1) => {\n            const zero = new bn_js_1.default(0);\n            let ins = [];\n            let outs = [];\n            if (typeof fee === \"undefined\") {\n                fee = zero.clone();\n            }\n            const importIns = [];\n            let feepaid = new bn_js_1.default(0);\n            let feeAssetStr = feeAssetID.toString(\"hex\");\n            for (let i = 0; i < atomics.length; i++) {\n                const utxo = atomics[i];\n                const assetID = utxo.getAssetID();\n                const output = utxo.getOutput();\n                let amt = output.getAmount().clone();\n                let infeeamount = amt.clone();\n                let assetStr = assetID.toString(\"hex\");\n                if (typeof feeAssetID !== \"undefined\" &&\n                    fee.gt(zero) &&\n                    feepaid.lt(fee) &&\n                    assetStr === feeAssetStr) {\n                    feepaid = feepaid.add(infeeamount);\n                    if (feepaid.gte(fee)) {\n                        infeeamount = feepaid.sub(fee);\n                        feepaid = fee.clone();\n                    }\n                    else {\n                        infeeamount = zero.clone();\n                    }\n                }\n                const txid = utxo.getTxID();\n                const outputidx = utxo.getOutputIdx();\n                const input = new inputs_1.SECPTransferInput(amt);\n                const xferin = new inputs_1.TransferableInput(txid, outputidx, assetID, input);\n                const from = output.getAddresses();\n                const spenders = output.getSpenders(from, asOf);\n                for (let j = 0; j < spenders.length; j++) {\n                    const idx = output.getAddressIdx(spenders[j]);\n                    if (idx === -1) {\n                        /* istanbul ignore next */\n                        throw new Error('Error - UTXOSet.buildImportTx: no such '\n                            + `address in output: ${spenders[j]}`);\n                    }\n                    xferin.getInput().addSignatureIdx(idx, spenders[j]);\n                }\n                importIns.push(xferin);\n                //add extra outputs for each amount (calculated from the imported inputs), minus fees\n                if (infeeamount.gt(zero)) {\n                    const spendout = outputs_1.SelectOutputClass(output.getOutputID(), infeeamount, toAddresses, locktime, threshold);\n                    const xferout = new outputs_1.TransferableOutput(assetID, spendout);\n                    outs.push(xferout);\n                }\n            }\n            // get remaining fees from the provided addresses\n            let feeRemaining = fee.sub(feepaid);\n            if (feeRemaining.gt(zero) && this._feeCheck(feeRemaining, feeAssetID)) {\n                const aad = new AssetAmountDestination(toAddresses, fromAddresses, changeAddresses);\n                aad.addAssetAmount(feeAssetID, zero, feeRemaining);\n                const minSpendableErr = this.getMinimumSpendable(aad, asOf, locktime, threshold);\n                if (typeof minSpendableErr === \"undefined\") {\n                    ins = aad.getInputs();\n                    outs = aad.getAllOutputs();\n                }\n                else {\n                    throw minSpendableErr;\n                }\n            }\n            const importTx = new importtx_1.ImportTx(networkid, blockchainid, outs, ins, memo, sourceChain, importIns);\n            return new tx_1.UnsignedTx(importTx);\n        };\n        /**\n          * Creates an unsigned ExportTx transaction.\n          *\n          * @param networkid The number representing NetworkID of the node\n          * @param blockchainid The {@link https://github.com/feross/buffer|Buffer} representing the BlockchainID for the transaction\n          * @param amount The amount being exported as a {@link https://github.com/indutny/bn.js/|BN}\n          * @param avaxAssetID {@link https://github.com/feross/buffer|Buffer} of the asset ID for AVAX\n          * @param toAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} who recieves the AVAX\n          * @param fromAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} who owns the AVAX\n          * @param changeAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} who gets the change leftover of the AVAX\n          * @param destinationChain Optional. A {@link https://github.com/feross/buffer|Buffer} for the chainid where to send the asset.\n          * @param fee Optional. The amount of fees to burn in its smallest denomination, represented as {@link https://github.com/indutny/bn.js/|BN}\n          * @param feeAssetID Optional. The assetID of the fees being burned.\n          * @param memo Optional contains arbitrary bytes, up to 256 bytes\n          * @param asOf Optional. The timestamp to verify the transaction against as a {@link https://github.com/indutny/bn.js/|BN}\n          * @param locktime Optional. The locktime field created in the resulting outputs\n          * @param threshold Optional. The number of signatures required to spend the funds in the resultant UTXO\n          *\n          * @returns An unsigned transaction created from the passed in parameters.\n          *\n          */\n        this.buildExportTx = (networkid, blockchainid, amount, avaxAssetID, // TODO: rename this to amountAssetID\n        toAddresses, fromAddresses, changeAddresses = undefined, destinationChain = undefined, fee = undefined, feeAssetID = undefined, memo = undefined, asOf = helperfunctions_1.UnixNow(), locktime = new bn_js_1.default(0), threshold = 1) => {\n            let ins = [];\n            let outs = [];\n            let exportouts = [];\n            if (typeof changeAddresses === \"undefined\") {\n                changeAddresses = toAddresses;\n            }\n            const zero = new bn_js_1.default(0);\n            if (amount.eq(zero)) {\n                return undefined;\n            }\n            if (typeof feeAssetID === \"undefined\") {\n                feeAssetID = avaxAssetID;\n            }\n            else if (feeAssetID.toString(\"hex\") !== avaxAssetID.toString(\"hex\")) {\n                /* istanbul ignore next */\n                throw new Error('Error - UTXOSet.buildExportTx: '\n                    + `feeAssetID must match avaxAssetID`);\n            }\n            if (typeof destinationChain === \"undefined\") {\n                destinationChain = bintools.cb58Decode(constants_2.Defaults.network[networkid].X[\"blockchainID\"]);\n            }\n            const aad = new AssetAmountDestination(toAddresses, fromAddresses, changeAddresses);\n            if (avaxAssetID.toString(\"hex\") === feeAssetID.toString(\"hex\")) {\n                aad.addAssetAmount(avaxAssetID, amount, fee);\n            }\n            else {\n                aad.addAssetAmount(avaxAssetID, amount, zero);\n                if (this._feeCheck(fee, feeAssetID)) {\n                    aad.addAssetAmount(feeAssetID, zero, fee);\n                }\n            }\n            const minSpendableErr = this.getMinimumSpendable(aad, asOf, locktime, threshold);\n            if (typeof minSpendableErr === \"undefined\") {\n                ins = aad.getInputs();\n                outs = aad.getChangeOutputs();\n                exportouts = aad.getOutputs();\n            }\n            else {\n                throw minSpendableErr;\n            }\n            const exportTx = new exporttx_1.ExportTx(networkid, blockchainid, outs, ins, memo, destinationChain, exportouts);\n            return new tx_1.UnsignedTx(exportTx);\n        };\n        /**\n        * Class representing an unsigned [[AddSubnetValidatorTx]] transaction.\n        *\n        * @param networkid Networkid, [[DefaultNetworkID]]\n        * @param blockchainid Blockchainid, default undefined\n        * @param fromAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} who pays the fees in AVAX\n        * @param changeAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} who gets the change leftover from the fee payment\n        * @param nodeID The node ID of the validator being added.\n        * @param startTime The Unix time when the validator starts validating the Primary Network.\n        * @param endTime The Unix time when the validator stops validating the Primary Network (and staked AVAX is returned).\n        * @param weight The amount of weight for this subnet validator.\n        * @param fee Optional. The amount of fees to burn in its smallest denomination, represented as {@link https://github.com/indutny/bn.js/|BN}\n        * @param feeAssetID Optional. The assetID of the fees being burned.\n        * @param memo Optional contains arbitrary bytes, up to 256 bytes\n        * @param asOf Optional. The timestamp to verify the transaction against as a {@link https://github.com/indutny/bn.js/|BN}\n        * @param locktime Optional. The locktime field created in the resulting outputs\n        * @param threshold Optional. The number of signatures required to spend the funds in the resultant UTXO\n        *\n        * @returns An unsigned transaction created from the passed in parameters.\n        */\n        /* must implement later once the transaction format signing process is clearer\n        buildAddSubnetValidatorTx = (\n          networkid:number = DefaultNetworkID,\n          blockchainid:Buffer,\n          fromAddresses:Array<Buffer>,\n          changeAddresses:Array<Buffer>,\n          nodeID:Buffer,\n          startTime:BN,\n          endTime:BN,\n          weight:BN,\n          fee:BN = undefined,\n          feeAssetID:Buffer = undefined,\n          memo:Buffer = undefined,\n          asOf:BN = UnixNow()\n        ):UnsignedTx => {\n          let ins:Array<TransferableInput> = [];\n          let outs:Array<TransferableOutput> = [];\n          //let stakeOuts:Array<TransferableOutput> = [];\n          \n          const zero:BN = new BN(0);\n          const now:BN = UnixNow();\n          if (startTime.lt(now) || endTime.lte(startTime)) {\n            throw new Error(\"UTXOSet.buildAddSubnetValidatorTx -- startTime must be in the future and endTime must come after startTime\");\n          }\n         \n          // Not implemented: Fees can be paid from importIns\n          if(this._feeCheck(fee, feeAssetID)) {\n            const aad:AssetAmountDestination = new AssetAmountDestination(fromAddresses, fromAddresses, changeAddresses);\n            aad.addAssetAmount(feeAssetID, zero, fee);\n            const success:Error = this.getMinimumSpendable(aad, asOf);\n            if(typeof success === \"undefined\") {\n              ins = aad.getInputs();\n              outs = aad.getAllOutputs();\n            } else {\n              throw success;\n            }\n          }\n         \n          const UTx:AddSubnetValidatorTx = new AddSubnetValidatorTx(networkid, blockchainid, outs, ins, memo, nodeID, startTime, endTime, weight);\n          return new UnsignedTx(UTx);\n        }\n        */\n        /**\n        * Class representing an unsigned [[AddDelegatorTx]] transaction.\n        *\n        * @param networkid Networkid, [[DefaultNetworkID]]\n        * @param blockchainid Blockchainid, default undefined\n        * @param avaxAssetID {@link https://github.com/feross/buffer|Buffer} of the asset ID for AVAX\n        * @param toAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} recieves the stake at the end of the staking period\n        * @param fromAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} who pays the fees and the stake\n        * @param changeAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} who gets the change leftover from the staking payment\n        * @param nodeID The node ID of the validator being added.\n        * @param startTime The Unix time when the validator starts validating the Primary Network.\n        * @param endTime The Unix time when the validator stops validating the Primary Network (and staked AVAX is returned).\n        * @param stakeAmount A {@link https://github.com/indutny/bn.js/|BN} for the amount of stake to be delegated in nAVAX.\n        * @param rewardLocktime The locktime field created in the resulting reward outputs\n        * @param rewardThreshold The number of signatures required to spend the funds in the resultant reward UTXO\n        * @param rewardAddresses The addresses the validator reward goes.\n        * @param fee Optional. The amount of fees to burn in its smallest denomination, represented as {@link https://github.com/indutny/bn.js/|BN}\n        * @param feeAssetID Optional. The assetID of the fees being burned.\n        * @param memo Optional contains arbitrary bytes, up to 256 bytes\n        * @param asOf Optional. The timestamp to verify the transaction against as a {@link https://github.com/indutny/bn.js/|BN}\n        *\n        * @returns An unsigned transaction created from the passed in parameters.\n        */\n        this.buildAddDelegatorTx = (networkid = constants_2.DefaultNetworkID, blockchainid, avaxAssetID, toAddresses, fromAddresses, changeAddresses, nodeID, startTime, endTime, stakeAmount, rewardLocktime, rewardThreshold, rewardAddresses, fee = undefined, feeAssetID = undefined, memo = undefined, asOf = helperfunctions_1.UnixNow()) => {\n            let ins = [];\n            let outs = [];\n            let stakeOuts = [];\n            const zero = new bn_js_1.default(0);\n            const now = helperfunctions_1.UnixNow();\n            if (startTime.lt(now) || endTime.lte(startTime)) {\n                throw new Error(\"UTXOSet.buildAddDelegatorTx -- startTime must be in the future and endTime must come after startTime\");\n            }\n            const aad = new AssetAmountDestination(toAddresses, fromAddresses, changeAddresses);\n            if (avaxAssetID.toString(\"hex\") === feeAssetID.toString(\"hex\")) {\n                aad.addAssetAmount(avaxAssetID, stakeAmount, fee);\n            }\n            else {\n                aad.addAssetAmount(avaxAssetID, stakeAmount, zero);\n                if (this._feeCheck(fee, feeAssetID)) {\n                    aad.addAssetAmount(feeAssetID, zero, fee);\n                }\n            }\n            const minSpendableErr = this.getMinimumSpendable(aad, asOf, undefined, undefined, true);\n            if (typeof minSpendableErr === \"undefined\") {\n                ins = aad.getInputs();\n                outs = aad.getChangeOutputs();\n                stakeOuts = aad.getOutputs();\n            }\n            else {\n                throw minSpendableErr;\n            }\n            const rewardOutputOwners = new outputs_1.SECPOwnerOutput(rewardAddresses, rewardLocktime, rewardThreshold);\n            const UTx = new validationtx_1.AddDelegatorTx(networkid, blockchainid, outs, ins, memo, nodeID, startTime, endTime, stakeAmount, stakeOuts, new outputs_1.ParseableOutput(rewardOutputOwners));\n            return new tx_1.UnsignedTx(UTx);\n        };\n        /**\n          * Class representing an unsigned [[AddValidatorTx]] transaction.\n          *\n          * @param networkid Networkid, [[DefaultNetworkID]]\n          * @param blockchainid Blockchainid, default undefined\n          * @param avaxAssetID {@link https://github.com/feross/buffer|Buffer} of the asset ID for AVAX\n          * @param toAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} recieves the stake at the end of the staking period\n          * @param fromAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} who pays the fees and the stake\n          * @param changeAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} who gets the change leftover from the staking payment\n          * @param nodeID The node ID of the validator being added.\n          * @param startTime The Unix time when the validator starts validating the Primary Network.\n          * @param endTime The Unix time when the validator stops validating the Primary Network (and staked AVAX is returned).\n          * @param stakeAmount A {@link https://github.com/indutny/bn.js/|BN} for the amount of stake to be delegated in nAVAX.\n          * @param rewardLocktime The locktime field created in the resulting reward outputs\n          * @param rewardThreshold The number of signatures required to spend the funds in the resultant reward UTXO\n          * @param rewardAddresses The addresses the validator reward goes.\n          * @param delegationFee A number for the percentage of reward to be given to the validator when someone delegates to them. Must be between 0 and 100.\n          * @param minStake A {@link https://github.com/indutny/bn.js/|BN} representing the minimum stake required to validate on this network.\n          * @param fee Optional. The amount of fees to burn in its smallest denomination, represented as {@link https://github.com/indutny/bn.js/|BN}\n          * @param feeAssetID Optional. The assetID of the fees being burned.\n          * @param memo Optional contains arbitrary bytes, up to 256 bytes\n          * @param asOf Optional. The timestamp to verify the transaction against as a {@link https://github.com/indutny/bn.js/|BN}\n          *\n          * @returns An unsigned transaction created from the passed in parameters.\n          */\n        this.buildAddValidatorTx = (networkid = constants_2.DefaultNetworkID, blockchainid, avaxAssetID, toAddresses, fromAddresses, changeAddresses, nodeID, startTime, endTime, stakeAmount, rewardLocktime, rewardThreshold, rewardAddresses, delegationFee, fee = undefined, feeAssetID = undefined, memo = undefined, asOf = helperfunctions_1.UnixNow()) => {\n            let ins = [];\n            let outs = [];\n            let stakeOuts = [];\n            const zero = new bn_js_1.default(0);\n            const now = helperfunctions_1.UnixNow();\n            if (startTime.lt(now) || endTime.lte(startTime)) {\n                throw new Error(\"UTXOSet.buildAddValidatorTx -- startTime must be in the future and endTime must come after startTime\");\n            }\n            if (delegationFee > 100 || delegationFee < 0) {\n                throw new Error(\"UTXOSet.buildAddValidatorTx -- startTime must be in the range of 0 to 100, inclusively\");\n            }\n            const aad = new AssetAmountDestination(toAddresses, fromAddresses, changeAddresses);\n            if (avaxAssetID.toString(\"hex\") === feeAssetID.toString(\"hex\")) {\n                aad.addAssetAmount(avaxAssetID, stakeAmount, fee);\n            }\n            else {\n                aad.addAssetAmount(avaxAssetID, stakeAmount, zero);\n                if (this._feeCheck(fee, feeAssetID)) {\n                    aad.addAssetAmount(feeAssetID, zero, fee);\n                }\n            }\n            const minSpendableErr = this.getMinimumSpendable(aad, asOf, undefined, undefined, true);\n            if (typeof minSpendableErr === \"undefined\") {\n                ins = aad.getInputs();\n                outs = aad.getChangeOutputs();\n                stakeOuts = aad.getOutputs();\n            }\n            else {\n                throw minSpendableErr;\n            }\n            const rewardOutputOwners = new outputs_1.SECPOwnerOutput(rewardAddresses, rewardLocktime, rewardThreshold);\n            const UTx = new validationtx_1.AddValidatorTx(networkid, blockchainid, outs, ins, memo, nodeID, startTime, endTime, stakeAmount, stakeOuts, new outputs_1.ParseableOutput(rewardOutputOwners), delegationFee);\n            return new tx_1.UnsignedTx(UTx);\n        };\n        /**\n          * Class representing an unsigned [[CreateSubnetTx]] transaction.\n          *\n          * @param networkid Networkid, [[DefaultNetworkID]]\n          * @param blockchainid Blockchainid, default undefined\n          * @param fromAddresses The addresses being used to send the funds from the UTXOs {@link https://github.com/feross/buffer|Buffer}\n          * @param changeAddresses The addresses that can spend the change remaining from the spent UTXOs.\n          * @param subnetOwnerAddresses An array of {@link https://github.com/feross/buffer|Buffer} for the addresses to add to a subnet\n          * @param subnetOwnerThreshold The number of owners's signatures required to add a validator to the network\n          * @param fee Optional. The amount of fees to burn in its smallest denomination, represented as {@link https://github.com/indutny/bn.js/|BN}\n          * @param feeAssetID Optional. The assetID of the fees being burned\n          * @param memo Optional contains arbitrary bytes, up to 256 bytes\n          * @param asOf Optional. The timestamp to verify the transaction against as a {@link https://github.com/indutny/bn.js/|BN}\n          *\n          * @returns An unsigned transaction created from the passed in parameters.\n          */\n        this.buildCreateSubnetTx = (networkid = constants_2.DefaultNetworkID, blockchainid, fromAddresses, changeAddresses, subnetOwnerAddresses, subnetOwnerThreshold, fee = undefined, feeAssetID = undefined, memo = undefined, asOf = helperfunctions_1.UnixNow()) => {\n            const zero = new bn_js_1.default(0);\n            let ins = [];\n            let outs = [];\n            if (this._feeCheck(fee, feeAssetID)) {\n                const aad = new AssetAmountDestination(fromAddresses, fromAddresses, changeAddresses);\n                aad.addAssetAmount(feeAssetID, zero, fee);\n                const minSpendableErr = this.getMinimumSpendable(aad, asOf, undefined, undefined);\n                if (typeof minSpendableErr === \"undefined\") {\n                    ins = aad.getInputs();\n                    outs = aad.getAllOutputs();\n                }\n                else {\n                    throw minSpendableErr;\n                }\n            }\n            const locktime = new bn_js_1.default(0);\n            const UTx = new createsubnettx_1.CreateSubnetTx(networkid, blockchainid, outs, ins, memo, new outputs_1.SECPOwnerOutput(subnetOwnerAddresses, locktime, subnetOwnerThreshold));\n            return new tx_1.UnsignedTx(UTx);\n        };\n    }\n    //serialize is inherited\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        let utxos = {};\n        for (let utxoid in fields[\"utxos\"]) {\n            let utxoidCleaned = serializer.decoder(utxoid, encoding, \"base58\", \"base58\");\n            utxos[utxoidCleaned] = new UTXO();\n            utxos[utxoidCleaned].deserialize(fields[\"utxos\"][utxoid], encoding);\n        }\n        let addressUTXOs = {};\n        for (let address in fields[\"addressUTXOs\"]) {\n            let addressCleaned = serializer.decoder(address, encoding, \"cb58\", \"hex\");\n            let utxobalance = {};\n            for (let utxoid in fields[\"addressUTXOs\"][address]) {\n                let utxoidCleaned = serializer.decoder(utxoid, encoding, \"base58\", \"base58\");\n                utxobalance[utxoidCleaned] = serializer.decoder(fields[\"addressUTXOs\"][address][utxoid], encoding, \"decimalString\", \"BN\");\n            }\n            addressUTXOs[addressCleaned] = utxobalance;\n        }\n        this.utxos = utxos;\n        this.addressUTXOs = addressUTXOs;\n    }\n    parseUTXO(utxo) {\n        const utxovar = new UTXO();\n        // force a copy\n        if (typeof utxo === 'string') {\n            utxovar.fromBuffer(bintools.cb58Decode(utxo));\n        }\n        else if (utxo instanceof utxos_1.StandardUTXO) {\n            utxovar.fromBuffer(utxo.toBuffer()); // forces a copy\n        }\n        else {\n            /* istanbul ignore next */\n            throw new Error(`Error - UTXO.parseUTXO: utxo parameter is not a UTXO or string: ${utxo}`);\n        }\n        return utxovar;\n    }\n    create(...args) {\n        return new UTXOSet();\n    }\n    clone() {\n        const newset = this.create();\n        const allUTXOs = this.getAllUTXOs();\n        newset.addArray(allUTXOs);\n        return newset;\n    }\n    _feeCheck(fee, feeAssetID) {\n        return (typeof fee !== \"undefined\" &&\n            typeof feeAssetID !== \"undefined\" &&\n            fee.gt(new bn_js_1.default(0)) && feeAssetID instanceof buffer_1.Buffer);\n    }\n}\nexports.UTXOSet = UTXOSet;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXR4b3MuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvYXBpcy9wbGF0Zm9ybXZtL3V0eG9zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7R0FHRztBQUNILG9DQUFpQztBQUNqQyxvRUFBNEM7QUFDNUMsa0RBQXVCO0FBQ3ZCLHVDQUF3SjtBQUN4SixxQ0FBOEc7QUFDOUcsaUVBQXNEO0FBQ3RELDhDQUFtRTtBQUNuRSwyQ0FBa0Q7QUFDbEQsNkJBQWtDO0FBQ2xDLHFEQUFrRDtBQUNsRCxxREFBbUU7QUFDbkUscURBQWtEO0FBQ2xELGlEQUE4QztBQUM5QywwREFBdUY7QUFFdkYsaURBQWdFO0FBQ2hFLHFEQUFrRDtBQUNsRCw2REFBOEU7QUFFOUU7O0dBRUc7QUFDSCxNQUFNLFFBQVEsR0FBRyxrQkFBUSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQ3hDLE1BQU0sVUFBVSxHQUFHLDZCQUFhLENBQUMsV0FBVyxFQUFFLENBQUM7QUFFL0M7O0dBRUc7QUFDSCxNQUFhLElBQUssU0FBUSxvQkFBWTtJQUF0Qzs7UUFDWSxjQUFTLEdBQUcsTUFBTSxDQUFDO1FBQ25CLFlBQU8sR0FBRyxTQUFTLENBQUM7SUFrRWhDLENBQUM7SUFoRUMsd0JBQXdCO0lBRXhCLFdBQVcsQ0FBQyxNQUFjLEVBQUUsV0FBK0IsS0FBSztRQUM5RCxLQUFLLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQztRQUNwQyxJQUFJLENBQUMsTUFBTSxHQUFHLDJCQUFpQixDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1FBQzdELElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUN0RCxDQUFDO0lBRUQsVUFBVSxDQUFDLEtBQWEsRUFBRSxTQUFpQixDQUFDO1FBQzFDLElBQUksQ0FBQyxP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QUM7SUFDSixDQUFDO0NBNDBCRjtBQXQ0QkQsMEJBczRCQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKiBAbW9kdWxlIEFQSS1QbGF0Zm9ybVZNLVVUWE9zXG4gKi9cbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ2J1ZmZlci8nO1xuaW1wb3J0IEJpblRvb2xzIGZyb20gJy4uLy4uL3V0aWxzL2JpbnRvb2xzJztcbmltcG9ydCBCTiBmcm9tIFwiYm4uanNcIjtcbmltcG9ydCB7IEFtb3VudE91dHB1dCwgU2VsZWN0T3V0cHV0Q2xhc3MsIFRyYW5zZmVyYWJsZU91dHB1dCwgU0VDUE93bmVyT3V0cHV0LCBQYXJzZWFibGVPdXRwdXQsIFN0YWtlYWJsZUxvY2tPdXQsIFNFQ1BUcmFuc2Zlck91dHB1dCB9IGZyb20gJy4vb3V0cHV0cyc7XG5pbXBvcnQgeyBBbW91bnRJbnB1dCwgU0VDUFRyYW5zZmVySW5wdXQsIFN0YWtlYWJsZUxvY2tJbiwgVHJhbnNmZXJhYmxlSW5wdXQsIFBhcnNlYWJsZUlucHV0IH0gZnJvbSAnLi9pbnB1dHMnO1xuaW1wb3J0IHsgVW5peE5vdyB9IGZyb20gJy4uLy4uL3V0aWxzL2hlbHBlcmZ1bmN0aW9ucyc7XG5pbXBvcnQgeyBTdGFuZGFyZFVUWE8sIFN0YW5kYXJkVVRYT1NldCB9IGZyb20gJy4uLy4uL2NvbW1vbi91dHhvcyc7XG5pbXBvcnQgeyBQbGF0Zm9ybVZNQ29uc3RhbnRzIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgVW5zaWduZWRUeCB9IGZyb20gJy4vdHgnO1xuaW1wb3J0IHsgRXhwb3J0VHggfSBmcm9tICcuLi9wbGF0Zm9ybXZtL2V4cG9ydHR4JztcbmltcG9ydCB7IERlZmF1bHROZXR3b3JrSUQsIERlZmF1bHRzIH0gZnJvbSAnLi4vLi4vdXRpbHMvY29uc3RhbnRzJztcbmltcG9ydCB7IEltcG9ydFR4IH0gZnJvbSAnLi4vcGxhdGZvcm12bS9pbXBvcnR0eCc7XG5pbXBvcnQgeyBCYXNlVHggfSBmcm9tICcuLi9wbGF0Zm9ybXZtL2Jhc2V0eCc7XG5pbXBvcnQgeyBTdGFuZGFyZEFzc2V0QW1vdW50RGVzdGluYXRpb24sIEFzc2V0QW1vdW50IH0gZnJvbSAnLi4vLi4vY29tbW9uL2Fzc2V0YW1vdW50JztcbmltcG9ydCB7IE91dHB1dCB9IGZyb20gJy4uLy4uL2NvbW1vbi9vdXRwdXQnO1xuaW1wb3J0IHsgQWRkRGVsZWdhdG9yVHgsIEFkZFZhbGlkYXRvclR4IH0gZnJvbSAnLi92YWxpZGF0aW9udHgnO1xuaW1wb3J0IHsgQ3JlYXRlU3VibmV0VHggfSBmcm9tICcuL2NyZWF0ZXN1Ym5ldHR4JztcbmltcG9ydCB7IFNlcmlhbGl6YXRpb24sIFNlcmlhbGl6ZWRFbmNvZGluZyB9IGZyb20gJy4uLy4uL3V0aWxzL3NlcmlhbGl6YXRpb24nO1xuXG4vKipcbiAqIEBpZ25vcmVcbiAqL1xuY29uc3QgYmludG9vbHMgPSBCaW5Ub29scy5nZXRJbnN0YW5jZSgpO1xuY29uc3Qgc2VyaWFsaXplciA9IFNlcmlhbGl6YXRpb24uZ2V0SW5zdGFuY2UoKTtcblxuLyoqXG4gKiBDbGFzcyBmb3IgcmVwcmVzZW50aW5nIGEgc2luZ2xlIFVUWE8uXG4gKi9cbmV4cG9ydCBjbGFzcyBVVFhPIGV4dGVuZHMgU3RhbmRhcmRVVFhPIHtcbiAgcHJvdGVjdGVkIF90eXBlTmFtZSA9IFwiVVRYT1wiO1xuICBwcm90ZWN0ZWQgX3R5cGVJRCA9IHVuZGVmaW5lZDtcblxuICAvL3NlcmlhbGl6ZSBpcyBpbmhlcml0ZWRcblxuICBkZXNlcmlhbGl6ZShmaWVsZHM6IG9iamVjdCwgZW5jb2Rpbmc6IFNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICBzdXBlci5kZXNlcmlhbGl6ZShmaWVsZHMsIGVuY29kaW5nKTtcbiAgICB0aGlzLm91dHB1dCA9IFNlbGVjdE91dHB1dENsYXNzKGZpZWxkc1tcIm91dHB1dFwiXVtcIl90eXBlSURcIl0pO1xuICAgIHRoaXMub3V0cHV0LmRlc2VyaWFsaXplKGZpZWxkc1tcIm91dHB1dFwiXSwgZW5jb2RpbmcpO1xuICB9XG5cbiAgZnJvbUJ1ZmZlcihieXRlczogQnVmZmVyLCBvZmZzZXQ6IG51bWJlciA9IDApOiBudW1iZXIge1xuICAgIHRoaXMuY29kZWNpZCA9IGJpbnRvb2xzLmNvcHlGcm9tKGJ5dGVzLCBvZmZzZXQsIG9mZnNldCArIDIpO1xuICAgIG9mZnNldCArPSAyO1xuICAgIHRoaXMudHhpZCA9IGJpbnRvb2xzLmNvcHlGcm9tKGJ5dGVzLCBvZmZzZXQsIG9mZnNldCArIDMyKTtcbiAgICBvZmZzZXQgKz0gMzI7XG4gICAgdGhpcy5vdXRwdXRpZHggPSBiaW50b29scy5jb3B5RnJvbShieXRlcywgb2Zmc2V0LCBvZmZzZXQgKyA0KTtcbiAgICBvZmZzZXQgKz0gNDtcbiAgICB0aGlzLmFzc2V0aWQgPSBiaW50b29scy5jb3B5RnJvbShieXRlcywgb2Zmc2V0LCBvZmZzZXQgKyAzMik7XG4gICAgb2Zmc2V0ICs9IDMyO1xuICAgIGNvbnN0IG91dHB1dGlkOiBudW1iZXIgPSBiaW50b29scy5jb3B5RnJvbShieXRlcywgb2Zmc2V0LCBvZmZzZXQgKyA0KS5yZWFkVUludDMyQkUoMCk7XG4gICAgb2Zmc2V0ICs9IDQ7XG4gICAgdGhpcy5vdXRwdXQgPSBTZWxlY3RPdXRwdXRDbGFzcyhvdXRwdXRpZCk7XG4gICAgcmV0dXJuIHRoaXMub3V0cHV0LmZyb21CdWZmZXIoYnl0ZXMsIG9mZnNldCk7XG4gIH1cblxuICAvKipcbiAgICogVGFrZXMgYSBiYXNlLTU4IHN0cmluZyBjb250YWluaW5nIGEgW1tVVFhPXV0sIHBhcnNlcyBpdCwgcG9wdWxhdGVzIHRoZSBjbGFzcywgYW5kIHJldHVybnMgdGhlIGxlbmd0aCBvZiB0aGUgU3RhbmRhcmRVVFhPIGluIGJ5dGVzLlxuICAgKlxuICAgKiBAcGFyYW0gc2VyaWFsaXplZCBBIGJhc2UtNTggc3RyaW5nIGNvbnRhaW5pbmcgYSByYXcgW1tVVFhPXV1cbiAgICpcbiAgICogQHJldHVybnMgVGhlIGxlbmd0aCBvZiB0aGUgcmF3IFtbVVRYT11dXG4gICAqXG4gICAqIEByZW1hcmtzXG4gICAqIHVubGlrZSBtb3N0IGZyb21TdHJpbmdzLCBpdCBleHBlY3RzIHRoZSBzdHJpbmcgdG8gYmUgc2VyaWFsaXplZCBpbiBjYjU4IGZvcm1hdFxuICAgKi9cbiAgZnJvbVN0cmluZyhzZXJpYWxpemVkOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgcmV0dXJuIHRoaXMuZnJvbUJ1ZmZlcihiaW50b29scy5jYjU4RGVjb2RlKHNlcmlhbGl6ZWQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgYmFzZS01OCByZXByZXNlbnRhdGlvbiBvZiB0aGUgW1tVVFhPXV0uXG4gICAqXG4gICAqIEByZW1hcmtzXG4gICAqIHVubGlrZSBtb3N0IHRvU3RyaW5ncywgdGhpcyByZXR1cm5zIGluIGNiNTggc2VyaWFsaXphdGlvbiBmb3JtYXRcbiAgICovXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICByZXR1cm4gYmludG9vbHMuY2I1OEVuY29kZSh0aGlzLnRvQnVmZmVyKCkpO1xuICB9XG5cbiAgY2xvbmUoKTogdGhpcyB7XG4gICAgY29uc3QgdXR4bzogVVRYTyA9IG5ldyBVVFhPKCk7XG4gICAgdXR4by5mcm9tQnVmZmVyKHRoaXMudG9CdWZmZXIoKSk7XG4gICAgcmV0dXJuIHV0eG8gYXMgdGhpcztcbiAgfVxuXG4gIGNyZWF0ZShcbiAgICBjb2RlY0lEOiBudW1iZXIgPSBQbGF0Zm9ybVZNQ29uc3RhbnRzLkxBVEVTVENPREVDLFxuICAgIHR4aWQ6IEJ1ZmZlciA9IHVuZGVmaW5lZCxcbiAgICBvdXRwdXRpZHg6IEJ1ZmZlciB8IG51bWJlciA9IHVuZGVmaW5lZCxcbiAgICBhc3NldGlkOiBCdWZmZXIgPSB1bmRlZmluZWQsXG4gICAgb3V0cHV0OiBPdXRwdXQgPSB1bmRlZmluZWQpOiB0aGlzIHtcbiAgICByZXR1cm4gbmV3IFVUWE8oY29kZWNJRCwgdHhpZCwgb3V0cHV0aWR4LCBhc3NldGlkLCBvdXRwdXQpIGFzIHRoaXM7XG4gIH1cblxufVxuXG5leHBvcnQgY2xhc3MgQXNzZXRBbW91bnREZXN0aW5hdGlvbiBleHRlbmRzIFN0YW5kYXJkQXNzZXRBbW91bnREZXN0aW5hdGlvbjxUcmFuc2ZlcmFibGVPdXRwdXQsIFRyYW5zZmVyYWJsZUlucHV0PiB7IH1cblxuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYSBzZXQgb2YgW1tVVFhPXV1zLlxuICovXG5leHBvcnQgY2xhc3MgVVRYT1NldCBleHRlbmRzIFN0YW5kYXJkVVRYT1NldDxVVFhPPntcbiAgcHJvdGVjdGVkIF90eXBlTmFtZSA9IFwiVVRYT1NldFwiO1xuICBwcm90ZWN0ZWQgX3R5cGVJRCA9IHVuZGVmaW5lZDtcblxuICAvL3NlcmlhbGl6ZSBpcyBpbmhlcml0ZWRcblxuICBkZXNlcmlhbGl6ZShmaWVsZHM6IG9iamVjdCwgZW5jb2Rpbmc6IFNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICBzdXBlci5kZXNlcmlhbGl6ZShmaWVsZHMsIGVuY29kaW5nKTtcbiAgICBsZXQgdXR4b3MgPSB7fTtcbiAgICBmb3IgKGxldCB1dHhvaWQgaW4gZmllbGRzW1widXR4b3NcIl0pIHtcbiAgICAgIGxldCB1dHhvaWRDbGVhbmVkOiBzdHJpbmcgPSBzZXJpYWxpemVyLmRlY29kZXIodXR4b2lkLCBlbmNvZGluZywgXCJiYXNlNThcIiwgXCJiYXNlNThcIik7XG4gICAgICB1dHhvc1t1dHhvaWRDbGVhbmVkXSA9IG5ldyBVVFhPKCk7XG4gICAgICB1dHhvc1t1dHhvaWRDbGVhbmVkXS5kZXNlcmlhbGl6ZShmaWVsZHNbXCJ1dHhvc1wiXVt1dHhvaWRdLCBlbmNvZGluZyk7XG4gICAgfVxuICAgIGxldCBhZGRyZXNzVVRYT3MgPSB7fTtcbiAgICBmb3IgKGxldCBhZGRyZXNzIGluIGZpZWxkc1tcImFkZHJlc3NVVFhPc1wiXSkge1xuICAgICAgbGV0IGFkZHJlc3NDbGVhbmVkOiBzdHJpbmcgPSBzZXJpYWxpemVyLmRlY29kZXIoYWRkcmVzcywgZW5jb2RpbmcsIFwiY2I1OFwiLCBcImhleFwiKTtcbiAgICAgIGxldCB1dHhvYmFsYW5jZSA9IHt9O1xuICAgICAgZm9yIChsZXQgdXR4b2lkIGluIGZpZWxkc1tcImFkZHJlc3NVVFhPc1wiXVthZGRyZXNzXSkge1xuICAgICAgICBsZXQgdXR4b2lkQ2xlYW5lZDogc3RyaW5nID0gc2VyaWFsaXplci5kZWNvZGVyKHV0eG9pZCwgZW5jb2RpbmcsIFwiYmFzZTU4XCIsIFwiYmFzZTU4XCIpO1xuICAgICAgICB1dHhvYmFsYW5jZVt1dHhvaWRDbGVhbmVkXSA9IHNlcmlhbGl6ZXIuZGVjb2RlcihmaWVsZHNbXCJhZGRyZXNzVVRYT3NcIl1bYWRkcmVzc11bdXR4b2lkXSwgZW5jb2RpbmcsIFwiZGVjaW1hbFN0cmluZ1wiLCBcIkJOXCIpO1xuICAgICAgfVxuICAgICAgYWRkcmVzc1VUWE9zW2FkZHJlc3NDbGVhbmVkXSA9IHV0eG9iYWxhbmNlO1xuICAgIH1cbiAgICB0aGlzLnV0eG9zID0gdXR4b3M7XG4gICAgdGhpcy5hZGRyZXNzVVRYT3MgPSBhZGRyZXNzVVRYT3M7XG4gIH1cblxuICBwYXJzZVVUWE8odXR4bzogVVRYTyB8IHN0cmluZyk6IFVUWE8ge1xuICAgIGNvbnN0IHV0eG92YXI6IFVUWE8gPSBuZXcgVVRYTygpO1xuICAgIC8vIGZvcmNlIGEgY29weVxuICAgIGlmICh0eXBlb2YgdXR4byA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHV0eG92YXIuZnJvbUJ1ZmZlcihiaW50b29scy5jYjU4RGVjb2RlKHV0eG8pKTtcbiAgICB9IGVsc2UgaWYgKHV0eG8gaW5zdGFuY2VvZiBTdGFuZGFyZFVUWE8pIHtcbiAgICAgIHV0eG92YXIuZnJvbUJ1ZmZlcih1dHhvLnRvQnVmZmVyKCkpOyAvLyBmb3JjZXMgYSBjb3B5XG4gICAgfSBlbHNlIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIC0gVVRYTy5wYXJzZVVUWE86IHV0eG8gcGFyYW1ldGVyIGlzIG5vdCBhIFVUWE8gb3Igc3RyaW5nOiAke3V0eG99YCk7XG4gICAgfVxuICAgIHJldHVybiB1dHhvdmFyXG4gIH1cblxuICBjcmVhdGUoLi4uYXJnczogYW55W10pOiB0aGlzIHtcbiAgICByZXR1cm4gbmV3IFVUWE9TZXQoKSBhcyB0aGlzO1xuICB9XG5cbiAgY2xvbmUoKTogdGhpcyB7XG4gICAgY29uc3QgbmV3c2V0OiBVVFhPU2V0ID0gdGhpcy5jcmVhdGUoKTtcbiAgICBjb25zdCBhbGxVVFhPczogQXJyYXk8VVRYTz4gPSB0aGlzLmdldEFsbFVUWE9zKCk7XG4gICAgbmV3c2V0LmFkZEFycmF5KGFsbFVUWE9zKVxuICAgIHJldHVybiBuZXdzZXQgYXMgdGhpcztcbiAgfVxuXG4gIF9mZWVDaGVjayhmZWU6IEJOLCBmZWVBc3NldElEOiBCdWZmZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKHR5cGVvZiBmZWUgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgIHR5cGVvZiBmZWVBc3NldElEICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICBmZWUuZ3QobmV3IEJOKDApKSAmJiBmZWVBc3NldElEIGluc3RhbmNlb2YgQnVmZmVyXG4gICAgKTtcbiAgfVxuXG4gIGdldENvbnN1bWFibGVVWFRPID0gKGFzT2Y6IEJOID0gVW5peE5vdygpLCBzdGFrZWFibGU6IGJvb2xlYW4gPSBmYWxzZSk6IFVUWE9bXSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QWxsVVRYT3MoKS5maWx0ZXIoKHV0eG86IFVUWE8pID0+IHtcbiAgICAgIGlmIChzdGFrZWFibGUpIHtcbiAgICAgICAgLy8gc3Rha2VhYmxlIHRyYW5zYWN0aW9ucyBjYW4gY29uc3VtZSBhbnkgVVRYTy5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBjb25zdCBvdXRwdXQ6IE91dHB1dCA9IHV0eG8uZ2V0T3V0cHV0KCk7XG4gICAgICBpZiAoIShvdXRwdXQgaW5zdGFuY2VvZiBTdGFrZWFibGVMb2NrT3V0KSkge1xuICAgICAgICAvLyBub24tc3Rha2VhYmxlIHRyYW5zYWN0aW9ucyBjYW4gY29uc3VtZSBhbnkgVVRYTyB0aGF0IGlzbid0IGxvY2tlZC5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBjb25zdCBzdGFrZWFibGVPdXRwdXQ6IFN0YWtlYWJsZUxvY2tPdXQgPSBvdXRwdXQgYXMgU3Rha2VhYmxlTG9ja091dDtcbiAgICAgIGlmIChzdGFrZWFibGVPdXRwdXQuZ2V0U3Rha2VhYmxlTG9ja3RpbWUoKS5sdChhc09mKSkge1xuICAgICAgICAvLyBJZiB0aGUgc3Rha2VhYmxlIG91dHB1dHMgbG9ja3RpbWUgaGFzIGVuZGVkLCB0aGVuIHRoaXMgVVRYTyBjYW4gc3RpbGxcbiAgICAgICAgLy8gYmUgY29uc3VtZWQgYnkgYSBub24tc3Rha2VhYmxlIHRyYW5zYWN0aW9uLlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIC8vIFRoaXMgb3V0cHV0IGlzIGxvY2tlZCBhbmQgY2FuJ3QgYmUgY29uc3VtZWQgYnkgYSBub24tc3Rha2VhYmxlXG4gICAgICAvLyB0cmFuc2FjdGlvbi5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldE1pbmltdW1TcGVuZGFibGUgPSAoXG4gICAgYWFkOiBBc3NldEFtb3VudERlc3RpbmF0aW9uLFxuICAgIGFzT2Y6IEJOID0gVW5peE5vdygpLFxuICAgIGxvY2t0aW1lOiBCTiA9IG5ldyBCTigwKSxcbiAgICB0aHJlc2hvbGQ6IG51bWJlciA9IDEsXG4gICAgc3Rha2VhYmxlOiBib29sZWFuID0gZmFsc2UsXG4gICk6IEVycm9yID0+IHtcbiAgICBsZXQgdXR4b0FycmF5OiBVVFhPW10gPSB0aGlzLmdldENvbnN1bWFibGVVWFRPKGFzT2YsIHN0YWtlYWJsZSk7XG4gICAgbGV0IHRtcFVUWE9BcnJheTogVVRYT1tdID0gW107XG4gICAgaWYoc3Rha2VhYmxlKSB7XG4gICAgICAvLyBJZiB0aGlzIGlzIGEgc3Rha2VhYmxlIHRyYW5zYWN0aW9uIHRoZW4gaGF2ZSBTdGFrZWFibGVMb2NrT3V0IGNvbWUgYmVmb3JlIFNFQ1BUcmFuc2Zlck91dHB1dFxuICAgICAgLy8gc28gdGhhdCB1c2VycyBmaXJzdCBzdGFrZSBsb2NrZWQgdG9rZW5zIGJlZm9yZSBzdGFraW5nIHVubG9ja2VkIHRva2Vuc1xuICAgICAgdXR4b0FycmF5LmZvckVhY2goKHV0eG86IFVUWE8pID0+IHtcbiAgICAgICAgLy8gU3Rha2VhYmxlTG9ja091dHNcbiAgICAgICAgaWYodXR4by5nZXRPdXRwdXQoKS5nZXRUeXBlSUQoKSA9PT0gMjIpIHtcbiAgICAgICAgICB0bXBVVFhPQXJyYXkucHVzaCh1dHhvKTtcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgLy8gU29ydCB0aGUgU3Rha2VhYmxlTG9ja091dHMgYnkgU3Rha2VhYmxlTG9ja3RpbWUgc28gdGhhdCB0aGUgZ3JlYXRlc3QgU3Rha2VhYmxlTG9ja3RpbWUgYXJlIHNwZW50IGZpcnN0XG4gICAgICB0bXBVVFhPQXJyYXkuc29ydCgoYTogVVRYTywgYjogVVRYTykgPT4ge1xuICAgICAgICBsZXQgc3Rha2VhYmxlTG9ja091dDEgPSBhLmdldE91dHB1dCgpIGFzIFN0YWtlYWJsZUxvY2tPdXQ7XG4gICAgICAgIGxldCBzdGFrZWFibGVMb2NrT3V0MiA9IGIuZ2V0T3V0cHV0KCkgYXMgU3Rha2VhYmxlTG9ja091dDtcbiAgICAgICAgcmV0dXJuIHN0YWtlYWJsZUxvY2tPdXQyLmdldFN0YWtlYWJsZUxvY2t0aW1lKCkudG9OdW1iZXIoKSAtIHN0YWtlYWJsZUxvY2tPdXQxLmdldFN0YWtlYWJsZUxvY2t0aW1lKCkudG9OdW1iZXIoKVxuICAgICAgfSlcblxuICAgICAgdXR4b0FycmF5LmZvckVhY2goKHV0eG86IFVUWE8pID0+IHtcbiAgICAgICAgLy8gU0VDUFRyYW5zZmVyT3V0cHV0c1xuICAgICAgICBpZih1dHhvLmdldE91dHB1dCgpLmdldFR5cGVJRCgpID09PSA3KSB7XG4gICAgICAgICAgdG1wVVRYT0FycmF5LnB1c2godXR4byk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICB1dHhvQXJyYXkgPSB0bXBVVFhPQXJyYXk7XG4gICAgfVxuXG4gICAgLy8gb3V0cyBpcyBhIG1hcCBmcm9tIGFzc2V0SUQgdG8gYSB0dXBsZSBvZiAobG9ja2VkU3Rha2VhYmxlLCB1bmxvY2tlZClcbiAgICAvLyB3aGljaCBhcmUgYXJyYXlzIG9mIG91dHB1dHMuXG4gICAgY29uc3Qgb3V0czogb2JqZWN0ID0ge307XG5cbiAgICAvLyBXZSBvbmx5IG5lZWQgdG8gaXRlcmF0ZSBvdmVyIFVUWE9zIHVudGlsIHdlIGhhdmUgc3BlbnQgc3VmZmljaWVudCBmdW5kc1xuICAgIC8vIHRvIG1ldCB0aGUgcmVxdWVzdGVkIGFtb3VudHMuXG4gICAgdXR4b0FycmF5LmZvckVhY2goKHV0eG86IFVUWE8sIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnN0IGFzc2V0SUQ6IEJ1ZmZlciA9IHV0eG8uZ2V0QXNzZXRJRCgpO1xuICAgICAgY29uc3QgYXNzZXRLZXk6IHN0cmluZyA9IGFzc2V0SUQudG9TdHJpbmcoXCJoZXhcIik7XG4gICAgICBjb25zdCBmcm9tQWRkcmVzc2VzOiBCdWZmZXJbXSA9IGFhZC5nZXRTZW5kZXJzKCk7XG4gICAgICBjb25zdCBvdXRwdXQ6IE91dHB1dCA9IHV0eG8uZ2V0T3V0cHV0KCk7XG4gICAgICBpZiAoIShvdXRwdXQgaW5zdGFuY2VvZiBBbW91bnRPdXRwdXQpIHx8ICFhYWQuYXNzZXRFeGlzdHMoYXNzZXRLZXkpIHx8ICFvdXRwdXQubWVldHNUaHJlc2hvbGQoZnJvbUFkZHJlc3NlcywgYXNPZikpIHtcbiAgICAgICAgLy8gV2Ugc2hvdWxkIG9ubHkgdHJ5IHRvIHNwZW5kIGZ1bmdpYmxlIGFzc2V0cy5cbiAgICAgICAgLy8gV2Ugc2hvdWxkIG9ubHkgc3BlbmQge3sgYXNzZXRLZXkgfX0uXG4gICAgICAgIC8vIFdlIG5lZWQgdG8gYmUgYWJsZSB0byBzcGVuZCB0aGUgb3V0cHV0LlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGFzc2V0QW1vdW50OiBBc3NldEFtb3VudCA9IGFhZC5nZXRBc3NldEFtb3VudChhc3NldEtleSk7XG4gICAgICBpZiAoYXNzZXRBbW91bnQuaXNGaW5pc2hlZCgpKSB7XG4gICAgICAgIC8vIFdlJ3ZlIGFscmVhZHkgc3BlbnQgdGhlIG5lZWRlZCBVVFhPcyBmb3IgdGhpcyBhc3NldElELlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghKGFzc2V0S2V5IGluIG91dHMpKSB7XG4gICAgICAgIC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUgc3BlbmRpbmcgdGhpcyBhc3NldElELCB3ZSBuZWVkIHRvXG4gICAgICAgIC8vIGluaXRpYWxpemUgdGhlIG91dHMgb2JqZWN0IGNvcnJlY3RseS5cbiAgICAgICAgb3V0c1thc3NldEtleV0gPSB7XG4gICAgICAgICAgbG9ja2VkU3Rha2VhYmxlOiBbXSxcbiAgICAgICAgICB1bmxvY2tlZDogW10sXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGFtb3VudE91dHB1dDogQW1vdW50T3V0cHV0ID0gb3V0cHV0IGFzIEFtb3VudE91dHB1dDtcbiAgICAgIC8vIGFtb3VudCBpcyB0aGUgYW1vdW50IG9mIGZ1bmRzIGF2YWlsYWJsZSBmcm9tIHRoaXMgVVRYTy5cbiAgICAgIGNvbnN0IGFtb3VudCA9IGFtb3VudE91dHB1dC5nZXRBbW91bnQoKTtcblxuICAgICAgLy8gU2V0IHVwIHRoZSBTRUNQIGlucHV0IHdpdGggdGhlIHNhbWUgYW1vdW50IGFzIHRoZSBvdXRwdXQuXG4gICAgICBsZXQgaW5wdXQ6IEFtb3VudElucHV0ID0gbmV3IFNFQ1BUcmFuc2ZlcklucHV0KGFtb3VudCk7XG5cbiAgICAgIGxldCBsb2NrZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgIGlmIChhbW91bnRPdXRwdXQgaW5zdGFuY2VvZiBTdGFrZWFibGVMb2NrT3V0KSB7XG4gICAgICAgIGNvbnN0IHN0YWtlYWJsZU91dHB1dDogU3Rha2VhYmxlTG9ja091dCA9IGFtb3VudE91dHB1dCBhcyBTdGFrZWFibGVMb2NrT3V0O1xuICAgICAgICBjb25zdCBzdGFrZWFibGVMb2NrdGltZTogQk4gPSBzdGFrZWFibGVPdXRwdXQuZ2V0U3Rha2VhYmxlTG9ja3RpbWUoKTtcblxuICAgICAgICBpZiAoc3Rha2VhYmxlTG9ja3RpbWUuZ3QoYXNPZikpIHtcbiAgICAgICAgICAvLyBBZGQgYSBuZXcgaW5wdXQgYW5kIG1hcmsgaXQgYXMgYmVpbmcgbG9ja2VkLlxuICAgICAgICAgIGlucHV0ID0gbmV3IFN0YWtlYWJsZUxvY2tJbihcbiAgICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICAgIHN0YWtlYWJsZUxvY2t0aW1lLFxuICAgICAgICAgICAgbmV3IFBhcnNlYWJsZUlucHV0KGlucHV0KSxcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgLy8gTWFyayB0aGlzIFVUWE8gYXMgaGF2aW5nIGJlZW4gcmUtbG9ja2VkLlxuICAgICAgICAgIGxvY2tlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXNzZXRBbW91bnQuc3BlbmRBbW91bnQoYW1vdW50LCBsb2NrZWQpO1xuICAgICAgaWYgKGxvY2tlZCkge1xuICAgICAgICAvLyBUcmFjayB0aGUgVVRYTyBhcyBsb2NrZWQuXG4gICAgICAgIG91dHNbYXNzZXRLZXldLmxvY2tlZFN0YWtlYWJsZS5wdXNoKGFtb3VudE91dHB1dCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUcmFjayB0aGUgVVRYTyBhcyB1bmxvY2tlZC5cbiAgICAgICAgb3V0c1thc3NldEtleV0udW5sb2NrZWQucHVzaChhbW91bnRPdXRwdXQpO1xuICAgICAgfVxuXG4gICAgICAvLyBHZXQgdGhlIGluZGljZXMgb2YgdGhlIG91dHB1dHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBhdXRob3JpemUgdGhlXG4gICAgICAvLyBzcGVuZGluZyBvZiB0aGlzIGlucHV0LlxuXG4gICAgICAvLyBUT0RPOiBnZXRTcGVuZGVycyBzaG91bGQgcmV0dXJuIGFuIGFycmF5IG9mIGluZGljZXMgcmF0aGVyIHRoYW4gYW5cbiAgICAgIC8vIGFycmF5IG9mIGFkZHJlc3Nlcy5cbiAgICAgIGNvbnN0IHNwZW5kZXJzOiBBcnJheTxCdWZmZXI+ID0gYW1vdW50T3V0cHV0LmdldFNwZW5kZXJzKGZyb21BZGRyZXNzZXMsIGFzT2YpO1xuICAgICAgc3BlbmRlcnMuZm9yRWFjaCgoc3BlbmRlcjogQnVmZmVyKSA9PiB7XG4gICAgICAgIGNvbnN0IGlkeDogbnVtYmVyID0gYW1vdW50T3V0cHV0LmdldEFkZHJlc3NJZHgoc3BlbmRlcik7XG4gICAgICAgIGlmIChpZHggPT09IC0xKSB7XG4gICAgICAgICAgLy8gVGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuLCB3aGljaCBpcyB3aHkgdGhlIGVycm9yIGlzIHRocm93biByYXRoZXJcbiAgICAgICAgICAvLyB0aGFuIGJlaW5nIHJldHVybmVkLiBJZiB0aGlzIHdlcmUgdG8gZXZlciBoYXBwZW4gdGhpcyB3b3VsZCBiZSBhblxuICAgICAgICAgIC8vIGVycm9yIGluIHRoZSBpbnRlcm5hbCBsb2dpYyByYXRoZXIgaGF2aW5nIGNhbGxlZCB0aGlzIGZ1bmN0aW9uIHdpdGhcbiAgICAgICAgICAvLyBpbnZhbGlkIGFyZ3VtZW50cy5cblxuICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciAtIFVUWE9TZXQuZ2V0TWluaW11bVNwZW5kYWJsZTogbm8gc3VjaCAnXG4gICAgICAgICAgICArIGBhZGRyZXNzIGluIG91dHB1dDogJHtzcGVuZGVyfWApO1xuICAgICAgICB9XG4gICAgICAgIGlucHV0LmFkZFNpZ25hdHVyZUlkeChpZHgsIHNwZW5kZXIpO1xuICAgICAgfSlcblxuICAgICAgY29uc3QgdHhJRDogQnVmZmVyID0gdXR4by5nZXRUeElEKCk7XG4gICAgICBjb25zdCBvdXRwdXRJZHg6IEJ1ZmZlciA9IHV0eG8uZ2V0T3V0cHV0SWR4KCk7XG4gICAgICBjb25zdCB0cmFuc2ZlcklucHV0OiBUcmFuc2ZlcmFibGVJbnB1dCA9IG5ldyBUcmFuc2ZlcmFibGVJbnB1dChcbiAgICAgICAgdHhJRCxcbiAgICAgICAgb3V0cHV0SWR4LFxuICAgICAgICBhc3NldElELFxuICAgICAgICBpbnB1dCxcbiAgICAgICk7XG4gICAgICBhYWQuYWRkSW5wdXQodHJhbnNmZXJJbnB1dCk7XG4gICAgfSk7XG5cbiAgICBpZiAoIWFhZC5jYW5Db21wbGV0ZSgpKSB7XG4gICAgICAvLyBBZnRlciBydW5uaW5nIHRocm91Z2ggYWxsIHRoZSBVVFhPcywgd2Ugc3RpbGwgd2VyZW4ndCBhYmxlIHRvIGdldCBhbGxcbiAgICAgIC8vIHRoZSBuZWNlc3NhcnkgZnVuZHMsIHNvIHRoaXMgdHJhbnNhY3Rpb24gY2FuJ3QgYmUgbWFkZS5cbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0Vycm9yIC0gVVRYT1NldC5nZXRNaW5pbXVtU3BlbmRhYmxlOiBpbnN1ZmZpY2llbnQgJ1xuICAgICAgICArICdmdW5kcyB0byBjcmVhdGUgdGhlIHRyYW5zYWN0aW9uJyk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogV2Ugc2hvdWxkIHNlcGFyYXRlIHRoZSBhYm92ZSBmdW5jdGlvbmFsaXR5IGludG8gYSBzaW5nbGUgZnVuY3Rpb25cbiAgICAvLyB0aGF0IGp1c3Qgc2VsZWN0cyB0aGUgVVRYT3MgdG8gY29uc3VtZS5cblxuICAgIGNvbnN0IHplcm86IEJOID0gbmV3IEJOKDApO1xuXG4gICAgLy8gYXNzZXRBbW91bnRzIGlzIGFuIGFycmF5IG9mIGFzc2V0IGRlc2NyaXB0aW9ucyBhbmQgaG93IG11Y2ggaXMgbGVmdCB0b1xuICAgIC8vIHNwZW5kIGZvciB0aGVtLlxuICAgIGNvbnN0IGFzc2V0QW1vdW50czogQXJyYXk8QXNzZXRBbW91bnQ+ID0gYWFkLmdldEFtb3VudHMoKTtcbiAgICBhc3NldEFtb3VudHMuZm9yRWFjaCgoYXNzZXRBbW91bnQ6IEFzc2V0QW1vdW50KSA9PiB7XG4gICAgICAvLyBjaGFuZ2UgaXMgdGhlIGFtb3VudCB0aGF0IHNob3VsZCBiZSByZXR1cm5lZCBiYWNrIHRvIHRoZSBzb3VyY2Ugb2YgdGhlXG4gICAgICAvLyBmdW5kcy5cbiAgICAgIGNvbnN0IGNoYW5nZTogQk4gPSBhc3NldEFtb3VudC5nZXRDaGFuZ2UoKTtcbiAgICAgIC8vIGlzU3Rha2VhYmxlTG9ja0NoYW5nZSBpcyBpZiB0aGUgY2hhbmdlIGlzIGxvY2tlZCBvciBub3QuXG4gICAgICBjb25zdCBpc1N0YWtlYWJsZUxvY2tDaGFuZ2U6IGJvb2xlYW4gPSBhc3NldEFtb3VudC5nZXRTdGFrZWFibGVMb2NrQ2hhbmdlKCk7XG4gICAgICAvLyBsb2NrZWRDaGFuZ2UgaXMgdGhlIGFtb3VudCBvZiBsb2NrZWQgY2hhbmdlIHRoYXQgc2hvdWxkIGJlIHJldHVybmVkIHRvXG4gICAgICAvLyB0aGUgc2VuZGVyXG4gICAgICBjb25zdCBsb2NrZWRDaGFuZ2U6IEJOID0gaXNTdGFrZWFibGVMb2NrQ2hhbmdlID8gY2hhbmdlIDogemVyby5jbG9uZSgpO1xuXG4gICAgICBjb25zdCBhc3NldElEOiBCdWZmZXIgPSBhc3NldEFtb3VudC5nZXRBc3NldElEKCk7XG4gICAgICBjb25zdCBhc3NldEtleTogc3RyaW5nID0gYXNzZXRBbW91bnQuZ2V0QXNzZXRJRFN0cmluZygpO1xuICAgICAgY29uc3QgbG9ja2VkT3V0cHV0czogQXJyYXk8U3Rha2VhYmxlTG9ja091dD4gPSBvdXRzW2Fzc2V0S2V5XS5sb2NrZWRTdGFrZWFibGU7XG4gICAgICBsb2NrZWRPdXRwdXRzLmZvckVhY2goKGxvY2tlZE91dHB1dDogU3Rha2VhYmxlTG9ja091dCwgaTogbnVtYmVyKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0YWtlYWJsZUxvY2t0aW1lOiBCTiA9IGxvY2tlZE91dHB1dC5nZXRTdGFrZWFibGVMb2NrdGltZSgpO1xuICAgICAgICBjb25zdCBwYXJzZWFibGVPdXRwdXQ6IFBhcnNlYWJsZU91dHB1dCA9IGxvY2tlZE91dHB1dC5nZXRUcmFuc2ZlcmFibGVPdXRwdXQoKTtcblxuICAgICAgICAvLyBXZSBrbm93IHRoYXQgcGFyc2VhYmxlT3V0cHV0IGNvbnRhaW5zIGFuIEFtb3VudE91dHB1dCBiZWNhdXNlIHRoZVxuICAgICAgICAvLyBmaXJzdCBsb29wIGZpbHRlcnMgZm9yIGZ1bmdpYmxlIGFzc2V0cy5cbiAgICAgICAgY29uc3Qgb3V0cHV0OiBBbW91bnRPdXRwdXQgPSBwYXJzZWFibGVPdXRwdXQuZ2V0T3V0cHV0KCkgYXMgQW1vdW50T3V0cHV0O1xuXG4gICAgICAgIGxldCBvdXRwdXRBbW91bnRSZW1haW5pbmc6IEJOID0gb3V0cHV0LmdldEFtb3VudCgpO1xuICAgICAgICAvLyBUaGUgb25seSBvdXRwdXQgdGhhdCBjb3VsZCBnZW5lcmF0ZSBjaGFuZ2UgaXMgdGhlIGxhc3Qgb3V0cHV0LlxuICAgICAgICAvLyBPdGhlcndpc2UsIGFueSBmdXJ0aGVyIFVUWE9zIHdvdWxkbid0IGhhdmUgbmVlZGVkIHRvIGJlIHNwZW50LlxuICAgICAgICBpZiAoaSA9PSBsb2NrZWRPdXRwdXRzLmxlbmd0aCAtIDEgJiYgbG9ja2VkQ2hhbmdlLmd0KHplcm8pKSB7XG4gICAgICAgICAgLy8gdXBkYXRlIG91dHB1dEFtb3VudFJlbWFpbmluZyB0byBubyBsb25nZXIgaG9sZCB0aGUgY2hhbmdlIHRoYXQgd2VcbiAgICAgICAgICAvLyBhcmUgcmV0dXJuaW5nLlxuICAgICAgICAgIG91dHB1dEFtb3VudFJlbWFpbmluZyA9IG91dHB1dEFtb3VudFJlbWFpbmluZy5zdWIobG9ja2VkQ2hhbmdlKTtcbiAgICAgICAgICAvLyBDcmVhdGUgdGhlIGlubmVyIG91dHB1dC5cbiAgICAgICAgICBjb25zdCBuZXdDaGFuZ2VPdXRwdXQ6IEFtb3VudE91dHB1dCA9IFNlbGVjdE91dHB1dENsYXNzKFxuICAgICAgICAgICAgb3V0cHV0LmdldE91dHB1dElEKCksXG4gICAgICAgICAgICBsb2NrZWRDaGFuZ2UsXG4gICAgICAgICAgICBvdXRwdXQuZ2V0QWRkcmVzc2VzKCksXG4gICAgICAgICAgICBvdXRwdXQuZ2V0TG9ja3RpbWUoKSxcbiAgICAgICAgICAgIG91dHB1dC5nZXRUaHJlc2hvbGQoKSxcbiAgICAgICAgICApIGFzIEFtb3VudE91dHB1dDtcbiAgICAgICAgICAvLyBXcmFwIHRoZSBpbm5lciBvdXRwdXQgaW4gdGhlIFN0YWtlYWJsZUxvY2tPdXQgd3JhcHBlci5cbiAgICAgICAgICBsZXQgbmV3TG9ja2VkQ2hhbmdlT3V0cHV0OiBTdGFrZWFibGVMb2NrT3V0ID0gU2VsZWN0T3V0cHV0Q2xhc3MoXG4gICAgICAgICAgICBsb2NrZWRPdXRwdXQuZ2V0T3V0cHV0SUQoKSxcbiAgICAgICAgICAgIGxvY2tlZENoYW5nZSxcbiAgICAgICAgICAgIG91dHB1dC5nZXRBZGRyZXNzZXMoKSxcbiAgICAgICAgICAgIG91dHB1dC5nZXRMb2NrdGltZSgpLFxuICAgICAgICAgICAgb3V0cHV0LmdldFRocmVzaG9sZCgpLFxuICAgICAgICAgICAgc3Rha2VhYmxlTG9ja3RpbWUsXG4gICAgICAgICAgICBuZXcgUGFyc2VhYmxlT3V0cHV0KG5ld0NoYW5nZU91dHB1dCksXG4gICAgICAgICAgKSBhcyBTdGFrZWFibGVMb2NrT3V0O1xuICAgICAgICAgIGNvbnN0IHRyYW5zZmVyT3V0cHV0OiBUcmFuc2ZlcmFibGVPdXRwdXQgPSBuZXcgVHJhbnNmZXJhYmxlT3V0cHV0KGFzc2V0SUQsIG5ld0xvY2tlZENoYW5nZU91dHB1dCk7XG4gICAgICAgICAgYWFkLmFkZENoYW5nZSh0cmFuc2Zlck91dHB1dCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBrbm93IHRoYXQgb3V0cHV0QW1vdW50UmVtYWluaW5nID4gMC4gT3RoZXJ3aXNlLCB3ZSB3b3VsZCBuZXZlclxuICAgICAgICAvLyBoYXZlIGNvbnN1bWVkIHRoaXMgVVRYTywgYXMgaXQgd291bGQgYmUgb25seSBjaGFuZ2UuXG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBpbm5lciBvdXRwdXQuXG4gICAgICAgIGNvbnN0IG5ld091dHB1dDogQW1vdW50T3V0cHV0ID0gU2VsZWN0T3V0cHV0Q2xhc3MoXG4gICAgICAgICAgb3V0cHV0LmdldE91dHB1dElEKCksXG4gICAgICAgICAgb3V0cHV0QW1vdW50UmVtYWluaW5nLFxuICAgICAgICAgIG91dHB1dC5nZXRBZGRyZXNzZXMoKSxcbiAgICAgICAgICBvdXRwdXQuZ2V0TG9ja3RpbWUoKSxcbiAgICAgICAgICBvdXRwdXQuZ2V0VGhyZXNob2xkKCksXG4gICAgICAgICkgYXMgQW1vdW50T3V0cHV0O1xuICAgICAgICAvLyBXcmFwIHRoZSBpbm5lciBvdXRwdXQgaW4gdGhlIFN0YWtlYWJsZUxvY2tPdXQgd3JhcHBlci5cbiAgICAgICAgY29uc3QgbmV3TG9ja2VkT3V0cHV0OiBTdGFrZWFibGVMb2NrT3V0ID0gU2VsZWN0T3V0cHV0Q2xhc3MoXG4gICAgICAgICAgbG9ja2VkT3V0cHV0LmdldE91dHB1dElEKCksXG4gICAgICAgICAgb3V0cHV0QW1vdW50UmVtYWluaW5nLFxuICAgICAgICAgIG91dHB1dC5nZXRBZGRyZXNzZXMoKSxcbiAgICAgICAgICBvdXRwdXQuZ2V0TG9ja3RpbWUoKSxcbiAgICAgICAgICBvdXRwdXQuZ2V0VGhyZXNob2xkKCksXG4gICAgICAgICAgc3Rha2VhYmxlTG9ja3RpbWUsXG4gICAgICAgICAgbmV3IFBhcnNlYWJsZU91dHB1dChuZXdPdXRwdXQpLFxuICAgICAgICApIGFzIFN0YWtlYWJsZUxvY2tPdXQ7XG4gICAgICAgIGNvbnN0IHRyYW5zZmVyT3V0cHV0OiBUcmFuc2ZlcmFibGVPdXRwdXQgPSBuZXcgVHJhbnNmZXJhYmxlT3V0cHV0KGFzc2V0SUQsIG5ld0xvY2tlZE91dHB1dCk7XG4gICAgICAgIGFhZC5hZGRPdXRwdXQodHJhbnNmZXJPdXRwdXQpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIHVubG9ja2VkQ2hhbmdlIGlzIHRoZSBhbW91bnQgb2YgdW5sb2NrZWQgY2hhbmdlIHRoYXQgc2hvdWxkIGJlIHJldHVybmVkXG4gICAgICAvLyB0byB0aGUgc2VuZGVyXG4gICAgICBjb25zdCB1bmxvY2tlZENoYW5nZTogQk4gPSBpc1N0YWtlYWJsZUxvY2tDaGFuZ2UgPyB6ZXJvLmNsb25lKCkgOiBjaGFuZ2U7XG4gICAgICBpZiAodW5sb2NrZWRDaGFuZ2UuZ3QoemVybykpIHtcbiAgICAgICAgY29uc3QgbmV3Q2hhbmdlT3V0cHV0OiBBbW91bnRPdXRwdXQgPSBuZXcgU0VDUFRyYW5zZmVyT3V0cHV0KFxuICAgICAgICAgIHVubG9ja2VkQ2hhbmdlLFxuICAgICAgICAgIGFhZC5nZXRDaGFuZ2VBZGRyZXNzZXMoKSxcbiAgICAgICAgICB6ZXJvLmNsb25lKCksIC8vIG1ha2Ugc3VyZSB0aGF0IHdlIGRvbid0IGxvY2sgdGhlIGNoYW5nZSBvdXRwdXQuXG4gICAgICAgICAgMSwgLy8gb25seSByZXF1aXJlIG9uZSBvZiB0aGUgY2hhbmdlcyBhZGRyZXNzZXMgdG8gc3BlbmQgdGhpcyBvdXRwdXQuXG4gICAgICAgICkgYXMgQW1vdW50T3V0cHV0O1xuICAgICAgICBjb25zdCB0cmFuc2Zlck91dHB1dDogVHJhbnNmZXJhYmxlT3V0cHV0ID0gbmV3IFRyYW5zZmVyYWJsZU91dHB1dChhc3NldElELCBuZXdDaGFuZ2VPdXRwdXQpO1xuICAgICAgICBhYWQuYWRkQ2hhbmdlKHRyYW5zZmVyT3V0cHV0KTtcbiAgICAgIH1cblxuICAgICAgLy8gdG90YWxBbW91bnRTcGVudCBpcyB0aGUgdG90YWwgYW1vdW50IG9mIHRva2VucyBjb25zdW1lZC5cbiAgICAgIGNvbnN0IHRvdGFsQW1vdW50U3BlbnQ6IEJOID0gYXNzZXRBbW91bnQuZ2V0U3BlbnQoKTtcbiAgICAgIC8vIHN0YWtlYWJsZUxvY2tlZEFtb3VudCBpcyB0aGUgdG90YWwgYW1vdW50IG9mIGxvY2tlZCB0b2tlbnMgY29uc3VtZWQuXG4gICAgICBjb25zdCBzdGFrZWFibGVMb2NrZWRBbW91bnQ6IEJOID0gYXNzZXRBbW91bnQuZ2V0U3Rha2VhYmxlTG9ja1NwZW50KCk7XG4gICAgICAvLyB0b3RhbFVubG9ja2VkU3BlbnQgaXMgdGhlIHRvdGFsIGFtb3VudCBvZiB1bmxvY2tlZCB0b2tlbnMgY29uc3VtZWQuXG4gICAgICBjb25zdCB0b3RhbFVubG9ja2VkU3BlbnQ6IEJOID0gdG90YWxBbW91bnRTcGVudC5zdWIoc3Rha2VhYmxlTG9ja2VkQW1vdW50KTtcbiAgICAgIC8vIGFtb3VudEJ1cm50IGlzIHRoZSBhbW91bnQgb2YgdW5sb2NrZWQgdG9rZW5zIHRoYXQgbXVzdCBiZSBidXJuLlxuICAgICAgY29uc3QgYW1vdW50QnVybnQ6IEJOID0gYXNzZXRBbW91bnQuZ2V0QnVybigpO1xuICAgICAgLy8gdG90YWxVbmxvY2tlZEF2YWlsYWJsZSBpcyB0aGUgdG90YWwgYW1vdW50IG9mIHVubG9ja2VkIHRva2VucyBhdmFpbGFibGVcbiAgICAgIC8vIHRvIGJlIHByb2R1Y2VkLlxuICAgICAgY29uc3QgdG90YWxVbmxvY2tlZEF2YWlsYWJsZTogQk4gPSB0b3RhbFVubG9ja2VkU3BlbnQuc3ViKGFtb3VudEJ1cm50KTtcbiAgICAgIC8vIHVubG9ja2VkQW1vdW50IGlzIHRoZSBhbW91bnQgb2YgdW5sb2NrZWQgdG9rZW5zIHRoYXQgc2hvdWxkIGJlIHNlbnQuXG4gICAgICBjb25zdCB1bmxvY2tlZEFtb3VudDogQk4gPSB0b3RhbFVubG9ja2VkQXZhaWxhYmxlLnN1Yih1bmxvY2tlZENoYW5nZSk7XG4gICAgICBpZiAodW5sb2NrZWRBbW91bnQuZ3QoemVybykpIHtcbiAgICAgICAgY29uc3QgbmV3T3V0cHV0OiBBbW91bnRPdXRwdXQgPSBuZXcgU0VDUFRyYW5zZmVyT3V0cHV0KFxuICAgICAgICAgIHVubG9ja2VkQW1vdW50LFxuICAgICAgICAgIGFhZC5nZXREZXN0aW5hdGlvbnMoKSxcbiAgICAgICAgICBsb2NrdGltZSxcbiAgICAgICAgICB0aHJlc2hvbGQsXG4gICAgICAgICkgYXMgQW1vdW50T3V0cHV0O1xuICAgICAgICBjb25zdCB0cmFuc2Zlck91dHB1dDogVHJhbnNmZXJhYmxlT3V0cHV0ID0gbmV3IFRyYW5zZmVyYWJsZU91dHB1dChhc3NldElELCBuZXdPdXRwdXQpO1xuICAgICAgICBhYWQuYWRkT3V0cHV0KHRyYW5zZmVyT3V0cHV0KTtcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBbW1Vuc2lnbmVkVHhdXSB3cmFwcGluZyBhIFtbQmFzZVR4XV0uIEZvciBtb3JlIGdyYW51bGFyIGNvbnRyb2wsIHlvdSBtYXkgY3JlYXRlIHlvdXIgb3duXG4gICAqIFtbVW5zaWduZWRUeF1dIHdyYXBwaW5nIGEgW1tCYXNlVHhdXSBtYW51YWxseSAod2l0aCB0aGVpciBjb3JyZXNwb25kaW5nIFtbVHJhbnNmZXJhYmxlSW5wdXRdXXMgYW5kIFtbVHJhbnNmZXJhYmxlT3V0cHV0XV1zKS5cbiAgICpcbiAgICogQHBhcmFtIG5ldHdvcmtpZCBUaGUgbnVtYmVyIHJlcHJlc2VudGluZyBOZXR3b3JrSUQgb2YgdGhlIG5vZGVcbiAgICogQHBhcmFtIGJsb2NrY2hhaW5pZCBUaGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gcmVwcmVzZW50aW5nIHRoZSBCbG9ja2NoYWluSUQgZm9yIHRoZSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0gYW1vdW50IFRoZSBhbW91bnQgb2YgdGhlIGFzc2V0IHRvIGJlIHNwZW50IGluIGl0cyBzbWFsbGVzdCBkZW5vbWluYXRpb24sIHJlcHJlc2VudGVkIGFzIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59LlxuICAgKiBAcGFyYW0gYXNzZXRJRCB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBvZiB0aGUgYXNzZXQgSUQgZm9yIHRoZSBVVFhPXG4gICAqIEBwYXJhbSB0b0FkZHJlc3NlcyBUaGUgYWRkcmVzc2VzIHRvIHNlbmQgdGhlIGZ1bmRzXG4gICAqIEBwYXJhbSBmcm9tQWRkcmVzc2VzIFRoZSBhZGRyZXNzZXMgYmVpbmcgdXNlZCB0byBzZW5kIHRoZSBmdW5kcyBmcm9tIHRoZSBVVFhPcyB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfVxuICAgKiBAcGFyYW0gY2hhbmdlQWRkcmVzc2VzIE9wdGlvbmFsLiBUaGUgYWRkcmVzc2VzIHRoYXQgY2FuIHNwZW5kIHRoZSBjaGFuZ2UgcmVtYWluaW5nIGZyb20gdGhlIHNwZW50IFVUWE9zLiBEZWZhdWx0OiB0b0FkZHJlc3Nlc1xuICAgKiBAcGFyYW0gZmVlIE9wdGlvbmFsLiBUaGUgYW1vdW50IG9mIGZlZXMgdG8gYnVybiBpbiBpdHMgc21hbGxlc3QgZGVub21pbmF0aW9uLCByZXByZXNlbnRlZCBhcyB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfVxuICAgKiBAcGFyYW0gZmVlQXNzZXRJRCBPcHRpb25hbC4gVGhlIGFzc2V0SUQgb2YgdGhlIGZlZXMgYmVpbmcgYnVybmVkLiBEZWZhdWx0OiBhc3NldElEXG4gICAqIEBwYXJhbSBtZW1vIE9wdGlvbmFsLiBDb250YWlucyBhcmJpdHJhcnkgZGF0YSwgdXAgdG8gMjU2IGJ5dGVzXG4gICAqIEBwYXJhbSBhc09mIE9wdGlvbmFsLiBUaGUgdGltZXN0YW1wIHRvIHZlcmlmeSB0aGUgdHJhbnNhY3Rpb24gYWdhaW5zdCBhcyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59XG4gICAqIEBwYXJhbSBsb2NrdGltZSBPcHRpb25hbC4gVGhlIGxvY2t0aW1lIGZpZWxkIGNyZWF0ZWQgaW4gdGhlIHJlc3VsdGluZyBvdXRwdXRzXG4gICAqIEBwYXJhbSB0aHJlc2hvbGQgT3B0aW9uYWwuIFRoZSBudW1iZXIgb2Ygc2lnbmF0dXJlcyByZXF1aXJlZCB0byBzcGVuZCB0aGUgZnVuZHMgaW4gdGhlIHJlc3VsdGFudCBVVFhPXG4gICAqIFxuICAgKiBAcmV0dXJucyBBbiB1bnNpZ25lZCB0cmFuc2FjdGlvbiBjcmVhdGVkIGZyb20gdGhlIHBhc3NlZCBpbiBwYXJhbWV0ZXJzLlxuICAgKlxuICAgKi9cbiAgYnVpbGRCYXNlVHggPSAoXG4gICAgbmV0d29ya2lkOiBudW1iZXIsXG4gICAgYmxvY2tjaGFpbmlkOiBCdWZmZXIsXG4gICAgYW1vdW50OiBCTixcbiAgICBhc3NldElEOiBCdWZmZXIsXG4gICAgdG9BZGRyZXNzZXM6IEFycmF5PEJ1ZmZlcj4sXG4gICAgZnJvbUFkZHJlc3NlczogQXJyYXk8QnVmZmVyPixcbiAgICBjaGFuZ2VBZGRyZXNzZXM6IEFycmF5PEJ1ZmZlcj4gPSB1bmRlZmluZWQsXG4gICAgZmVlOiBCTiA9IHVuZGVmaW5lZCxcbiAgICBmZWVBc3NldElEOiBCdWZmZXIgPSB1bmRlZmluZWQsXG4gICAgbWVtbzogQnVmZmVyID0gdW5kZWZpbmVkLFxuICAgIGFzT2Y6IEJOID0gVW5peE5vdygpLFxuICAgIGxvY2t0aW1lOiBCTiA9IG5ldyBCTigwKSxcbiAgICB0aHJlc2hvbGQ6IG51bWJlciA9IDFcbiAgKTogVW5zaWduZWRUeCA9PiB7XG5cbiAgICBpZiAodGhyZXNob2xkID4gdG9BZGRyZXNzZXMubGVuZ3RoKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciAtIFVUWE9TZXQuYnVpbGRCYXNlVHg6IHRocmVzaG9sZCBpcyBncmVhdGVyIHRoYW4gbnVtYmVyIG9mIGFkZHJlc3Nlc2ApO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgY2hhbmdlQWRkcmVzc2VzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBjaGFuZ2VBZGRyZXNzZXMgPSB0b0FkZHJlc3NlcztcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGZlZUFzc2V0SUQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGZlZUFzc2V0SUQgPSBhc3NldElEO1xuICAgIH1cblxuICAgIGNvbnN0IHplcm86IEJOID0gbmV3IEJOKDApO1xuXG4gICAgaWYgKGFtb3VudC5lcSh6ZXJvKSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBjb25zdCBhYWQ6IEFzc2V0QW1vdW50RGVzdGluYXRpb24gPSBuZXcgQXNzZXRBbW91bnREZXN0aW5hdGlvbih0b0FkZHJlc3NlcywgZnJvbUFkZHJlc3NlcywgY2hhbmdlQWRkcmVzc2VzKTtcbiAgICBpZiAoYXNzZXRJRC50b1N0cmluZyhcImhleFwiKSA9PT0gZmVlQXNzZXRJRC50b1N0cmluZyhcImhleFwiKSkge1xuICAgICAgYWFkLmFkZEFzc2V0QW1vdW50KGFzc2V0SUQsIGFtb3VudCwgZmVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWFkLmFkZEFzc2V0QW1vdW50KGFzc2V0SUQsIGFtb3VudCwgemVybyk7XG4gICAgICBpZiAodGhpcy5fZmVlQ2hlY2soZmVlLCBmZWVBc3NldElEKSkge1xuICAgICAgICBhYWQuYWRkQXNzZXRBbW91bnQoZmVlQXNzZXRJRCwgemVybywgZmVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgaW5zOiBBcnJheTxUcmFuc2ZlcmFibGVJbnB1dD4gPSBbXTtcbiAgICBsZXQgb3V0czogQXJyYXk8VHJhbnNmZXJhYmxlT3V0cHV0PiA9IFtdO1xuXG4gICAgY29uc3QgbWluU3BlbmRhYmxlRXJyOiBFcnJvciA9IHRoaXMuZ2V0TWluaW11bVNwZW5kYWJsZShhYWQsIGFzT2YsIGxvY2t0aW1lLCB0aHJlc2hvbGQpO1xuICAgIGlmICh0eXBlb2YgbWluU3BlbmRhYmxlRXJyID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBpbnMgPSBhYWQuZ2V0SW5wdXRzKCk7XG4gICAgICBvdXRzID0gYWFkLmdldEFsbE91dHB1dHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbWluU3BlbmRhYmxlRXJyO1xuICAgIH1cblxuICAgIGNvbnN0IGJhc2VUeDogQmFzZVR4ID0gbmV3IEJhc2VUeChuZXR3b3JraWQsIGJsb2NrY2hhaW5pZCwgb3V0cywgaW5zLCBtZW1vKTtcbiAgICByZXR1cm4gbmV3IFVuc2lnbmVkVHgoYmFzZVR4KTtcblxuICB9O1xuXG4gIC8qKlxuICAgICogQ3JlYXRlcyBhbiB1bnNpZ25lZCBJbXBvcnRUeCB0cmFuc2FjdGlvbi5cbiAgICAqXG4gICAgKiBAcGFyYW0gbmV0d29ya2lkIFRoZSBudW1iZXIgcmVwcmVzZW50aW5nIE5ldHdvcmtJRCBvZiB0aGUgbm9kZVxuICAgICogQHBhcmFtIGJsb2NrY2hhaW5pZCBUaGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gcmVwcmVzZW50aW5nIHRoZSBCbG9ja2NoYWluSUQgZm9yIHRoZSB0cmFuc2FjdGlvblxuICAgICogQHBhcmFtIHRvQWRkcmVzc2VzIFRoZSBhZGRyZXNzZXMgdG8gc2VuZCB0aGUgZnVuZHNcbiAgICAqIEBwYXJhbSBmcm9tQWRkcmVzc2VzIFRoZSBhZGRyZXNzZXMgYmVpbmcgdXNlZCB0byBzZW5kIHRoZSBmdW5kcyBmcm9tIHRoZSBVVFhPcyB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfVxuICAgICogQHBhcmFtIGNoYW5nZUFkZHJlc3NlcyBPcHRpb25hbC4gVGhlIGFkZHJlc3NlcyB0aGF0IGNhbiBzcGVuZCB0aGUgY2hhbmdlIHJlbWFpbmluZyBmcm9tIHRoZSBzcGVudCBVVFhPcy4gRGVmYXVsdDogdG9BZGRyZXNzZXNcbiAgICAqIEBwYXJhbSBpbXBvcnRJbnMgQW4gYXJyYXkgb2YgW1tUcmFuc2ZlcmFibGVJbnB1dF1dcyBiZWluZyBpbXBvcnRlZFxuICAgICogQHBhcmFtIHNvdXJjZUNoYWluIEEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gZm9yIHRoZSBjaGFpbmlkIHdoZXJlIHRoZSBpbXBvcnRzIGFyZSBjb21pbmcgZnJvbS5cbiAgICAqIEBwYXJhbSBmZWUgT3B0aW9uYWwuIFRoZSBhbW91bnQgb2YgZmVlcyB0byBidXJuIGluIGl0cyBzbWFsbGVzdCBkZW5vbWluYXRpb24sIHJlcHJlc2VudGVkIGFzIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59LiBGZWUgd2lsbCBjb21lIGZyb20gdGhlIGlucHV0cyBmaXJzdCwgaWYgdGhleSBjYW4uXG4gICAgKiBAcGFyYW0gZmVlQXNzZXRJRCBPcHRpb25hbC4gVGhlIGFzc2V0SUQgb2YgdGhlIGZlZXMgYmVpbmcgYnVybmVkLiBcbiAgICAqIEBwYXJhbSBtZW1vIE9wdGlvbmFsIGNvbnRhaW5zIGFyYml0cmFyeSBieXRlcywgdXAgdG8gMjU2IGJ5dGVzXG4gICAgKiBAcGFyYW0gYXNPZiBPcHRpb25hbC4gVGhlIHRpbWVzdGFtcCB0byB2ZXJpZnkgdGhlIHRyYW5zYWN0aW9uIGFnYWluc3QgYXMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfVxuICAgICogQHBhcmFtIGxvY2t0aW1lIE9wdGlvbmFsLiBUaGUgbG9ja3RpbWUgZmllbGQgY3JlYXRlZCBpbiB0aGUgcmVzdWx0aW5nIG91dHB1dHNcbiAgICAqIEBwYXJhbSB0aHJlc2hvbGQgT3B0aW9uYWwuIFRoZSBudW1iZXIgb2Ygc2lnbmF0dXJlcyByZXF1aXJlZCB0byBzcGVuZCB0aGUgZnVuZHMgaW4gdGhlIHJlc3VsdGFudCBVVFhPXG4gICAgKiBAcmV0dXJucyBBbiB1bnNpZ25lZCB0cmFuc2FjdGlvbiBjcmVhdGVkIGZyb20gdGhlIHBhc3NlZCBpbiBwYXJhbWV0ZXJzLlxuICAgICpcbiAgICAqL1xuICBidWlsZEltcG9ydFR4ID0gKFxuICAgIG5ldHdvcmtpZDogbnVtYmVyLFxuICAgIGJsb2NrY2hhaW5pZDogQnVmZmVyLFxuICAgIHRvQWRkcmVzc2VzOiBBcnJheTxCdWZmZXI+LFxuICAgIGZyb21BZGRyZXNzZXM6IEFycmF5PEJ1ZmZlcj4sXG4gICAgY2hhbmdlQWRkcmVzc2VzOiBBcnJheTxCdWZmZXI+LFxuICAgIGF0b21pY3M6IEFycmF5PFVUWE8+LFxuICAgIHNvdXJjZUNoYWluOiBCdWZmZXIgPSB1bmRlZmluZWQsXG4gICAgZmVlOiBCTiA9IHVuZGVmaW5lZCxcbiAgICBmZWVBc3NldElEOiBCdWZmZXIgPSB1bmRlZmluZWQsXG4gICAgbWVtbzogQnVmZmVyID0gdW5kZWZpbmVkLFxuICAgIGFzT2Y6IEJOID0gVW5peE5vdygpLFxuICAgIGxvY2t0aW1lOiBCTiA9IG5ldyBCTigwKSxcbiAgICB0aHJlc2hvbGQ6IG51bWJlciA9IDFcbiAgKTogVW5zaWduZWRUeCA9PiB7XG4gICAgY29uc3QgemVybzogQk4gPSBuZXcgQk4oMCk7XG4gICAgbGV0IGluczogQXJyYXk8VHJhbnNmZXJhYmxlSW5wdXQ+ID0gW107XG4gICAgbGV0IG91dHM6IEFycmF5PFRyYW5zZmVyYWJsZU91dHB1dD4gPSBbXTtcbiAgICBpZiAodHlwZW9mIGZlZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZmVlID0gemVyby5jbG9uZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGltcG9ydEluczogQXJyYXk8VHJhbnNmZXJhYmxlSW5wdXQ+ID0gW107XG4gICAgbGV0IGZlZXBhaWQ6IEJOID0gbmV3IEJOKDApO1xuICAgIGxldCBmZWVBc3NldFN0cjogc3RyaW5nID0gZmVlQXNzZXRJRC50b1N0cmluZyhcImhleFwiKTtcbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgYXRvbWljcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgdXR4bzogVVRYTyA9IGF0b21pY3NbaV07XG4gICAgICBjb25zdCBhc3NldElEOiBCdWZmZXIgPSB1dHhvLmdldEFzc2V0SUQoKTtcbiAgICAgIGNvbnN0IG91dHB1dDogQW1vdW50T3V0cHV0ID0gdXR4by5nZXRPdXRwdXQoKSBhcyBBbW91bnRPdXRwdXQ7XG4gICAgICBsZXQgYW10OiBCTiA9IG91dHB1dC5nZXRBbW91bnQoKS5jbG9uZSgpO1xuXG4gICAgICBsZXQgaW5mZWVhbW91bnQgPSBhbXQuY2xvbmUoKTtcbiAgICAgIGxldCBhc3NldFN0cjogc3RyaW5nID0gYXNzZXRJRC50b1N0cmluZyhcImhleFwiKTtcbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGZlZUFzc2V0SUQgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgZmVlLmd0KHplcm8pICYmXG4gICAgICAgIGZlZXBhaWQubHQoZmVlKSAmJlxuICAgICAgICBhc3NldFN0ciA9PT0gZmVlQXNzZXRTdHJcbiAgICAgICkge1xuICAgICAgICBmZWVwYWlkID0gZmVlcGFpZC5hZGQoaW5mZWVhbW91bnQpO1xuICAgICAgICBpZiAoZmVlcGFpZC5ndGUoZmVlKSkge1xuICAgICAgICAgIGluZmVlYW1vdW50ID0gZmVlcGFpZC5zdWIoZmVlKTtcbiAgICAgICAgICBmZWVwYWlkID0gZmVlLmNsb25lKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5mZWVhbW91bnQgPSB6ZXJvLmNsb25lKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgdHhpZDogQnVmZmVyID0gdXR4by5nZXRUeElEKCk7XG4gICAgICBjb25zdCBvdXRwdXRpZHg6IEJ1ZmZlciA9IHV0eG8uZ2V0T3V0cHV0SWR4KCk7XG4gICAgICBjb25zdCBpbnB1dDogU0VDUFRyYW5zZmVySW5wdXQgPSBuZXcgU0VDUFRyYW5zZmVySW5wdXQoYW10KTtcbiAgICAgIGNvbnN0IHhmZXJpbjogVHJhbnNmZXJhYmxlSW5wdXQgPSBuZXcgVHJhbnNmZXJhYmxlSW5wdXQodHhpZCwgb3V0cHV0aWR4LCBhc3NldElELCBpbnB1dCk7XG4gICAgICBjb25zdCBmcm9tOiBBcnJheTxCdWZmZXI+ID0gb3V0cHV0LmdldEFkZHJlc3NlcygpO1xuICAgICAgY29uc3Qgc3BlbmRlcnM6IEFycmF5PEJ1ZmZlcj4gPSBvdXRwdXQuZ2V0U3BlbmRlcnMoZnJvbSwgYXNPZik7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNwZW5kZXJzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGNvbnN0IGlkeDogbnVtYmVyID0gb3V0cHV0LmdldEFkZHJlc3NJZHgoc3BlbmRlcnNbal0pO1xuICAgICAgICBpZiAoaWR4ID09PSAtMSkge1xuICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciAtIFVUWE9TZXQuYnVpbGRJbXBvcnRUeDogbm8gc3VjaCAnXG4gICAgICAgICAgICArIGBhZGRyZXNzIGluIG91dHB1dDogJHtzcGVuZGVyc1tqXX1gKTtcbiAgICAgICAgfVxuICAgICAgICB4ZmVyaW4uZ2V0SW5wdXQoKS5hZGRTaWduYXR1cmVJZHgoaWR4LCBzcGVuZGVyc1tqXSk7XG4gICAgICB9XG4gICAgICBpbXBvcnRJbnMucHVzaCh4ZmVyaW4pO1xuICAgICAgLy9hZGQgZXh0cmEgb3V0cHV0cyBmb3IgZWFjaCBhbW91bnQgKGNhbGN1bGF0ZWQgZnJvbSB0aGUgaW1wb3J0ZWQgaW5wdXRzKSwgbWludXMgZmVlc1xuICAgICAgaWYgKGluZmVlYW1vdW50Lmd0KHplcm8pKSB7XG4gICAgICAgIGNvbnN0IHNwZW5kb3V0OiBBbW91bnRPdXRwdXQgPSBTZWxlY3RPdXRwdXRDbGFzcyhvdXRwdXQuZ2V0T3V0cHV0SUQoKSxcbiAgICAgICAgICBpbmZlZWFtb3VudCwgdG9BZGRyZXNzZXMsIGxvY2t0aW1lLCB0aHJlc2hvbGQpIGFzIEFtb3VudE91dHB1dDtcbiAgICAgICAgY29uc3QgeGZlcm91dDogVHJhbnNmZXJhYmxlT3V0cHV0ID0gbmV3IFRyYW5zZmVyYWJsZU91dHB1dChhc3NldElELCBzcGVuZG91dCk7XG4gICAgICAgIG91dHMucHVzaCh4ZmVyb3V0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBnZXQgcmVtYWluaW5nIGZlZXMgZnJvbSB0aGUgcHJvdmlkZWQgYWRkcmVzc2VzXG4gICAgbGV0IGZlZVJlbWFpbmluZzogQk4gPSBmZWUuc3ViKGZlZXBhaWQpO1xuICAgIGlmIChmZWVSZW1haW5pbmcuZ3QoemVybykgJiYgdGhpcy5fZmVlQ2hlY2soZmVlUmVtYWluaW5nLCBmZWVBc3NldElEKSkge1xuICAgICAgY29uc3QgYWFkOiBBc3NldEFtb3VudERlc3RpbmF0aW9uID0gbmV3IEFzc2V0QW1vdW50RGVzdGluYXRpb24odG9BZGRyZXNzZXMsIGZyb21BZGRyZXNzZXMsIGNoYW5nZUFkZHJlc3Nlcyk7XG4gICAgICBhYWQuYWRkQXNzZXRBbW91bnQoZmVlQXNzZXRJRCwgemVybywgZmVlUmVtYWluaW5nKTtcbiAgICAgIGNvbnN0IG1pblNwZW5kYWJsZUVycjogRXJyb3IgPSB0aGlzLmdldE1pbmltdW1TcGVuZGFibGUoYWFkLCBhc09mLCBsb2NrdGltZSwgdGhyZXNob2xkKTtcbiAgICAgIGlmICh0eXBlb2YgbWluU3BlbmRhYmxlRXJyID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGlucyA9IGFhZC5nZXRJbnB1dHMoKTtcbiAgICAgICAgb3V0cyA9IGFhZC5nZXRBbGxPdXRwdXRzKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBtaW5TcGVuZGFibGVFcnI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaW1wb3J0VHg6IEltcG9ydFR4ID0gbmV3IEltcG9ydFR4KG5ldHdvcmtpZCwgYmxvY2tjaGFpbmlkLCBvdXRzLCBpbnMsIG1lbW8sIHNvdXJjZUNoYWluLCBpbXBvcnRJbnMpO1xuICAgIHJldHVybiBuZXcgVW5zaWduZWRUeChpbXBvcnRUeCk7XG4gIH07XG5cbiAgLyoqXG4gICAgKiBDcmVhdGVzIGFuIHVuc2lnbmVkIEV4cG9ydFR4IHRyYW5zYWN0aW9uLiBcbiAgICAqXG4gICAgKiBAcGFyYW0gbmV0d29ya2lkIFRoZSBudW1iZXIgcmVwcmVzZW50aW5nIE5ldHdvcmtJRCBvZiB0aGUgbm9kZVxuICAgICogQHBhcmFtIGJsb2NrY2hhaW5pZCBUaGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gcmVwcmVzZW50aW5nIHRoZSBCbG9ja2NoYWluSUQgZm9yIHRoZSB0cmFuc2FjdGlvblxuICAgICogQHBhcmFtIGFtb3VudCBUaGUgYW1vdW50IGJlaW5nIGV4cG9ydGVkIGFzIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2JuLmpzL3xCTn1cbiAgICAqIEBwYXJhbSBhdmF4QXNzZXRJRCB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBvZiB0aGUgYXNzZXQgSUQgZm9yIEFWQVhcbiAgICAqIEBwYXJhbSB0b0FkZHJlc3NlcyBBbiBhcnJheSBvZiBhZGRyZXNzZXMgYXMge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gd2hvIHJlY2lldmVzIHRoZSBBVkFYXG4gICAgKiBAcGFyYW0gZnJvbUFkZHJlc3NlcyBBbiBhcnJheSBvZiBhZGRyZXNzZXMgYXMge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gd2hvIG93bnMgdGhlIEFWQVhcbiAgICAqIEBwYXJhbSBjaGFuZ2VBZGRyZXNzZXMgQW4gYXJyYXkgb2YgYWRkcmVzc2VzIGFzIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHdobyBnZXRzIHRoZSBjaGFuZ2UgbGVmdG92ZXIgb2YgdGhlIEFWQVhcbiAgICAqIEBwYXJhbSBkZXN0aW5hdGlvbkNoYWluIE9wdGlvbmFsLiBBIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IGZvciB0aGUgY2hhaW5pZCB3aGVyZSB0byBzZW5kIHRoZSBhc3NldC5cbiAgICAqIEBwYXJhbSBmZWUgT3B0aW9uYWwuIFRoZSBhbW91bnQgb2YgZmVlcyB0byBidXJuIGluIGl0cyBzbWFsbGVzdCBkZW5vbWluYXRpb24sIHJlcHJlc2VudGVkIGFzIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59XG4gICAgKiBAcGFyYW0gZmVlQXNzZXRJRCBPcHRpb25hbC4gVGhlIGFzc2V0SUQgb2YgdGhlIGZlZXMgYmVpbmcgYnVybmVkLiBcbiAgICAqIEBwYXJhbSBtZW1vIE9wdGlvbmFsIGNvbnRhaW5zIGFyYml0cmFyeSBieXRlcywgdXAgdG8gMjU2IGJ5dGVzXG4gICAgKiBAcGFyYW0gYXNPZiBPcHRpb25hbC4gVGhlIHRpbWVzdGFtcCB0byB2ZXJpZnkgdGhlIHRyYW5zYWN0aW9uIGFnYWluc3QgYXMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfVxuICAgICogQHBhcmFtIGxvY2t0aW1lIE9wdGlvbmFsLiBUaGUgbG9ja3RpbWUgZmllbGQgY3JlYXRlZCBpbiB0aGUgcmVzdWx0aW5nIG91dHB1dHNcbiAgICAqIEBwYXJhbSB0aHJlc2hvbGQgT3B0aW9uYWwuIFRoZSBudW1iZXIgb2Ygc2lnbmF0dXJlcyByZXF1aXJlZCB0byBzcGVuZCB0aGUgZnVuZHMgaW4gdGhlIHJlc3VsdGFudCBVVFhPXG4gICAgKiBcbiAgICAqIEByZXR1cm5zIEFuIHVuc2lnbmVkIHRyYW5zYWN0aW9uIGNyZWF0ZWQgZnJvbSB0aGUgcGFzc2VkIGluIHBhcmFtZXRlcnMuXG4gICAgKlxuICAgICovXG4gIGJ1aWxkRXhwb3J0VHggPSAoXG4gICAgbmV0d29ya2lkOiBudW1iZXIsXG4gICAgYmxvY2tjaGFpbmlkOiBCdWZmZXIsXG4gICAgYW1vdW50OiBCTixcbiAgICBhdmF4QXNzZXRJRDogQnVmZmVyLCAvLyBUT0RPOiByZW5hbWUgdGhpcyB0byBhbW91bnRBc3NldElEXG4gICAgdG9BZGRyZXNzZXM6IEFycmF5PEJ1ZmZlcj4sXG4gICAgZnJvbUFkZHJlc3NlczogQXJyYXk8QnVmZmVyPixcbiAgICBjaGFuZ2VBZGRyZXNzZXM6IEFycmF5PEJ1ZmZlcj4gPSB1bmRlZmluZWQsXG4gICAgZGVzdGluYXRpb25DaGFpbjogQnVmZmVyID0gdW5kZWZpbmVkLFxuICAgIGZlZTogQk4gPSB1bmRlZmluZWQsXG4gICAgZmVlQXNzZXRJRDogQnVmZmVyID0gdW5kZWZpbmVkLFxuICAgIG1lbW86IEJ1ZmZlciA9IHVuZGVmaW5lZCxcbiAgICBhc09mOiBCTiA9IFVuaXhOb3coKSxcbiAgICBsb2NrdGltZTogQk4gPSBuZXcgQk4oMCksXG4gICAgdGhyZXNob2xkOiBudW1iZXIgPSAxLFxuICApOiBVbnNpZ25lZFR4ID0+IHtcbiAgICBsZXQgaW5zOiBBcnJheTxUcmFuc2ZlcmFibGVJbnB1dD4gPSBbXTtcbiAgICBsZXQgb3V0czogQXJyYXk8VHJhbnNmZXJhYmxlT3V0cHV0PiA9IFtdO1xuICAgIGxldCBleHBvcnRvdXRzOiBBcnJheTxUcmFuc2ZlcmFibGVPdXRwdXQ+ID0gW107XG5cbiAgICBpZiAodHlwZW9mIGNoYW5nZUFkZHJlc3NlcyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgY2hhbmdlQWRkcmVzc2VzID0gdG9BZGRyZXNzZXM7XG4gICAgfVxuXG4gICAgY29uc3QgemVybzogQk4gPSBuZXcgQk4oMCk7XG5cbiAgICBpZiAoYW1vdW50LmVxKHplcm8pKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZmVlQXNzZXRJRCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZmVlQXNzZXRJRCA9IGF2YXhBc3NldElEO1xuICAgIH0gZWxzZSBpZiAoZmVlQXNzZXRJRC50b1N0cmluZyhcImhleFwiKSAhPT0gYXZheEFzc2V0SUQudG9TdHJpbmcoXCJoZXhcIikpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIC0gVVRYT1NldC5idWlsZEV4cG9ydFR4OiAnXG4gICAgICAgICsgYGZlZUFzc2V0SUQgbXVzdCBtYXRjaCBhdmF4QXNzZXRJRGApO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZGVzdGluYXRpb25DaGFpbiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZGVzdGluYXRpb25DaGFpbiA9IGJpbnRvb2xzLmNiNThEZWNvZGUoRGVmYXVsdHMubmV0d29ya1tuZXR3b3JraWRdLlhbXCJibG9ja2NoYWluSURcIl0pO1xuICAgIH1cblxuICAgIGNvbnN0IGFhZDogQXNzZXRBbW91bnREZXN0aW5hdGlvbiA9IG5ldyBBc3NldEFtb3VudERlc3RpbmF0aW9uKHRvQWRkcmVzc2VzLCBmcm9tQWRkcmVzc2VzLCBjaGFuZ2VBZGRyZXNzZXMpO1xuICAgIGlmIChhdmF4QXNzZXRJRC50b1N0cmluZyhcImhleFwiKSA9PT0gZmVlQXNzZXRJRC50b1N0cmluZyhcImhleFwiKSkge1xuICAgICAgYWFkLmFkZEFzc2V0QW1vdW50KGF2YXhBc3NldElELCBhbW91bnQsIGZlZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFhZC5hZGRBc3NldEFtb3VudChhdmF4QXNzZXRJRCwgYW1vdW50LCB6ZXJvKTtcbiAgICAgIGlmICh0aGlzLl9mZWVDaGVjayhmZWUsIGZlZUFzc2V0SUQpKSB7XG4gICAgICAgIGFhZC5hZGRBc3NldEFtb3VudChmZWVBc3NldElELCB6ZXJvLCBmZWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG1pblNwZW5kYWJsZUVycjogRXJyb3IgPSB0aGlzLmdldE1pbmltdW1TcGVuZGFibGUoYWFkLCBhc09mLCBsb2NrdGltZSwgdGhyZXNob2xkKTtcbiAgICBpZiAodHlwZW9mIG1pblNwZW5kYWJsZUVyciA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgaW5zID0gYWFkLmdldElucHV0cygpO1xuICAgICAgb3V0cyA9IGFhZC5nZXRDaGFuZ2VPdXRwdXRzKCk7XG4gICAgICBleHBvcnRvdXRzID0gYWFkLmdldE91dHB1dHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbWluU3BlbmRhYmxlRXJyO1xuICAgIH1cblxuICAgIGNvbnN0IGV4cG9ydFR4OiBFeHBvcnRUeCA9IG5ldyBFeHBvcnRUeChuZXR3b3JraWQsIGJsb2NrY2hhaW5pZCwgb3V0cywgaW5zLCBtZW1vLCBkZXN0aW5hdGlvbkNoYWluLCBleHBvcnRvdXRzKTtcblxuICAgIHJldHVybiBuZXcgVW5zaWduZWRUeChleHBvcnRUeCk7XG4gIH07XG5cblxuICAvKipcbiAgKiBDbGFzcyByZXByZXNlbnRpbmcgYW4gdW5zaWduZWQgW1tBZGRTdWJuZXRWYWxpZGF0b3JUeF1dIHRyYW5zYWN0aW9uLlxuICAqXG4gICogQHBhcmFtIG5ldHdvcmtpZCBOZXR3b3JraWQsIFtbRGVmYXVsdE5ldHdvcmtJRF1dXG4gICogQHBhcmFtIGJsb2NrY2hhaW5pZCBCbG9ja2NoYWluaWQsIGRlZmF1bHQgdW5kZWZpbmVkXG4gICogQHBhcmFtIGZyb21BZGRyZXNzZXMgQW4gYXJyYXkgb2YgYWRkcmVzc2VzIGFzIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHdobyBwYXlzIHRoZSBmZWVzIGluIEFWQVhcbiAgKiBAcGFyYW0gY2hhbmdlQWRkcmVzc2VzIEFuIGFycmF5IG9mIGFkZHJlc3NlcyBhcyB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSB3aG8gZ2V0cyB0aGUgY2hhbmdlIGxlZnRvdmVyIGZyb20gdGhlIGZlZSBwYXltZW50XG4gICogQHBhcmFtIG5vZGVJRCBUaGUgbm9kZSBJRCBvZiB0aGUgdmFsaWRhdG9yIGJlaW5nIGFkZGVkLlxuICAqIEBwYXJhbSBzdGFydFRpbWUgVGhlIFVuaXggdGltZSB3aGVuIHRoZSB2YWxpZGF0b3Igc3RhcnRzIHZhbGlkYXRpbmcgdGhlIFByaW1hcnkgTmV0d29yay5cbiAgKiBAcGFyYW0gZW5kVGltZSBUaGUgVW5peCB0aW1lIHdoZW4gdGhlIHZhbGlkYXRvciBzdG9wcyB2YWxpZGF0aW5nIHRoZSBQcmltYXJ5IE5ldHdvcmsgKGFuZCBzdGFrZWQgQVZBWCBpcyByZXR1cm5lZCkuXG4gICogQHBhcmFtIHdlaWdodCBUaGUgYW1vdW50IG9mIHdlaWdodCBmb3IgdGhpcyBzdWJuZXQgdmFsaWRhdG9yLlxuICAqIEBwYXJhbSBmZWUgT3B0aW9uYWwuIFRoZSBhbW91bnQgb2YgZmVlcyB0byBidXJuIGluIGl0cyBzbWFsbGVzdCBkZW5vbWluYXRpb24sIHJlcHJlc2VudGVkIGFzIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59XG4gICogQHBhcmFtIGZlZUFzc2V0SUQgT3B0aW9uYWwuIFRoZSBhc3NldElEIG9mIHRoZSBmZWVzIGJlaW5nIGJ1cm5lZC4gXG4gICogQHBhcmFtIG1lbW8gT3B0aW9uYWwgY29udGFpbnMgYXJiaXRyYXJ5IGJ5dGVzLCB1cCB0byAyNTYgYnl0ZXNcbiAgKiBAcGFyYW0gYXNPZiBPcHRpb25hbC4gVGhlIHRpbWVzdGFtcCB0byB2ZXJpZnkgdGhlIHRyYW5zYWN0aW9uIGFnYWluc3QgYXMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfVxuICAqIEBwYXJhbSBsb2NrdGltZSBPcHRpb25hbC4gVGhlIGxvY2t0aW1lIGZpZWxkIGNyZWF0ZWQgaW4gdGhlIHJlc3VsdGluZyBvdXRwdXRzXG4gICogQHBhcmFtIHRocmVzaG9sZCBPcHRpb25hbC4gVGhlIG51bWJlciBvZiBzaWduYXR1cmVzIHJlcXVpcmVkIHRvIHNwZW5kIHRoZSBmdW5kcyBpbiB0aGUgcmVzdWx0YW50IFVUWE9cbiAgKiBcbiAgKiBAcmV0dXJucyBBbiB1bnNpZ25lZCB0cmFuc2FjdGlvbiBjcmVhdGVkIGZyb20gdGhlIHBhc3NlZCBpbiBwYXJhbWV0ZXJzLlxuICAqL1xuXG4gIC8qIG11c3QgaW1wbGVtZW50IGxhdGVyIG9uY2UgdGhlIHRyYW5zYWN0aW9uIGZvcm1hdCBzaWduaW5nIHByb2Nlc3MgaXMgY2xlYXJlclxuICBidWlsZEFkZFN1Ym5ldFZhbGlkYXRvclR4ID0gKFxuICAgIG5ldHdvcmtpZDpudW1iZXIgPSBEZWZhdWx0TmV0d29ya0lELCBcbiAgICBibG9ja2NoYWluaWQ6QnVmZmVyLFxuICAgIGZyb21BZGRyZXNzZXM6QXJyYXk8QnVmZmVyPixcbiAgICBjaGFuZ2VBZGRyZXNzZXM6QXJyYXk8QnVmZmVyPixcbiAgICBub2RlSUQ6QnVmZmVyLCBcbiAgICBzdGFydFRpbWU6Qk4sIFxuICAgIGVuZFRpbWU6Qk4sXG4gICAgd2VpZ2h0OkJOLFxuICAgIGZlZTpCTiA9IHVuZGVmaW5lZCxcbiAgICBmZWVBc3NldElEOkJ1ZmZlciA9IHVuZGVmaW5lZCwgXG4gICAgbWVtbzpCdWZmZXIgPSB1bmRlZmluZWQsIFxuICAgIGFzT2Y6Qk4gPSBVbml4Tm93KClcbiAgKTpVbnNpZ25lZFR4ID0+IHtcbiAgICBsZXQgaW5zOkFycmF5PFRyYW5zZmVyYWJsZUlucHV0PiA9IFtdO1xuICAgIGxldCBvdXRzOkFycmF5PFRyYW5zZmVyYWJsZU91dHB1dD4gPSBbXTtcbiAgICAvL2xldCBzdGFrZU91dHM6QXJyYXk8VHJhbnNmZXJhYmxlT3V0cHV0PiA9IFtdO1xuICAgIFxuICAgIGNvbnN0IHplcm86Qk4gPSBuZXcgQk4oMCk7XG4gICAgY29uc3Qgbm93OkJOID0gVW5peE5vdygpO1xuICAgIGlmIChzdGFydFRpbWUubHQobm93KSB8fCBlbmRUaW1lLmx0ZShzdGFydFRpbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVVFhPU2V0LmJ1aWxkQWRkU3VibmV0VmFsaWRhdG9yVHggLS0gc3RhcnRUaW1lIG11c3QgYmUgaW4gdGhlIGZ1dHVyZSBhbmQgZW5kVGltZSBtdXN0IGNvbWUgYWZ0ZXIgc3RhcnRUaW1lXCIpO1xuICAgIH1cbiAgIFxuICAgIC8vIE5vdCBpbXBsZW1lbnRlZDogRmVlcyBjYW4gYmUgcGFpZCBmcm9tIGltcG9ydEluc1xuICAgIGlmKHRoaXMuX2ZlZUNoZWNrKGZlZSwgZmVlQXNzZXRJRCkpIHtcbiAgICAgIGNvbnN0IGFhZDpBc3NldEFtb3VudERlc3RpbmF0aW9uID0gbmV3IEFzc2V0QW1vdW50RGVzdGluYXRpb24oZnJvbUFkZHJlc3NlcywgZnJvbUFkZHJlc3NlcywgY2hhbmdlQWRkcmVzc2VzKTtcbiAgICAgIGFhZC5hZGRBc3NldEFtb3VudChmZWVBc3NldElELCB6ZXJvLCBmZWUpO1xuICAgICAgY29uc3Qgc3VjY2VzczpFcnJvciA9IHRoaXMuZ2V0TWluaW11bVNwZW5kYWJsZShhYWQsIGFzT2YpO1xuICAgICAgaWYodHlwZW9mIHN1Y2Nlc3MgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgaW5zID0gYWFkLmdldElucHV0cygpO1xuICAgICAgICBvdXRzID0gYWFkLmdldEFsbE91dHB1dHMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IHN1Y2Nlc3M7XG4gICAgICB9XG4gICAgfVxuICAgXG4gICAgY29uc3QgVVR4OkFkZFN1Ym5ldFZhbGlkYXRvclR4ID0gbmV3IEFkZFN1Ym5ldFZhbGlkYXRvclR4KG5ldHdvcmtpZCwgYmxvY2tjaGFpbmlkLCBvdXRzLCBpbnMsIG1lbW8sIG5vZGVJRCwgc3RhcnRUaW1lLCBlbmRUaW1lLCB3ZWlnaHQpO1xuICAgIHJldHVybiBuZXcgVW5zaWduZWRUeChVVHgpO1xuICB9XG4gICovXG5cbiAgLyoqXG4gICogQ2xhc3MgcmVwcmVzZW50aW5nIGFuIHVuc2lnbmVkIFtbQWRkRGVsZWdhdG9yVHhdXSB0cmFuc2FjdGlvbi5cbiAgKlxuICAqIEBwYXJhbSBuZXR3b3JraWQgTmV0d29ya2lkLCBbW0RlZmF1bHROZXR3b3JrSURdXVxuICAqIEBwYXJhbSBibG9ja2NoYWluaWQgQmxvY2tjaGFpbmlkLCBkZWZhdWx0IHVuZGVmaW5lZFxuICAqIEBwYXJhbSBhdmF4QXNzZXRJRCB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBvZiB0aGUgYXNzZXQgSUQgZm9yIEFWQVhcbiAgKiBAcGFyYW0gdG9BZGRyZXNzZXMgQW4gYXJyYXkgb2YgYWRkcmVzc2VzIGFzIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHJlY2lldmVzIHRoZSBzdGFrZSBhdCB0aGUgZW5kIG9mIHRoZSBzdGFraW5nIHBlcmlvZFxuICAqIEBwYXJhbSBmcm9tQWRkcmVzc2VzIEFuIGFycmF5IG9mIGFkZHJlc3NlcyBhcyB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSB3aG8gcGF5cyB0aGUgZmVlcyBhbmQgdGhlIHN0YWtlXG4gICogQHBhcmFtIGNoYW5nZUFkZHJlc3NlcyBBbiBhcnJheSBvZiBhZGRyZXNzZXMgYXMge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gd2hvIGdldHMgdGhlIGNoYW5nZSBsZWZ0b3ZlciBmcm9tIHRoZSBzdGFraW5nIHBheW1lbnRcbiAgKiBAcGFyYW0gbm9kZUlEIFRoZSBub2RlIElEIG9mIHRoZSB2YWxpZGF0b3IgYmVpbmcgYWRkZWQuXG4gICogQHBhcmFtIHN0YXJ0VGltZSBUaGUgVW5peCB0aW1lIHdoZW4gdGhlIHZhbGlkYXRvciBzdGFydHMgdmFsaWRhdGluZyB0aGUgUHJpbWFyeSBOZXR3b3JrLlxuICAqIEBwYXJhbSBlbmRUaW1lIFRoZSBVbml4IHRpbWUgd2hlbiB0aGUgdmFsaWRhdG9yIHN0b3BzIHZhbGlkYXRpbmcgdGhlIFByaW1hcnkgTmV0d29yayAoYW5kIHN0YWtlZCBBVkFYIGlzIHJldHVybmVkKS5cbiAgKiBAcGFyYW0gc3Rha2VBbW91bnQgQSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfSBmb3IgdGhlIGFtb3VudCBvZiBzdGFrZSB0byBiZSBkZWxlZ2F0ZWQgaW4gbkFWQVguXG4gICogQHBhcmFtIHJld2FyZExvY2t0aW1lIFRoZSBsb2NrdGltZSBmaWVsZCBjcmVhdGVkIGluIHRoZSByZXN1bHRpbmcgcmV3YXJkIG91dHB1dHNcbiAgKiBAcGFyYW0gcmV3YXJkVGhyZXNob2xkIFRoZSBudW1iZXIgb2Ygc2lnbmF0dXJlcyByZXF1aXJlZCB0byBzcGVuZCB0aGUgZnVuZHMgaW4gdGhlIHJlc3VsdGFudCByZXdhcmQgVVRYT1xuICAqIEBwYXJhbSByZXdhcmRBZGRyZXNzZXMgVGhlIGFkZHJlc3NlcyB0aGUgdmFsaWRhdG9yIHJld2FyZCBnb2VzLlxuICAqIEBwYXJhbSBmZWUgT3B0aW9uYWwuIFRoZSBhbW91bnQgb2YgZmVlcyB0byBidXJuIGluIGl0cyBzbWFsbGVzdCBkZW5vbWluYXRpb24sIHJlcHJlc2VudGVkIGFzIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59XG4gICogQHBhcmFtIGZlZUFzc2V0SUQgT3B0aW9uYWwuIFRoZSBhc3NldElEIG9mIHRoZSBmZWVzIGJlaW5nIGJ1cm5lZC4gXG4gICogQHBhcmFtIG1lbW8gT3B0aW9uYWwgY29udGFpbnMgYXJiaXRyYXJ5IGJ5dGVzLCB1cCB0byAyNTYgYnl0ZXNcbiAgKiBAcGFyYW0gYXNPZiBPcHRpb25hbC4gVGhlIHRpbWVzdGFtcCB0byB2ZXJpZnkgdGhlIHRyYW5zYWN0aW9uIGFnYWluc3QgYXMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfVxuICAqIFxuICAqIEByZXR1cm5zIEFuIHVuc2lnbmVkIHRyYW5zYWN0aW9uIGNyZWF0ZWQgZnJvbSB0aGUgcGFzc2VkIGluIHBhcmFtZXRlcnMuXG4gICovXG4gIGJ1aWxkQWRkRGVsZWdhdG9yVHggPSAoXG4gICAgbmV0d29ya2lkOiBudW1iZXIgPSBEZWZhdWx0TmV0d29ya0lELFxuICAgIGJsb2NrY2hhaW5pZDogQnVmZmVyLFxuICAgIGF2YXhBc3NldElEOiBCdWZmZXIsXG4gICAgdG9BZGRyZXNzZXM6IEFycmF5PEJ1ZmZlcj4sXG4gICAgZnJvbUFkZHJlc3NlczogQXJyYXk8QnVmZmVyPixcbiAgICBjaGFuZ2VBZGRyZXNzZXM6IEFycmF5PEJ1ZmZlcj4sXG4gICAgbm9kZUlEOiBCdWZmZXIsXG4gICAgc3RhcnRUaW1lOiBCTixcbiAgICBlbmRUaW1lOiBCTixcbiAgICBzdGFrZUFtb3VudDogQk4sXG4gICAgcmV3YXJkTG9ja3RpbWU6IEJOLFxuICAgIHJld2FyZFRocmVzaG9sZDogbnVtYmVyLFxuICAgIHJld2FyZEFkZHJlc3NlczogQXJyYXk8QnVmZmVyPixcbiAgICBmZWU6IEJOID0gdW5kZWZpbmVkLFxuICAgIGZlZUFzc2V0SUQ6IEJ1ZmZlciA9IHVuZGVmaW5lZCxcbiAgICBtZW1vOiBCdWZmZXIgPSB1bmRlZmluZWQsXG4gICAgYXNPZjogQk4gPSBVbml4Tm93KCksXG4gICk6IFVuc2lnbmVkVHggPT4ge1xuICAgIGxldCBpbnM6IEFycmF5PFRyYW5zZmVyYWJsZUlucHV0PiA9IFtdO1xuICAgIGxldCBvdXRzOiBBcnJheTxUcmFuc2ZlcmFibGVPdXRwdXQ+ID0gW107XG4gICAgbGV0IHN0YWtlT3V0czogQXJyYXk8VHJhbnNmZXJhYmxlT3V0cHV0PiA9IFtdO1xuXG4gICAgY29uc3QgemVybzogQk4gPSBuZXcgQk4oMCk7XG4gICAgY29uc3Qgbm93OiBCTiA9IFVuaXhOb3coKTtcbiAgICBpZiAoc3RhcnRUaW1lLmx0KG5vdykgfHwgZW5kVGltZS5sdGUoc3RhcnRUaW1lKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVVRYT1NldC5idWlsZEFkZERlbGVnYXRvclR4IC0tIHN0YXJ0VGltZSBtdXN0IGJlIGluIHRoZSBmdXR1cmUgYW5kIGVuZFRpbWUgbXVzdCBjb21lIGFmdGVyIHN0YXJ0VGltZVwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBhYWQ6IEFzc2V0QW1vdW50RGVzdGluYXRpb24gPSBuZXcgQXNzZXRBbW91bnREZXN0aW5hdGlvbih0b0FkZHJlc3NlcywgZnJvbUFkZHJlc3NlcywgY2hhbmdlQWRkcmVzc2VzKTtcbiAgICBpZiAoYXZheEFzc2V0SUQudG9TdHJpbmcoXCJoZXhcIikgPT09IGZlZUFzc2V0SUQudG9TdHJpbmcoXCJoZXhcIikpIHtcbiAgICAgIGFhZC5hZGRBc3NldEFtb3VudChhdmF4QXNzZXRJRCwgc3Rha2VBbW91bnQsIGZlZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFhZC5hZGRBc3NldEFtb3VudChhdmF4QXNzZXRJRCwgc3Rha2VBbW91bnQsIHplcm8pO1xuICAgICAgaWYgKHRoaXMuX2ZlZUNoZWNrKGZlZSwgZmVlQXNzZXRJRCkpIHtcbiAgICAgICAgYWFkLmFkZEFzc2V0QW1vdW50KGZlZUFzc2V0SUQsIHplcm8sIGZlZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbWluU3BlbmRhYmxlRXJyOiBFcnJvciA9IHRoaXMuZ2V0TWluaW11bVNwZW5kYWJsZShhYWQsIGFzT2YsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICBpZiAodHlwZW9mIG1pblNwZW5kYWJsZUVyciA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgaW5zID0gYWFkLmdldElucHV0cygpO1xuICAgICAgb3V0cyA9IGFhZC5nZXRDaGFuZ2VPdXRwdXRzKCk7XG4gICAgICBzdGFrZU91dHMgPSBhYWQuZ2V0T3V0cHV0cygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBtaW5TcGVuZGFibGVFcnI7XG4gICAgfVxuXG4gICAgY29uc3QgcmV3YXJkT3V0cHV0T3duZXJzOiBTRUNQT3duZXJPdXRwdXQgPSBuZXcgU0VDUE93bmVyT3V0cHV0KHJld2FyZEFkZHJlc3NlcywgcmV3YXJkTG9ja3RpbWUsIHJld2FyZFRocmVzaG9sZCk7XG5cbiAgICBjb25zdCBVVHg6IEFkZERlbGVnYXRvclR4ID0gbmV3IEFkZERlbGVnYXRvclR4KG5ldHdvcmtpZCwgYmxvY2tjaGFpbmlkLCBvdXRzLCBpbnMsIG1lbW8sIG5vZGVJRCwgc3RhcnRUaW1lLCBlbmRUaW1lLCBzdGFrZUFtb3VudCwgc3Rha2VPdXRzLCBuZXcgUGFyc2VhYmxlT3V0cHV0KHJld2FyZE91dHB1dE93bmVycykpO1xuICAgIHJldHVybiBuZXcgVW5zaWduZWRUeChVVHgpO1xuICB9XG5cbiAgLyoqXG4gICAgKiBDbGFzcyByZXByZXNlbnRpbmcgYW4gdW5zaWduZWQgW1tBZGRWYWxpZGF0b3JUeF1dIHRyYW5zYWN0aW9uLlxuICAgICpcbiAgICAqIEBwYXJhbSBuZXR3b3JraWQgTmV0d29ya2lkLCBbW0RlZmF1bHROZXR3b3JrSURdXVxuICAgICogQHBhcmFtIGJsb2NrY2hhaW5pZCBCbG9ja2NoYWluaWQsIGRlZmF1bHQgdW5kZWZpbmVkXG4gICAgKiBAcGFyYW0gYXZheEFzc2V0SUQge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gb2YgdGhlIGFzc2V0IElEIGZvciBBVkFYXG4gICAgKiBAcGFyYW0gdG9BZGRyZXNzZXMgQW4gYXJyYXkgb2YgYWRkcmVzc2VzIGFzIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHJlY2lldmVzIHRoZSBzdGFrZSBhdCB0aGUgZW5kIG9mIHRoZSBzdGFraW5nIHBlcmlvZFxuICAgICogQHBhcmFtIGZyb21BZGRyZXNzZXMgQW4gYXJyYXkgb2YgYWRkcmVzc2VzIGFzIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHdobyBwYXlzIHRoZSBmZWVzIGFuZCB0aGUgc3Rha2VcbiAgICAqIEBwYXJhbSBjaGFuZ2VBZGRyZXNzZXMgQW4gYXJyYXkgb2YgYWRkcmVzc2VzIGFzIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHdobyBnZXRzIHRoZSBjaGFuZ2UgbGVmdG92ZXIgZnJvbSB0aGUgc3Rha2luZyBwYXltZW50XG4gICAgKiBAcGFyYW0gbm9kZUlEIFRoZSBub2RlIElEIG9mIHRoZSB2YWxpZGF0b3IgYmVpbmcgYWRkZWQuXG4gICAgKiBAcGFyYW0gc3RhcnRUaW1lIFRoZSBVbml4IHRpbWUgd2hlbiB0aGUgdmFsaWRhdG9yIHN0YXJ0cyB2YWxpZGF0aW5nIHRoZSBQcmltYXJ5IE5ldHdvcmsuXG4gICAgKiBAcGFyYW0gZW5kVGltZSBUaGUgVW5peCB0aW1lIHdoZW4gdGhlIHZhbGlkYXRvciBzdG9wcyB2YWxpZGF0aW5nIHRoZSBQcmltYXJ5IE5ldHdvcmsgKGFuZCBzdGFrZWQgQVZBWCBpcyByZXR1cm5lZCkuXG4gICAgKiBAcGFyYW0gc3Rha2VBbW91bnQgQSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfSBmb3IgdGhlIGFtb3VudCBvZiBzdGFrZSB0byBiZSBkZWxlZ2F0ZWQgaW4gbkFWQVguXG4gICAgKiBAcGFyYW0gcmV3YXJkTG9ja3RpbWUgVGhlIGxvY2t0aW1lIGZpZWxkIGNyZWF0ZWQgaW4gdGhlIHJlc3VsdGluZyByZXdhcmQgb3V0cHV0c1xuICAgICogQHBhcmFtIHJld2FyZFRocmVzaG9sZCBUaGUgbnVtYmVyIG9mIHNpZ25hdHVyZXMgcmVxdWlyZWQgdG8gc3BlbmQgdGhlIGZ1bmRzIGluIHRoZSByZXN1bHRhbnQgcmV3YXJkIFVUWE9cbiAgICAqIEBwYXJhbSByZXdhcmRBZGRyZXNzZXMgVGhlIGFkZHJlc3NlcyB0aGUgdmFsaWRhdG9yIHJld2FyZCBnb2VzLlxuICAgICogQHBhcmFtIGRlbGVnYXRpb25GZWUgQSBudW1iZXIgZm9yIHRoZSBwZXJjZW50YWdlIG9mIHJld2FyZCB0byBiZSBnaXZlbiB0byB0aGUgdmFsaWRhdG9yIHdoZW4gc29tZW9uZSBkZWxlZ2F0ZXMgdG8gdGhlbS4gTXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDEwMC4gXG4gICAgKiBAcGFyYW0gbWluU3Rha2UgQSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfSByZXByZXNlbnRpbmcgdGhlIG1pbmltdW0gc3Rha2UgcmVxdWlyZWQgdG8gdmFsaWRhdGUgb24gdGhpcyBuZXR3b3JrLlxuICAgICogQHBhcmFtIGZlZSBPcHRpb25hbC4gVGhlIGFtb3VudCBvZiBmZWVzIHRvIGJ1cm4gaW4gaXRzIHNtYWxsZXN0IGRlbm9taW5hdGlvbiwgcmVwcmVzZW50ZWQgYXMge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2JuLmpzL3xCTn1cbiAgICAqIEBwYXJhbSBmZWVBc3NldElEIE9wdGlvbmFsLiBUaGUgYXNzZXRJRCBvZiB0aGUgZmVlcyBiZWluZyBidXJuZWQuIFxuICAgICogQHBhcmFtIG1lbW8gT3B0aW9uYWwgY29udGFpbnMgYXJiaXRyYXJ5IGJ5dGVzLCB1cCB0byAyNTYgYnl0ZXNcbiAgICAqIEBwYXJhbSBhc09mIE9wdGlvbmFsLiBUaGUgdGltZXN0YW1wIHRvIHZlcmlmeSB0aGUgdHJhbnNhY3Rpb24gYWdhaW5zdCBhcyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59XG4gICAgKiBcbiAgICAqIEByZXR1cm5zIEFuIHVuc2lnbmVkIHRyYW5zYWN0aW9uIGNyZWF0ZWQgZnJvbSB0aGUgcGFzc2VkIGluIHBhcmFtZXRlcnMuXG4gICAgKi9cbiAgYnVpbGRBZGRWYWxpZGF0b3JUeCA9IChcbiAgICBuZXR3b3JraWQ6IG51bWJlciA9IERlZmF1bHROZXR3b3JrSUQsXG4gICAgYmxvY2tjaGFpbmlkOiBCdWZmZXIsXG4gICAgYXZheEFzc2V0SUQ6IEJ1ZmZlcixcbiAgICB0b0FkZHJlc3NlczogQXJyYXk8QnVmZmVyPixcbiAgICBmcm9tQWRkcmVzc2VzOiBBcnJheTxCdWZmZXI+LFxuICAgIGNoYW5nZUFkZHJlc3NlczogQXJyYXk8QnVmZmVyPixcbiAgICBub2RlSUQ6IEJ1ZmZlcixcbiAgICBzdGFydFRpbWU6IEJOLFxuICAgIGVuZFRpbWU6IEJOLFxuICAgIHN0YWtlQW1vdW50OiBCTixcbiAgICByZXdhcmRMb2NrdGltZTogQk4sXG4gICAgcmV3YXJkVGhyZXNob2xkOiBudW1iZXIsXG4gICAgcmV3YXJkQWRkcmVzc2VzOiBBcnJheTxCdWZmZXI+LFxuICAgIGRlbGVnYXRpb25GZWU6IG51bWJlcixcbiAgICBmZWU6IEJOID0gdW5kZWZpbmVkLFxuICAgIGZlZUFzc2V0SUQ6IEJ1ZmZlciA9IHVuZGVmaW5lZCxcbiAgICBtZW1vOiBCdWZmZXIgPSB1bmRlZmluZWQsXG4gICAgYXNPZjogQk4gPSBVbml4Tm93KCksXG4gICk6IFVuc2lnbmVkVHggPT4ge1xuICAgIGxldCBpbnM6IEFycmF5PFRyYW5zZmVyYWJsZUlucHV0PiA9IFtdO1xuICAgIGxldCBvdXRzOiBBcnJheTxUcmFuc2ZlcmFibGVPdXRwdXQ+ID0gW107XG4gICAgbGV0IHN0YWtlT3V0czogQXJyYXk8VHJhbnNmZXJhYmxlT3V0cHV0PiA9IFtdO1xuXG4gICAgY29uc3QgemVybzogQk4gPSBuZXcgQk4oMCk7XG4gICAgY29uc3Qgbm93OiBCTiA9IFVuaXhOb3coKTtcbiAgICBpZiAoc3RhcnRUaW1lLmx0KG5vdykgfHwgZW5kVGltZS5sdGUoc3RhcnRUaW1lKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVVRYT1NldC5idWlsZEFkZFZhbGlkYXRvclR4IC0tIHN0YXJ0VGltZSBtdXN0IGJlIGluIHRoZSBmdXR1cmUgYW5kIGVuZFRpbWUgbXVzdCBjb21lIGFmdGVyIHN0YXJ0VGltZVwiKTtcbiAgICB9XG5cbiAgICBpZiAoZGVsZWdhdGlvbkZlZSA+IDEwMCB8fCBkZWxlZ2F0aW9uRmVlIDwgMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVVRYT1NldC5idWlsZEFkZFZhbGlkYXRvclR4IC0tIHN0YXJ0VGltZSBtdXN0IGJlIGluIHRoZSByYW5nZSBvZiAwIHRvIDEwMCwgaW5jbHVzaXZlbHlcIik7XG4gICAgfVxuXG4gICAgY29uc3QgYWFkOiBBc3NldEFtb3VudERlc3RpbmF0aW9uID0gbmV3IEFzc2V0QW1vdW50RGVzdGluYXRpb24odG9BZGRyZXNzZXMsIGZyb21BZGRyZXNzZXMsIGNoYW5nZUFkZHJlc3Nlcyk7XG4gICAgaWYgKGF2YXhBc3NldElELnRvU3RyaW5nKFwiaGV4XCIpID09PSBmZWVBc3NldElELnRvU3RyaW5nKFwiaGV4XCIpKSB7XG4gICAgICBhYWQuYWRkQXNzZXRBbW91bnQoYXZheEFzc2V0SUQsIHN0YWtlQW1vdW50LCBmZWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhYWQuYWRkQXNzZXRBbW91bnQoYXZheEFzc2V0SUQsIHN0YWtlQW1vdW50LCB6ZXJvKTtcbiAgICAgIGlmICh0aGlzLl9mZWVDaGVjayhmZWUsIGZlZUFzc2V0SUQpKSB7XG4gICAgICAgIGFhZC5hZGRBc3NldEFtb3VudChmZWVBc3NldElELCB6ZXJvLCBmZWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG1pblNwZW5kYWJsZUVycjogRXJyb3IgPSB0aGlzLmdldE1pbmltdW1TcGVuZGFibGUoYWFkLCBhc09mLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgaWYgKHR5cGVvZiBtaW5TcGVuZGFibGVFcnIgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGlucyA9IGFhZC5nZXRJbnB1dHMoKTtcbiAgICAgIG91dHMgPSBhYWQuZ2V0Q2hhbmdlT3V0cHV0cygpO1xuICAgICAgc3Rha2VPdXRzID0gYWFkLmdldE91dHB1dHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbWluU3BlbmRhYmxlRXJyO1xuICAgIH1cblxuICAgIGNvbnN0IHJld2FyZE91dHB1dE93bmVyczogU0VDUE93bmVyT3V0cHV0ID0gbmV3IFNFQ1BPd25lck91dHB1dChyZXdhcmRBZGRyZXNzZXMsIHJld2FyZExvY2t0aW1lLCByZXdhcmRUaHJlc2hvbGQpO1xuXG4gICAgY29uc3QgVVR4OiBBZGRWYWxpZGF0b3JUeCA9IG5ldyBBZGRWYWxpZGF0b3JUeChuZXR3b3JraWQsIGJsb2NrY2hhaW5pZCwgb3V0cywgaW5zLCBtZW1vLCBub2RlSUQsIHN0YXJ0VGltZSwgZW5kVGltZSwgc3Rha2VBbW91bnQsIHN0YWtlT3V0cywgbmV3IFBhcnNlYWJsZU91dHB1dChyZXdhcmRPdXRwdXRPd25lcnMpLCBkZWxlZ2F0aW9uRmVlKTtcbiAgICByZXR1cm4gbmV3IFVuc2lnbmVkVHgoVVR4KTtcbiAgfVxuXG4gIC8qKlxuICAgICogQ2xhc3MgcmVwcmVzZW50aW5nIGFuIHVuc2lnbmVkIFtbQ3JlYXRlU3VibmV0VHhdXSB0cmFuc2FjdGlvbi5cbiAgICAqXG4gICAgKiBAcGFyYW0gbmV0d29ya2lkIE5ldHdvcmtpZCwgW1tEZWZhdWx0TmV0d29ya0lEXV1cbiAgICAqIEBwYXJhbSBibG9ja2NoYWluaWQgQmxvY2tjaGFpbmlkLCBkZWZhdWx0IHVuZGVmaW5lZFxuICAgICogQHBhcmFtIGZyb21BZGRyZXNzZXMgVGhlIGFkZHJlc3NlcyBiZWluZyB1c2VkIHRvIHNlbmQgdGhlIGZ1bmRzIGZyb20gdGhlIFVUWE9zIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9XG4gICAgKiBAcGFyYW0gY2hhbmdlQWRkcmVzc2VzIFRoZSBhZGRyZXNzZXMgdGhhdCBjYW4gc3BlbmQgdGhlIGNoYW5nZSByZW1haW5pbmcgZnJvbSB0aGUgc3BlbnQgVVRYT3MuXG4gICAgKiBAcGFyYW0gc3VibmV0T3duZXJBZGRyZXNzZXMgQW4gYXJyYXkgb2Yge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gZm9yIHRoZSBhZGRyZXNzZXMgdG8gYWRkIHRvIGEgc3VibmV0XG4gICAgKiBAcGFyYW0gc3VibmV0T3duZXJUaHJlc2hvbGQgVGhlIG51bWJlciBvZiBvd25lcnMncyBzaWduYXR1cmVzIHJlcXVpcmVkIHRvIGFkZCBhIHZhbGlkYXRvciB0byB0aGUgbmV0d29ya1xuICAgICogQHBhcmFtIGZlZSBPcHRpb25hbC4gVGhlIGFtb3VudCBvZiBmZWVzIHRvIGJ1cm4gaW4gaXRzIHNtYWxsZXN0IGRlbm9taW5hdGlvbiwgcmVwcmVzZW50ZWQgYXMge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2JuLmpzL3xCTn1cbiAgICAqIEBwYXJhbSBmZWVBc3NldElEIE9wdGlvbmFsLiBUaGUgYXNzZXRJRCBvZiB0aGUgZmVlcyBiZWluZyBidXJuZWRcbiAgICAqIEBwYXJhbSBtZW1vIE9wdGlvbmFsIGNvbnRhaW5zIGFyYml0cmFyeSBieXRlcywgdXAgdG8gMjU2IGJ5dGVzXG4gICAgKiBAcGFyYW0gYXNPZiBPcHRpb25hbC4gVGhlIHRpbWVzdGFtcCB0byB2ZXJpZnkgdGhlIHRyYW5zYWN0aW9uIGFnYWluc3QgYXMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfVxuICAgICogXG4gICAgKiBAcmV0dXJucyBBbiB1bnNpZ25lZCB0cmFuc2FjdGlvbiBjcmVhdGVkIGZyb20gdGhlIHBhc3NlZCBpbiBwYXJhbWV0ZXJzLlxuICAgICovXG4gIGJ1aWxkQ3JlYXRlU3VibmV0VHggPSAoXG4gICAgbmV0d29ya2lkOiBudW1iZXIgPSBEZWZhdWx0TmV0d29ya0lELFxuICAgIGJsb2NrY2hhaW5pZDogQnVmZmVyLFxuICAgIGZyb21BZGRyZXNzZXM6IEFycmF5PEJ1ZmZlcj4sXG4gICAgY2hhbmdlQWRkcmVzc2VzOiBBcnJheTxCdWZmZXI+LFxuICAgIHN1Ym5ldE93bmVyQWRkcmVzc2VzOiBBcnJheTxCdWZmZXI+LFxuICAgIHN1Ym5ldE93bmVyVGhyZXNob2xkOiBudW1iZXIsXG4gICAgZmVlOiBCTiA9IHVuZGVmaW5lZCxcbiAgICBmZWVBc3NldElEOiBCdWZmZXIgPSB1bmRlZmluZWQsXG4gICAgbWVtbzogQnVmZmVyID0gdW5kZWZpbmVkLFxuICAgIGFzT2Y6IEJOID0gVW5peE5vdygpLFxuICApOiBVbnNpZ25lZFR4ID0+IHtcbiAgICBjb25zdCB6ZXJvOiBCTiA9IG5ldyBCTigwKTtcbiAgICBsZXQgaW5zOiBBcnJheTxUcmFuc2ZlcmFibGVJbnB1dD4gPSBbXTtcbiAgICBsZXQgb3V0czogQXJyYXk8VHJhbnNmZXJhYmxlT3V0cHV0PiA9IFtdO1xuXG4gICAgaWYgKHRoaXMuX2ZlZUNoZWNrKGZlZSwgZmVlQXNzZXRJRCkpIHtcbiAgICAgIGNvbnN0IGFhZDogQXNzZXRBbW91bnREZXN0aW5hdGlvbiA9IG5ldyBBc3NldEFtb3VudERlc3RpbmF0aW9uKGZyb21BZGRyZXNzZXMsIGZyb21BZGRyZXNzZXMsIGNoYW5nZUFkZHJlc3Nlcyk7XG4gICAgICBhYWQuYWRkQXNzZXRBbW91bnQoZmVlQXNzZXRJRCwgemVybywgZmVlKTtcbiAgICAgIGNvbnN0IG1pblNwZW5kYWJsZUVycjogRXJyb3IgPSB0aGlzLmdldE1pbmltdW1TcGVuZGFibGUoYWFkLCBhc09mLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7XG4gICAgICBpZiAodHlwZW9mIG1pblNwZW5kYWJsZUVyciA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBpbnMgPSBhYWQuZ2V0SW5wdXRzKCk7XG4gICAgICAgIG91dHMgPSBhYWQuZ2V0QWxsT3V0cHV0cygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbWluU3BlbmRhYmxlRXJyO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGxvY2t0aW1lOiBCTiA9IG5ldyBCTigwKVxuICAgIGNvbnN0IFVUeDogQ3JlYXRlU3VibmV0VHggPSBuZXcgQ3JlYXRlU3VibmV0VHgobmV0d29ya2lkLCBibG9ja2NoYWluaWQsIG91dHMsIGlucywgbWVtbywgbmV3IFNFQ1BPd25lck91dHB1dChzdWJuZXRPd25lckFkZHJlc3NlcywgbG9ja3RpbWUsIHN1Ym5ldE93bmVyVGhyZXNob2xkKSk7XG4gICAgcmV0dXJuIG5ldyBVbnNpZ25lZFR4KFVUeCk7XG4gIH1cblxufVxuIl19","\"use strict\";\n/**\n * @packageDocumentation\n * @module Common-NBytes\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NBytes = void 0;\nconst bintools_1 = __importDefault(require(\"../utils/bintools\"));\nconst serialization_1 = require(\"../utils/serialization\");\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\nconst serializer = serialization_1.Serialization.getInstance();\n/**\n * Abstract class that implements basic functionality for managing a\n * {@link https://github.com/feross/buffer|Buffer} of an exact length.\n *\n * Create a class that extends this one and override bsize to make it validate for exactly\n * the correct length.\n */\nclass NBytes extends serialization_1.Serializable {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"NBytes\";\n        this._typeID = undefined;\n        /**\n         * Returns the length of the {@link https://github.com/feross/buffer|Buffer}.\n         *\n         * @returns The exact length requirement of this class\n         */\n        this.getSize = () => this.bsize;\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"bsize\": serializer.encoder(this.bsize, encoding, \"number\", \"decimalString\", 4), \"bytes\": serializer.encoder(this.bytes, encoding, \"Buffer\", \"hex\", this.bsize) });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.bsize = serializer.decoder(fields[\"bsize\"], encoding, \"decimalString\", \"number\", 4);\n        this.bytes = serializer.decoder(fields[\"bytes\"], encoding, \"hex\", \"Buffer\", this.bsize);\n    }\n    /**\n     * Takes a base-58 encoded string, verifies its length, and stores it.\n     *\n     * @returns The size of the {@link https://github.com/feross/buffer|Buffer}\n     */\n    fromString(b58str) {\n        try {\n            this.fromBuffer(bintools.b58ToBuffer(b58str));\n        }\n        catch (e) {\n            /* istanbul ignore next */\n            const emsg = `Error - NBytes.fromString: ${e}`;\n            /* istanbul ignore next */\n            throw new Error(emsg);\n        }\n        return this.bsize;\n    }\n    /**\n     * Takes a [[Buffer]], verifies its length, and stores it.\n     *\n     * @returns The size of the {@link https://github.com/feross/buffer|Buffer}\n     */\n    fromBuffer(buff, offset = 0) {\n        try {\n            if (buff.length - offset < this.bsize) {\n                /* istanbul ignore next */\n                throw new Error(`Buffer length must be ${this.bsize} bytes. Only have ${buff.length - offset} remaining in buffer.`);\n            }\n            this.bytes = bintools.copyFrom(buff, offset, offset + this.bsize);\n        }\n        catch (e) {\n            /* istanbul ignore next */\n            const emsg = `Error - NBytes.fromBuffer: ${e}`;\n            /* istanbul ignore next */\n            throw new Error(emsg);\n        }\n        return offset + this.bsize;\n    }\n    /**\n     * @returns A reference to the stored {@link https://github.com/feross/buffer|Buffer}\n     */\n    toBuffer() {\n        return this.bytes;\n    }\n    /**\n     * @returns A base-58 string of the stored {@link https://github.com/feross/buffer|Buffer}\n     */\n    toString() {\n        return bintools.bufferToB58(this.toBuffer());\n    }\n}\nexports.NBytes = NBytes;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmJ5dGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvbW1vbi9uYnl0ZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7Ozs7O0FBR0gsaUVBQXlDO0FBQ3pDLDBEQUF5RjtBQUd6Rjs7R0FFRztBQUNILE1BQU0sUUFBUSxHQUFZLGtCQUFRLENBQUMsV0FBVyxFQUFFLENBQUM7QUFDakQsTUFBTSxVQUFVLEdBQUcsNkJBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUUvQzs7Ozs7O0dBTUc7QUFDSCxNQUFzQixNQUFPLFNBQVEsNEJBQVk7SUFBakQ7O1FBQ1ksY0FBUyxHQUFHLFFBQVEsQ0FBQztRQUNyQixZQUFPLEdBQUcsU0FBUyxDQUFDO1FBbUI5Qjs7OztXQUlHO1FBQ0gsWUFBTyxHQUFHLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7SUEyRDdCLENBQUM7SUFqRkMsU0FBUyxDQUFDLFdBQThCLEtBQUs7UUFDM0MsSUFBSSxNQUFNLEdBQVUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUM5Qyx1Q0FDSyxNQUFNLEtBQ1QsT0FBTyxFQUFFLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLGVBQWUsRUFBRSxDQUFDLENBQUMsRUFDL0UsT0FBTyxFQUFFLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQy9FO0lBQ0gsQ0FBQztJQUFBLENBQUM7SUFDRixXQUFXLENBQUMsTUFBYSxFQUFFLFdBQThCLEtBQUs7UUFDNUQsS0FBSyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDcEMsSUFBSSxDQUFDLEtBQUssR0FBRyxVQUFVLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRSxRQUFRLEVBQUUsZUFBZSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN6RixJQUFJLENBQUMsS0FBSyxHQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMxRixDQUFDO0lBWUQ7Ozs7T0FJRztJQUNILFVBQVUsQ0FBQyxNQUFhO1FBQ3RCLElBQUk7WUFDRixJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztTQUMvQztRQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ1YsMEJBQTBCO1lBQzFCLE1BQU0sSUFBSSxHQUFVLDhCQUE4QixDQUFDLEVBQUUsQ0FBQztZQUN0RCwwQkFBMEI7WUFDMUIsTUFBTSxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUN2QjtRQUNELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNwQixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILFVBQVUsQ0FBQyxJQUFXLEVBQUUsU0FBZ0IsQ0FBQztRQUN2QyxJQUFJO1lBQ0YsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxFQUFFO2dCQUNyQywwQkFBMEI7Z0JBQzFCLE1BQU0sSUFBSSxLQUFLLENBQUMseUJBQXlCLElBQUksQ0FBQyxLQUFLLHFCQUFxQixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sdUJBQXVCLENBQUMsQ0FBQzthQUN0SDtZQUVELElBQUksQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDbkU7UUFBQyxPQUFPLENBQUMsRUFBRTtZQUNWLDBCQUEwQjtZQUMxQixNQUFNLElBQUksR0FBVSw4QkFBOEIsQ0FBQyxFQUFFLENBQUM7WUFDdEQsMEJBQTBCO1lBQzFCLE1BQU0sSUFBSSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDdkI7UUFDRCxPQUFPLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQzdCLENBQUM7SUFFRDs7T0FFRztJQUNILFFBQVE7UUFDTixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDcEIsQ0FBQztJQUVEOztPQUVHO0lBQ0gsUUFBUTtRQUNOLE9BQU8sUUFBUSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztJQUMvQyxDQUFDO0NBTUY7QUFyRkQsd0JBcUZDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqIEBtb2R1bGUgQ29tbW9uLU5CeXRlc1xuICovXG5cbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ2J1ZmZlci8nO1xuaW1wb3J0IEJpblRvb2xzIGZyb20gJy4uL3V0aWxzL2JpbnRvb2xzJztcbmltcG9ydCB7IFNlcmlhbGl6YWJsZSwgU2VyaWFsaXphdGlvbiwgU2VyaWFsaXplZEVuY29kaW5nIH0gZnJvbSAnLi4vdXRpbHMvc2VyaWFsaXphdGlvbic7XG5cblxuLyoqXG4gKiBAaWdub3JlXG4gKi9cbmNvbnN0IGJpbnRvb2xzOkJpblRvb2xzID0gQmluVG9vbHMuZ2V0SW5zdGFuY2UoKTtcbmNvbnN0IHNlcmlhbGl6ZXIgPSBTZXJpYWxpemF0aW9uLmdldEluc3RhbmNlKCk7XG5cbi8qKlxuICogQWJzdHJhY3QgY2xhc3MgdGhhdCBpbXBsZW1lbnRzIGJhc2ljIGZ1bmN0aW9uYWxpdHkgZm9yIG1hbmFnaW5nIGFcbiAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IG9mIGFuIGV4YWN0IGxlbmd0aC5cbiAqXG4gKiBDcmVhdGUgYSBjbGFzcyB0aGF0IGV4dGVuZHMgdGhpcyBvbmUgYW5kIG92ZXJyaWRlIGJzaXplIHRvIG1ha2UgaXQgdmFsaWRhdGUgZm9yIGV4YWN0bHlcbiAqIHRoZSBjb3JyZWN0IGxlbmd0aC5cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIE5CeXRlcyBleHRlbmRzIFNlcmlhbGl6YWJsZSB7XG4gIHByb3RlY3RlZCBfdHlwZU5hbWUgPSBcIk5CeXRlc1wiO1xuICBwcm90ZWN0ZWQgX3R5cGVJRCA9IHVuZGVmaW5lZDtcblxuICBzZXJpYWxpemUoZW5jb2Rpbmc6U2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIik6b2JqZWN0IHtcbiAgICBsZXQgZmllbGRzOm9iamVjdCA9IHN1cGVyLnNlcmlhbGl6ZShlbmNvZGluZyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmZpZWxkcyxcbiAgICAgIFwiYnNpemVcIjogc2VyaWFsaXplci5lbmNvZGVyKHRoaXMuYnNpemUsIGVuY29kaW5nLCBcIm51bWJlclwiLCBcImRlY2ltYWxTdHJpbmdcIiwgNCksXG4gICAgICBcImJ5dGVzXCI6IHNlcmlhbGl6ZXIuZW5jb2Rlcih0aGlzLmJ5dGVzLCBlbmNvZGluZywgXCJCdWZmZXJcIiwgXCJoZXhcIiwgdGhpcy5ic2l6ZSlcbiAgICB9XG4gIH07XG4gIGRlc2VyaWFsaXplKGZpZWxkczpvYmplY3QsIGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICBzdXBlci5kZXNlcmlhbGl6ZShmaWVsZHMsIGVuY29kaW5nKTtcbiAgICB0aGlzLmJzaXplID0gc2VyaWFsaXplci5kZWNvZGVyKGZpZWxkc1tcImJzaXplXCJdLCBlbmNvZGluZywgXCJkZWNpbWFsU3RyaW5nXCIsIFwibnVtYmVyXCIsIDQpO1xuICAgIHRoaXMuYnl0ZXMgPSBzZXJpYWxpemVyLmRlY29kZXIoZmllbGRzW1wiYnl0ZXNcIl0sIGVuY29kaW5nLCBcImhleFwiLCBcIkJ1ZmZlclwiLCB0aGlzLmJzaXplKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBieXRlczpCdWZmZXI7XG4gIHByb3RlY3RlZCBic2l6ZTpudW1iZXI7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxlbmd0aCBvZiB0aGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0uXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSBleGFjdCBsZW5ndGggcmVxdWlyZW1lbnQgb2YgdGhpcyBjbGFzc1xuICAgKi9cbiAgZ2V0U2l6ZSA9ICgpID0+IHRoaXMuYnNpemU7XG5cbiAgLyoqXG4gICAqIFRha2VzIGEgYmFzZS01OCBlbmNvZGVkIHN0cmluZywgdmVyaWZpZXMgaXRzIGxlbmd0aCwgYW5kIHN0b3JlcyBpdC5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIHNpemUgb2YgdGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9XG4gICAqL1xuICBmcm9tU3RyaW5nKGI1OHN0cjpzdHJpbmcpOm51bWJlciB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuZnJvbUJ1ZmZlcihiaW50b29scy5iNThUb0J1ZmZlcihiNThzdHIpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgY29uc3QgZW1zZzpzdHJpbmcgPSBgRXJyb3IgLSBOQnl0ZXMuZnJvbVN0cmluZzogJHtlfWA7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVtc2cpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5ic2l6ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUYWtlcyBhIFtbQnVmZmVyXV0sIHZlcmlmaWVzIGl0cyBsZW5ndGgsIGFuZCBzdG9yZXMgaXQuXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSBzaXplIG9mIHRoZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfVxuICAgKi9cbiAgZnJvbUJ1ZmZlcihidWZmOkJ1ZmZlciwgb2Zmc2V0Om51bWJlciA9IDApOm51bWJlciB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChidWZmLmxlbmd0aCAtIG9mZnNldCA8IHRoaXMuYnNpemUpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBCdWZmZXIgbGVuZ3RoIG11c3QgYmUgJHt0aGlzLmJzaXplfSBieXRlcy4gT25seSBoYXZlICR7YnVmZi5sZW5ndGggLSBvZmZzZXR9IHJlbWFpbmluZyBpbiBidWZmZXIuYCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYnl0ZXMgPSBiaW50b29scy5jb3B5RnJvbShidWZmLCBvZmZzZXQsIG9mZnNldCArIHRoaXMuYnNpemUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICBjb25zdCBlbXNnOnN0cmluZyA9IGBFcnJvciAtIE5CeXRlcy5mcm9tQnVmZmVyOiAke2V9YDtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZW1zZyk7XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQgKyB0aGlzLmJzaXplO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIEEgcmVmZXJlbmNlIHRvIHRoZSBzdG9yZWQge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn1cbiAgICovXG4gIHRvQnVmZmVyKCk6QnVmZmVyIHtcbiAgICByZXR1cm4gdGhpcy5ieXRlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyBBIGJhc2UtNTggc3RyaW5nIG9mIHRoZSBzdG9yZWQge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn1cbiAgICovXG4gIHRvU3RyaW5nKCk6c3RyaW5nIHtcbiAgICByZXR1cm4gYmludG9vbHMuYnVmZmVyVG9CNTgodGhpcy50b0J1ZmZlcigpKTtcbiAgfVxuXG4gIGFic3RyYWN0IGNsb25lKCk6dGhpcztcblxuICBhYnN0cmFjdCBjcmVhdGUoLi4uYXJnczphbnlbXSk6dGhpcztcbiAgXG59Il19","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SECP256k1KeyChain = exports.SECP256k1KeyPair = void 0;\n/**\n * @packageDocumentation\n * @module Common-SECP256k1KeyChain\n */\nconst buffer_1 = require(\"buffer/\");\nconst elliptic = __importStar(require(\"elliptic\"));\nconst create_hash_1 = __importDefault(require(\"create-hash\"));\nconst bintools_1 = __importDefault(require(\"../utils/bintools\"));\nconst keychain_1 = require(\"./keychain\");\n/**\n * @ignore\n */\nconst EC = elliptic.ec;\n/**\n * @ignore\n */\nconst ec = new EC('secp256k1');\n/**\n * @ignore\n */\nconst ecparams = ec.curve;\n/**\n * @ignore\n */\nconst BN = ecparams.n.constructor;\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\n/**\n * Class for representing a private and public keypair on the Platform Chain.\n */\nclass SECP256k1KeyPair extends keychain_1.StandardKeyPair {\n    /**\n     * Class for representing a private and public keypair in Avalanche PlatformVM.\n     */\n    constructor() {\n        super();\n        /**\n         * @ignore\n         */\n        this._sigFromSigBuffer = (sig) => {\n            const r = new BN(bintools.copyFrom(sig, 0, 32));\n            const s = new BN(bintools.copyFrom(sig, 32, 64));\n            const recoveryParam = bintools.copyFrom(sig, 64, 65).readUIntBE(0, 1);\n            const sigOpt = {\n                r: r,\n                s: s,\n                recoveryParam: recoveryParam\n            };\n            return sigOpt;\n        };\n        /**\n           * Generates a new keypair.\n           */\n        this.generateKey = () => {\n            this.keypair = ec.genKeyPair();\n            // doing hex translation to get Buffer class\n            this.privk = buffer_1.Buffer.from(this.keypair.getPrivate('hex').padStart(64, '0'), 'hex');\n            this.pubk = buffer_1.Buffer.from(this.keypair.getPublic(true, 'hex').padStart(66, '0'), 'hex');\n        };\n        /**\n           * Imports a private key and generates the appropriate public key.\n           *\n           * @param privk A {@link https://github.com/feross/buffer|Buffer} representing the private key\n           *\n           * @returns true on success, false on failure\n           */\n        this.importKey = (privk) => {\n            this.keypair = ec.keyFromPrivate(privk.toString('hex'), 'hex');\n            // doing hex translation to get Buffer class\n            this.privk = buffer_1.Buffer.from(this.keypair.getPrivate('hex').padStart(64, '0'), 'hex');\n            this.pubk = buffer_1.Buffer.from(this.keypair.getPublic(true, 'hex').padStart(66, '0'), 'hex');\n            return true; // silly I know, but the interface requires so it returns true on success, so if Buffer fails validation...\n        };\n        /**\n         * Returns the address as a {@link https://github.com/feross/buffer|Buffer}.\n         *\n         * @returns A {@link https://github.com/feross/buffer|Buffer} representation of the address\n         */\n        this.getAddress = () => {\n            return this.addressFromPublicKey(this.pubk);\n        };\n        /**\n           * Returns an address given a public key.\n           *\n           * @param pubk A {@link https://github.com/feross/buffer|Buffer} representing the public key\n           *\n           * @returns A {@link https://github.com/feross/buffer|Buffer} for the address of the public key.\n           */\n        this.addressFromPublicKey = (pubk) => {\n            if (pubk.length === 65) {\n                /* istanbul ignore next */\n                pubk = buffer_1.Buffer.from(ec.keyFromPublic(pubk).getPublic(true, 'hex').padStart(66, '0'), 'hex'); // make compact, stick back into buffer\n            }\n            if (pubk.length === 33) {\n                const sha256 = buffer_1.Buffer.from(create_hash_1.default('sha256').update(pubk).digest());\n                const ripesha = buffer_1.Buffer.from(create_hash_1.default('rmd160').update(sha256).digest());\n                return ripesha;\n            }\n            /* istanbul ignore next */\n            throw new Error('Unable to make address.');\n        };\n        /**\n         * Returns a string representation of the private key.\n         *\n         * @returns A cb58 serialized string representation of the public key\n         */\n        this.getPrivateKeyString = () => {\n            return \"PrivateKey-\" + bintools.cb58Encode(this.privk);\n        };\n        /**\n         * Returns the public key.\n         *\n         * @returns A cb58 serialized string representation of the public key\n         */\n        this.getPublicKeyString = () => {\n            return bintools.cb58Encode(this.pubk);\n        };\n        /**\n         * Takes a message, signs it, and returns the signature.\n         *\n         * @param msg The message to sign, be sure to hash first if expected\n         *\n         * @returns A {@link https://github.com/feross/buffer|Buffer} containing the signature\n         */\n        this.sign = (msg) => {\n            const sigObj = this.keypair.sign(msg, undefined, { canonical: true });\n            const recovery = buffer_1.Buffer.alloc(1);\n            recovery.writeUInt8(sigObj.recoveryParam, 0);\n            const r = buffer_1.Buffer.from(sigObj.r.toArray(\"be\", 32)); //we have to skip native Buffer class, so this is the way\n            const s = buffer_1.Buffer.from(sigObj.s.toArray(\"be\", 32)); //we have to skip native Buffer class, so this is the way\n            const result = buffer_1.Buffer.concat([r, s, recovery], 65);\n            return result;\n        };\n        /**\n         * Verifies that the private key associated with the provided public key produces the signature associated with the given message.\n         *\n         * @param msg The message associated with the signature\n         * @param sig The signature of the signed message\n         *\n         * @returns True on success, false on failure\n         */\n        this.verify = (msg, sig) => {\n            const sigObj = this._sigFromSigBuffer(sig);\n            return ec.verify(msg, sigObj, this.keypair);\n        };\n        /**\n         * Recovers the public key of a message signer from a message and its associated signature.\n         *\n         * @param msg The message that's signed\n         * @param sig The signature that's signed on the message\n         *\n         * @returns A {@link https://github.com/feross/buffer|Buffer} containing the public key of the signer\n         */\n        this.recover = (msg, sig) => {\n            const sigObj = this._sigFromSigBuffer(sig);\n            const pubk = ec.recoverPubKey(msg, sigObj, sigObj.recoveryParam);\n            return buffer_1.Buffer.from(pubk.encodeCompressed());\n        };\n    }\n}\nexports.SECP256k1KeyPair = SECP256k1KeyPair;\n/**\n * Class for representing a key chain in Avalanche.\n *\n * @typeparam SECP256k1KeyPair Class extending [[StandardKeyPair]] which is used as the key in [[SECP256k1KeyChain]]\n */\nclass SECP256k1KeyChain extends keychain_1.StandardKeyChain {\n    addKey(newKey) {\n        super.addKey(newKey);\n    }\n}\nexports.SECP256k1KeyChain = SECP256k1KeyChain;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VjcDI1NmsxLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvbW1vbi9zZWNwMjU2azEudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7R0FHRztBQUNILG9DQUFpQztBQUNqQyxtREFBcUM7QUFDckMsOERBQXFDO0FBQ3JDLGlFQUF5QztBQUN6Qyx5Q0FBK0Q7QUFFL0Q7O0dBRUc7QUFDSCxNQUFNLEVBQUUsR0FBdUIsUUFBUSxDQUFDLEVBQUUsQ0FBQztBQUUzQzs7R0FFRztBQUNILE1BQU0sRUFBRSxHQUFnQixJQUFJLEVBQUUsQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUU1Qzs7R0FFRztBQUNILE1BQU0sUUFBUSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUM7QUFFMUI7O0dBRUc7QUFDSCxNQUFNLEVBQUUsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQztBQUVsQzs7R0FFRztBQUNILE1BQU0sUUFBUSxHQUFhLGtCQUFRLENBQUMsV0FBVyxFQUFFLENBQUM7QUFHbEQ7O0dBRUc7QUFDSCxNQUFzQixnQkFBaUIsU0FBUSwwQkFBZTtJQWdKMUQ7O09BRUc7SUFDSDtRQUNJLEtBQUssRUFBRSxDQUFDO1FBakpaOztXQUVHO1FBQ08sc0JBQWlCLEdBQUcsQ0FBQyxHQUFVLEVBQStCLEVBQUU7WUFDdEUsTUFBTSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDaEQsTUFBTSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDakQsTUFBTSxhQUFhLEdBQVUsUUFBUSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FB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LENBQUE7UUFFRDs7Ozs7OztXQU9HO1FBQ0gsV0FBTSxHQUFHLENBQUMsR0FBVSxFQUFFLEdBQVUsRUFBVSxFQUFFO1lBQ3hDLE1BQU0sTUFBTSxHQUFnQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDeEUsT0FBTyxFQUFFLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2hELENBQUMsQ0FBQTtRQUVEOzs7Ozs7O1dBT0c7UUFDSCxZQUFPLEdBQUcsQ0FBQyxHQUFVLEVBQUUsR0FBVSxFQUFTLEVBQUU7WUFDeEMsTUFBTSxNQUFNLEdBQWdDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN4RSxNQUFNLElBQUksR0FBRyxFQUFFLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUUsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ2pFLE9BQU8sZUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDO1FBQ2hELENBQUMsQ0FBQTtJQU9ELENBQUM7Q0FFSjtBQXZKRCw0Q0F1SkM7QUFFRDs7OztHQUlHO0FBQ0gsTUFBc0IsaUJBQXdELFNBQVEsMkJBQTZCO0lBUy9HLE1BQU0sQ0FBQyxNQUFrQjtRQUNyQixLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3pCLENBQUM7Q0FXSjtBQXRCRCw4Q0FzQkMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICogQG1vZHVsZSBDb21tb24tU0VDUDI1NmsxS2V5Q2hhaW5cbiAqL1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSBcImJ1ZmZlci9cIjtcbmltcG9ydCAqIGFzIGVsbGlwdGljIGZyb20gXCJlbGxpcHRpY1wiO1xuaW1wb3J0IGNyZWF0ZUhhc2ggZnJvbSBcImNyZWF0ZS1oYXNoXCI7XG5pbXBvcnQgQmluVG9vbHMgZnJvbSAnLi4vdXRpbHMvYmludG9vbHMnO1xuaW1wb3J0IHsgU3RhbmRhcmRLZXlQYWlyLCBTdGFuZGFyZEtleUNoYWluIH0gZnJvbSAnLi9rZXljaGFpbic7XG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5jb25zdCBFQzogdHlwZW9mIGVsbGlwdGljLmVjID0gZWxsaXB0aWMuZWM7XG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5jb25zdCBlYzogZWxsaXB0aWMuZWMgPSBuZXcgRUMoJ3NlY3AyNTZrMScpO1xuXG4vKipcbiAqIEBpZ25vcmVcbiAqL1xuY29uc3QgZWNwYXJhbXMgPSBlYy5jdXJ2ZTtcblxuLyoqXG4gKiBAaWdub3JlXG4gKi9cbmNvbnN0IEJOID0gZWNwYXJhbXMubi5jb25zdHJ1Y3RvcjtcblxuLyoqXG4gKiBAaWdub3JlXG4gKi9cbmNvbnN0IGJpbnRvb2xzOiBCaW5Ub29scyA9IEJpblRvb2xzLmdldEluc3RhbmNlKCk7XG5cblxuLyoqXG4gKiBDbGFzcyBmb3IgcmVwcmVzZW50aW5nIGEgcHJpdmF0ZSBhbmQgcHVibGljIGtleXBhaXIgb24gdGhlIFBsYXRmb3JtIENoYWluLiBcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNFQ1AyNTZrMUtleVBhaXIgZXh0ZW5kcyBTdGFuZGFyZEtleVBhaXIge1xuICAgIHByb3RlY3RlZCBrZXlwYWlyOmVsbGlwdGljLmVjLktleVBhaXJcblxuICAgIC8qKlxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgX3NpZ0Zyb21TaWdCdWZmZXIgPSAoc2lnOkJ1ZmZlcik6ZWxsaXB0aWMuZWMuU2lnbmF0dXJlT3B0aW9ucyA9PiB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgQk4oYmludG9vbHMuY29weUZyb20oc2lnLCAwLCAzMikpO1xuICAgICAgICBjb25zdCBzID0gbmV3IEJOKGJpbnRvb2xzLmNvcHlGcm9tKHNpZywgMzIsIDY0KSk7XG4gICAgICAgIGNvbnN0IHJlY292ZXJ5UGFyYW06bnVtYmVyID0gYmludG9vbHMuY29weUZyb20oc2lnLCA2NCwgNjUpLnJlYWRVSW50QkUoMCwgMSk7XG4gICAgICAgIGNvbnN0IHNpZ09wdCA9IHtcbiAgICAgICAgICAgIHI6cixcbiAgICAgICAgICAgIHM6cyxcbiAgICAgICAgICAgIHJlY292ZXJ5UGFyYW06cmVjb3ZlcnlQYXJhbVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gc2lnT3B0O1xuICAgIH1cblxuICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBuZXcga2V5cGFpci5cbiAgICAgKi9cbiAgICBnZW5lcmF0ZUtleSA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5rZXlwYWlyID0gZWMuZ2VuS2V5UGFpcigpO1xuICAgIFxuICAgICAgICAvLyBkb2luZyBoZXggdHJhbnNsYXRpb24gdG8gZ2V0IEJ1ZmZlciBjbGFzc1xuICAgICAgICB0aGlzLnByaXZrID0gQnVmZmVyLmZyb20odGhpcy5rZXlwYWlyLmdldFByaXZhdGUoJ2hleCcpLnBhZFN0YXJ0KDY0LCAnMCcpLCAnaGV4Jyk7XG4gICAgICAgIHRoaXMucHViayA9IEJ1ZmZlci5mcm9tKHRoaXMua2V5cGFpci5nZXRQdWJsaWModHJ1ZSwgJ2hleCcpLnBhZFN0YXJ0KDY2LCAnMCcpLCAnaGV4Jyk7XG4gICAgICB9O1xuXG4gIC8qKlxuICAgICAqIEltcG9ydHMgYSBwcml2YXRlIGtleSBhbmQgZ2VuZXJhdGVzIHRoZSBhcHByb3ByaWF0ZSBwdWJsaWMga2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHByaXZrIEEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gcmVwcmVzZW50aW5nIHRoZSBwcml2YXRlIGtleVxuICAgICAqXG4gICAgICogQHJldHVybnMgdHJ1ZSBvbiBzdWNjZXNzLCBmYWxzZSBvbiBmYWlsdXJlXG4gICAgICovXG4gICAgaW1wb3J0S2V5ID0gKHByaXZrOkJ1ZmZlcik6Ym9vbGVhbiA9PiB7XG4gICAgICAgIHRoaXMua2V5cGFpciA9IGVjLmtleUZyb21Qcml2YXRlKHByaXZrLnRvU3RyaW5nKCdoZXgnKSwgJ2hleCcpO1xuICAgICAgICAvLyBkb2luZyBoZXggdHJhbnNsYXRpb24gdG8gZ2V0IEJ1ZmZlciBjbGFzc1xuICAgICAgICB0aGlzLnByaXZrID0gQnVmZmVyLmZyb20odGhpcy5rZXlwYWlyLmdldFByaXZhdGUoJ2hleCcpLnBhZFN0YXJ0KDY0LCAnMCcpLCAnaGV4Jyk7XG4gICAgICAgIHRoaXMucHViayA9IEJ1ZmZlci5mcm9tKHRoaXMua2V5cGFpci5nZXRQdWJsaWModHJ1ZSwgJ2hleCcpLnBhZFN0YXJ0KDY2LCAnMCcpLCAnaGV4Jyk7XG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBzaWxseSBJIGtub3csIGJ1dCB0aGUgaW50ZXJmYWNlIHJlcXVpcmVzIHNvIGl0IHJldHVybnMgdHJ1ZSBvbiBzdWNjZXNzLCBzbyBpZiBCdWZmZXIgZmFpbHMgdmFsaWRhdGlvbi4uLlxuICAgICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGFkZHJlc3MgYXMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfS5cbiAgICAgKiBcbiAgICAgKiBAcmV0dXJucyBBIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBhZGRyZXNzXG4gICAgICovXG4gICAgZ2V0QWRkcmVzcyA9ICgpOkJ1ZmZlciA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZHJlc3NGcm9tUHVibGljS2V5KHRoaXMucHViayk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYWRkcmVzcydzIHN0cmluZyByZXByZXNlbnRhdGlvbi5cbiAgICAgKiBcbiAgICAgKiBAcmV0dXJucyBBIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgYWRkcmVzc1xuICAgICAqL1xuICAgIGdldEFkZHJlc3NTdHJpbmc6KCkgPT4gc3RyaW5nO1xuXG4gIC8qKlxuICAgICAqIFJldHVybnMgYW4gYWRkcmVzcyBnaXZlbiBhIHB1YmxpYyBrZXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHViayBBIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHJlcHJlc2VudGluZyB0aGUgcHVibGljIGtleVxuICAgICAqXG4gICAgICogQHJldHVybnMgQSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBmb3IgdGhlIGFkZHJlc3Mgb2YgdGhlIHB1YmxpYyBrZXkuXG4gICAgICovXG4gICAgYWRkcmVzc0Zyb21QdWJsaWNLZXkgPSAocHViazpCdWZmZXIpOiBCdWZmZXIgPT4ge1xuICAgICAgICBpZiAocHViay5sZW5ndGggPT09IDY1KSB7XG4gICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgICBwdWJrID0gQnVmZmVyLmZyb20oZWMua2V5RnJvbVB1YmxpYyhwdWJrKS5nZXRQdWJsaWModHJ1ZSwgJ2hleCcpLnBhZFN0YXJ0KDY2LCAnMCcpLCAnaGV4Jyk7IC8vIG1ha2UgY29tcGFjdCwgc3RpY2sgYmFjayBpbnRvIGJ1ZmZlclxuICAgICAgICB9XG4gICAgICAgIGlmIChwdWJrLmxlbmd0aCA9PT0gMzMpIHtcbiAgICAgICAgICBjb25zdCBzaGEyNTY6QnVmZmVyID0gQnVmZmVyLmZyb20oY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKHB1YmspLmRpZ2VzdCgpKTtcbiAgICAgICAgICBjb25zdCByaXBlc2hhOkJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGNyZWF0ZUhhc2goJ3JtZDE2MCcpLnVwZGF0ZShzaGEyNTYpLmRpZ2VzdCgpKTtcbiAgICAgICAgICByZXR1cm4gcmlwZXNoYTtcbiAgICAgICAgfVxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBtYWtlIGFkZHJlc3MuJyk7XG4gICAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcHJpdmF0ZSBrZXkuXG4gICAgICogXG4gICAgICogQHJldHVybnMgQSBjYjU4IHNlcmlhbGl6ZWQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwdWJsaWMga2V5XG4gICAgICovXG4gICAgZ2V0UHJpdmF0ZUtleVN0cmluZyA9ICgpOnN0cmluZyA9PiB7XG4gICAgICAgIHJldHVybiBcIlByaXZhdGVLZXktXCIgKyBiaW50b29scy5jYjU4RW5jb2RlKHRoaXMucHJpdmspO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHB1YmxpYyBrZXkuXG4gICAgICogXG4gICAgICogQHJldHVybnMgQSBjYjU4IHNlcmlhbGl6ZWQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwdWJsaWMga2V5XG4gICAgICovXG4gICAgZ2V0UHVibGljS2V5U3RyaW5nID0gKCk6c3RyaW5nID0+IHtcbiAgICAgICAgcmV0dXJuIGJpbnRvb2xzLmNiNThFbmNvZGUodGhpcy5wdWJrKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgbWVzc2FnZSwgc2lnbnMgaXQsIGFuZCByZXR1cm5zIHRoZSBzaWduYXR1cmUuXG4gICAgICogXG4gICAgICogQHBhcmFtIG1zZyBUaGUgbWVzc2FnZSB0byBzaWduLCBiZSBzdXJlIHRvIGhhc2ggZmlyc3QgaWYgZXhwZWN0ZWRcbiAgICAgKiBcbiAgICAgKiBAcmV0dXJucyBBIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IGNvbnRhaW5pbmcgdGhlIHNpZ25hdHVyZVxuICAgICAqL1xuICAgIHNpZ24gPSAobXNnOkJ1ZmZlcik6QnVmZmVyID0+IHtcbiAgICAgICAgY29uc3Qgc2lnT2JqID0gdGhpcy5rZXlwYWlyLnNpZ24obXNnLCB1bmRlZmluZWQsIHsgY2Fub25pY2FsOiB0cnVlIH0pO1xuICAgICAgICBjb25zdCByZWNvdmVyeTpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoMSk7XG4gICAgICAgIHJlY292ZXJ5LndyaXRlVUludDgoc2lnT2JqLnJlY292ZXJ5UGFyYW0sIDApO1xuICAgICAgICBjb25zdCByOkJ1ZmZlciA9IEJ1ZmZlci5mcm9tKHNpZ09iai5yLnRvQXJyYXkoXCJiZVwiLCAzMikpOyAvL3dlIGhhdmUgdG8gc2tpcCBuYXRpdmUgQnVmZmVyIGNsYXNzLCBzbyB0aGlzIGlzIHRoZSB3YXlcbiAgICAgICAgY29uc3QgczpCdWZmZXIgPSBCdWZmZXIuZnJvbShzaWdPYmoucy50b0FycmF5KFwiYmVcIiwgMzIpKTsgLy93ZSBoYXZlIHRvIHNraXAgbmF0aXZlIEJ1ZmZlciBjbGFzcywgc28gdGhpcyBpcyB0aGUgd2F5XG4gICAgICAgIGNvbnN0IHJlc3VsdDpCdWZmZXIgPSBCdWZmZXIuY29uY2F0KFtyLHMsIHJlY292ZXJ5XSwgNjUpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IHRoZSBwcml2YXRlIGtleSBhc3NvY2lhdGVkIHdpdGggdGhlIHByb3ZpZGVkIHB1YmxpYyBrZXkgcHJvZHVjZXMgdGhlIHNpZ25hdHVyZSBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuXG4gICAgICogXG4gICAgICogQHBhcmFtIG1zZyBUaGUgbWVzc2FnZSBhc3NvY2lhdGVkIHdpdGggdGhlIHNpZ25hdHVyZVxuICAgICAqIEBwYXJhbSBzaWcgVGhlIHNpZ25hdHVyZSBvZiB0aGUgc2lnbmVkIG1lc3NhZ2VcbiAgICAgKiBcbiAgICAgKiBAcmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MsIGZhbHNlIG9uIGZhaWx1cmVcbiAgICAgKi9cbiAgICB2ZXJpZnkgPSAobXNnOkJ1ZmZlciwgc2lnOkJ1ZmZlcik6Ym9vbGVhbiA9PiB7IFxuICAgICAgICBjb25zdCBzaWdPYmo6ZWxsaXB0aWMuZWMuU2lnbmF0dXJlT3B0aW9ucyA9IHRoaXMuX3NpZ0Zyb21TaWdCdWZmZXIoc2lnKTtcbiAgICAgICAgcmV0dXJuIGVjLnZlcmlmeShtc2csIHNpZ09iaiwgdGhpcy5rZXlwYWlyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWNvdmVycyB0aGUgcHVibGljIGtleSBvZiBhIG1lc3NhZ2Ugc2lnbmVyIGZyb20gYSBtZXNzYWdlIGFuZCBpdHMgYXNzb2NpYXRlZCBzaWduYXR1cmUuXG4gICAgICogXG4gICAgICogQHBhcmFtIG1zZyBUaGUgbWVzc2FnZSB0aGF0J3Mgc2lnbmVkXG4gICAgICogQHBhcmFtIHNpZyBUaGUgc2lnbmF0dXJlIHRoYXQncyBzaWduZWQgb24gdGhlIG1lc3NhZ2VcbiAgICAgKiBcbiAgICAgKiBAcmV0dXJucyBBIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IGNvbnRhaW5pbmcgdGhlIHB1YmxpYyBrZXkgb2YgdGhlIHNpZ25lclxuICAgICAqL1xuICAgIHJlY292ZXIgPSAobXNnOkJ1ZmZlciwgc2lnOkJ1ZmZlcik6QnVmZmVyID0+IHtcbiAgICAgICAgY29uc3Qgc2lnT2JqOmVsbGlwdGljLmVjLlNpZ25hdHVyZU9wdGlvbnMgPSB0aGlzLl9zaWdGcm9tU2lnQnVmZmVyKHNpZyk7XG4gICAgICAgIGNvbnN0IHB1YmsgPSBlYy5yZWNvdmVyUHViS2V5KG1zZywgc2lnT2JqLCBzaWdPYmoucmVjb3ZlcnlQYXJhbSk7XG4gICAgICAgIHJldHVybiBCdWZmZXIuZnJvbShwdWJrLmVuY29kZUNvbXByZXNzZWQoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xhc3MgZm9yIHJlcHJlc2VudGluZyBhIHByaXZhdGUgYW5kIHB1YmxpYyBrZXlwYWlyIGluIEF2YWxhbmNoZSBQbGF0Zm9ybVZNLiBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG4gICAgXG59XG5cbi8qKlxuICogQ2xhc3MgZm9yIHJlcHJlc2VudGluZyBhIGtleSBjaGFpbiBpbiBBdmFsYW5jaGUuIFxuICogXG4gKiBAdHlwZXBhcmFtIFNFQ1AyNTZrMUtleVBhaXIgQ2xhc3MgZXh0ZW5kaW5nIFtbU3RhbmRhcmRLZXlQYWlyXV0gd2hpY2ggaXMgdXNlZCBhcyB0aGUga2V5IGluIFtbU0VDUDI1NmsxS2V5Q2hhaW5dXVxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgU0VDUDI1NmsxS2V5Q2hhaW48U0VDUEtQQ2xhc3MgZXh0ZW5kcyBTRUNQMjU2azFLZXlQYWlyPiBleHRlbmRzIFN0YW5kYXJkS2V5Q2hhaW48U0VDUEtQQ2xhc3M+IHtcblxuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgbmV3IGtleSBwYWlyLCByZXR1cm5zIHRoZSBhZGRyZXNzLlxuICAgICAqIFxuICAgICAqIEByZXR1cm5zIEFkZHJlc3Mgb2YgdGhlIG5ldyBrZXkgcGFpclxuICAgICAqL1xuICAgIG1ha2VLZXk6KCkgPT4gU0VDUEtQQ2xhc3M7IFxuXG4gICAgYWRkS2V5KG5ld0tleTpTRUNQS1BDbGFzcykge1xuICAgICAgICBzdXBlci5hZGRLZXkobmV3S2V5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIHByaXZhdGUga2V5LCBtYWtlcyBhIG5ldyBrZXkgcGFpciwgcmV0dXJucyB0aGUgYWRkcmVzcy5cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gcHJpdmsgQSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBvciBjYjU4IHNlcmlhbGl6ZWQgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcHJpdmF0ZSBrZXkgXG4gICAgICogXG4gICAgICogQHJldHVybnMgQWRkcmVzcyBvZiB0aGUgbmV3IGtleSBwYWlyXG4gICAgICovXG4gICAgaW1wb3J0S2V5Oihwcml2azpCdWZmZXIgfCBzdHJpbmcpID0+IFNFQ1BLUENsYXNzO1xuXG59Il19","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * @packageDocumentation\n * @module AvalancheCore\n */\nconst axios_1 = __importDefault(require(\"axios\"));\nconst apibase_1 = require(\"./common/apibase\");\nconst helperfunctions_1 = require(\"./utils/helperfunctions\");\n/**\n * AvalancheCore is middleware for interacting with Avalanche node RPC APIs.\n *\n * Example usage:\n * ```js\n * let avalanche = new AvalancheCore(\"127.0.0.1\", 9650, \"https\");\n * ```\n *\n */\nclass AvalancheCore {\n    /**\n     * Creates a new Avalanche instance. Sets the address and port of the main Avalanche Client.\n     *\n     * @param ip The hostname to resolve to reach the Avalanche Client APIs\n     * @param port The port to resolve to reach the Avalanche Client APIs\n     * @param protocol The protocol string to use before a \"://\" in a request, ex: \"http\", \"https\", \"git\", \"ws\", etc ...\n     */\n    constructor(ip, port, protocol = 'http') {\n        this.networkID = 0;\n        this.hrp = '';\n        this.auth = undefined;\n        this.apis = {};\n        /**\n           * Sets the address and port of the main Avalanche Client.\n           *\n           * @param ip The hostname to resolve to reach the Avalanche Client RPC APIs\n           * @param port The port to resolve to reach the Avalanche Client RPC APIs\n           * @param protocol The protocol string to use before a \"://\" in a request,\n           * ex: \"http\", \"https\", \"git\", \"ws\", etc ...\n           */\n        this.setAddress = (ip, port, protocol = 'http') => {\n            this.ip = ip;\n            this.port = port;\n            this.protocol = protocol;\n            this.url = `${protocol}://${ip}:${port}`;\n        };\n        /**\n           * Returns the protocol such as \"http\", \"https\", \"git\", \"ws\", etc.\n           */\n        this.getProtocol = () => this.protocol;\n        /**\n           * Returns the IP for the Avalanche node.\n           */\n        this.getIP = () => this.ip;\n        /**\n           * Returns the port for the Avalanche node.\n           */\n        this.getPort = () => this.port;\n        /**\n           * Returns the URL of the Avalanche node (ip + port);\n           */\n        this.getURL = () => this.url;\n        /**\n           * Returns the networkID;\n           */\n        this.getNetworkID = () => this.networkID;\n        /**\n           * Sets the networkID\n           */\n        this.setNetworkID = (netid) => {\n            this.networkID = netid;\n            this.hrp = helperfunctions_1.getPreferredHRP(this.networkID);\n        };\n        /**\n         * Returns the Human-Readable-Part of the network associated with this key.\n         *\n         * @returns The [[KeyPair]]'s Human-Readable-Part of the network's Bech32 addressing scheme\n         */\n        this.getHRP = () => this.hrp;\n        /**\n         * Sets the the Human-Readable-Part of the network associated with this key.\n         *\n         * @param hrp String for the Human-Readable-Part of Bech32 addresses\n         */\n        this.setHRP = (hrp) => {\n            this.hrp = hrp;\n        };\n        /**\n         * Sets the temporary auth token used for communicating with the node.\n         *\n         * @param auth A temporary token provided by the node enabling access to the endpoints on the node.\n         */\n        this.setAuthToken = (auth) => {\n            this.auth = auth;\n        };\n        this._setHeaders = (headers) => {\n            if (typeof this.auth === \"string\") {\n                headers[\"Authorization\"] = \"Bearer \" + this.auth;\n            }\n            return headers;\n        };\n        /**\n         * Adds an API to the middleware. The API resolves to a registered blockchain's RPC.\n         *\n         * In TypeScript:\n         * ```js\n         * avalanche.addAPI<MyVMClass>(\"mychain\", MyVMClass, \"/ext/bc/mychain\");\n         * ```\n         *\n         * In Javascript:\n         * ```js\n         * avalanche.addAPI(\"mychain\", MyVMClass, \"/ext/bc/mychain\");\n         * ```\n         *\n         * @typeparam GA Class of the API being added\n         * @param apiName A label for referencing the API in the future\n         * @param ConstructorFN A reference to the class which instantiates the API\n         * @param baseurl Path to resolve to reach the API\n         *\n         */\n        this.addAPI = (apiName, ConstructorFN, baseurl = undefined, ...args) => {\n            if (typeof baseurl === 'undefined') {\n                this.apis[apiName] = new ConstructorFN(this, undefined, ...args);\n            }\n            else {\n                this.apis[apiName] = new ConstructorFN(this, baseurl, ...args);\n            }\n        };\n        /**\n         * Retrieves a reference to an API by its apiName label.\n         *\n         * @param apiName Name of the API to return\n         */\n        this.api = (apiName) => this.apis[apiName];\n        /**\n         * @ignore\n         */\n        this._request = (xhrmethod, baseurl, getdata, postdata, headers = {}, axiosConfig = undefined) => __awaiter(this, void 0, void 0, function* () {\n            let config;\n            if (axiosConfig) {\n                config = axiosConfig;\n            }\n            else {\n                config = {\n                    baseURL: `${this.protocol}://${this.ip}:${this.port}`,\n                    responseType: 'text',\n                };\n            }\n            config.url = baseurl;\n            config.method = xhrmethod;\n            config.headers = headers;\n            config.data = postdata;\n            config.params = getdata;\n            return axios_1.default.request(config).then((resp) => {\n                // purging all that is axios\n                const xhrdata = new apibase_1.RequestResponseData();\n                xhrdata.data = resp.data;\n                xhrdata.headers = resp.headers;\n                xhrdata.request = resp.request;\n                xhrdata.status = resp.status;\n                xhrdata.statusText = resp.statusText;\n                return xhrdata;\n            });\n        });\n        /**\n         * Makes a GET call to an API.\n         *\n         * @param baseurl Path to the api\n         * @param getdata Object containing the key value pairs sent in GET\n         * @param parameters Object containing the parameters of the API call\n         * @param headers An array HTTP Request Headers\n         * @param axiosConfig Configuration for the axios javascript library that will be the\n         * foundation for the rest of the parameters\n         *\n         * @returns A promise for [[RequestResponseData]]\n         */\n        this.get = (baseurl, getdata, headers = {}, axiosConfig = undefined) => this._request('GET', baseurl, getdata, {}, this._setHeaders(headers), axiosConfig);\n        /**\n         * Makes a DELETE call to an API.\n         *\n         * @param baseurl Path to the API\n         * @param getdata Object containing the key value pairs sent in DELETE\n         * @param parameters Object containing the parameters of the API call\n         * @param headers An array HTTP Request Headers\n         * @param axiosConfig Configuration for the axios javascript library that will be the\n         * foundation for the rest of the parameters\n         *\n         * @returns A promise for [[RequestResponseData]]\n         */\n        this.delete = (baseurl, getdata, headers = {}, axiosConfig = undefined) => this._request('DELETE', baseurl, getdata, {}, this._setHeaders(headers), axiosConfig);\n        /**\n         * Makes a POST call to an API.\n         *\n         * @param baseurl Path to the API\n         * @param getdata Object containing the key value pairs sent in POST\n         * @param postdata Object containing the key value pairs sent in POST\n         * @param parameters Object containing the parameters of the API call\n         * @param headers An array HTTP Request Headers\n         * @param axiosConfig Configuration for the axios javascript library that will be the\n         * foundation for the rest of the parameters\n         *\n         * @returns A promise for [[RequestResponseData]]\n         */\n        this.post = (baseurl, getdata, postdata, headers = {}, axiosConfig = undefined) => this._request('POST', baseurl, getdata, postdata, this._setHeaders(headers), axiosConfig);\n        /**\n         * Makes a PUT call to an API.\n         *\n         * @param baseurl Path to the baseurl\n         * @param getdata Object containing the key value pairs sent in PUT\n         * @param postdata Object containing the key value pairs sent in PUT\n         * @param parameters Object containing the parameters of the API call\n         * @param headers An array HTTP Request Headers\n         * @param axiosConfig Configuration for the axios javascript library that will be the\n         * foundation for the rest of the parameters\n         *\n         * @returns A promise for [[RequestResponseData]]\n         */\n        this.put = (baseurl, getdata, postdata, headers = {}, axiosConfig = undefined) => this._request('PUT', baseurl, getdata, postdata, this._setHeaders(headers), axiosConfig);\n        /**\n         * Makes a PATCH call to an API.\n         *\n         * @param baseurl Path to the baseurl\n         * @param getdata Object containing the key value pairs sent in PATCH\n         * @param postdata Object containing the key value pairs sent in PATCH\n         * @param parameters Object containing the parameters of the API call\n         * @param headers An array HTTP Request Headers\n         * @param axiosConfig Configuration for the axios javascript library that will be the\n         * foundation for the rest of the parameters\n         *\n         * @returns A promise for [[RequestResponseData]]\n         */\n        this.patch = (baseurl, getdata, postdata, headers = {}, axiosConfig = undefined) => this._request('PATCH', baseurl, getdata, postdata, this._setHeaders(headers), axiosConfig);\n        this.setAddress(ip, port, protocol);\n    }\n}\nexports.default = AvalancheCore;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXZhbGFuY2hlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2F2YWxhbmNoZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBOzs7R0FHRztBQUNILGtEQUF5RTtBQUN6RSw4Q0FBZ0U7QUFDaEUsNkRBQTBEO0FBRTFEOzs7Ozs7OztHQVFHO0FBQ0gsTUFBcUIsYUFBYTtJQWtTaEM7Ozs7OztPQU1HO0lBQ0gsWUFBWSxFQUFTLEVBQUUsSUFBVyxFQUFFLFdBQWtCLE1BQU07UUF4U2xELGNBQVMsR0FBVSxDQUFDLENBQUM7UUFFckIsUUFBRyxHQUFVLEVBQUUsQ0FBQztRQVVoQixTQUFJLEdBQVUsU0FBUyxDQUFDO1FBRXhCLFNBQUksR0FBNEIsRUFBRSxDQUFDO1FBRTdDOzs7Ozs7O2FBT0s7UUFDTCxlQUFVLEdBQUcsQ0FBQyxFQUFTLEVBQUUsSUFBVyxFQUFFLFdBQWtCLE1BQU0sRUFBRSxFQUFFO1lBQ2hFLElBQUksQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDO1lBQ2IsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7WUFDakIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7WUFDekIsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLFFBQVEsTUFBTSxFQUFFLElBQUksSUFBSSxFQUFFLENBQUM7UUFDM0MsQ0FBQyxDQUFDO1FBRUY7O2FBRUs7UUFDTCxnQkFBVyxHQUFHLEdBQVUsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7UUFFekM7O2FBRUs7UUFDTCxVQUFLLEdBQUcsR0FBVSxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztRQUU3Qjs7YUFFSztRQUNMLFlBQU8sR0FBRyxHQUFVLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBRWpDOzthQUVLO1FBQ0wsV0FBTSxHQUFHLEdBQVUsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7UUFFL0I7O2FBRUs7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T0FBTyxDQUFDLEVBQ3pCLFdBQVcsQ0FBQyxDQUFDO1FBRWY7Ozs7Ozs7Ozs7OztXQVlHO1FBQ0gsUUFBRyxHQUFHLENBQUMsT0FBYyxFQUNuQixPQUFjLEVBQ2QsUUFBd0QsRUFDeEQsVUFBaUIsRUFBRSxFQUNuQixjQUFpQyxTQUFTLEVBQ2IsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUNuRCxPQUFPLEVBQ1AsT0FBTyxFQUNQLFFBQVEsRUFDUixJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxFQUN6QixXQUFXLENBQUMsQ0FBQztRQUVmOzs7Ozs7Ozs7Ozs7V0FZRztRQUNILFVBQUssR0FBRyxDQUFDLE9BQWMsRUFDckIsT0FBYyxFQUNkLFFBQXdELEVBQ3hELFVBQWlCLEVBQUUsRUFDbkIsY0FBaUMsU0FBUyxFQUNiLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFDckQsT0FBTyxFQUNQLE9BQU8sRUFDUCxRQUFRLEVBQ1IsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsRUFDekIsV0FBVyxDQUFDLENBQUM7UUFVYixJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDdEMsQ0FBQztDQUNGO0FBNVNELGdDQTRTQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKiBAbW9kdWxlIEF2YWxhbmNoZUNvcmVcbiAqL1xuaW1wb3J0IGF4aW9zLCB7IEF4aW9zUmVxdWVzdENvbmZpZywgQXhpb3NSZXNwb25zZSwgTWV0aG9kIH0gZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHsgQVBJQmFzZSwgUmVxdWVzdFJlc3BvbnNlRGF0YSB9IGZyb20gJy4vY29tbW9uL2FwaWJhc2UnO1xuaW1wb3J0IHsgZ2V0UHJlZmVycmVkSFJQIH0gZnJvbSAnLi91dGlscy9oZWxwZXJmdW5jdGlvbnMnO1xuXG4vKipcbiAqIEF2YWxhbmNoZUNvcmUgaXMgbWlkZGxld2FyZSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBBdmFsYW5jaGUgbm9kZSBSUEMgQVBJcy5cbiAqXG4gKiBFeGFtcGxlIHVzYWdlOlxuICogYGBganNcbiAqIGxldCBhdmFsYW5jaGUgPSBuZXcgQXZhbGFuY2hlQ29yZShcIjEyNy4wLjAuMVwiLCA5NjUwLCBcImh0dHBzXCIpO1xuICogYGBgXG4gKlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdmFsYW5jaGVDb3JlIHtcbiAgcHJvdGVjdGVkIG5ldHdvcmtJRDpudW1iZXIgPSAwO1xuXG4gIHByb3RlY3RlZCBocnA6c3RyaW5nID0gJyc7XG5cbiAgcHJvdGVjdGVkIHByb3RvY29sOnN0cmluZztcblxuICBwcm90ZWN0ZWQgaXA6c3RyaW5nO1xuXG4gIHByb3RlY3RlZCBwb3J0Om51bWJlcjtcblxuICBwcm90ZWN0ZWQgdXJsOnN0cmluZztcblxuICBwcm90ZWN0ZWQgYXV0aDpzdHJpbmcgPSB1bmRlZmluZWQ7XG5cbiAgcHJvdGVjdGVkIGFwaXM6eyBbazogc3RyaW5nXTogQVBJQmFzZSB9ID0ge307XG5cbiAgLyoqXG4gICAgICogU2V0cyB0aGUgYWRkcmVzcyBhbmQgcG9ydCBvZiB0aGUgbWFpbiBBdmFsYW5jaGUgQ2xpZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGlwIFRoZSBob3N0bmFtZSB0byByZXNvbHZlIHRvIHJlYWNoIHRoZSBBdmFsYW5jaGUgQ2xpZW50IFJQQyBBUElzXG4gICAgICogQHBhcmFtIHBvcnQgVGhlIHBvcnQgdG8gcmVzb2x2ZSB0byByZWFjaCB0aGUgQXZhbGFuY2hlIENsaWVudCBSUEMgQVBJc1xuICAgICAqIEBwYXJhbSBwcm90b2NvbCBUaGUgcHJvdG9jb2wgc3RyaW5nIHRvIHVzZSBiZWZvcmUgYSBcIjovL1wiIGluIGEgcmVxdWVzdCxcbiAgICAgKiBleDogXCJodHRwXCIsIFwiaHR0cHNcIiwgXCJnaXRcIiwgXCJ3c1wiLCBldGMgLi4uXG4gICAgICovXG4gIHNldEFkZHJlc3MgPSAoaXA6c3RyaW5nLCBwb3J0Om51bWJlciwgcHJvdG9jb2w6c3RyaW5nID0gJ2h0dHAnKSA9PiB7XG4gICAgdGhpcy5pcCA9IGlwO1xuICAgIHRoaXMucG9ydCA9IHBvcnQ7XG4gICAgdGhpcy5wcm90b2NvbCA9IHByb3RvY29sO1xuICAgIHRoaXMudXJsID0gYCR7cHJvdG9jb2x9Oi8vJHtpcH06JHtwb3J0fWA7XG4gIH07XG5cbiAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcHJvdG9jb2wgc3VjaCBhcyBcImh0dHBcIiwgXCJodHRwc1wiLCBcImdpdFwiLCBcIndzXCIsIGV0Yy5cbiAgICAgKi9cbiAgZ2V0UHJvdG9jb2wgPSAoKTpzdHJpbmcgPT4gdGhpcy5wcm90b2NvbDtcblxuICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBJUCBmb3IgdGhlIEF2YWxhbmNoZSBub2RlLlxuICAgICAqL1xuICBnZXRJUCA9ICgpOnN0cmluZyA9PiB0aGlzLmlwO1xuXG4gIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHBvcnQgZm9yIHRoZSBBdmFsYW5jaGUgbm9kZS5cbiAgICAgKi9cbiAgZ2V0UG9ydCA9ICgpOm51bWJlciA9PiB0aGlzLnBvcnQ7XG5cbiAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgVVJMIG9mIHRoZSBBdmFsYW5jaGUgbm9kZSAoaXAgKyBwb3J0KTtcbiAgICAgKi9cbiAgZ2V0VVJMID0gKCk6c3RyaW5nID0+IHRoaXMudXJsO1xuXG4gIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG5ldHdvcmtJRDtcbiAgICAgKi9cbiAgZ2V0TmV0d29ya0lEID0gKCk6bnVtYmVyID0+IHRoaXMubmV0d29ya0lEO1xuXG4gIC8qKlxuICAgICAqIFNldHMgdGhlIG5ldHdvcmtJRFxuICAgICAqL1xuICBzZXROZXR3b3JrSUQgPSAobmV0aWQ6bnVtYmVyKSA9PiB7XG4gICAgdGhpcy5uZXR3b3JrSUQgPSBuZXRpZDtcbiAgICB0aGlzLmhycCA9IGdldFByZWZlcnJlZEhSUCh0aGlzLm5ldHdvcmtJRCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIEh1bWFuLVJlYWRhYmxlLVBhcnQgb2YgdGhlIG5ldHdvcmsgYXNzb2NpYXRlZCB3aXRoIHRoaXMga2V5LlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgW1tLZXlQYWlyXV0ncyBIdW1hbi1SZWFkYWJsZS1QYXJ0IG9mIHRoZSBuZXR3b3JrJ3MgQmVjaDMyIGFkZHJlc3Npbmcgc2NoZW1lXG4gICAqL1xuICBnZXRIUlAgPSAoKTpzdHJpbmcgPT4gdGhpcy5ocnA7XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHRoZSBIdW1hbi1SZWFkYWJsZS1QYXJ0IG9mIHRoZSBuZXR3b3JrIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGtleS5cbiAgICpcbiAgICogQHBhcmFtIGhycCBTdHJpbmcgZm9yIHRoZSBIdW1hbi1SZWFkYWJsZS1QYXJ0IG9mIEJlY2gzMiBhZGRyZXNzZXNcbiAgICovXG4gIHNldEhSUCA9IChocnA6c3RyaW5nKTp2b2lkID0+IHtcbiAgICB0aGlzLmhycCA9IGhycDtcbiAgfTtcblxuICAvKipcbiAgICogU2V0cyB0aGUgdGVtcG9yYXJ5IGF1dGggdG9rZW4gdXNlZCBmb3IgY29tbXVuaWNhdGluZyB3aXRoIHRoZSBub2RlLlxuICAgKiBcbiAgICogQHBhcmFtIGF1dGggQSB0ZW1wb3JhcnkgdG9rZW4gcHJvdmlkZWQgYnkgdGhlIG5vZGUgZW5hYmxpbmcgYWNjZXNzIHRvIHRoZSBlbmRwb2ludHMgb24gdGhlIG5vZGUuXG4gICAqL1xuICBzZXRBdXRoVG9rZW4gPSAoYXV0aDpzdHJpbmcpOnZvaWQgPT4ge1xuICAgIHRoaXMuYXV0aCA9IGF1dGg7XG4gIH1cblxuICBwcm90ZWN0ZWQgX3NldEhlYWRlcnMgPSAoaGVhZGVyczpvYmplY3QpOm9iamVjdCA9PiB7XG4gICAgaWYodHlwZW9mIHRoaXMuYXV0aCA9PT0gXCJzdHJpbmdcIil7XG4gICAgICBoZWFkZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IFwiQmVhcmVyIFwiICsgdGhpcy5hdXRoO1xuICAgIH1cbiAgICByZXR1cm4gaGVhZGVycztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGFuIEFQSSB0byB0aGUgbWlkZGxld2FyZS4gVGhlIEFQSSByZXNvbHZlcyB0byBhIHJlZ2lzdGVyZWQgYmxvY2tjaGFpbidzIFJQQy5cbiAgICpcbiAgICogSW4gVHlwZVNjcmlwdDpcbiAgICogYGBganNcbiAgICogYXZhbGFuY2hlLmFkZEFQSTxNeVZNQ2xhc3M+KFwibXljaGFpblwiLCBNeVZNQ2xhc3MsIFwiL2V4dC9iYy9teWNoYWluXCIpO1xuICAgKiBgYGBcbiAgICpcbiAgICogSW4gSmF2YXNjcmlwdDpcbiAgICogYGBganNcbiAgICogYXZhbGFuY2hlLmFkZEFQSShcIm15Y2hhaW5cIiwgTXlWTUNsYXNzLCBcIi9leHQvYmMvbXljaGFpblwiKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEB0eXBlcGFyYW0gR0EgQ2xhc3Mgb2YgdGhlIEFQSSBiZWluZyBhZGRlZFxuICAgKiBAcGFyYW0gYXBpTmFtZSBBIGxhYmVsIGZvciByZWZlcmVuY2luZyB0aGUgQVBJIGluIHRoZSBmdXR1cmVcbiAgICogQHBhcmFtIENvbnN0cnVjdG9yRk4gQSByZWZlcmVuY2UgdG8gdGhlIGNsYXNzIHdoaWNoIGluc3RhbnRpYXRlcyB0aGUgQVBJXG4gICAqIEBwYXJhbSBiYXNldXJsIFBhdGggdG8gcmVzb2x2ZSB0byByZWFjaCB0aGUgQVBJXG4gICAqXG4gICAqL1xuICBhZGRBUEkgPSA8R0EgZXh0ZW5kcyBBUElCYXNlPihhcGlOYW1lOnN0cmluZyxcbiAgICBDb25zdHJ1Y3RvckZOOiBuZXcoYXZheDpBdmFsYW5jaGVDb3JlLCBiYXNldXJsPzpzdHJpbmcsIC4uLmFyZ3M6QXJyYXk8YW55PikgPT4gR0EsXG4gICAgYmFzZXVybDpzdHJpbmcgPSB1bmRlZmluZWQsXG4gICAgLi4uYXJnczpBcnJheTxhbnk+KSA9PiB7XG4gICAgaWYgKHR5cGVvZiBiYXNldXJsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5hcGlzW2FwaU5hbWVdID0gbmV3IENvbnN0cnVjdG9yRk4odGhpcywgdW5kZWZpbmVkLCAuLi5hcmdzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hcGlzW2FwaU5hbWVdID0gbmV3IENvbnN0cnVjdG9yRk4odGhpcywgYmFzZXVybCwgLi4uYXJncyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgYSByZWZlcmVuY2UgdG8gYW4gQVBJIGJ5IGl0cyBhcGlOYW1lIGxhYmVsLlxuICAgKlxuICAgKiBAcGFyYW0gYXBpTmFtZSBOYW1lIG9mIHRoZSBBUEkgdG8gcmV0dXJuXG4gICAqL1xuICBhcGkgPSA8R0EgZXh0ZW5kcyBBUElCYXNlPihhcGlOYW1lOnN0cmluZyk6IEdBID0+IHRoaXMuYXBpc1thcGlOYW1lXSBhcyBHQTtcblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgcHJvdGVjdGVkIF9yZXF1ZXN0ID0gYXN5bmMgKHhocm1ldGhvZDpNZXRob2QsXG4gICAgYmFzZXVybDpzdHJpbmcsXG4gICAgZ2V0ZGF0YTpvYmplY3QsXG4gICAgcG9zdGRhdGE6c3RyaW5nIHwgb2JqZWN0IHwgQXJyYXlCdWZmZXIgfCBBcnJheUJ1ZmZlclZpZXcsXG4gICAgaGVhZGVyczpvYmplY3QgPSB7fSxcbiAgICBheGlvc0NvbmZpZzpBeGlvc1JlcXVlc3RDb25maWcgPSB1bmRlZmluZWQpOiBQcm9taXNlPFJlcXVlc3RSZXNwb25zZURhdGE+ID0+IHtcbiAgICBsZXQgY29uZmlnOkF4aW9zUmVxdWVzdENvbmZpZztcbiAgICBpZiAoYXhpb3NDb25maWcpIHtcbiAgICAgIGNvbmZpZyA9IGF4aW9zQ29uZmlnO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25maWcgPSB7XG4gICAgICAgIGJhc2VVUkw6IGAke3RoaXMucHJvdG9jb2x9Oi8vJHt0aGlzLmlwfToke3RoaXMucG9ydH1gLFxuICAgICAgICByZXNwb25zZVR5cGU6ICd0ZXh0JyxcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbmZpZy51cmwgPSBiYXNldXJsO1xuICAgIGNvbmZpZy5tZXRob2QgPSB4aHJtZXRob2Q7XG4gICAgY29uZmlnLmhlYWRlcnMgPSBoZWFkZXJzO1xuICAgIGNvbmZpZy5kYXRhID0gcG9zdGRhdGE7XG4gICAgY29uZmlnLnBhcmFtcyA9IGdldGRhdGE7XG4gICAgcmV0dXJuIGF4aW9zLnJlcXVlc3QoY29uZmlnKS50aGVuKChyZXNwOkF4aW9zUmVzcG9uc2U8YW55PikgPT4ge1xuICAgICAgLy8gcHVyZ2luZyBhbGwgdGhhdCBpcyBheGlvc1xuICAgICAgY29uc3QgeGhyZGF0YTpSZXF1ZXN0UmVzcG9uc2VEYXRhID0gbmV3IFJlcXVlc3RSZXNwb25zZURhdGEoKTtcbiAgICAgIHhocmRhdGEuZGF0YSA9IHJlc3AuZGF0YTtcbiAgICAgIHhocmRhdGEuaGVhZGVycyA9IHJlc3AuaGVhZGVycztcbiAgICAgIHhocmRhdGEucmVxdWVzdCA9IHJlc3AucmVxdWVzdDtcbiAgICAgIHhocmRhdGEuc3RhdHVzID0gcmVzcC5zdGF0dXM7XG4gICAgICB4aHJkYXRhLnN0YXR1c1RleHQgPSByZXNwLnN0YXR1c1RleHQ7XG4gICAgICByZXR1cm4geGhyZGF0YTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogTWFrZXMgYSBHRVQgY2FsbCB0byBhbiBBUEkuXG4gICAqXG4gICAqIEBwYXJhbSBiYXNldXJsIFBhdGggdG8gdGhlIGFwaVxuICAgKiBAcGFyYW0gZ2V0ZGF0YSBPYmplY3QgY29udGFpbmluZyB0aGUga2V5IHZhbHVlIHBhaXJzIHNlbnQgaW4gR0VUXG4gICAqIEBwYXJhbSBwYXJhbWV0ZXJzIE9iamVjdCBjb250YWluaW5nIHRoZSBwYXJhbWV0ZXJzIG9mIHRoZSBBUEkgY2FsbFxuICAgKiBAcGFyYW0gaGVhZGVycyBBbiBhcnJheSBIVFRQIFJlcXVlc3QgSGVhZGVyc1xuICAgKiBAcGFyYW0gYXhpb3NDb25maWcgQ29uZmlndXJhdGlvbiBmb3IgdGhlIGF4aW9zIGphdmFzY3JpcHQgbGlicmFyeSB0aGF0IHdpbGwgYmUgdGhlXG4gICAqIGZvdW5kYXRpb24gZm9yIHRoZSByZXN0IG9mIHRoZSBwYXJhbWV0ZXJzXG4gICAqXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSBmb3IgW1tSZXF1ZXN0UmVzcG9uc2VEYXRhXV1cbiAgICovXG4gIGdldCA9IChiYXNldXJsOnN0cmluZyxcbiAgICBnZXRkYXRhOm9iamVjdCxcbiAgICBoZWFkZXJzOm9iamVjdCA9IHt9LFxuICAgIGF4aW9zQ29uZmlnOkF4aW9zUmVxdWVzdENvbmZpZyA9IHVuZGVmaW5lZClcbiAgOiBQcm9taXNlPFJlcXVlc3RSZXNwb25zZURhdGE+ID0+ICB0aGlzLl9yZXF1ZXN0KCdHRVQnLFxuICAgICAgYmFzZXVybCxcbiAgICAgIGdldGRhdGEsXG4gICAgICB7fSxcbiAgICAgIHRoaXMuX3NldEhlYWRlcnMoaGVhZGVycyksXG4gICAgICBheGlvc0NvbmZpZyk7XG5cbiAgLyoqXG4gICAqIE1ha2VzIGEgREVMRVRFIGNhbGwgdG8gYW4gQVBJLlxuICAgKlxuICAgKiBAcGFyYW0gYmFzZXVybCBQYXRoIHRvIHRoZSBBUElcbiAgICogQHBhcmFtIGdldGRhdGEgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIGtleSB2YWx1ZSBwYWlycyBzZW50IGluIERFTEVURVxuICAgKiBAcGFyYW0gcGFyYW1ldGVycyBPYmplY3QgY29udGFpbmluZyB0aGUgcGFyYW1ldGVycyBvZiB0aGUgQVBJIGNhbGxcbiAgICogQHBhcmFtIGhlYWRlcnMgQW4gYXJyYXkgSFRUUCBSZXF1ZXN0IEhlYWRlcnNcbiAgICogQHBhcmFtIGF4aW9zQ29uZmlnIENvbmZpZ3VyYXRpb24gZm9yIHRoZSBheGlvcyBqYXZhc2NyaXB0IGxpYnJhcnkgdGhhdCB3aWxsIGJlIHRoZVxuICAgKiBmb3VuZGF0aW9uIGZvciB0aGUgcmVzdCBvZiB0aGUgcGFyYW1ldGVyc1xuICAgKlxuICAgKiBAcmV0dXJucyBBIHByb21pc2UgZm9yIFtbUmVxdWVzdFJlc3BvbnNlRGF0YV1dXG4gICAqL1xuICBkZWxldGUgPSAoYmFzZXVybDpzdHJpbmcsXG4gICAgZ2V0ZGF0YTpvYmplY3QsXG4gICAgaGVhZGVyczpvYmplY3QgPSB7fSxcbiAgICBheGlvc0NvbmZpZzpBeGlvc1JlcXVlc3RDb25maWcgPSB1bmRlZmluZWQpXG4gIDogUHJvbWlzZTxSZXF1ZXN0UmVzcG9uc2VEYXRhPiA9PiB0aGlzLl9yZXF1ZXN0KCdERUxFVEUnLFxuICAgIGJhc2V1cmwsXG4gICAgZ2V0ZGF0YSxcbiAgICB7fSxcbiAgICB0aGlzLl9zZXRIZWFkZXJzKGhlYWRlcnMpLFxuICAgIGF4aW9zQ29uZmlnKTtcblxuICAvKipcbiAgICogTWFrZXMgYSBQT1NUIGNhbGwgdG8gYW4gQVBJLlxuICAgKlxuICAgKiBAcGFyYW0gYmFzZXVybCBQYXRoIHRvIHRoZSBBUElcbiAgICogQHBhcmFtIGdldGRhdGEgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIGtleSB2YWx1ZSBwYWlycyBzZW50IGluIFBPU1RcbiAgICogQHBhcmFtIHBvc3RkYXRhIE9iamVjdCBjb250YWluaW5nIHRoZSBrZXkgdmFsdWUgcGFpcnMgc2VudCBpbiBQT1NUXG4gICAqIEBwYXJhbSBwYXJhbWV0ZXJzIE9iamVjdCBjb250YWluaW5nIHRoZSBwYXJhbWV0ZXJzIG9mIHRoZSBBUEkgY2FsbFxuICAgKiBAcGFyYW0gaGVhZGVycyBBbiBhcnJheSBIVFRQIFJlcXVlc3QgSGVhZGVyc1xuICAgKiBAcGFyYW0gYXhpb3NDb25maWcgQ29uZmlndXJhdGlvbiBmb3IgdGhlIGF4aW9zIGphdmFzY3JpcHQgbGlicmFyeSB0aGF0IHdpbGwgYmUgdGhlXG4gICAqIGZvdW5kYXRpb24gZm9yIHRoZSByZXN0IG9mIHRoZSBwYXJhbWV0ZXJzXG4gICAqXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSBmb3IgW1tSZXF1ZXN0UmVzcG9uc2VEYXRhXV1cbiAgICovXG4gIHBvc3QgPSAoYmFzZXVybDpzdHJpbmcsXG4gICAgZ2V0ZGF0YTpvYmplY3QsXG4gICAgcG9zdGRhdGE6c3RyaW5nIHwgb2JqZWN0IHwgQXJyYXlCdWZmZXIgfCBBcnJheUJ1ZmZlclZpZXcsXG4gICAgaGVhZGVyczpvYmplY3QgPSB7fSxcbiAgICBheGlvc0NvbmZpZzpBeGlvc1JlcXVlc3RDb25maWcgPSB1bmRlZmluZWQpXG4gIDogUHJvbWlzZTxSZXF1ZXN0UmVzcG9uc2VEYXRhPiA9PiB0aGlzLl9yZXF1ZXN0KCdQT1NUJyxcbiAgICBiYXNldXJsLFxuICAgIGdldGRhdGEsXG4gICAgcG9zdGRhdGEsXG4gICAgdGhpcy5fc2V0SGVhZGVycyhoZWFkZXJzKSxcbiAgICBheGlvc0NvbmZpZyk7XG5cbiAgLyoqXG4gICAqIE1ha2VzIGEgUFVUIGNhbGwgdG8gYW4gQVBJLlxuICAgKlxuICAgKiBAcGFyYW0gYmFzZXVybCBQYXRoIHRvIHRoZSBiYXNldXJsXG4gICAqIEBwYXJhbSBnZXRkYXRhIE9iamVjdCBjb250YWluaW5nIHRoZSBrZXkgdmFsdWUgcGFpcnMgc2VudCBpbiBQVVRcbiAgICogQHBhcmFtIHBvc3RkYXRhIE9iamVjdCBjb250YWluaW5nIHRoZSBrZXkgdmFsdWUgcGFpcnMgc2VudCBpbiBQVVRcbiAgICogQHBhcmFtIHBhcmFtZXRlcnMgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIHBhcmFtZXRlcnMgb2YgdGhlIEFQSSBjYWxsXG4gICAqIEBwYXJhbSBoZWFkZXJzIEFuIGFycmF5IEhUVFAgUmVxdWVzdCBIZWFkZXJzXG4gICAqIEBwYXJhbSBheGlvc0NvbmZpZyBDb25maWd1cmF0aW9uIGZvciB0aGUgYXhpb3MgamF2YXNjcmlwdCBsaWJyYXJ5IHRoYXQgd2lsbCBiZSB0aGVcbiAgICogZm91bmRhdGlvbiBmb3IgdGhlIHJlc3Qgb2YgdGhlIHBhcmFtZXRlcnNcbiAgICpcbiAgICogQHJldHVybnMgQSBwcm9taXNlIGZvciBbW1JlcXVlc3RSZXNwb25zZURhdGFdXVxuICAgKi9cbiAgcHV0ID0gKGJhc2V1cmw6c3RyaW5nLFxuICAgIGdldGRhdGE6b2JqZWN0LFxuICAgIHBvc3RkYXRhOnN0cmluZyB8IG9iamVjdCB8IEFycmF5QnVmZmVyIHwgQXJyYXlCdWZmZXJWaWV3LFxuICAgIGhlYWRlcnM6b2JqZWN0ID0ge30sXG4gICAgYXhpb3NDb25maWc6QXhpb3NSZXF1ZXN0Q29uZmlnID0gdW5kZWZpbmVkKVxuICA6IFByb21pc2U8UmVxdWVzdFJlc3BvbnNlRGF0YT4gPT4gdGhpcy5fcmVxdWVzdCgnUFVUJyxcbiAgICBiYXNldXJsLFxuICAgIGdldGRhdGEsXG4gICAgcG9zdGRhdGEsXG4gICAgdGhpcy5fc2V0SGVhZGVycyhoZWFkZXJzKSxcbiAgICBheGlvc0NvbmZpZyk7XG5cbiAgLyoqXG4gICAqIE1ha2VzIGEgUEFUQ0ggY2FsbCB0byBhbiBBUEkuXG4gICAqXG4gICAqIEBwYXJhbSBiYXNldXJsIFBhdGggdG8gdGhlIGJhc2V1cmxcbiAgICogQHBhcmFtIGdldGRhdGEgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIGtleSB2YWx1ZSBwYWlycyBzZW50IGluIFBBVENIXG4gICAqIEBwYXJhbSBwb3N0ZGF0YSBPYmplY3QgY29udGFpbmluZyB0aGUga2V5IHZhbHVlIHBhaXJzIHNlbnQgaW4gUEFUQ0hcbiAgICogQHBhcmFtIHBhcmFtZXRlcnMgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIHBhcmFtZXRlcnMgb2YgdGhlIEFQSSBjYWxsXG4gICAqIEBwYXJhbSBoZWFkZXJzIEFuIGFycmF5IEhUVFAgUmVxdWVzdCBIZWFkZXJzXG4gICAqIEBwYXJhbSBheGlvc0NvbmZpZyBDb25maWd1cmF0aW9uIGZvciB0aGUgYXhpb3MgamF2YXNjcmlwdCBsaWJyYXJ5IHRoYXQgd2lsbCBiZSB0aGVcbiAgICogZm91bmRhdGlvbiBmb3IgdGhlIHJlc3Qgb2YgdGhlIHBhcmFtZXRlcnNcbiAgICpcbiAgICogQHJldHVybnMgQSBwcm9taXNlIGZvciBbW1JlcXVlc3RSZXNwb25zZURhdGFdXVxuICAgKi9cbiAgcGF0Y2ggPSAoYmFzZXVybDpzdHJpbmcsXG4gICAgZ2V0ZGF0YTpvYmplY3QsXG4gICAgcG9zdGRhdGE6c3RyaW5nIHwgb2JqZWN0IHwgQXJyYXlCdWZmZXIgfCBBcnJheUJ1ZmZlclZpZXcsXG4gICAgaGVhZGVyczpvYmplY3QgPSB7fSxcbiAgICBheGlvc0NvbmZpZzpBeGlvc1JlcXVlc3RDb25maWcgPSB1bmRlZmluZWQpXG4gIDogUHJvbWlzZTxSZXF1ZXN0UmVzcG9uc2VEYXRhPiA9PiB0aGlzLl9yZXF1ZXN0KCdQQVRDSCcsXG4gICAgYmFzZXVybCxcbiAgICBnZXRkYXRhLFxuICAgIHBvc3RkYXRhLFxuICAgIHRoaXMuX3NldEhlYWRlcnMoaGVhZGVycyksXG4gICAgYXhpb3NDb25maWcpO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IEF2YWxhbmNoZSBpbnN0YW5jZS4gU2V0cyB0aGUgYWRkcmVzcyBhbmQgcG9ydCBvZiB0aGUgbWFpbiBBdmFsYW5jaGUgQ2xpZW50LlxuICAgKlxuICAgKiBAcGFyYW0gaXAgVGhlIGhvc3RuYW1lIHRvIHJlc29sdmUgdG8gcmVhY2ggdGhlIEF2YWxhbmNoZSBDbGllbnQgQVBJc1xuICAgKiBAcGFyYW0gcG9ydCBUaGUgcG9ydCB0byByZXNvbHZlIHRvIHJlYWNoIHRoZSBBdmFsYW5jaGUgQ2xpZW50IEFQSXNcbiAgICogQHBhcmFtIHByb3RvY29sIFRoZSBwcm90b2NvbCBzdHJpbmcgdG8gdXNlIGJlZm9yZSBhIFwiOi8vXCIgaW4gYSByZXF1ZXN0LCBleDogXCJodHRwXCIsIFwiaHR0cHNcIiwgXCJnaXRcIiwgXCJ3c1wiLCBldGMgLi4uXG4gICAqL1xuICBjb25zdHJ1Y3RvcihpcDpzdHJpbmcsIHBvcnQ6bnVtYmVyLCBwcm90b2NvbDpzdHJpbmcgPSAnaHR0cCcpIHtcbiAgICB0aGlzLnNldEFkZHJlc3MoaXAsIHBvcnQsIHByb3RvY29sKTtcbiAgfVxufVxuIl19","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HealthAPI = void 0;\nconst jrpcapi_1 = require(\"../../common/jrpcapi\");\n/**\n * Class for interacting with a node API that is using the node's HealthApi.\n *\n * @category RPCAPIs\n *\n * @remarks This extends the [[JRPCAPI]] class. This class should not be directly called. Instead, use the [[Avalanche.addAPI]] function to register this interface with Avalanche.\n */\nclass HealthAPI extends jrpcapi_1.JRPCAPI {\n    /**\n       * This class should not be instantiated directly. Instead use the [[Avalanche.addAPI]] method.\n       *\n       * @param core A reference to the Avalanche class\n       * @param baseurl Defaults to the string \"/ext/health\" as the path to blockchain's baseurl\n       */\n    constructor(core, baseurl = '/ext/health') {\n        super(core, baseurl);\n        /**\n           *\n           * @returns Promise for an object containing the health check response\n           */\n        this.getLiveness = () => __awaiter(this, void 0, void 0, function* () {\n            return this.callMethod('health.getLiveness')\n                .then((response) => response.data.result);\n        });\n    }\n}\nexports.HealthAPI = HealthAPI;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2FwaXMvaGVhbHRoL2FwaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFLQSxrREFBK0M7QUFJL0M7Ozs7OztHQU1HO0FBQ0gsTUFBYSxTQUFVLFNBQVEsaUJBQU87SUFRcEM7Ozs7O1NBS0s7SUFDTCxZQUFZLElBQWtCLEVBQUUsVUFBaUIsYUFBYTtRQUFJLEtBQUssQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFidkY7OzthQUdLO1FBQ0wsZ0JBQVcsR0FBRyxHQUF5QixFQUFFO1lBQUMsT0FBQSxJQUFJLENBQUMsVUFBVSxDQUFDLG9CQUFvQixDQUFDO2lCQUM1RSxJQUFJLENBQUMsQ0FBQyxRQUE0QixFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBO1VBQUEsQ0FBQztJQVF3QixDQUFDO0NBQzFGO0FBZkQsOEJBZUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICogQG1vZHVsZSBBUEktSGVhbHRoXG4gKi9cbmltcG9ydCBBdmFsYW5jaGVDb3JlIGZyb20gJy4uLy4uL2F2YWxhbmNoZSc7XG5pbXBvcnQgeyBKUlBDQVBJIH0gZnJvbSAnLi4vLi4vY29tbW9uL2pycGNhcGknO1xuaW1wb3J0IHsgUmVxdWVzdFJlc3BvbnNlRGF0YSB9IGZyb20gJy4uLy4uL2NvbW1vbi9hcGliYXNlJztcblxuXG4vKipcbiAqIENsYXNzIGZvciBpbnRlcmFjdGluZyB3aXRoIGEgbm9kZSBBUEkgdGhhdCBpcyB1c2luZyB0aGUgbm9kZSdzIEhlYWx0aEFwaS5cbiAqXG4gKiBAY2F0ZWdvcnkgUlBDQVBJc1xuICpcbiAqIEByZW1hcmtzIFRoaXMgZXh0ZW5kcyB0aGUgW1tKUlBDQVBJXV0gY2xhc3MuIFRoaXMgY2xhc3Mgc2hvdWxkIG5vdCBiZSBkaXJlY3RseSBjYWxsZWQuIEluc3RlYWQsIHVzZSB0aGUgW1tBdmFsYW5jaGUuYWRkQVBJXV0gZnVuY3Rpb24gdG8gcmVnaXN0ZXIgdGhpcyBpbnRlcmZhY2Ugd2l0aCBBdmFsYW5jaGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBIZWFsdGhBUEkgZXh0ZW5kcyBKUlBDQVBJIHtcbiAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIGZvciBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgaGVhbHRoIGNoZWNrIHJlc3BvbnNlXG4gICAgICovXG4gIGdldExpdmVuZXNzID0gYXN5bmMgKCk6UHJvbWlzZTxvYmplY3Q+ID0+IHRoaXMuY2FsbE1ldGhvZCgnaGVhbHRoLmdldExpdmVuZXNzJylcbiAgICAudGhlbigocmVzcG9uc2U6UmVxdWVzdFJlc3BvbnNlRGF0YSkgPT4gcmVzcG9uc2UuZGF0YS5yZXN1bHQpO1xuXG4gIC8qKlxuICAgICAqIFRoaXMgY2xhc3Mgc2hvdWxkIG5vdCBiZSBpbnN0YW50aWF0ZWQgZGlyZWN0bHkuIEluc3RlYWQgdXNlIHRoZSBbW0F2YWxhbmNoZS5hZGRBUEldXSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29yZSBBIHJlZmVyZW5jZSB0byB0aGUgQXZhbGFuY2hlIGNsYXNzXG4gICAgICogQHBhcmFtIGJhc2V1cmwgRGVmYXVsdHMgdG8gdGhlIHN0cmluZyBcIi9leHQvaGVhbHRoXCIgYXMgdGhlIHBhdGggdG8gYmxvY2tjaGFpbidzIGJhc2V1cmxcbiAgICAgKi9cbiAgY29uc3RydWN0b3IoY29yZTpBdmFsYW5jaGVDb3JlLCBiYXNldXJsOnN0cmluZyA9ICcvZXh0L2hlYWx0aCcpIHsgc3VwZXIoY29yZSwgYmFzZXVybCk7IH1cbn1cblxuIl19","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CreateSubnetTx = void 0;\n/**\n * @packageDocumentation\n * @module API-PlatformVM-CreateSubnetTx\n */\nconst buffer_1 = require(\"buffer/\");\nconst basetx_1 = require(\"./basetx\");\nconst constants_1 = require(\"./constants\");\nconst constants_2 = require(\"../../utils/constants\");\nconst outputs_1 = require(\"./outputs\");\nconst serialization_1 = require(\"../../utils/serialization\");\nconst serializer = serialization_1.Serialization.getInstance();\nclass CreateSubnetTx extends basetx_1.BaseTx {\n    /**\n     * Class representing an unsigned Create Subnet transaction.\n     *\n     * @param networkid Optional networkid, [[DefaultNetworkID]]\n     * @param blockchainid Optional blockchainid, default Buffer.alloc(32, 16)\n     * @param outs Optional array of the [[TransferableOutput]]s\n     * @param ins Optional array of the [[TransferableInput]]s\n     * @param memo Optional {@link https://github.com/feross/buffer|Buffer} for the memo field\n     * @param subnetOwners Optional [[SECPOwnerOutput]] class for specifying who owns the subnet.\n    */\n    constructor(networkid = constants_2.DefaultNetworkID, blockchainid = buffer_1.Buffer.alloc(32, 16), outs = undefined, ins = undefined, memo = undefined, subnetOwners = undefined) {\n        super(networkid, blockchainid, outs, ins, memo);\n        this._typeName = \"SECPCredential\";\n        this._typeID = constants_1.PlatformVMConstants.CREATESUBNETTX;\n        this.subnetOwners = undefined;\n        /**\n         * Returns the id of the [[CreateSubnetTx]]\n         */\n        this.getTxType = () => {\n            return this._typeID;\n        };\n        this.subnetOwners = subnetOwners;\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"subnetOwners\": this.subnetOwners.serialize(encoding) });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.subnetOwners = new outputs_1.SECPOwnerOutput();\n        this.subnetOwners.deserialize(fields[\"subnetOwners\"], encoding);\n    }\n    /**\n     * Returns a {@link https://github.com/feross/buffer|Buffer} for the reward address.\n     */\n    getSubnetOwners() {\n        return this.subnetOwners;\n    }\n    /**\n     * Takes a {@link https://github.com/feross/buffer|Buffer} containing an [[CreateSubnetTx]], parses it, populates the class, and returns the length of the [[CreateSubnetTx]] in bytes.\n     *\n     * @param bytes A {@link https://github.com/feross/buffer|Buffer} containing a raw [[CreateSubnetTx]]\n     * @param offset A number for the starting position in the bytes.\n     *\n     * @returns The length of the raw [[CreateSubnetTx]]\n     *\n     * @remarks assume not-checksummed\n     */\n    fromBuffer(bytes, offset = 0) {\n        offset = super.fromBuffer(bytes, offset);\n        this.subnetOwners = new outputs_1.SECPOwnerOutput();\n        offset = this.subnetOwners.fromBuffer(bytes, offset);\n        return offset;\n    }\n    /**\n     * Returns a {@link https://github.com/feross/buffer|Buffer} representation of the [[CreateSubnetTx]].\n     */\n    toBuffer() {\n        if (typeof this.subnetOwners === \"undefined\" || !(this.subnetOwners instanceof outputs_1.SECPOwnerOutput)) {\n            throw new Error(\"CreateSubnetTx.toBuffer -- this.subnetOwners is not a SECPOwnerOutput\");\n        }\n        let typeID = buffer_1.Buffer.alloc(4);\n        typeID.writeUInt32BE(this.subnetOwners.getOutputID(), 0);\n        let barr = [super.toBuffer(), typeID, this.subnetOwners.toBuffer()];\n        return buffer_1.Buffer.concat(barr);\n    }\n}\nexports.CreateSubnetTx = CreateSubnetTx;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlc3VibmV0dHguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvYXBpcy9wbGF0Zm9ybXZtL2NyZWF0ZXN1Ym5ldHR4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBOzs7R0FHRztBQUNILG9DQUFpQztBQUNqQyxxQ0FBa0M7QUFDbEMsMkNBQWtEO0FBQ2xELHFEQUF5RDtBQUN6RCx1Q0FBK0Q7QUFFL0QsNkRBQThFO0FBRTlFLE1BQU0sVUFBVSxHQUFHLDZCQUFhLENBQUMsV0FBVyxFQUFFLENBQUM7QUFFL0MsTUFBYSxjQUFlLFNBQVEsZUFBTTtJQStEeEM7Ozs7Ozs7OztNQVNFO0lBQ0YsWUFDRSxZQUFtQiw0QkFBZ0IsRUFDbkMsZUFBc0IsZUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQzFDLE9BQWlDLFNBQVMsRUFDMUMsTUFBK0IsU0FBUyxFQUN4QyxPQUFjLFNBQVMsRUFDdkIsZUFBK0IsU0FBUztRQUV4QyxLQUFLLENBQUMsU0FBUyxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBaEZ4QyxjQUFTLEdBQUcsZ0JBQWdCLENBQUM7UUFDN0IsWUFBTyxHQUFHLCtCQUFtQixDQUFDLGNBQWMsQ0FBQztRQWU3QyxpQkFBWSxHQUFtQixTQUFTLENBQUM7UUFFbkQ7O1dBRUc7UUFDSCxjQUFTLEdBQUcsR0FBVSxFQUFFO1lBQ3RCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUN0QixDQUFDLENBQUE7UUEwREMsSUFBSSxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUM7SUFDbkMsQ0FBQztJQS9FRCxTQUFTLENBQUMsV0FBOEIsS0FBSztRQUMzQyxJQUFJLE1BQU0sR0FBVSxLQUFLLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzlDLHVDQUNLLE1BQU0sS0FDVCxjQUFjLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLElBQ3REO0lBQ0gsQ0FBQztJQUFBLENBQUM7SUFDRixXQUFXLENBQUMsTUFBYSxFQUFFLFdBQThCLEtBQUs7UUFDNUQsS0FBSyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDcEMsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLHlCQUFlLEVBQUUsQ0FBQztRQUMxQyxJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDbEUsQ0FBQztJQVdEOztPQUVHO0lBQ0gsZUFBZTtRQUNYLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQztJQUM3QixDQUFDO0lBRUQ7Ozs7Ozs7OztPQVNHO0lBQ0gsVUFBVSxDQUFDLEtBQVksRUFBRSxTQUFnQixDQUFDO1FBQ3RDLE1BQU0sR0FBRyxLQUFLLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUkseUJBQWUsRUFBRSxDQUFDO1FBQzFDLE1BQU0sR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDckQsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQUVIOztPQUVHO0lBQ0gsUUFBUTtRQUNKLElBQUcsT0FBTyxJQUFJLENBQUMsWUFBWSxLQUFLLFdBQVcsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksWUFBWSx5QkFBZSxDQUFDLEVBQUU7WUFDNUYsTUFBTSxJQUFJLEtBQUssQ0FBQyx1RUFBdUUsQ0FBQyxDQUFDO1NBQzVGO1FBQ0QsSUFBSSxNQUFNLEdBQVUsZUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwQyxNQUFNLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDekQsSUFBSSxJQUFJLEdBQWlCLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7UUFDbEYsT0FBTyxlQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQy9CLENBQUM7Q0F1QkY7QUFwRkQsd0NBb0ZDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqIEBtb2R1bGUgQVBJLVBsYXRmb3JtVk0tQ3JlYXRlU3VibmV0VHhcbiAqL1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyLyc7XG5pbXBvcnQgeyBCYXNlVHggfSBmcm9tICcuL2Jhc2V0eCc7XG5pbXBvcnQgeyBQbGF0Zm9ybVZNQ29uc3RhbnRzIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgRGVmYXVsdE5ldHdvcmtJRCB9IGZyb20gJy4uLy4uL3V0aWxzL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBUcmFuc2ZlcmFibGVPdXRwdXQsIFNFQ1BPd25lck91dHB1dH0gZnJvbSAnLi9vdXRwdXRzJztcbmltcG9ydCB7IFRyYW5zZmVyYWJsZUlucHV0IH0gZnJvbSAnLi9pbnB1dHMnO1xuaW1wb3J0IHsgU2VyaWFsaXphdGlvbiwgU2VyaWFsaXplZEVuY29kaW5nIH0gZnJvbSAnLi4vLi4vdXRpbHMvc2VyaWFsaXphdGlvbic7XG5cbmNvbnN0IHNlcmlhbGl6ZXIgPSBTZXJpYWxpemF0aW9uLmdldEluc3RhbmNlKCk7XG5cbmV4cG9ydCBjbGFzcyBDcmVhdGVTdWJuZXRUeCBleHRlbmRzIEJhc2VUeCB7XG4gIHByb3RlY3RlZCBfdHlwZU5hbWUgPSBcIlNFQ1BDcmVkZW50aWFsXCI7XG4gIHByb3RlY3RlZCBfdHlwZUlEID0gUGxhdGZvcm1WTUNvbnN0YW50cy5DUkVBVEVTVUJORVRUWDtcblxuICBzZXJpYWxpemUoZW5jb2Rpbmc6U2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIik6b2JqZWN0IHtcbiAgICBsZXQgZmllbGRzOm9iamVjdCA9IHN1cGVyLnNlcmlhbGl6ZShlbmNvZGluZyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmZpZWxkcyxcbiAgICAgIFwic3VibmV0T3duZXJzXCI6IHRoaXMuc3VibmV0T3duZXJzLnNlcmlhbGl6ZShlbmNvZGluZylcbiAgICB9XG4gIH07XG4gIGRlc2VyaWFsaXplKGZpZWxkczpvYmplY3QsIGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICBzdXBlci5kZXNlcmlhbGl6ZShmaWVsZHMsIGVuY29kaW5nKTtcbiAgICB0aGlzLnN1Ym5ldE93bmVycyA9IG5ldyBTRUNQT3duZXJPdXRwdXQoKTtcbiAgICB0aGlzLnN1Ym5ldE93bmVycy5kZXNlcmlhbGl6ZShmaWVsZHNbXCJzdWJuZXRPd25lcnNcIl0sIGVuY29kaW5nKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzdWJuZXRPd25lcnM6U0VDUE93bmVyT3V0cHV0ID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBpZCBvZiB0aGUgW1tDcmVhdGVTdWJuZXRUeF1dXG4gICAqL1xuICBnZXRUeFR5cGUgPSAoKTpudW1iZXIgPT4ge1xuICAgIHJldHVybiB0aGlzLl90eXBlSUQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IGZvciB0aGUgcmV3YXJkIGFkZHJlc3MuXG4gICAqL1xuICBnZXRTdWJuZXRPd25lcnMoKTpTRUNQT3duZXJPdXRwdXQge1xuICAgICAgcmV0dXJuIHRoaXMuc3VibmV0T3duZXJzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRha2VzIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gY29udGFpbmluZyBhbiBbW0NyZWF0ZVN1Ym5ldFR4XV0sIHBhcnNlcyBpdCwgcG9wdWxhdGVzIHRoZSBjbGFzcywgYW5kIHJldHVybnMgdGhlIGxlbmd0aCBvZiB0aGUgW1tDcmVhdGVTdWJuZXRUeF1dIGluIGJ5dGVzLlxuICAgKlxuICAgKiBAcGFyYW0gYnl0ZXMgQSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBjb250YWluaW5nIGEgcmF3IFtbQ3JlYXRlU3VibmV0VHhdXVxuICAgKiBAcGFyYW0gb2Zmc2V0IEEgbnVtYmVyIGZvciB0aGUgc3RhcnRpbmcgcG9zaXRpb24gaW4gdGhlIGJ5dGVzLlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgbGVuZ3RoIG9mIHRoZSByYXcgW1tDcmVhdGVTdWJuZXRUeF1dXG4gICAqXG4gICAqIEByZW1hcmtzIGFzc3VtZSBub3QtY2hlY2tzdW1tZWRcbiAgICovXG4gIGZyb21CdWZmZXIoYnl0ZXM6QnVmZmVyLCBvZmZzZXQ6bnVtYmVyID0gMCk6bnVtYmVyIHtcbiAgICAgIG9mZnNldCA9IHN1cGVyLmZyb21CdWZmZXIoYnl0ZXMsIG9mZnNldCk7XG4gICAgICB0aGlzLnN1Ym5ldE93bmVycyA9IG5ldyBTRUNQT3duZXJPdXRwdXQoKTtcbiAgICAgIG9mZnNldCA9IHRoaXMuc3VibmV0T3duZXJzLmZyb21CdWZmZXIoYnl0ZXMsIG9mZnNldCk7XG4gICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH1cbiAgXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gcmVwcmVzZW50YXRpb24gb2YgdGhlIFtbQ3JlYXRlU3VibmV0VHhdXS5cbiAgICovXG4gIHRvQnVmZmVyKCk6QnVmZmVyIHtcbiAgICAgIGlmKHR5cGVvZiB0aGlzLnN1Ym5ldE93bmVycyA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhKHRoaXMuc3VibmV0T3duZXJzIGluc3RhbmNlb2YgU0VDUE93bmVyT3V0cHV0KSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNyZWF0ZVN1Ym5ldFR4LnRvQnVmZmVyIC0tIHRoaXMuc3VibmV0T3duZXJzIGlzIG5vdCBhIFNFQ1BPd25lck91dHB1dFwiKTtcbiAgICAgIH1cbiAgICAgIGxldCB0eXBlSUQ6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDQpO1xuICAgICAgdHlwZUlELndyaXRlVUludDMyQkUodGhpcy5zdWJuZXRPd25lcnMuZ2V0T3V0cHV0SUQoKSwgMCk7XG4gICAgICBsZXQgYmFycjpBcnJheTxCdWZmZXI+ID0gW3N1cGVyLnRvQnVmZmVyKCksIHR5cGVJRCwgdGhpcy5zdWJuZXRPd25lcnMudG9CdWZmZXIoKV07XG4gICAgICByZXR1cm4gQnVmZmVyLmNvbmNhdChiYXJyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGFzcyByZXByZXNlbnRpbmcgYW4gdW5zaWduZWQgQ3JlYXRlIFN1Ym5ldCB0cmFuc2FjdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIG5ldHdvcmtpZCBPcHRpb25hbCBuZXR3b3JraWQsIFtbRGVmYXVsdE5ldHdvcmtJRF1dXG4gICAqIEBwYXJhbSBibG9ja2NoYWluaWQgT3B0aW9uYWwgYmxvY2tjaGFpbmlkLCBkZWZhdWx0IEJ1ZmZlci5hbGxvYygzMiwgMTYpXG4gICAqIEBwYXJhbSBvdXRzIE9wdGlvbmFsIGFycmF5IG9mIHRoZSBbW1RyYW5zZmVyYWJsZU91dHB1dF1dc1xuICAgKiBAcGFyYW0gaW5zIE9wdGlvbmFsIGFycmF5IG9mIHRoZSBbW1RyYW5zZmVyYWJsZUlucHV0XV1zXG4gICAqIEBwYXJhbSBtZW1vIE9wdGlvbmFsIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IGZvciB0aGUgbWVtbyBmaWVsZFxuICAgKiBAcGFyYW0gc3VibmV0T3duZXJzIE9wdGlvbmFsIFtbU0VDUE93bmVyT3V0cHV0XV0gY2xhc3MgZm9yIHNwZWNpZnlpbmcgd2hvIG93bnMgdGhlIHN1Ym5ldC5cbiAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgbmV0d29ya2lkOm51bWJlciA9IERlZmF1bHROZXR3b3JrSUQsIFxuICAgIGJsb2NrY2hhaW5pZDpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoMzIsIDE2KSwgXG4gICAgb3V0czpBcnJheTxUcmFuc2ZlcmFibGVPdXRwdXQ+ID0gdW5kZWZpbmVkLCBcbiAgICBpbnM6QXJyYXk8VHJhbnNmZXJhYmxlSW5wdXQ+ID0gdW5kZWZpbmVkLFxuICAgIG1lbW86QnVmZmVyID0gdW5kZWZpbmVkLFxuICAgIHN1Ym5ldE93bmVyczpTRUNQT3duZXJPdXRwdXQgPSB1bmRlZmluZWRcbiAgKSB7XG4gICAgc3VwZXIobmV0d29ya2lkLCBibG9ja2NoYWluaWQsIG91dHMsIGlucywgbWVtbyk7XG4gICAgdGhpcy5zdWJuZXRPd25lcnMgPSBzdWJuZXRPd25lcnM7XG4gIH1cbn1cbiAgIl19","\"use strict\";\n/**\n * @packageDocumentation\n * @module Common-APIBase\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.APIBase = exports.RequestResponseData = void 0;\nconst bintools_1 = __importDefault(require(\"../utils/bintools\"));\nconst db_1 = __importDefault(require(\"../utils/db\"));\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\n/**\n * Response data for HTTP requests.\n */\nclass RequestResponseData {\n}\nexports.RequestResponseData = RequestResponseData;\n/**\n * Abstract class defining a generic endpoint that all endpoints must implement (extend).\n */\nclass APIBase {\n    /**\n       *\n       * @param core Reference to the Avalanche instance using this baseurl\n       * @param baseurl Path to the baseurl - ex: \"/ext/bc/X\"\n       */\n    constructor(core, baseurl) {\n        /**\n           * Sets the path of the APIs baseurl.\n           *\n           * @param baseurl Path of the APIs baseurl - ex: \"/ext/bc/X\"\n           */\n        this.setBaseURL = (baseurl) => {\n            if (this.db && this.baseurl !== baseurl) {\n                const backup = this.db.getAll();\n                this.db.clearAll();\n                this.baseurl = baseurl;\n                this.db = db_1.default.getNamespace(baseurl);\n                this.db.setAll(backup, true);\n            }\n            else {\n                this.baseurl = baseurl;\n                this.db = db_1.default.getNamespace(baseurl);\n            }\n        };\n        /**\n           * Returns the baseurl's path.\n           */\n        this.getBaseURL = () => this.baseurl;\n        /**\n           * Returns the baseurl's database.\n           */\n        this.getDB = () => this.db;\n        this.core = core;\n        this.setBaseURL(baseurl);\n    }\n}\nexports.APIBase = APIBase;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpYmFzZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tb24vYXBpYmFzZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7OztHQUdHOzs7Ozs7QUFJSCxpRUFBeUM7QUFDekMscURBQTZCO0FBRzdCOztHQUVHO0FBQ0gsTUFBTSxRQUFRLEdBQUcsa0JBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUV4Qzs7R0FFRztBQUNILE1BQWEsbUJBQW1CO0NBVS9CO0FBVkQsa0RBVUM7QUFFRDs7R0FFRztBQUNILE1BQXNCLE9BQU87SUFtQzNCOzs7O1NBSUs7SUFDTCxZQUFZLElBQWtCLEVBQUUsT0FBYztRQWpDOUM7Ozs7YUFJSztRQUNMLGVBQVUsR0FBRyxDQUFDLE9BQWMsRUFBRSxFQUFFO1lBQzlCLElBQUksSUFBSSxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsT0FBTyxLQUFLLE9BQU8sRUFBRTtnQkFDdkMsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztnQkFDaEMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztnQkFDbkIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7Z0JBQ3ZCLElBQUksQ0FBQyxFQUFFLEdBQUcsWUFBRSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDbkMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO2FBQzlCO2lCQUFNO2dCQUNMLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO2dCQUN2QixJQUFJLENBQUMsRUFBRSxHQUFHLFlBQUUsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7YUFDcEM7UUFDSCxDQUFDLENBQUM7UUFFRjs7YUFFSztRQUNMLGVBQVUsR0FBRyxHQUFZLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBRXpDOzthQUVLO1FBQ0wsVUFBSyxHQUFHLEdBQVksRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7UUFRN0IsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMzQixDQUFDO0NBQ0Y7QUE1Q0QsMEJBNENDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqIEBtb2R1bGUgQ29tbW9uLUFQSUJhc2VcbiAqL1xuXG5pbXBvcnQgeyBTdG9yZUFQSSB9IGZyb20gJ3N0b3JlMic7XG5pbXBvcnQgeyBDbGllbnRSZXF1ZXN0IH0gZnJvbSAnaHR0cCc7XG5pbXBvcnQgQmluVG9vbHMgZnJvbSAnLi4vdXRpbHMvYmludG9vbHMnO1xuaW1wb3J0IERCIGZyb20gJy4uL3V0aWxzL2RiJztcbmltcG9ydCBBdmFsYW5jaGVDb3JlIGZyb20gJy4uL2F2YWxhbmNoZSc7XG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5jb25zdCBiaW50b29scyA9IEJpblRvb2xzLmdldEluc3RhbmNlKCk7XG5cbi8qKlxuICogUmVzcG9uc2UgZGF0YSBmb3IgSFRUUCByZXF1ZXN0cy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJlcXVlc3RSZXNwb25zZURhdGEge1xuICBkYXRhOiBhbnk7XG5cbiAgaGVhZGVyczphbnk7XG5cbiAgc3RhdHVzOiBudW1iZXI7XG5cbiAgc3RhdHVzVGV4dDogc3RyaW5nO1xuXG4gIHJlcXVlc3Q6Q2xpZW50UmVxdWVzdCB8IFhNTEh0dHBSZXF1ZXN0O1xufVxuXG4vKipcbiAqIEFic3RyYWN0IGNsYXNzIGRlZmluaW5nIGEgZ2VuZXJpYyBlbmRwb2ludCB0aGF0IGFsbCBlbmRwb2ludHMgbXVzdCBpbXBsZW1lbnQgKGV4dGVuZCkuXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBUElCYXNlIHtcbiAgcHJvdGVjdGVkIGNvcmU6QXZhbGFuY2hlQ29yZTtcblxuICBwcm90ZWN0ZWQgYmFzZXVybDpzdHJpbmc7XG5cbiAgcHJvdGVjdGVkIGRiOlN0b3JlQVBJO1xuXG4gIC8qKlxuICAgICAqIFNldHMgdGhlIHBhdGggb2YgdGhlIEFQSXMgYmFzZXVybC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiYXNldXJsIFBhdGggb2YgdGhlIEFQSXMgYmFzZXVybCAtIGV4OiBcIi9leHQvYmMvWFwiXG4gICAgICovXG4gIHNldEJhc2VVUkwgPSAoYmFzZXVybDpzdHJpbmcpID0+IHtcbiAgICBpZiAodGhpcy5kYiAmJiB0aGlzLmJhc2V1cmwgIT09IGJhc2V1cmwpIHtcbiAgICAgIGNvbnN0IGJhY2t1cCA9IHRoaXMuZGIuZ2V0QWxsKCk7XG4gICAgICB0aGlzLmRiLmNsZWFyQWxsKCk7XG4gICAgICB0aGlzLmJhc2V1cmwgPSBiYXNldXJsO1xuICAgICAgdGhpcy5kYiA9IERCLmdldE5hbWVzcGFjZShiYXNldXJsKTtcbiAgICAgIHRoaXMuZGIuc2V0QWxsKGJhY2t1cCwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYmFzZXVybCA9IGJhc2V1cmw7XG4gICAgICB0aGlzLmRiID0gREIuZ2V0TmFtZXNwYWNlKGJhc2V1cmwpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBiYXNldXJsJ3MgcGF0aC5cbiAgICAgKi9cbiAgZ2V0QmFzZVVSTCA9ICgpIDogc3RyaW5nID0+IHRoaXMuYmFzZXVybDtcblxuICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBiYXNldXJsJ3MgZGF0YWJhc2UuXG4gICAgICovXG4gIGdldERCID0gKCk6U3RvcmVBUEkgPT4gdGhpcy5kYjtcblxuICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb3JlIFJlZmVyZW5jZSB0byB0aGUgQXZhbGFuY2hlIGluc3RhbmNlIHVzaW5nIHRoaXMgYmFzZXVybFxuICAgICAqIEBwYXJhbSBiYXNldXJsIFBhdGggdG8gdGhlIGJhc2V1cmwgLSBleDogXCIvZXh0L2JjL1hcIlxuICAgICAqL1xuICBjb25zdHJ1Y3Rvcihjb3JlOkF2YWxhbmNoZUNvcmUsIGJhc2V1cmw6c3RyaW5nKSB7XG4gICAgdGhpcy5jb3JlID0gY29yZTtcbiAgICB0aGlzLnNldEJhc2VVUkwoYmFzZXVybCk7XG4gIH1cbn1cblxuIl19","\"use strict\";\n/**\n * @packageDocumentation\n * @module Common-KeyChain\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StandardKeyChain = exports.StandardKeyPair = void 0;\nconst buffer_1 = require(\"buffer/\");\n/**\n * Class for representing a private and public keypair in Avalanche.\n * All APIs that need key pairs should extend on this class.\n */\nclass StandardKeyPair {\n    constructor() {\n        /**\n           * Returns a reference to the private key.\n           *\n           * @returns A {@link https://github.com/feross/buffer|Buffer} containing the private key\n           */\n        this.getPrivateKey = () => this.privk;\n        /**\n           * Returns a reference to the public key.\n           *\n           * @returns A {@link https://github.com/feross/buffer|Buffer} containing the public key\n           */\n        this.getPublicKey = () => this.pubk;\n    }\n}\nexports.StandardKeyPair = StandardKeyPair;\n/**\n * Class for representing a key chain in Avalanche.\n * All endpoints that need key chains should extend on this class.\n *\n * @typeparam KPClass extending [[StandardKeyPair]] which is used as the key in [[StandardKeyChain]]\n */\nclass StandardKeyChain {\n    constructor() {\n        this.keys = {};\n        /**\n           * Gets an array of addresses stored in the [[StandardKeyChain]].\n           *\n           * @returns An array of {@link https://github.com/feross/buffer|Buffer}  representations\n           * of the addresses\n           */\n        this.getAddresses = () => Object.values(this.keys).map((kp) => kp.getAddress());\n        /**\n           * Gets an array of addresses stored in the [[StandardKeyChain]].\n           *\n           * @returns An array of string representations of the addresses\n           */\n        this.getAddressStrings = () => Object.values(this.keys)\n            .map((kp) => kp.getAddressString());\n        /**\n           * Removes the key pair from the list of they keys managed in the [[StandardKeyChain]].\n           *\n           * @param key A {@link https://github.com/feross/buffer|Buffer} for the address or\n           * KPClass to remove\n           *\n           * @returns The boolean true if a key was removed.\n           */\n        this.removeKey = (key) => {\n            let kaddr;\n            if (key instanceof buffer_1.Buffer) {\n                kaddr = key.toString('hex');\n            }\n            else {\n                kaddr = key.getAddress().toString('hex');\n            }\n            if (kaddr in this.keys) {\n                delete this.keys[kaddr];\n                return true;\n            }\n            return false;\n        };\n        /**\n           * Checks if there is a key associated with the provided address.\n           *\n           * @param address The address to check for existence in the keys database\n           *\n           * @returns True on success, false if not found\n           */\n        this.hasKey = (address) => (address.toString('hex') in this.keys);\n        /**\n           * Returns the [[StandardKeyPair]] listed under the provided address\n           *\n           * @param address The {@link https://github.com/feross/buffer|Buffer} of the address to\n           * retrieve from the keys database\n           *\n           * @returns A reference to the [[StandardKeyPair]] in the keys database\n           */\n        this.getKey = (address) => this.keys[address.toString('hex')];\n    }\n    /**\n       * Adds the key pair to the list of the keys managed in the [[StandardKeyChain]].\n       *\n       * @param newKey A key pair of the appropriate class to be added to the [[StandardKeyChain]]\n       */\n    addKey(newKey) {\n        this.keys[newKey.getAddress().toString('hex')] = newKey;\n    }\n    ;\n}\nexports.StandardKeyChain = StandardKeyChain;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoia2V5Y2hhaW4uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tbW9uL2tleWNoYWluLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7OztBQUVILG9DQUFpQztBQUVqQzs7O0dBR0c7QUFDSCxNQUFzQixlQUFlO0lBQXJDO1FBb0RJOzs7O2FBSUs7UUFDTCxrQkFBYSxHQUFHLEdBQVUsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7UUFFeEM7Ozs7YUFJSztRQUNMLGlCQUFZLEdBQUcsR0FBVSxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztJQWtDeEMsQ0FBQztDQUFBO0FBbEdILDBDQWtHRztBQUVEOzs7OztHQUtHO0FBQ0gsTUFBc0IsZ0JBQWdCO0lBQXRDO1FBQ1ksU0FBSSxHQUFnQyxFQUFFLENBQUM7UUFrQmpEOzs7OzthQUtLO1FBQ0wsaUJBQVksR0FBRyxHQUFpQixFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQztRQUV6Rjs7OzthQUlLO1FBQ0wsc0JBQWlCLEdBQUcsR0FBaUIsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQzthQUM3RCxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLENBQUM7UUFXdEM7Ozs7Ozs7YUFPSztRQUNMLGNBQVMsR0FBRyxDQUFDLEdBQW9CLEVBQUUsRUFBRTtZQUNuQyxJQUFJLEtBQVksQ0FBQztZQUNqQixJQUFJLEdBQUcsWUFBWSxlQUFNLEVBQUU7Z0JBQ3pCLEtBQUssR0FBRyxHQUFHLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQzdCO2lCQUFNO2dCQUNMLEtBQUssR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQzFDO1lBQ0QsSUFBSSxLQUFLLElBQUksSUFBSSxDQUFDLElBQUksRUFBRTtnQkFDdEIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUN4QixPQUFPLElBQUksQ0FBQzthQUNiO1lBQ0QsT0FBTyxLQUFLLENBQUM7UUFDZixDQUFDLENBQUM7UUFFRjs7Ozs7O2FBTUs7UUFDTCxXQUFNLEdBQUcsQ0FBQyxPQUFjLEVBQVUsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFNUU7Ozs7Ozs7YUFPSztRQUNMLFdBQU0sR0FBRyxDQUFDLE9BQWMsRUFBVyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFRM0UsQ0FBQztJQXhEQzs7OztTQUlLO0lBQ0wsTUFBTSxDQUFDLE1BQWM7UUFDbkIsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDO0lBQzFELENBQUM7SUFBQSxDQUFDO0NBaURIO0FBM0ZELDRDQTJGQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKiBAbW9kdWxlIENvbW1vbi1LZXlDaGFpblxuICovXG5cbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gXCJidWZmZXIvXCI7XG5cbi8qKlxuICogQ2xhc3MgZm9yIHJlcHJlc2VudGluZyBhIHByaXZhdGUgYW5kIHB1YmxpYyBrZXlwYWlyIGluIEF2YWxhbmNoZS4gXG4gKiBBbGwgQVBJcyB0aGF0IG5lZWQga2V5IHBhaXJzIHNob3VsZCBleHRlbmQgb24gdGhpcyBjbGFzcy5cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFN0YW5kYXJkS2V5UGFpciB7XG4gICAgcHJvdGVjdGVkIHB1Yms6QnVmZmVyO1xuICAgIHByb3RlY3RlZCBwcml2azpCdWZmZXI7XG4gIFxuICAgIC8qKlxuICAgICAgICogR2VuZXJhdGVzIGEgbmV3IGtleXBhaXIuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIGVudHJvcHkgT3B0aW9uYWwgcGFyYW1ldGVyIHRoYXQgbWF5IGJlIG5lY2Vzc2FyeSB0byBwcm9kdWNlIHNlY3VyZSBrZXlzXG4gICAgICAgKi9cbiAgICBnZW5lcmF0ZUtleTooZW50cm9weT86QnVmZmVyKSA9PiB2b2lkO1xuICBcbiAgICAvKipcbiAgICAgICAqIEltcG9ydHMgYSBwcml2YXRlIGtleSBhbmQgZ2VuZXJhdGVzIHRoZSBhcHByb3ByaWF0ZSBwdWJsaWMga2V5LlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSBwcml2ayBBIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHJlcHJlc2VudGluZyB0aGUgcHJpdmF0ZSBrZXlcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJucyB0cnVlIG9uIHN1Y2Nlc3MsIGZhbHNlIG9uIGZhaWx1cmVcbiAgICAgICAqL1xuICAgIGltcG9ydEtleToocHJpdms6QnVmZmVyKSA9PiBib29sZWFuO1xuICBcbiAgICAvKipcbiAgICAgICAqIFRha2VzIGEgbWVzc2FnZSwgc2lnbnMgaXQsIGFuZCByZXR1cm5zIHRoZSBzaWduYXR1cmUuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIG1zZyBUaGUgbWVzc2FnZSB0byBzaWduXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMgQSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBjb250YWluaW5nIHRoZSBzaWduYXR1cmVcbiAgICAgICAqL1xuICAgIHNpZ246KG1zZzpCdWZmZXIpID0+IEJ1ZmZlcjtcbiAgXG4gICAgLyoqXG4gICAgICAgKiBSZWNvdmVycyB0aGUgcHVibGljIGtleSBvZiBhIG1lc3NhZ2Ugc2lnbmVyIGZyb20gYSBtZXNzYWdlIGFuZCBpdHMgYXNzb2NpYXRlZCBzaWduYXR1cmUuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIG1zZyBUaGUgbWVzc2FnZSB0aGF0J3Mgc2lnbmVkXG4gICAgICAgKiBAcGFyYW0gc2lnIFRoZSBzaWduYXR1cmUgdGhhdCdzIHNpZ25lZCBvbiB0aGUgbWVzc2FnZVxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIEEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gY29udGFpbmluZyB0aGUgcHVibGljXG4gICAgICAgKiBrZXkgb2YgdGhlIHNpZ25lclxuICAgICAgICovXG4gICAgcmVjb3ZlcjoobXNnOkJ1ZmZlciwgc2lnOkJ1ZmZlcikgPT4gQnVmZmVyO1xuICBcbiAgICAvKipcbiAgICAgICAqIFZlcmlmaWVzIHRoYXQgdGhlIHByaXZhdGUga2V5IGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvdmlkZWQgcHVibGljIGtleSBwcm9kdWNlcyB0aGVcbiAgICAgICAqIHNpZ25hdHVyZSBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIG1zZyBUaGUgbWVzc2FnZSBhc3NvY2lhdGVkIHdpdGggdGhlIHNpZ25hdHVyZVxuICAgICAgICogQHBhcmFtIHNpZyBUaGUgc2lnbmF0dXJlIG9mIHRoZSBzaWduZWQgbWVzc2FnZVxuICAgICAgICogQHBhcmFtIHB1YmsgVGhlIHB1YmxpYyBrZXkgYXNzb2NpYXRlZCB3aXRoIHRoZSBtZXNzYWdlIHNpZ25hdHVyZVxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIFRydWUgb24gc3VjY2VzcywgZmFsc2Ugb24gZmFpbHVyZVxuICAgICAgICovXG4gICAgdmVyaWZ5Oihtc2c6QnVmZmVyLCBzaWc6QnVmZmVyLCBwdWJrOkJ1ZmZlcikgPT4gYm9vbGVhbjtcbiAgXG4gICAgLyoqXG4gICAgICAgKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoZSBwcml2YXRlIGtleS5cbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJucyBBIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IGNvbnRhaW5pbmcgdGhlIHByaXZhdGUga2V5XG4gICAgICAgKi9cbiAgICBnZXRQcml2YXRlS2V5ID0gKCk6QnVmZmVyID0+IHRoaXMucHJpdms7XG4gIFxuICAgIC8qKlxuICAgICAgICogUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGUgcHVibGljIGtleS5cbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJucyBBIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IGNvbnRhaW5pbmcgdGhlIHB1YmxpYyBrZXlcbiAgICAgICAqL1xuICAgIGdldFB1YmxpY0tleSA9ICgpOkJ1ZmZlciA9PiB0aGlzLnB1Yms7XG4gIFxuICAgIC8qKlxuICAgICAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcHJpdmF0ZSBrZXkuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMgQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHB1YmxpYyBrZXlcbiAgICAgICAqL1xuICAgIGdldFByaXZhdGVLZXlTdHJpbmc6KCkgPT4gc3RyaW5nO1xuICBcbiAgICAvKipcbiAgICAgICAqIFJldHVybnMgdGhlIHB1YmxpYyBrZXkuXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMgQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHB1YmxpYyBrZXlcbiAgICAgICAqL1xuICAgIGdldFB1YmxpY0tleVN0cmluZzooKSA9PiBzdHJpbmc7XG4gIFxuICAgIC8qKlxuICAgICAgICogUmV0dXJucyB0aGUgYWRkcmVzcy5cbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJucyBBIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9ICByZXByZXNlbnRhdGlvbiBvZiB0aGUgYWRkcmVzc1xuICAgICAgICovXG4gICAgZ2V0QWRkcmVzczooKSA9PiBCdWZmZXI7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBhZGRyZXNzJ3Mgc3RyaW5nIHJlcHJlc2VudGF0aW9uLlxuICAgICAqIFxuICAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBhZGRyZXNzXG4gICAgICovXG4gICAgZ2V0QWRkcmVzc1N0cmluZzooKSA9PiBzdHJpbmdcblxuICAgIGFic3RyYWN0IGNyZWF0ZSguLi5hcmdzOmFueVtdKTp0aGlzO1xuXG4gICAgYWJzdHJhY3QgY2xvbmUoKTp0aGlzO1xuICBcbiAgfVxuICBcbiAgLyoqXG4gICAqIENsYXNzIGZvciByZXByZXNlbnRpbmcgYSBrZXkgY2hhaW4gaW4gQXZhbGFuY2hlLlxuICAgKiBBbGwgZW5kcG9pbnRzIHRoYXQgbmVlZCBrZXkgY2hhaW5zIHNob3VsZCBleHRlbmQgb24gdGhpcyBjbGFzcy5cbiAgICpcbiAgICogQHR5cGVwYXJhbSBLUENsYXNzIGV4dGVuZGluZyBbW1N0YW5kYXJkS2V5UGFpcl1dIHdoaWNoIGlzIHVzZWQgYXMgdGhlIGtleSBpbiBbW1N0YW5kYXJkS2V5Q2hhaW5dXVxuICAgKi9cbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFN0YW5kYXJkS2V5Q2hhaW48S1BDbGFzcyBleHRlbmRzIFN0YW5kYXJkS2V5UGFpcj4ge1xuICAgIHByb3RlY3RlZCBrZXlzOntbYWRkcmVzczogc3RyaW5nXTogS1BDbGFzc30gPSB7fTtcbiAgXG4gICAgLyoqXG4gICAgICAgKiBNYWtlcyBhIG5ldyBbW1N0YW5kYXJkS2V5UGFpcl1dLCByZXR1cm5zIHRoZSBhZGRyZXNzLlxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIEFkZHJlc3Mgb2YgdGhlIG5ldyBbW1N0YW5kYXJkS2V5UGFpcl1dXG4gICAgICAgKi9cbiAgICBtYWtlS2V5OigpID0+IEtQQ2xhc3M7XG4gIFxuICAgIC8qKlxuICAgICAgICogR2l2ZW4gYSBwcml2YXRlIGtleSwgbWFrZXMgYSBuZXcgW1tTdGFuZGFyZEtleVBhaXJdXSwgcmV0dXJucyB0aGUgYWRkcmVzcy5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0gcHJpdmsgQSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSByZXByZXNlbnRpbmcgdGhlIHByaXZhdGUga2V5XG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMgQSBuZXcgW1tTdGFuZGFyZEtleVBhaXJdXVxuICAgICAgICovXG4gICAgaW1wb3J0S2V5Oihwcml2azpCdWZmZXIpID0+IEtQQ2xhc3M7XG4gIFxuICAgIC8qKlxuICAgICAgICogR2V0cyBhbiBhcnJheSBvZiBhZGRyZXNzZXMgc3RvcmVkIGluIHRoZSBbW1N0YW5kYXJkS2V5Q2hhaW5dXS5cbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSAgcmVwcmVzZW50YXRpb25zXG4gICAgICAgKiBvZiB0aGUgYWRkcmVzc2VzXG4gICAgICAgKi9cbiAgICBnZXRBZGRyZXNzZXMgPSAoKTpBcnJheTxCdWZmZXI+ID0+IE9iamVjdC52YWx1ZXModGhpcy5rZXlzKS5tYXAoKGtwKSA9PiBrcC5nZXRBZGRyZXNzKCkpO1xuICBcbiAgICAvKipcbiAgICAgICAqIEdldHMgYW4gYXJyYXkgb2YgYWRkcmVzc2VzIHN0b3JlZCBpbiB0aGUgW1tTdGFuZGFyZEtleUNoYWluXV0uXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMgQW4gYXJyYXkgb2Ygc3RyaW5nIHJlcHJlc2VudGF0aW9ucyBvZiB0aGUgYWRkcmVzc2VzXG4gICAgICAgKi9cbiAgICBnZXRBZGRyZXNzU3RyaW5ncyA9ICgpOkFycmF5PHN0cmluZz4gPT4gT2JqZWN0LnZhbHVlcyh0aGlzLmtleXMpXG4gICAgICAubWFwKChrcCkgPT4ga3AuZ2V0QWRkcmVzc1N0cmluZygpKTtcbiAgXG4gICAgLyoqXG4gICAgICAgKiBBZGRzIHRoZSBrZXkgcGFpciB0byB0aGUgbGlzdCBvZiB0aGUga2V5cyBtYW5hZ2VkIGluIHRoZSBbW1N0YW5kYXJkS2V5Q2hhaW5dXS5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0gbmV3S2V5IEEga2V5IHBhaXIgb2YgdGhlIGFwcHJvcHJpYXRlIGNsYXNzIHRvIGJlIGFkZGVkIHRvIHRoZSBbW1N0YW5kYXJkS2V5Q2hhaW5dXVxuICAgICAgICovXG4gICAgYWRkS2V5KG5ld0tleTpLUENsYXNzKSB7XG4gICAgICB0aGlzLmtleXNbbmV3S2V5LmdldEFkZHJlc3MoKS50b1N0cmluZygnaGV4JyldID0gbmV3S2V5O1xuICAgIH07XG4gIFxuICAgIC8qKlxuICAgICAgICogUmVtb3ZlcyB0aGUga2V5IHBhaXIgZnJvbSB0aGUgbGlzdCBvZiB0aGV5IGtleXMgbWFuYWdlZCBpbiB0aGUgW1tTdGFuZGFyZEtleUNoYWluXV0uXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIGtleSBBIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IGZvciB0aGUgYWRkcmVzcyBvclxuICAgICAgICogS1BDbGFzcyB0byByZW1vdmVcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJucyBUaGUgYm9vbGVhbiB0cnVlIGlmIGEga2V5IHdhcyByZW1vdmVkLlxuICAgICAgICovXG4gICAgcmVtb3ZlS2V5ID0gKGtleTpLUENsYXNzIHwgQnVmZmVyKSA9PiB7XG4gICAgICBsZXQga2FkZHI6c3RyaW5nO1xuICAgICAgaWYgKGtleSBpbnN0YW5jZW9mIEJ1ZmZlcikge1xuICAgICAgICBrYWRkciA9IGtleS50b1N0cmluZygnaGV4Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBrYWRkciA9IGtleS5nZXRBZGRyZXNzKCkudG9TdHJpbmcoJ2hleCcpO1xuICAgICAgfVxuICAgICAgaWYgKGthZGRyIGluIHRoaXMua2V5cykge1xuICAgICAgICBkZWxldGUgdGhpcy5rZXlzW2thZGRyXTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgXG4gICAgLyoqXG4gICAgICAgKiBDaGVja3MgaWYgdGhlcmUgaXMgYSBrZXkgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92aWRlZCBhZGRyZXNzLlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHRvIGNoZWNrIGZvciBleGlzdGVuY2UgaW4gdGhlIGtleXMgZGF0YWJhc2VcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJucyBUcnVlIG9uIHN1Y2Nlc3MsIGZhbHNlIGlmIG5vdCBmb3VuZFxuICAgICAgICovXG4gICAgaGFzS2V5ID0gKGFkZHJlc3M6QnVmZmVyKTpib29sZWFuID0+IChhZGRyZXNzLnRvU3RyaW5nKCdoZXgnKSBpbiB0aGlzLmtleXMpO1xuICBcbiAgICAvKipcbiAgICAgICAqIFJldHVybnMgdGhlIFtbU3RhbmRhcmRLZXlQYWlyXV0gbGlzdGVkIHVuZGVyIHRoZSBwcm92aWRlZCBhZGRyZXNzXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIGFkZHJlc3MgVGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IG9mIHRoZSBhZGRyZXNzIHRvXG4gICAgICAgKiByZXRyaWV2ZSBmcm9tIHRoZSBrZXlzIGRhdGFiYXNlXG4gICAgICAgKlxuICAgICAgICogQHJldHVybnMgQSByZWZlcmVuY2UgdG8gdGhlIFtbU3RhbmRhcmRLZXlQYWlyXV0gaW4gdGhlIGtleXMgZGF0YWJhc2VcbiAgICAgICAqL1xuICAgIGdldEtleSA9IChhZGRyZXNzOkJ1ZmZlcik6IEtQQ2xhc3MgPT4gdGhpcy5rZXlzW2FkZHJlc3MudG9TdHJpbmcoJ2hleCcpXTtcblxuICAgIGFic3RyYWN0IGNyZWF0ZSguLi5hcmdzOmFueVtdKTp0aGlzO1xuXG4gICAgYWJzdHJhY3QgY2xvbmUoKTp0aGlzO1xuXG4gICAgYWJzdHJhY3QgdW5pb24oa2M6dGhpcyk6dGhpcztcbiAgICBcbiAgfSJdfQ==","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./api\"), exports);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvYXBpcy9pbmZvL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBLHdDQUFzQiIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vYXBpJztcbiJdfQ==","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StandardAmountInput = exports.StandardTransferableInput = exports.StandardParseableInput = exports.Input = void 0;\n/**\n * @packageDocumentation\n * @module Common-Inputs\n */\nconst buffer_1 = require(\"buffer/\");\nconst bintools_1 = __importDefault(require(\"../utils/bintools\"));\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nconst credentials_1 = require(\"./credentials\");\nconst serialization_1 = require(\"../utils/serialization\");\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\nconst serializer = serialization_1.Serialization.getInstance();\nclass Input extends serialization_1.Serializable {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"Input\";\n        this._typeID = undefined;\n        this.sigCount = buffer_1.Buffer.alloc(4);\n        this.sigIdxs = []; // idxs of signers from utxo\n        /**\n         * Returns the array of [[SigIdx]] for this [[Input]]\n         */\n        this.getSigIdxs = () => this.sigIdxs;\n        /**\n         * Creates and adds a [[SigIdx]] to the [[Input]].\n         *\n         * @param addressIdx The index of the address to reference in the signatures\n         * @param address The address of the source of the signature\n         */\n        this.addSignatureIdx = (addressIdx, address) => {\n            const sigidx = new credentials_1.SigIdx();\n            const b = buffer_1.Buffer.alloc(4);\n            b.writeUInt32BE(addressIdx, 0);\n            sigidx.fromBuffer(b);\n            sigidx.setSource(address);\n            this.sigIdxs.push(sigidx);\n            this.sigCount.writeUInt32BE(this.sigIdxs.length, 0);\n        };\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"sigIdxs\": this.sigIdxs.map((s) => s.serialize(encoding)) });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.sigIdxs = fields[\"sigIdxs\"].map((s) => {\n            let sidx = new credentials_1.SigIdx();\n            sidx.deserialize(s, encoding);\n            return sidx;\n        });\n        this.sigCount.writeUInt32BE(this.sigIdxs.length, 0);\n    }\n    fromBuffer(bytes, offset = 0) {\n        this.sigCount = bintools.copyFrom(bytes, offset, offset + 4);\n        offset += 4;\n        const sigCount = this.sigCount.readUInt32BE(0);\n        this.sigIdxs = [];\n        for (let i = 0; i < sigCount; i++) {\n            const sigidx = new credentials_1.SigIdx();\n            const sigbuff = bintools.copyFrom(bytes, offset, offset + 4);\n            sigidx.fromBuffer(sigbuff);\n            offset += 4;\n            this.sigIdxs.push(sigidx);\n        }\n        return offset;\n    }\n    toBuffer() {\n        this.sigCount.writeUInt32BE(this.sigIdxs.length, 0);\n        let bsize = this.sigCount.length;\n        const barr = [this.sigCount];\n        for (let i = 0; i < this.sigIdxs.length; i++) {\n            const b = this.sigIdxs[i].toBuffer();\n            barr.push(b);\n            bsize += b.length;\n        }\n        return buffer_1.Buffer.concat(barr, bsize);\n    }\n    /**\n     * Returns a base-58 representation of the [[Input]].\n     */\n    toString() {\n        return bintools.bufferToB58(this.toBuffer());\n    }\n}\nexports.Input = Input;\nInput.comparator = () => (a, b) => {\n    const aoutid = buffer_1.Buffer.alloc(4);\n    aoutid.writeUInt32BE(a.getInputID(), 0);\n    const abuff = a.toBuffer();\n    const boutid = buffer_1.Buffer.alloc(4);\n    boutid.writeUInt32BE(b.getInputID(), 0);\n    const bbuff = b.toBuffer();\n    const asort = buffer_1.Buffer.concat([aoutid, abuff], aoutid.length + abuff.length);\n    const bsort = buffer_1.Buffer.concat([boutid, bbuff], boutid.length + bbuff.length);\n    return buffer_1.Buffer.compare(asort, bsort);\n};\nclass StandardParseableInput extends serialization_1.Serializable {\n    /**\n     * Class representing an [[StandardParseableInput]] for a transaction.\n     *\n     * @param input A number representing the InputID of the [[StandardParseableInput]]\n     */\n    constructor(input = undefined) {\n        super();\n        this._typeName = \"StandardParseableInput\";\n        this._typeID = undefined;\n        this.getInput = () => this.input;\n        if (input instanceof Input) {\n            this.input = input;\n        }\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"input\": this.input.serialize(encoding) });\n    }\n    ;\n    toBuffer() {\n        const inbuff = this.input.toBuffer();\n        const inid = buffer_1.Buffer.alloc(4);\n        inid.writeUInt32BE(this.input.getInputID(), 0);\n        const barr = [inid, inbuff];\n        return buffer_1.Buffer.concat(barr, inid.length + inbuff.length);\n    }\n}\nexports.StandardParseableInput = StandardParseableInput;\n/**\n * Returns a function used to sort an array of [[StandardParseableInput]]s\n */\nStandardParseableInput.comparator = () => (a, b) => {\n    const sorta = a.toBuffer();\n    const sortb = b.toBuffer();\n    return buffer_1.Buffer.compare(sorta, sortb);\n};\nclass StandardTransferableInput extends StandardParseableInput {\n    /**\n     * Class representing an [[StandardTransferableInput]] for a transaction.\n     *\n     * @param txid A {@link https://github.com/feross/buffer|Buffer} containing the transaction ID of the referenced UTXO\n     * @param outputidx A {@link https://github.com/feross/buffer|Buffer} containing the index of the output in the transaction consumed in the [[StandardTransferableInput]]\n     * @param assetID A {@link https://github.com/feross/buffer|Buffer} representing the assetID of the [[Input]]\n     * @param input An [[Input]] to be made transferable\n     */\n    constructor(txid = undefined, outputidx = undefined, assetID = undefined, input = undefined) {\n        super();\n        this._typeName = \"StandardTransferableInput\";\n        this._typeID = undefined;\n        this.txid = buffer_1.Buffer.alloc(32);\n        this.outputidx = buffer_1.Buffer.alloc(4);\n        this.assetid = buffer_1.Buffer.alloc(32);\n        /**\n         * Returns a {@link https://github.com/feross/buffer|Buffer} of the TxID.\n         */\n        this.getTxID = () => this.txid;\n        /**\n         * Returns a {@link https://github.com/feross/buffer|Buffer}  of the OutputIdx.\n         */\n        this.getOutputIdx = () => this.outputidx;\n        /**\n         * Returns a base-58 string representation of the UTXOID this [[StandardTransferableInput]] references.\n         */\n        this.getUTXOID = () => bintools.bufferToB58(buffer_1.Buffer.concat([this.txid, this.outputidx]));\n        /**\n         * Returns the input.\n         */\n        this.getInput = () => this.input;\n        /**\n         * Returns the assetID of the input.\n         */\n        this.getAssetID = () => this.assetid;\n        if (typeof txid !== 'undefined' && typeof outputidx !== 'undefined' && typeof assetID !== 'undefined' && input instanceof Input) {\n            this.input = input;\n            this.txid = txid;\n            this.outputidx = outputidx;\n            this.assetid = assetID;\n        }\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"txid\": serializer.encoder(this.txid, encoding, \"Buffer\", \"cb58\"), \"outputidx\": serializer.encoder(this.outputidx, encoding, \"Buffer\", \"decimalString\"), \"assetid\": serializer.encoder(this.assetid, encoding, \"Buffer\", \"cb58\") });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.txid = serializer.decoder(fields[\"txid\"], encoding, \"cb58\", \"Buffer\", 32);\n        this.outputidx = serializer.decoder(fields[\"outputidx\"], encoding, \"decimalString\", \"Buffer\", 4);\n        this.assetid = serializer.decoder(fields[\"assetid\"], encoding, \"cb58\", \"Buffer\", 32);\n        //input deserialization must be implmented in child classes\n    }\n    /**\n     * Returns a {@link https://github.com/feross/buffer|Buffer} representation of the [[StandardTransferableInput]].\n     */\n    toBuffer() {\n        const parseableBuff = super.toBuffer();\n        const bsize = this.txid.length + this.outputidx.length + this.assetid.length + parseableBuff.length;\n        const barr = [this.txid, this.outputidx, this.assetid, parseableBuff];\n        const buff = buffer_1.Buffer.concat(barr, bsize);\n        return buff;\n    }\n    /**\n     * Returns a base-58 representation of the [[StandardTransferableInput]].\n     */\n    toString() {\n        /* istanbul ignore next */\n        return bintools.bufferToB58(this.toBuffer());\n    }\n}\nexports.StandardTransferableInput = StandardTransferableInput;\n/**\n * An [[Input]] class which specifies a token amount .\n */\nclass StandardAmountInput extends Input {\n    /**\n     * An [[AmountInput]] class which issues a payment on an assetID.\n     *\n     * @param amount A {@link https://github.com/indutny/bn.js/|BN} representing the amount in the input\n     */\n    constructor(amount = undefined) {\n        super();\n        this._typeName = \"StandardAmountInput\";\n        this._typeID = undefined;\n        this.amount = buffer_1.Buffer.alloc(8);\n        this.amountValue = new bn_js_1.default(0);\n        /**\n         * Returns the amount as a {@link https://github.com/indutny/bn.js/|BN}.\n         */\n        this.getAmount = () => this.amountValue.clone();\n        if (amount) {\n            this.amountValue = amount.clone();\n            this.amount = bintools.fromBNToBuffer(amount, 8);\n        }\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"amount\": serializer.encoder(this.amount, encoding, \"Buffer\", \"decimalString\", 8) });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.amount = serializer.decoder(fields[\"amount\"], encoding, \"decimalString\", \"Buffer\", 8);\n        this.amountValue = bintools.fromBufferToBN(this.amount);\n    }\n    /**\n     * Popuates the instance from a {@link https://github.com/feross/buffer|Buffer} representing the [[AmountInput]] and returns the size of the input.\n     */\n    fromBuffer(bytes, offset = 0) {\n        this.amount = bintools.copyFrom(bytes, offset, offset + 8);\n        this.amountValue = bintools.fromBufferToBN(this.amount);\n        offset += 8;\n        return super.fromBuffer(bytes, offset);\n    }\n    /**\n     * Returns the buffer representing the [[AmountInput]] instance.\n     */\n    toBuffer() {\n        const superbuff = super.toBuffer();\n        const bsize = this.amount.length + superbuff.length;\n        const barr = [this.amount, superbuff];\n        return buffer_1.Buffer.concat(barr, bsize);\n    }\n}\nexports.StandardAmountInput = StandardAmountInput;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tbW9uL2lucHV0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7R0FHRztBQUNILG9DQUFpQztBQUNqQyxpRUFBeUM7QUFDekMsa0RBQXVCO0FBQ3ZCLCtDQUF1QztBQUN2QywwREFBeUY7QUFFekY7O0dBRUc7QUFDSCxNQUFNLFFBQVEsR0FBRyxrQkFBUSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQ3hDLE1BQU0sVUFBVSxHQUFHLDZCQUFhLENBQUMsV0FBVyxFQUFFLENBQUM7QUFFL0MsTUFBc0IsS0FBTSxTQUFRLDRCQUFZO0lBQWhEOztRQUNZLGNBQVMsR0FBRyxPQUFPLENBQUM7UUFDcEIsWUFBTyxHQUFHLFNBQVMsQ0FBQztRQW1CcEIsYUFBUSxHQUFVLGVBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEMsWUFBTyxHQUFpQixFQUFFLENBQUMsQ0FBQyw0QkFBNEI7UUFrQmxFOztXQUVHO1FBQ0gsZUFBVSxHQUFHLEdBQWlCLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBSTlDOzs7OztXQUtHO1FBQ0gsb0JBQWUsR0FBRyxDQUFDLFVBQWlCLEVBQUUsT0FBYyxFQUFFLEVBQUU7WUFDdEQsTUFBTSxNQUFNLEdBQVUsSUFBSSxvQkFBTSxFQUFFLENBQUM7WUFDbkMsTUFBTSxDQUFDLEdBQVUsZUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNqQyxDQUFDLENBQUMsYUFBYSxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUMvQixNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JCLE1BQU0sQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDMUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDMUIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDdEQsQ0FBQyxDQUFDO0lBMENKLENBQUM7SUFuR0MsU0FBUyxDQUFDLFdBQThCLEtBQUs7UUFDM0MsSUFBSSxNQUFNLEdBQVUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUM5Qyx1Q0FDSyxNQUFNLEtBQ1QsU0FBUyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQzFEO0lBQ0gsQ0FBQztJQUFBLENBQUM7SUFDRixXQUFXLENBQUMsTUFBYSxFQUFFLFdBQThCLEtBQUs7UUFDNUQsS0FBSyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDcEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBUSxFQUFFLEVBQUU7WUFDaEQsSUFBSSxJQUFJLEdBQVUsSUFBSSxvQkFBTSxFQUFFLENBQUM7WUFDL0IsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFDOUIsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUE0Q0QsVUFBVSxDQUFDLEtBQVksRUFBRSxTQUFnQixDQUFDO1FBQ3hDLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM3RCxNQUFNLElBQUksQ0FBQyxDQUFDO1FBQ1osTUFBTSxRQUFRLEdBQVUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEQsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7UUFDbEIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFFBQVEsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNqQyxNQUFNLE1BQU0sR0FBRyxJQUFJLG9CQUFNLEVBQUUsQ0FBQztZQUM1QixNQUFNLE9BQU8sR0FBVSxRQUFRLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ3BFLE1BQU0sQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDM0IsTUFBTSxJQUFJLENBQUMsQ0FBQztZQUNaLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQzNCO1FBQ0QsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQUVELFFBQVE7UUFDTixJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNwRCxJQUFJLEtBQUssR0FBVSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQztRQUN4QyxNQUFNLElBQUksR0FBaUIsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDM0MsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQzVDLE1BQU0sQ0FBQyxHQUFVLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDNUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNiLEtBQUssSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDO1NBQ25CO1FBQ0QsT0FBTyxlQUFNLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxRQUFRO1FBQ04sT0FBTyxRQUFRLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO0lBQy9DLENBQUM7O0FBL0ZILHNCQXVHQztBQS9FUSxnQkFBVSxHQUFHLEdBQWtDLEVBQUUsQ0FBQyxDQUFDLENBQU8sRUFBRSxDQUFPLEVBQVcsRUFBRTtJQUNyRixNQUFNLE1BQU0sR0FBVSxlQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3RDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3hDLE1BQU0sS0FBSyxHQUFVLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUVsQyxNQUFNLE1BQU0sR0FBVSxlQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3RDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3hDLE1BQU0sS0FBSyxHQUFVLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUVsQyxNQUFNLEtBQUssR0FBVSxlQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2xGLE1BQU0sS0FBSyxHQUFVLGVBQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLEVBQUUsTUFBTSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbEYsT0FBTyxlQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQWEsQ0FBQztBQUNsRCxDQUFDLENBQUM7QUFxRUosTUFBc0Isc0JBQXVCLFNBQVEsNEJBQVk7SUFvQy9EOzs7O09BSUc7SUFDSCxZQUFZLFFBQWMsU0FBUztRQUNqQyxLQUFLLEVBQUUsQ0FBQztRQXpDQSxjQUFTLEdBQUcsd0JBQXdCLENBQUM7UUFDckMsWUFBTyxHQUFHLFNBQVMsQ0FBQztRQXFCOUIsYUFBUSxHQUFHLEdBQVMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7UUFvQmhDLElBQUksS0FBSyxZQUFZLEtBQUssRUFBRTtZQUMxQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztTQUNwQjtJQUNILENBQUM7SUExQ0QsU0FBUyxDQUFDLFdBQThCLEtBQUs7UUFDM0MsSUFBSSxNQUFNLEdBQVUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUM5Qyx1Q0FDSyxNQUFNLEtBQ1QsT0FBTyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUN4QztJQUNILENBQUM7SUFBQSxDQUFDO0lBa0JGLFFBQVE7UUFDTixNQUFNLE1BQU0sR0FBVSxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQzVDLE1BQU0sSUFBSSxHQUFVLGVBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDcEMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQy9DLE1BQU0sSUFBSSxHQUFpQixDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQztRQUMxQyxPQUFPLGVBQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzFELENBQUM7O0FBbENILHdEQStDQztBQWpDQzs7R0FFRztBQUNJLGlDQUFVLEdBQUcsR0FBb0UsRUFBRSxDQUFDLENBQUMsQ0FBd0IsRUFBRSxDQUF3QixFQUFXLEVBQUU7SUFDekosTUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQzNCLE1BQU0sS0FBSyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUMzQixPQUFPLGVBQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBYSxDQUFDO0FBQ2xELENBQUMsQ0FBQztBQTRCSixNQUFzQix5QkFBMEIsU0FBUSxzQkFBc0I7SUEyRTVFOzs7Ozs7O09BT0c7SUFDSCxZQUFZLE9BQWMsU0FBUyxFQUFFLFlBQW1CLFNBQVMsRUFBRSxVQUFpQixTQUFTLEVBQUUsUUFBYyxTQUFTO1FBQ3BILEtBQUssRUFBRSxDQUFDO1FBbkZBLGNBQVMsR0FBRywyQkFBMkIsQ0FBQztRQUN4QyxZQUFPLEdBQUcsU0FBUyxDQUFDO1FBbUJwQixTQUFJLEdBQVUsZUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUMvQixjQUFTLEdBQVUsZUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuQyxZQUFPLEdBQVUsZUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUU1Qzs7V0FFRztRQUNILFlBQU8sR0FBRyxHQUVGLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBRXJCOztXQUVHO1FBQ0gsaUJBQVksR0FBRyxHQUVQLEVBQUUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBRTFCOztXQUVHO1FBQ0gsY0FBUyxHQUFHLEdBQVUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsZUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUUxRjs7V0FFRztRQUNILGFBQVEsR0FBRyxHQUFTLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBRWxDOztXQUVHO1FBQ0gsZUFBVSxHQUFHLEdBQVUsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7UUFpQ3JDLElBQUksT0FBTyxJQUFJLEtBQUssV0FBVyxJQUFJLE9BQU8sU0FBUyxLQUFLLFdBQVcsSUFBSSxPQUFPLE9BQU8sS0FBSyxXQUFXLElBQUksS0FBSyxZQUFZLEtBQUssRUFBRTtZQUMvSCxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztZQUNuQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztZQUNqQixJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztZQUMzQixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztTQUN4QjtJQUNILENBQUM7SUF2RkQsU0FBUyxDQUFDLFdBQThCLEtBQUs7UUFDM0MsSUFBSSxNQUFNLEdBQVUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUM5Qyx1Q0FDSyxNQUFNLEtBQ1QsTUFBTSxFQUFFLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLE1BQU0sQ0FBQyxFQUNqRSxXQUFXLEVBQUUsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsZUFBZSxDQUFDLEVBQ3BGLFNBQVMsRUFBRSxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLENBQUMsSUFDeEU7SUFDSCxDQUFDO0lBQUEsQ0FBQztJQUNGLFdBQVcsQ0FBQyxNQUFhLEVBQUUsV0FBOEIsS0FBSztRQUM1RCxLQUFLLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQztRQUNwQyxJQUFJLENBQUMsSUFBSSxHQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQy9FLElBQUksQ0FBQyxTQUFTLEdBQUcsVUFBVSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUUsUUFBUSxFQUFFLGVBQWUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDakcsSUFBSSxDQUFDLE9BQU8sR0FBRyxVQUFVLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNyRiwyREFBMkQ7SUFDN0QsQ0FBQztJQXFDRDs7T0FFRztJQUNILFFBQVE7UUFDTixNQUFNLGFBQWEsR0FBVSxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDOUMsTUFBTSxLQUFLLEdBQVUsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsYUFBYSxDQUFDLE1BQU0sQ0FBQztRQUMzRyxNQUFNLElBQUksR0FBaUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxhQUFhLENBQUMsQ0FBQztRQUNwRixNQUFNLElBQUksR0FBVyxlQUFNLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNoRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRDs7T0FFRztJQUNILFFBQVE7UUFDTiwwQkFBMEI7UUFDMUIsT0FBTyxRQUFRLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO0lBQy9DLENBQUM7Q0FtQkY7QUE1RkQsOERBNEZDO0FBRUQ7O0dBRUc7QUFDSCxNQUFzQixtQkFBb0IsU0FBUSxLQUFLO0lBNkNyRDs7OztPQUlHO0lBQ0gsWUFBWSxTQUFZLFNBQVM7UUFDL0IsS0FBSyxFQUFFLENBQUM7UUFsREEsY0FBUyxHQUFHLHFCQUFxQixDQUFDO1FBQ2xDLFlBQU8sR0FBRyxTQUFTLENBQUM7UUFlcEIsV0FBTSxHQUFVLGVBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDaEMsZ0JBQVcsR0FBTSxJQUFJLGVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVyQzs7V0FFRztRQUNILGNBQVMsR0FBRyxHQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBNkI1QyxJQUFJLE1BQU0sRUFBRTtZQUNWLElBQUksQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ2xDLElBQUksQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDbEQ7SUFDSCxDQUFDO0lBcERELFNBQVMsQ0FBQyxXQUE4QixLQUFLO1FBQzNDLElBQUksTUFBTSxHQUFVLEtBQUssQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDOUMsdUNBQ0ssTUFBTSxLQUNULFFBQVEsRUFBRSxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxlQUFlLEVBQUUsQ0FBQyxDQUFDLElBQ2xGO0lBQ0gsQ0FBQztJQUFBLENBQUM7SUFDRixXQUFXLENBQUMsTUFBYSxFQUFFLFdBQThCLEtBQUs7UUFDNUQsS0FBSyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDcEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxVQUFVLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxRQUFRLEVBQUUsZUFBZSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUMzRixJQUFJLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzFELENBQUM7SUFVRDs7T0FFRztJQUNILFVBQVUsQ0FBQyxLQUFZLEVBQUUsU0FBZ0IsQ0FBQztRQUN4QyxJQUFJLENBQUMsTUFBTSxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN4RCxNQUFNLElBQUksQ0FBQyxDQUFDO1FBQ1osT0FBTyxLQUFLLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxRQUFRO1FBQ04sTUFBTSxTQUFTLEdBQVUsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQzFDLE1BQU0sS0FBSyxHQUFVLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQUM7UUFDM0QsTUFBTSxJQUFJLEdBQWlCLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQztRQUNwRCxPQUFPLGVBQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3BDLENBQUM7Q0FjRjtBQXpERCxrREF5REMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICogQG1vZHVsZSBDb21tb24tSW5wdXRzXG4gKi9cbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ2J1ZmZlci8nO1xuaW1wb3J0IEJpblRvb2xzIGZyb20gJy4uL3V0aWxzL2JpbnRvb2xzJztcbmltcG9ydCBCTiBmcm9tICdibi5qcyc7XG5pbXBvcnQgeyBTaWdJZHggfSBmcm9tICcuL2NyZWRlbnRpYWxzJztcbmltcG9ydCB7IFNlcmlhbGl6YWJsZSwgU2VyaWFsaXphdGlvbiwgU2VyaWFsaXplZEVuY29kaW5nIH0gZnJvbSAnLi4vdXRpbHMvc2VyaWFsaXphdGlvbic7XG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5jb25zdCBiaW50b29scyA9IEJpblRvb2xzLmdldEluc3RhbmNlKCk7XG5jb25zdCBzZXJpYWxpemVyID0gU2VyaWFsaXphdGlvbi5nZXRJbnN0YW5jZSgpO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgSW5wdXQgZXh0ZW5kcyBTZXJpYWxpemFibGUge1xuICBwcm90ZWN0ZWQgX3R5cGVOYW1lID0gXCJJbnB1dFwiO1xuICBwcm90ZWN0ZWQgX3R5cGVJRCA9IHVuZGVmaW5lZDtcblxuICBzZXJpYWxpemUoZW5jb2Rpbmc6U2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIik6b2JqZWN0IHtcbiAgICBsZXQgZmllbGRzOm9iamVjdCA9IHN1cGVyLnNlcmlhbGl6ZShlbmNvZGluZyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmZpZWxkcyxcbiAgICAgIFwic2lnSWR4c1wiOiB0aGlzLnNpZ0lkeHMubWFwKChzKSA9PiBzLnNlcmlhbGl6ZShlbmNvZGluZykpXG4gICAgfVxuICB9O1xuICBkZXNlcmlhbGl6ZShmaWVsZHM6b2JqZWN0LCBlbmNvZGluZzpTZXJpYWxpemVkRW5jb2RpbmcgPSBcImhleFwiKSB7XG4gICAgc3VwZXIuZGVzZXJpYWxpemUoZmllbGRzLCBlbmNvZGluZyk7XG4gICAgdGhpcy5zaWdJZHhzID0gZmllbGRzW1wic2lnSWR4c1wiXS5tYXAoKHM6b2JqZWN0KSA9PiB7XG4gICAgICBsZXQgc2lkeDpTaWdJZHggPSBuZXcgU2lnSWR4KCk7XG4gICAgICBzaWR4LmRlc2VyaWFsaXplKHMsIGVuY29kaW5nKTtcbiAgICAgIHJldHVybiBzaWR4O1xuICAgIH0pO1xuICAgIHRoaXMuc2lnQ291bnQud3JpdGVVSW50MzJCRSh0aGlzLnNpZ0lkeHMubGVuZ3RoLCAwKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzaWdDb3VudDpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoNCk7XG4gIHByb3RlY3RlZCBzaWdJZHhzOkFycmF5PFNpZ0lkeD4gPSBbXTsgLy8gaWR4cyBvZiBzaWduZXJzIGZyb20gdXR4b1xuXG4gIHN0YXRpYyBjb21wYXJhdG9yID0gKCk6KGE6SW5wdXQsIGI6SW5wdXQpID0+ICgxfC0xfDApID0+IChhOklucHV0LCBiOklucHV0KTooMXwtMXwwKSA9PiB7XG4gICAgY29uc3QgYW91dGlkOkJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyg0KTtcbiAgICBhb3V0aWQud3JpdGVVSW50MzJCRShhLmdldElucHV0SUQoKSwgMCk7XG4gICAgY29uc3QgYWJ1ZmY6QnVmZmVyID0gYS50b0J1ZmZlcigpO1xuXG4gICAgY29uc3QgYm91dGlkOkJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyg0KTtcbiAgICBib3V0aWQud3JpdGVVSW50MzJCRShiLmdldElucHV0SUQoKSwgMCk7XG4gICAgY29uc3QgYmJ1ZmY6QnVmZmVyID0gYi50b0J1ZmZlcigpO1xuXG4gICAgY29uc3QgYXNvcnQ6QnVmZmVyID0gQnVmZmVyLmNvbmNhdChbYW91dGlkLCBhYnVmZl0sIGFvdXRpZC5sZW5ndGggKyBhYnVmZi5sZW5ndGgpO1xuICAgIGNvbnN0IGJzb3J0OkJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoW2JvdXRpZCwgYmJ1ZmZdLCBib3V0aWQubGVuZ3RoICsgYmJ1ZmYubGVuZ3RoKTtcbiAgICByZXR1cm4gQnVmZmVyLmNvbXBhcmUoYXNvcnQsIGJzb3J0KSBhcyAoMXwtMXwwKTtcbiAgfTtcblxuICBhYnN0cmFjdCBnZXRJbnB1dElEKCk6bnVtYmVyO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBhcnJheSBvZiBbW1NpZ0lkeF1dIGZvciB0aGlzIFtbSW5wdXRdXVxuICAgKi9cbiAgZ2V0U2lnSWR4cyA9ICgpOkFycmF5PFNpZ0lkeD4gPT4gdGhpcy5zaWdJZHhzO1xuXG4gIGFic3RyYWN0IGdldENyZWRlbnRpYWxJRCgpOm51bWJlcjtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbmQgYWRkcyBhIFtbU2lnSWR4XV0gdG8gdGhlIFtbSW5wdXRdXS5cbiAgICpcbiAgICogQHBhcmFtIGFkZHJlc3NJZHggVGhlIGluZGV4IG9mIHRoZSBhZGRyZXNzIHRvIHJlZmVyZW5jZSBpbiB0aGUgc2lnbmF0dXJlc1xuICAgKiBAcGFyYW0gYWRkcmVzcyBUaGUgYWRkcmVzcyBvZiB0aGUgc291cmNlIG9mIHRoZSBzaWduYXR1cmVcbiAgICovXG4gIGFkZFNpZ25hdHVyZUlkeCA9IChhZGRyZXNzSWR4Om51bWJlciwgYWRkcmVzczpCdWZmZXIpID0+IHtcbiAgICBjb25zdCBzaWdpZHg6U2lnSWR4ID0gbmV3IFNpZ0lkeCgpO1xuICAgIGNvbnN0IGI6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDQpO1xuICAgIGIud3JpdGVVSW50MzJCRShhZGRyZXNzSWR4LCAwKTtcbiAgICBzaWdpZHguZnJvbUJ1ZmZlcihiKTtcbiAgICBzaWdpZHguc2V0U291cmNlKGFkZHJlc3MpO1xuICAgIHRoaXMuc2lnSWR4cy5wdXNoKHNpZ2lkeCk7XG4gICAgdGhpcy5zaWdDb3VudC53cml0ZVVJbnQzMkJFKHRoaXMuc2lnSWR4cy5sZW5ndGgsIDApO1xuICB9O1xuXG4gIGZyb21CdWZmZXIoYnl0ZXM6QnVmZmVyLCBvZmZzZXQ6bnVtYmVyID0gMCk6bnVtYmVyIHtcbiAgICB0aGlzLnNpZ0NvdW50ID0gYmludG9vbHMuY29weUZyb20oYnl0ZXMsIG9mZnNldCwgb2Zmc2V0ICsgNCk7XG4gICAgb2Zmc2V0ICs9IDQ7XG4gICAgY29uc3Qgc2lnQ291bnQ6bnVtYmVyID0gdGhpcy5zaWdDb3VudC5yZWFkVUludDMyQkUoMCk7XG4gICAgdGhpcy5zaWdJZHhzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaWdDb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBzaWdpZHggPSBuZXcgU2lnSWR4KCk7XG4gICAgICBjb25zdCBzaWdidWZmOkJ1ZmZlciA9IGJpbnRvb2xzLmNvcHlGcm9tKGJ5dGVzLCBvZmZzZXQsIG9mZnNldCArIDQpO1xuICAgICAgc2lnaWR4LmZyb21CdWZmZXIoc2lnYnVmZik7XG4gICAgICBvZmZzZXQgKz0gNDtcbiAgICAgIHRoaXMuc2lnSWR4cy5wdXNoKHNpZ2lkeCk7XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG4gIH1cblxuICB0b0J1ZmZlcigpOkJ1ZmZlciB7XG4gICAgdGhpcy5zaWdDb3VudC53cml0ZVVJbnQzMkJFKHRoaXMuc2lnSWR4cy5sZW5ndGgsIDApO1xuICAgIGxldCBic2l6ZTpudW1iZXIgPSB0aGlzLnNpZ0NvdW50Lmxlbmd0aDtcbiAgICBjb25zdCBiYXJyOkFycmF5PEJ1ZmZlcj4gPSBbdGhpcy5zaWdDb3VudF07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNpZ0lkeHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGI6QnVmZmVyID0gdGhpcy5zaWdJZHhzW2ldLnRvQnVmZmVyKCk7XG4gICAgICBiYXJyLnB1c2goYik7XG4gICAgICBic2l6ZSArPSBiLmxlbmd0aDtcbiAgICB9XG4gICAgcmV0dXJuIEJ1ZmZlci5jb25jYXQoYmFyciwgYnNpemUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBiYXNlLTU4IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBbW0lucHV0XV0uXG4gICAqL1xuICB0b1N0cmluZygpOnN0cmluZyB7XG4gICAgcmV0dXJuIGJpbnRvb2xzLmJ1ZmZlclRvQjU4KHRoaXMudG9CdWZmZXIoKSk7XG4gIH1cblxuICBhYnN0cmFjdCBjbG9uZSgpOnRoaXM7XG5cbiAgYWJzdHJhY3QgY3JlYXRlKC4uLmFyZ3M6YW55W10pOnRoaXM7XG5cbiAgYWJzdHJhY3Qgc2VsZWN0KGlkOm51bWJlciwgLi4uYXJnczphbnlbXSk6SW5wdXQ7XG4gIFxufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgU3RhbmRhcmRQYXJzZWFibGVJbnB1dCBleHRlbmRzIFNlcmlhbGl6YWJsZSB7XG4gIHByb3RlY3RlZCBfdHlwZU5hbWUgPSBcIlN0YW5kYXJkUGFyc2VhYmxlSW5wdXRcIjtcbiAgcHJvdGVjdGVkIF90eXBlSUQgPSB1bmRlZmluZWQ7XG5cbiAgc2VyaWFsaXplKGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpOm9iamVjdCB7XG4gICAgbGV0IGZpZWxkczpvYmplY3QgPSBzdXBlci5zZXJpYWxpemUoZW5jb2RpbmcpO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5maWVsZHMsXG4gICAgICBcImlucHV0XCI6IHRoaXMuaW5wdXQuc2VyaWFsaXplKGVuY29kaW5nKVxuICAgIH1cbiAgfTtcblxuICBwcm90ZWN0ZWQgaW5wdXQ6SW5wdXQ7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBmdW5jdGlvbiB1c2VkIHRvIHNvcnQgYW4gYXJyYXkgb2YgW1tTdGFuZGFyZFBhcnNlYWJsZUlucHV0XV1zXG4gICAqL1xuICBzdGF0aWMgY29tcGFyYXRvciA9ICgpOihhOlN0YW5kYXJkUGFyc2VhYmxlSW5wdXQsIGI6U3RhbmRhcmRQYXJzZWFibGVJbnB1dCkgPT4gKDF8LTF8MCkgPT4gKGE6U3RhbmRhcmRQYXJzZWFibGVJbnB1dCwgYjpTdGFuZGFyZFBhcnNlYWJsZUlucHV0KTooMXwtMXwwKSA9PiB7XG4gICAgY29uc3Qgc29ydGEgPSBhLnRvQnVmZmVyKCk7XG4gICAgY29uc3Qgc29ydGIgPSBiLnRvQnVmZmVyKCk7XG4gICAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHNvcnRhLCBzb3J0YikgYXMgKDF8LTF8MCk7XG4gIH07XG5cbiAgZ2V0SW5wdXQgPSAoKTpJbnB1dCA9PiB0aGlzLmlucHV0O1xuXG4gIC8vIG11c3QgYmUgaW1wbGVtZW50ZWQgdG8gc2VsZWN0IGlucHV0IHR5cGVzIGZvciB0aGUgVk0gaW4gcXVlc3Rpb25cbiAgYWJzdHJhY3QgZnJvbUJ1ZmZlcihieXRlczpCdWZmZXIsIG9mZnNldD86bnVtYmVyKTpudW1iZXI7IFxuXG4gIHRvQnVmZmVyKCk6QnVmZmVyIHtcbiAgICBjb25zdCBpbmJ1ZmY6QnVmZmVyID0gdGhpcy5pbnB1dC50b0J1ZmZlcigpO1xuICAgIGNvbnN0IGluaWQ6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDQpO1xuICAgIGluaWQud3JpdGVVSW50MzJCRSh0aGlzLmlucHV0LmdldElucHV0SUQoKSwgMCk7XG4gICAgY29uc3QgYmFycjpBcnJheTxCdWZmZXI+ID0gW2luaWQsIGluYnVmZl07XG4gICAgcmV0dXJuIEJ1ZmZlci5jb25jYXQoYmFyciwgaW5pZC5sZW5ndGggKyBpbmJ1ZmYubGVuZ3RoKTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIENsYXNzIHJlcHJlc2VudGluZyBhbiBbW1N0YW5kYXJkUGFyc2VhYmxlSW5wdXRdXSBmb3IgYSB0cmFuc2FjdGlvbi5cbiAgICogXG4gICAqIEBwYXJhbSBpbnB1dCBBIG51bWJlciByZXByZXNlbnRpbmcgdGhlIElucHV0SUQgb2YgdGhlIFtbU3RhbmRhcmRQYXJzZWFibGVJbnB1dF1dXG4gICAqL1xuICBjb25zdHJ1Y3RvcihpbnB1dDpJbnB1dCA9IHVuZGVmaW5lZCkge1xuICAgIHN1cGVyKCk7XG4gICAgaWYgKGlucHV0IGluc3RhbmNlb2YgSW5wdXQpIHtcbiAgICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFN0YW5kYXJkVHJhbnNmZXJhYmxlSW5wdXQgZXh0ZW5kcyBTdGFuZGFyZFBhcnNlYWJsZUlucHV0e1xuICBwcm90ZWN0ZWQgX3R5cGVOYW1lID0gXCJTdGFuZGFyZFRyYW5zZmVyYWJsZUlucHV0XCI7XG4gIHByb3RlY3RlZCBfdHlwZUlEID0gdW5kZWZpbmVkO1xuXG4gIHNlcmlhbGl6ZShlbmNvZGluZzpTZXJpYWxpemVkRW5jb2RpbmcgPSBcImhleFwiKTpvYmplY3Qge1xuICAgIGxldCBmaWVsZHM6b2JqZWN0ID0gc3VwZXIuc2VyaWFsaXplKGVuY29kaW5nKTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uZmllbGRzLFxuICAgICAgXCJ0eGlkXCI6IHNlcmlhbGl6ZXIuZW5jb2Rlcih0aGlzLnR4aWQsIGVuY29kaW5nLCBcIkJ1ZmZlclwiLCBcImNiNThcIiksXG4gICAgICBcIm91dHB1dGlkeFwiOiBzZXJpYWxpemVyLmVuY29kZXIodGhpcy5vdXRwdXRpZHgsIGVuY29kaW5nLCBcIkJ1ZmZlclwiLCBcImRlY2ltYWxTdHJpbmdcIiksXG4gICAgICBcImFzc2V0aWRcIjogc2VyaWFsaXplci5lbmNvZGVyKHRoaXMuYXNzZXRpZCwgZW5jb2RpbmcsIFwiQnVmZmVyXCIsIFwiY2I1OFwiKSxcbiAgICB9XG4gIH07XG4gIGRlc2VyaWFsaXplKGZpZWxkczpvYmplY3QsIGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICBzdXBlci5kZXNlcmlhbGl6ZShmaWVsZHMsIGVuY29kaW5nKTtcbiAgICB0aGlzLnR4aWQgPSBzZXJpYWxpemVyLmRlY29kZXIoZmllbGRzW1widHhpZFwiXSwgZW5jb2RpbmcsIFwiY2I1OFwiLCBcIkJ1ZmZlclwiLCAzMik7XG4gICAgdGhpcy5vdXRwdXRpZHggPSBzZXJpYWxpemVyLmRlY29kZXIoZmllbGRzW1wib3V0cHV0aWR4XCJdLCBlbmNvZGluZywgXCJkZWNpbWFsU3RyaW5nXCIsIFwiQnVmZmVyXCIsIDQpO1xuICAgIHRoaXMuYXNzZXRpZCA9IHNlcmlhbGl6ZXIuZGVjb2RlcihmaWVsZHNbXCJhc3NldGlkXCJdLCBlbmNvZGluZywgXCJjYjU4XCIsIFwiQnVmZmVyXCIsIDMyKTtcbiAgICAvL2lucHV0IGRlc2VyaWFsaXphdGlvbiBtdXN0IGJlIGltcGxtZW50ZWQgaW4gY2hpbGQgY2xhc3Nlc1xuICB9XG5cbiAgcHJvdGVjdGVkIHR4aWQ6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDMyKTtcbiAgcHJvdGVjdGVkIG91dHB1dGlkeDpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoNCk7XG4gIHByb3RlY3RlZCBhc3NldGlkOkJ1ZmZlciA9IEJ1ZmZlci5hbGxvYygzMik7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBvZiB0aGUgVHhJRC5cbiAgICovXG4gIGdldFR4SUQgPSAoKVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICA6QnVmZmVyID0+IHRoaXMudHhpZDtcblxuICAvKipcbiAgICogUmV0dXJucyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9ICBvZiB0aGUgT3V0cHV0SWR4LlxuICAgKi9cbiAgZ2V0T3V0cHV0SWR4ID0gKClcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgOkJ1ZmZlciA9PiB0aGlzLm91dHB1dGlkeDtcblxuICAvKipcbiAgICogUmV0dXJucyBhIGJhc2UtNTggc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBVVFhPSUQgdGhpcyBbW1N0YW5kYXJkVHJhbnNmZXJhYmxlSW5wdXRdXSByZWZlcmVuY2VzLlxuICAgKi9cbiAgZ2V0VVRYT0lEID0gKCk6c3RyaW5nID0+IGJpbnRvb2xzLmJ1ZmZlclRvQjU4KEJ1ZmZlci5jb25jYXQoW3RoaXMudHhpZCwgdGhpcy5vdXRwdXRpZHhdKSk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGlucHV0LlxuICAgKi9cbiAgZ2V0SW5wdXQgPSAoKTpJbnB1dCA9PiB0aGlzLmlucHV0O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBhc3NldElEIG9mIHRoZSBpbnB1dC5cbiAgICovXG4gIGdldEFzc2V0SUQgPSAoKTpCdWZmZXIgPT4gdGhpcy5hc3NldGlkO1xuXG4gIGFic3RyYWN0IGZyb21CdWZmZXIoYnl0ZXM6QnVmZmVyLCBvZmZzZXQ/Om51bWJlcik6bnVtYmVyOyBcblxuICAvKipcbiAgICogUmV0dXJucyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBbW1N0YW5kYXJkVHJhbnNmZXJhYmxlSW5wdXRdXS5cbiAgICovXG4gIHRvQnVmZmVyKCk6QnVmZmVyIHtcbiAgICBjb25zdCBwYXJzZWFibGVCdWZmOkJ1ZmZlciA9IHN1cGVyLnRvQnVmZmVyKCk7XG4gICAgY29uc3QgYnNpemU6bnVtYmVyID0gdGhpcy50eGlkLmxlbmd0aCArIHRoaXMub3V0cHV0aWR4Lmxlbmd0aCArIHRoaXMuYXNzZXRpZC5sZW5ndGggKyBwYXJzZWFibGVCdWZmLmxlbmd0aDtcbiAgICBjb25zdCBiYXJyOkFycmF5PEJ1ZmZlcj4gPSBbdGhpcy50eGlkLCB0aGlzLm91dHB1dGlkeCwgdGhpcy5hc3NldGlkLCBwYXJzZWFibGVCdWZmXTtcbiAgICBjb25zdCBidWZmOiBCdWZmZXIgPSBCdWZmZXIuY29uY2F0KGJhcnIsIGJzaXplKTtcbiAgICByZXR1cm4gYnVmZjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgYmFzZS01OCByZXByZXNlbnRhdGlvbiBvZiB0aGUgW1tTdGFuZGFyZFRyYW5zZmVyYWJsZUlucHV0XV0uXG4gICAqL1xuICB0b1N0cmluZygpOnN0cmluZyB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICByZXR1cm4gYmludG9vbHMuYnVmZmVyVG9CNTgodGhpcy50b0J1ZmZlcigpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGFzcyByZXByZXNlbnRpbmcgYW4gW1tTdGFuZGFyZFRyYW5zZmVyYWJsZUlucHV0XV0gZm9yIGEgdHJhbnNhY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB0eGlkIEEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gY29udGFpbmluZyB0aGUgdHJhbnNhY3Rpb24gSUQgb2YgdGhlIHJlZmVyZW5jZWQgVVRYT1xuICAgKiBAcGFyYW0gb3V0cHV0aWR4IEEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gY29udGFpbmluZyB0aGUgaW5kZXggb2YgdGhlIG91dHB1dCBpbiB0aGUgdHJhbnNhY3Rpb24gY29uc3VtZWQgaW4gdGhlIFtbU3RhbmRhcmRUcmFuc2ZlcmFibGVJbnB1dF1dXG4gICAqIEBwYXJhbSBhc3NldElEIEEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gcmVwcmVzZW50aW5nIHRoZSBhc3NldElEIG9mIHRoZSBbW0lucHV0XV1cbiAgICogQHBhcmFtIGlucHV0IEFuIFtbSW5wdXRdXSB0byBiZSBtYWRlIHRyYW5zZmVyYWJsZVxuICAgKi9cbiAgY29uc3RydWN0b3IodHhpZDpCdWZmZXIgPSB1bmRlZmluZWQsIG91dHB1dGlkeDpCdWZmZXIgPSB1bmRlZmluZWQsIGFzc2V0SUQ6QnVmZmVyID0gdW5kZWZpbmVkLCBpbnB1dDpJbnB1dCA9IHVuZGVmaW5lZCkge1xuICAgIHN1cGVyKCk7XG4gICAgaWYgKHR5cGVvZiB0eGlkICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygb3V0cHV0aWR4ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgYXNzZXRJRCAhPT0gJ3VuZGVmaW5lZCcgJiYgaW5wdXQgaW5zdGFuY2VvZiBJbnB1dCkge1xuICAgICAgdGhpcy5pbnB1dCA9IGlucHV0O1xuICAgICAgdGhpcy50eGlkID0gdHhpZDtcbiAgICAgIHRoaXMub3V0cHV0aWR4ID0gb3V0cHV0aWR4O1xuICAgICAgdGhpcy5hc3NldGlkID0gYXNzZXRJRDtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBbiBbW0lucHV0XV0gY2xhc3Mgd2hpY2ggc3BlY2lmaWVzIGEgdG9rZW4gYW1vdW50IC5cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFN0YW5kYXJkQW1vdW50SW5wdXQgZXh0ZW5kcyBJbnB1dCB7XG4gIHByb3RlY3RlZCBfdHlwZU5hbWUgPSBcIlN0YW5kYXJkQW1vdW50SW5wdXRcIjtcbiAgcHJvdGVjdGVkIF90eXBlSUQgPSB1bmRlZmluZWQ7XG5cbiAgc2VyaWFsaXplKGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpOm9iamVjdCB7XG4gICAgbGV0IGZpZWxkczpvYmplY3QgPSBzdXBlci5zZXJpYWxpemUoZW5jb2RpbmcpO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5maWVsZHMsXG4gICAgICBcImFtb3VudFwiOiBzZXJpYWxpemVyLmVuY29kZXIodGhpcy5hbW91bnQsIGVuY29kaW5nLCBcIkJ1ZmZlclwiLCBcImRlY2ltYWxTdHJpbmdcIiwgOClcbiAgICB9XG4gIH07XG4gIGRlc2VyaWFsaXplKGZpZWxkczpvYmplY3QsIGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICBzdXBlci5kZXNlcmlhbGl6ZShmaWVsZHMsIGVuY29kaW5nKTtcbiAgICB0aGlzLmFtb3VudCA9IHNlcmlhbGl6ZXIuZGVjb2RlcihmaWVsZHNbXCJhbW91bnRcIl0sIGVuY29kaW5nLCBcImRlY2ltYWxTdHJpbmdcIiwgXCJCdWZmZXJcIiwgOCk7XG4gICAgdGhpcy5hbW91bnRWYWx1ZSA9IGJpbnRvb2xzLmZyb21CdWZmZXJUb0JOKHRoaXMuYW1vdW50KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhbW91bnQ6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDgpO1xuICBwcm90ZWN0ZWQgYW1vdW50VmFsdWU6Qk4gPSBuZXcgQk4oMCk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFtb3VudCBhcyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59LlxuICAgKi9cbiAgZ2V0QW1vdW50ID0gKCk6Qk4gPT4gdGhpcy5hbW91bnRWYWx1ZS5jbG9uZSgpO1xuXG4gIC8qKlxuICAgKiBQb3B1YXRlcyB0aGUgaW5zdGFuY2UgZnJvbSBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHJlcHJlc2VudGluZyB0aGUgW1tBbW91bnRJbnB1dF1dIGFuZCByZXR1cm5zIHRoZSBzaXplIG9mIHRoZSBpbnB1dC5cbiAgICovXG4gIGZyb21CdWZmZXIoYnl0ZXM6QnVmZmVyLCBvZmZzZXQ6bnVtYmVyID0gMCk6bnVtYmVyIHtcbiAgICB0aGlzLmFtb3VudCA9IGJpbnRvb2xzLmNvcHlGcm9tKGJ5dGVzLCBvZmZzZXQsIG9mZnNldCArIDgpO1xuICAgIHRoaXMuYW1vdW50VmFsdWUgPSBiaW50b29scy5mcm9tQnVmZmVyVG9CTih0aGlzLmFtb3VudCk7XG4gICAgb2Zmc2V0ICs9IDg7XG4gICAgcmV0dXJuIHN1cGVyLmZyb21CdWZmZXIoYnl0ZXMsIG9mZnNldCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYnVmZmVyIHJlcHJlc2VudGluZyB0aGUgW1tBbW91bnRJbnB1dF1dIGluc3RhbmNlLlxuICAgKi9cbiAgdG9CdWZmZXIoKTpCdWZmZXIge1xuICAgIGNvbnN0IHN1cGVyYnVmZjpCdWZmZXIgPSBzdXBlci50b0J1ZmZlcigpO1xuICAgIGNvbnN0IGJzaXplOm51bWJlciA9IHRoaXMuYW1vdW50Lmxlbmd0aCArIHN1cGVyYnVmZi5sZW5ndGg7XG4gICAgY29uc3QgYmFycjpBcnJheTxCdWZmZXI+ID0gW3RoaXMuYW1vdW50LCBzdXBlcmJ1ZmZdO1xuICAgIHJldHVybiBCdWZmZXIuY29uY2F0KGJhcnIsIGJzaXplKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBbW0Ftb3VudElucHV0XV0gY2xhc3Mgd2hpY2ggaXNzdWVzIGEgcGF5bWVudCBvbiBhbiBhc3NldElELlxuICAgKlxuICAgKiBAcGFyYW0gYW1vdW50IEEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2JuLmpzL3xCTn0gcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgaW4gdGhlIGlucHV0XG4gICAqL1xuICBjb25zdHJ1Y3RvcihhbW91bnQ6Qk4gPSB1bmRlZmluZWQpIHtcbiAgICBzdXBlcigpO1xuICAgIGlmIChhbW91bnQpIHtcbiAgICAgIHRoaXMuYW1vdW50VmFsdWUgPSBhbW91bnQuY2xvbmUoKTtcbiAgICAgIHRoaXMuYW1vdW50ID0gYmludG9vbHMuZnJvbUJOVG9CdWZmZXIoYW1vdW50LCA4KTtcbiAgICB9XG4gIH1cbn0iXX0=","\"use strict\";\n/**\n * @packageDocumentation\n * @module Common-AssetAmount\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StandardAssetAmountDestination = exports.AssetAmount = void 0;\nconst buffer_1 = require(\"buffer/\");\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\n/**\n * Class for managing asset amounts in the UTXOSet fee calcuation\n */\nclass AssetAmount {\n    constructor(assetID, amount, burn) {\n        // assetID that is amount is managing.\n        this.assetID = buffer_1.Buffer.alloc(32);\n        // amount of this asset that should be sent.\n        this.amount = new bn_js_1.default(0);\n        // burn is the amount of this asset that should be burned.\n        this.burn = new bn_js_1.default(0);\n        // spent is the total amount of this asset that has been consumed.\n        this.spent = new bn_js_1.default(0);\n        // stakeableLockSpent is the amount of this asset that has been consumed that\n        // was locked.\n        this.stakeableLockSpent = new bn_js_1.default(0);\n        // change is the excess amount of this asset that was consumed over the amount\n        // requested to be consumed(amount + burn).\n        this.change = new bn_js_1.default(0);\n        // stakeableLockChange is a flag to mark if the input that generated the\n        // change was locked.\n        this.stakeableLockChange = false;\n        // finished is a convenience flag to track \"spent >= amount + burn\"\n        this.finished = false;\n        this.getAssetID = () => {\n            return this.assetID;\n        };\n        this.getAssetIDString = () => {\n            return this.assetID.toString(\"hex\");\n        };\n        this.getAmount = () => {\n            return this.amount;\n        };\n        this.getSpent = () => {\n            return this.spent;\n        };\n        this.getBurn = () => {\n            return this.burn;\n        };\n        this.getChange = () => {\n            return this.change;\n        };\n        this.getStakeableLockSpent = () => {\n            return this.stakeableLockSpent;\n        };\n        this.getStakeableLockChange = () => {\n            return this.stakeableLockChange;\n        };\n        this.isFinished = () => {\n            return this.finished;\n        };\n        // spendAmount should only be called if this asset is still awaiting more\n        // funds to consume.\n        this.spendAmount = (amt, stakeableLocked = false) => {\n            if (this.finished) {\n                /* istanbul ignore next */\n                throw new Error('Error - AssetAmount.spendAmount: attempted to spend '\n                    + 'excess funds');\n            }\n            this.spent = this.spent.add(amt);\n            if (stakeableLocked) {\n                this.stakeableLockSpent = this.stakeableLockSpent.add(amt);\n            }\n            const total = this.amount.add(this.burn);\n            if (this.spent.gte(total)) {\n                this.change = this.spent.sub(total);\n                if (stakeableLocked) {\n                    this.stakeableLockChange = true;\n                }\n                this.finished = true;\n            }\n            return this.finished;\n        };\n        this.assetID = assetID;\n        this.amount = typeof amount === \"undefined\" ? new bn_js_1.default(0) : amount;\n        this.burn = typeof burn === \"undefined\" ? new bn_js_1.default(0) : burn;\n        this.spent = new bn_js_1.default(0);\n        this.stakeableLockSpent = new bn_js_1.default(0);\n        this.stakeableLockChange = false;\n    }\n}\nexports.AssetAmount = AssetAmount;\nclass StandardAssetAmountDestination {\n    constructor(destinations, senders, changeAddresses) {\n        this.amounts = [];\n        this.destinations = [];\n        this.senders = [];\n        this.changeAddresses = [];\n        this.amountkey = {};\n        this.inputs = [];\n        this.outputs = [];\n        this.change = [];\n        // TODO: should this function allow for repeated calls with the same\n        //       assetID?\n        this.addAssetAmount = (assetID, amount, burn) => {\n            let aa = new AssetAmount(assetID, amount, burn);\n            this.amounts.push(aa);\n            this.amountkey[aa.getAssetIDString()] = aa;\n        };\n        this.addInput = (input) => {\n            this.inputs.push(input);\n        };\n        this.addOutput = (output) => {\n            this.outputs.push(output);\n        };\n        this.addChange = (output) => {\n            this.change.push(output);\n        };\n        this.getAmounts = () => {\n            return this.amounts;\n        };\n        this.getDestinations = () => {\n            return this.destinations;\n        };\n        this.getSenders = () => {\n            return this.senders;\n        };\n        this.getChangeAddresses = () => {\n            return this.changeAddresses;\n        };\n        this.getAssetAmount = (assetHexStr) => {\n            return this.amountkey[assetHexStr];\n        };\n        this.assetExists = (assetHexStr) => {\n            return (assetHexStr in this.amountkey);\n        };\n        this.getInputs = () => {\n            return this.inputs;\n        };\n        this.getOutputs = () => {\n            return this.outputs;\n        };\n        this.getChangeOutputs = () => {\n            return this.change;\n        };\n        this.getAllOutputs = () => {\n            return this.outputs.concat(this.change);\n        };\n        this.canComplete = () => {\n            for (let i = 0; i < this.amounts.length; i++) {\n                if (!this.amounts[i].isFinished()) {\n                    return false;\n                }\n            }\n            return true;\n        };\n        this.destinations = destinations;\n        this.changeAddresses = changeAddresses;\n        this.senders = senders;\n    }\n}\nexports.StandardAssetAmountDestination = StandardAssetAmountDestination;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzZXRhbW91bnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tbW9uL2Fzc2V0YW1vdW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7Ozs7OztBQUVILG9DQUFpQztBQUNqQyxrREFBdUI7QUFJdkI7O0dBRUc7QUFDSCxNQUFhLFdBQVc7SUFvRnRCLFlBQVksT0FBZSxFQUFFLE1BQVUsRUFBRSxJQUFRO1FBbkZqRCxzQ0FBc0M7UUFDNUIsWUFBTyxHQUFXLGVBQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDN0MsNENBQTRDO1FBQ2xDLFdBQU0sR0FBTyxJQUFJLGVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQywwREFBMEQ7UUFDaEQsU0FBSSxHQUFPLElBQUksZUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRS9CLGtFQUFrRTtRQUN4RCxVQUFLLEdBQU8sSUFBSSxlQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDaEMsNkVBQTZFO1FBQzdFLGNBQWM7UUFDSix1QkFBa0IsR0FBTyxJQUFJLGVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUU3Qyw4RUFBOEU7UUFDOUUsMkNBQTJDO1FBQ2pDLFdBQU0sR0FBTyxJQUFJLGVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQyx3RUFBd0U7UUFDeEUscUJBQXFCO1FBQ1gsd0JBQW1CLEdBQVksS0FBSyxDQUFDO1FBRS9DLG1FQUFtRTtRQUN6RCxhQUFRLEdBQVksS0FBSyxDQUFDO1FBRXBDLGVBQVUsR0FBRyxHQUFXLEVBQUU7WUFDeEIsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQ3RCLENBQUMsQ0FBQTtRQUVELHFCQUFnQixHQUFHLEdBQVcsRUFBRTtZQUM5QixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3RDLENBQUMsQ0FBQTtRQUVELGNBQVMsR0FBRyxHQUFP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QUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQztRQUNqQyxJQUFJLENBQUMsZUFBZSxHQUFHLGVBQWUsQ0FBQztRQUN2QyxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztJQUN6QixDQUFDO0NBRUY7QUF0RkQsd0VBc0ZDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqIEBtb2R1bGUgQ29tbW9uLUFzc2V0QW1vdW50XG4gKi9cblxuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyLyc7XG5pbXBvcnQgQk4gZnJvbSAnYm4uanMnO1xuaW1wb3J0IHsgU3RhbmRhcmRUcmFuc2ZlcmFibGVPdXRwdXQgfSBmcm9tICcuL291dHB1dCc7XG5pbXBvcnQgeyBTdGFuZGFyZFRyYW5zZmVyYWJsZUlucHV0IH0gZnJvbSAnLi9pbnB1dCc7XG5cbi8qKlxuICogQ2xhc3MgZm9yIG1hbmFnaW5nIGFzc2V0IGFtb3VudHMgaW4gdGhlIFVUWE9TZXQgZmVlIGNhbGN1YXRpb25cbiAqL1xuZXhwb3J0IGNsYXNzIEFzc2V0QW1vdW50IHtcbiAgLy8gYXNzZXRJRCB0aGF0IGlzIGFtb3VudCBpcyBtYW5hZ2luZy5cbiAgcHJvdGVjdGVkIGFzc2V0SUQ6IEJ1ZmZlciA9IEJ1ZmZlci5hbGxvYygzMik7XG4gIC8vIGFtb3VudCBvZiB0aGlzIGFzc2V0IHRoYXQgc2hvdWxkIGJlIHNlbnQuXG4gIHByb3RlY3RlZCBhbW91bnQ6IEJOID0gbmV3IEJOKDApO1xuICAvLyBidXJuIGlzIHRoZSBhbW91bnQgb2YgdGhpcyBhc3NldCB0aGF0IHNob3VsZCBiZSBidXJuZWQuXG4gIHByb3RlY3RlZCBidXJuOiBCTiA9IG5ldyBCTigwKTtcblxuICAvLyBzcGVudCBpcyB0aGUgdG90YWwgYW1vdW50IG9mIHRoaXMgYXNzZXQgdGhhdCBoYXMgYmVlbiBjb25zdW1lZC5cbiAgcHJvdGVjdGVkIHNwZW50OiBCTiA9IG5ldyBCTigwKTtcbiAgLy8gc3Rha2VhYmxlTG9ja1NwZW50IGlzIHRoZSBhbW91bnQgb2YgdGhpcyBhc3NldCB0aGF0IGhhcyBiZWVuIGNvbnN1bWVkIHRoYXRcbiAgLy8gd2FzIGxvY2tlZC5cbiAgcHJvdGVjdGVkIHN0YWtlYWJsZUxvY2tTcGVudDogQk4gPSBuZXcgQk4oMCk7XG5cbiAgLy8gY2hhbmdlIGlzIHRoZSBleGNlc3MgYW1vdW50IG9mIHRoaXMgYXNzZXQgdGhhdCB3YXMgY29uc3VtZWQgb3ZlciB0aGUgYW1vdW50XG4gIC8vIHJlcXVlc3RlZCB0byBiZSBjb25zdW1lZChhbW91bnQgKyBidXJuKS5cbiAgcHJvdGVjdGVkIGNoYW5nZTogQk4gPSBuZXcgQk4oMCk7XG4gIC8vIHN0YWtlYWJsZUxvY2tDaGFuZ2UgaXMgYSBmbGFnIHRvIG1hcmsgaWYgdGhlIGlucHV0IHRoYXQgZ2VuZXJhdGVkIHRoZVxuICAvLyBjaGFuZ2Ugd2FzIGxvY2tlZC5cbiAgcHJvdGVjdGVkIHN0YWtlYWJsZUxvY2tDaGFuZ2U6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAvLyBmaW5pc2hlZCBpcyBhIGNvbnZlbmllbmNlIGZsYWcgdG8gdHJhY2sgXCJzcGVudCA+PSBhbW91bnQgKyBidXJuXCJcbiAgcHJvdGVjdGVkIGZpbmlzaGVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgZ2V0QXNzZXRJRCA9ICgpOiBCdWZmZXIgPT4ge1xuICAgIHJldHVybiB0aGlzLmFzc2V0SUQ7XG4gIH1cblxuICBnZXRBc3NldElEU3RyaW5nID0gKCk6IHN0cmluZyA9PiB7XG4gICAgcmV0dXJuIHRoaXMuYXNzZXRJRC50b1N0cmluZyhcImhleFwiKTtcbiAgfVxuXG4gIGdldEFtb3VudCA9ICgpOiBCTiA9PiB7XG4gICAgcmV0dXJuIHRoaXMuYW1vdW50XG4gIH1cblxuICBnZXRTcGVudCA9ICgpOiBCTiA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3BlbnQ7XG4gIH1cblxuICBnZXRCdXJuID0gKCk6IEJOID0+IHtcbiAgICByZXR1cm4gdGhpcy5idXJuO1xuICB9XG5cbiAgZ2V0Q2hhbmdlID0gKCk6IEJOID0+IHtcbiAgICByZXR1cm4gdGhpcy5jaGFuZ2U7XG4gIH1cblxuICBnZXRTdGFrZWFibGVMb2NrU3BlbnQgPSAoKTogQk4gPT4ge1xuICAgIHJldHVybiB0aGlzLnN0YWtlYWJsZUxvY2tTcGVudDtcbiAgfVxuXG4gIGdldFN0YWtlYWJsZUxvY2tDaGFuZ2UgPSAoKTogYm9vbGVhbiA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc3Rha2VhYmxlTG9ja0NoYW5nZTtcbiAgfVxuXG4gIGlzRmluaXNoZWQgPSAoKTogYm9vbGVhbiA9PiB7XG4gICAgcmV0dXJuIHRoaXMuZmluaXNoZWQ7XG4gIH1cblxuICAvLyBzcGVuZEFtb3VudCBzaG91bGQgb25seSBiZSBjYWxsZWQgaWYgdGhpcyBhc3NldCBpcyBzdGlsbCBhd2FpdGluZyBtb3JlXG4gIC8vIGZ1bmRzIHRvIGNvbnN1bWUuXG4gIHNwZW5kQW1vdW50ID0gKGFtdDogQk4sIHN0YWtlYWJsZUxvY2tlZDogYm9vbGVhbiA9IGZhbHNlKTogYm9vbGVhbiA9PiB7XG4gICAgaWYgKHRoaXMuZmluaXNoZWQpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIC0gQXNzZXRBbW91bnQuc3BlbmRBbW91bnQ6IGF0dGVtcHRlZCB0byBzcGVuZCAnXG4gICAgICAgICsgJ2V4Y2VzcyBmdW5kcycpO1xuICAgIH1cbiAgICB0aGlzLnNwZW50ID0gdGhpcy5zcGVudC5hZGQoYW10KTtcbiAgICBpZiAoc3Rha2VhYmxlTG9ja2VkKSB7XG4gICAgICB0aGlzLnN0YWtlYWJsZUxvY2tTcGVudCA9IHRoaXMuc3Rha2VhYmxlTG9ja1NwZW50LmFkZChhbXQpO1xuICAgIH1cblxuICAgIGNvbnN0IHRvdGFsOiBCTiA9IHRoaXMuYW1vdW50LmFkZCh0aGlzLmJ1cm4pO1xuICAgIGlmICh0aGlzLnNwZW50Lmd0ZSh0b3RhbCkpIHtcbiAgICAgIHRoaXMuY2hhbmdlID0gdGhpcy5zcGVudC5zdWIodG90YWwpO1xuICAgICAgaWYgKHN0YWtlYWJsZUxvY2tlZCkge1xuICAgICAgICB0aGlzLnN0YWtlYWJsZUxvY2tDaGFuZ2UgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5maW5pc2hlZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZpbmlzaGVkO1xuICB9XG5cbiAgY29uc3RydWN0b3IoYXNzZXRJRDogQnVmZmVyLCBhbW91bnQ6IEJOLCBidXJuOiBCTikge1xuICAgIHRoaXMuYXNzZXRJRCA9IGFzc2V0SUQ7XG4gICAgdGhpcy5hbW91bnQgPSB0eXBlb2YgYW1vdW50ID09PSBcInVuZGVmaW5lZFwiID8gbmV3IEJOKDApIDogYW1vdW50O1xuICAgIHRoaXMuYnVybiA9IHR5cGVvZiBidXJuID09PSBcInVuZGVmaW5lZFwiID8gbmV3IEJOKDApIDogYnVybjtcbiAgICB0aGlzLnNwZW50ID0gbmV3IEJOKDApO1xuICAgIHRoaXMuc3Rha2VhYmxlTG9ja1NwZW50ID0gbmV3IEJOKDApO1xuICAgIHRoaXMuc3Rha2VhYmxlTG9ja0NoYW5nZSA9IGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTdGFuZGFyZEFzc2V0QW1vdW50RGVzdGluYXRpb248VE8gZXh0ZW5kcyBTdGFuZGFyZFRyYW5zZmVyYWJsZU91dHB1dCwgVEkgZXh0ZW5kcyBTdGFuZGFyZFRyYW5zZmVyYWJsZUlucHV0PiAge1xuICBwcm90ZWN0ZWQgYW1vdW50czogQXJyYXk8QXNzZXRBbW91bnQ+ID0gW107XG4gIHByb3RlY3RlZCBkZXN0aW5hdGlvbnM6IEFycmF5PEJ1ZmZlcj4gPSBbXTtcbiAgcHJvdGVjdGVkIHNlbmRlcnM6IEFycmF5PEJ1ZmZlcj4gPSBbXTtcbiAgcHJvdGVjdGVkIGNoYW5nZUFkZHJlc3NlczogQXJyYXk8QnVmZmVyPiA9IFtdO1xuICBwcm90ZWN0ZWQgYW1vdW50a2V5OiBvYmplY3QgPSB7fTtcbiAgcHJvdGVjdGVkIGlucHV0czogQXJyYXk8VEk+ID0gW107XG4gIHByb3RlY3RlZCBvdXRwdXRzOiBBcnJheTxUTz4gPSBbXTtcbiAgcHJvdGVjdGVkIGNoYW5nZTogQXJyYXk8VE8+ID0gW107XG5cbiAgLy8gVE9ETzogc2hvdWxkIHRoaXMgZnVuY3Rpb24gYWxsb3cgZm9yIHJlcGVhdGVkIGNhbGxzIHdpdGggdGhlIHNhbWVcbiAgLy8gICAgICAgYXNzZXRJRD9cbiAgYWRkQXNzZXRBbW91bnQgPSAoYXNzZXRJRDogQnVmZmVyLCBhbW91bnQ6IEJOLCBidXJuOiBCTikgPT4ge1xuICAgIGxldCBhYTogQXNzZXRBbW91bnQgPSBuZXcgQXNzZXRBbW91bnQoYXNzZXRJRCwgYW1vdW50LCBidXJuKTtcbiAgICB0aGlzLmFtb3VudHMucHVzaChhYSk7XG4gICAgdGhpcy5hbW91bnRrZXlbYWEuZ2V0QXNzZXRJRFN0cmluZygpXSA9IGFhO1xuICB9XG5cbiAgYWRkSW5wdXQgPSAoaW5wdXQ6IFRJKSA9PiB7XG4gICAgdGhpcy5pbnB1dHMucHVzaChpbnB1dCk7XG4gIH1cblxuICBhZGRPdXRwdXQgPSAob3V0cHV0OiBUTykgPT4ge1xuICAgIHRoaXMub3V0cHV0cy5wdXNoKG91dHB1dCk7XG4gIH1cblxuICBhZGRDaGFuZ2UgPSAob3V0cHV0OiBUTykgPT4ge1xuICAgIHRoaXMuY2hhbmdlLnB1c2gob3V0cHV0KTtcbiAgfVxuXG4gIGdldEFtb3VudHMgPSAoKTogQXJyYXk8QXNzZXRBbW91bnQ+ID0+IHtcbiAgICByZXR1cm4gdGhpcy5hbW91bnRzO1xuICB9XG5cbiAgZ2V0RGVzdGluYXRpb25zID0gKCk6IEFycmF5PEJ1ZmZlcj4gPT4ge1xuICAgIHJldHVybiB0aGlzLmRlc3RpbmF0aW9ucztcbiAgfVxuXG4gIGdldFNlbmRlcnMgPSAoKTogQXJyYXk8QnVmZmVyPiA9PiB7XG4gICAgcmV0dXJuIHRoaXMuc2VuZGVycztcbiAgfVxuXG4gIGdldENoYW5nZUFkZHJlc3NlcyA9ICgpOiBBcnJheTxCdWZmZXI+ID0+IHtcbiAgICByZXR1cm4gdGhpcy5jaGFuZ2VBZGRyZXNzZXM7XG4gIH1cblxuICBnZXRBc3NldEFtb3VudCA9IChhc3NldEhleFN0cjogc3RyaW5nKTogQXNzZXRBbW91bnQgPT4ge1xuICAgIHJldHVybiB0aGlzLmFtb3VudGtleVthc3NldEhleFN0cl07XG4gIH1cblxuICBhc3NldEV4aXN0cyA9IChhc3NldEhleFN0cjogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gICAgcmV0dXJuIChhc3NldEhleFN0ciBpbiB0aGlzLmFtb3VudGtleSk7XG4gIH1cblxuICBnZXRJbnB1dHMgPSAoKTogQXJyYXk8VEk+ID0+IHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dHM7XG4gIH1cblxuICBnZXRPdXRwdXRzID0gKCk6IEFycmF5PFRPPiA9PiB7XG4gICAgcmV0dXJuIHRoaXMub3V0cHV0cztcbiAgfVxuXG4gIGdldENoYW5nZU91dHB1dHMgPSAoKTogQXJyYXk8VE8+ID0+IHtcbiAgICByZXR1cm4gdGhpcy5jaGFuZ2U7XG4gIH1cblxuICBnZXRBbGxPdXRwdXRzID0gKCk6IEFycmF5PFRPPiA9PiB7XG4gICAgcmV0dXJuIHRoaXMub3V0cHV0cy5jb25jYXQodGhpcy5jaGFuZ2UpO1xuICB9XG5cbiAgY2FuQ29tcGxldGUgPSAoKTogYm9vbGVhbiA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFtb3VudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghdGhpcy5hbW91bnRzW2ldLmlzRmluaXNoZWQoKSkge1xuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihkZXN0aW5hdGlvbnM6IEFycmF5PEJ1ZmZlcj4sIHNlbmRlcnM6IEFycmF5PEJ1ZmZlcj4sIGNoYW5nZUFkZHJlc3NlczogQXJyYXk8QnVmZmVyPikge1xuICAgIHRoaXMuZGVzdGluYXRpb25zID0gZGVzdGluYXRpb25zO1xuICAgIHRoaXMuY2hhbmdlQWRkcmVzc2VzID0gY2hhbmdlQWRkcmVzc2VzO1xuICAgIHRoaXMuc2VuZGVycyA9IHNlbmRlcnM7XG4gIH1cblxufSJdfQ==","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KeyChain = exports.KeyPair = void 0;\nconst bintools_1 = __importDefault(require(\"../../utils/bintools\"));\nconst secp256k1_1 = require(\"../../common/secp256k1\");\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\n/**\n * Class for representing a private and public keypair on the Platform Chain.\n */\nclass KeyPair extends secp256k1_1.SECP256k1KeyPair {\n    constructor(hrp, chainid) {\n        super();\n        this.chainid = '';\n        this.hrp = '';\n        /**\n         * Returns the address's string representation.\n         *\n         * @returns A string representation of the address\n         */\n        this.getAddressString = () => {\n            const addr = this.addressFromPublicKey(this.pubk);\n            return bintools.addressToString(this.hrp, this.chainid, addr);\n        };\n        /**\n           * Returns the chainID associated with this key.\n           *\n           * @returns The [[KeyPair]]'s chainID\n           */\n        this.getChainID = () => this.chainid;\n        /**\n         * Sets the the chainID associated with this key.\n         *\n         * @param chainid String for the chainID\n         */\n        this.setChainID = (chainid) => {\n            this.chainid = chainid;\n        };\n        /**\n         * Returns the Human-Readable-Part of the network associated with this key.\n         *\n         * @returns The [[KeyPair]]'s Human-Readable-Part of the network's Bech32 addressing scheme\n         */\n        this.getHRP = () => this.hrp;\n        /**\n         * Sets the the Human-Readable-Part of the network associated with this key.\n         *\n         * @param hrp String for the Human-Readable-Part of Bech32 addresses\n         */\n        this.setHRP = (hrp) => {\n            this.hrp = hrp;\n        };\n        this.chainid = chainid;\n        this.hrp = hrp;\n        this.generateKey();\n    }\n    clone() {\n        let newkp = new KeyPair(this.hrp, this.chainid);\n        newkp.importKey(bintools.copyFrom(this.getPrivateKey()));\n        return newkp;\n    }\n    create(...args) {\n        if (args.length == 2) {\n            return new KeyPair(args[0], args[1]);\n        }\n        return new KeyPair(this.hrp, this.chainid);\n    }\n}\nexports.KeyPair = KeyPair;\n/**\n * Class for representing a key chain in Avalanche.\n *\n * @typeparam KeyPair Class extending [[KeyPair]] which is used as the key in [[KeyChain]]\n */\nclass KeyChain extends secp256k1_1.SECP256k1KeyChain {\n    /**\n     * Returns instance of KeyChain.\n     */\n    constructor(hrp, chainid) {\n        super();\n        this.hrp = '';\n        this.chainid = '';\n        /**\n         * Makes a new key pair, returns the address.\n         *\n         * @returns The new key pair\n         */\n        this.makeKey = () => {\n            let keypair = new KeyPair(this.hrp, this.chainid);\n            this.addKey(keypair);\n            return keypair;\n        };\n        this.addKey = (newKey) => {\n            newKey.setChainID(this.chainid);\n            super.addKey(newKey);\n        };\n        /**\n         * Given a private key, makes a new key pair, returns the address.\n         *\n         * @param privk A {@link https://github.com/feross/buffer|Buffer} or cb58 serialized string representing the private key\n         *\n         * @returns The new key pair\n         */\n        this.importKey = (privk) => {\n            let keypair = new KeyPair(this.hrp, this.chainid);\n            let pk;\n            if (typeof privk === 'string') {\n                pk = bintools.cb58Decode(privk.split('-')[1]);\n            }\n            else {\n                pk = bintools.copyFrom(privk);\n            }\n            keypair.importKey(pk);\n            if (!(keypair.getAddress().toString(\"hex\") in this.keys)) {\n                this.addKey(keypair);\n            }\n            return keypair;\n        };\n        this.hrp = hrp;\n        this.chainid = chainid;\n    }\n    create(...args) {\n        if (args.length == 2) {\n            return new KeyChain(args[0], args[1]);\n        }\n        return new KeyChain(this.hrp, this.chainid);\n    }\n    ;\n    clone() {\n        const newkc = new KeyChain(this.hrp, this.chainid);\n        for (let k in this.keys) {\n            newkc.addKey(this.keys[k].clone());\n        }\n        return newkc;\n    }\n    ;\n    union(kc) {\n        let newkc = kc.clone();\n        for (let k in this.keys) {\n            newkc.addKey(this.keys[k].clone());\n        }\n        return newkc;\n    }\n}\nexports.KeyChain = KeyChain;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoia2V5Y2hhaW4uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvYXBpcy9wbGF0Zm9ybXZtL2tleWNoYWluLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUtBLG9FQUE0QztBQUM1QyxzREFBNkU7QUFFN0U7O0dBRUc7QUFDSCxNQUFNLFFBQVEsR0FBYSxrQkFBUSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBR2xEOztHQUVHO0FBQ0gsTUFBYSxPQUFRLFNBQVEsNEJBQWdCO0lBNkR6QyxZQUFZLEdBQVUsRUFBRSxPQUFjO1FBQ2xDLEtBQUssRUFBRSxDQUFDO1FBNURGLFlBQU8sR0FBVSxFQUFFLENBQUM7UUFDcEIsUUFBRyxHQUFVLEVBQUUsQ0FBQztRQUUxQjs7OztXQUlHO1FBQ0gscUJBQWdCLEdBQUcsR0FBVSxFQUFFO1lBQzNCLE1BQU0sSUFBSSxHQUFVLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDekQsT0FBTyxRQUFRLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNsRSxDQUFDLENBQUE7UUFFRDs7OzthQUlLO1FBQ0wsZUFBVSxHQUFHLEdBQVUsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7UUFFdkM7Ozs7V0FJRztRQUNILGVBQVUsR0FBRyxDQUFDLE9BQWMsRUFBTyxFQUFFO1lBQ2pDLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1FBQzNCLENBQUMsQ0FBQztRQUdGOzs7O1dBSUc7UUFDSCxXQUFNLEdBQUcsR0FBVSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUUvQjs7OztXQUlHO1FBQ0gsV0FBTSxHQUFHLENBQUMsR0FBVSxFQUFPLEVBQUU7WUFDM0IsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDakIsQ0FBQyxDQUFDO1FB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QUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBUyxDQUFDO1NBQ2pEO1FBQ0QsT0FBTyxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQVMsQ0FBQztJQUN4RCxDQUFDO0lBQUEsQ0FBQztJQUVGLEtBQUs7UUFDRCxNQUFNLEtBQUssR0FBWSxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM1RCxLQUFJLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUM7WUFDbkIsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7U0FDdEM7UUFDRCxPQUFPLEtBQWEsQ0FBQztJQUN6QixDQUFDO0lBQUEsQ0FBQztJQUVGLEtBQUssQ0FBQyxFQUFPO1FBQ1QsSUFBSSxLQUFLLEdBQVksRUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ2hDLEtBQUksSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksRUFBQztZQUNuQixLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztTQUN0QztRQUNELE9BQU8sS0FBYSxDQUFDO0lBQ3pCLENBQUM7Q0FVSjtBQTFFRCw0QkEwRUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICogQG1vZHVsZSBBUEktUGxhdGZvcm1WTS1LZXlDaGFpblxuICovXG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tIFwiYnVmZmVyL1wiO1xuaW1wb3J0IEJpblRvb2xzIGZyb20gJy4uLy4uL3V0aWxzL2JpbnRvb2xzJztcbmltcG9ydCB7IFNFQ1AyNTZrMUtleUNoYWluLCBTRUNQMjU2azFLZXlQYWlyIH0gZnJvbSAnLi4vLi4vY29tbW9uL3NlY3AyNTZrMSc7XG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5jb25zdCBiaW50b29sczogQmluVG9vbHMgPSBCaW5Ub29scy5nZXRJbnN0YW5jZSgpO1xuXG5cbi8qKlxuICogQ2xhc3MgZm9yIHJlcHJlc2VudGluZyBhIHByaXZhdGUgYW5kIHB1YmxpYyBrZXlwYWlyIG9uIHRoZSBQbGF0Zm9ybSBDaGFpbi4gXG4gKi9cbmV4cG9ydCBjbGFzcyBLZXlQYWlyIGV4dGVuZHMgU0VDUDI1NmsxS2V5UGFpciB7XG5cbiAgICBwcm90ZWN0ZWQgY2hhaW5pZDpzdHJpbmcgPSAnJztcbiAgICBwcm90ZWN0ZWQgaHJwOnN0cmluZyA9ICcnO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYWRkcmVzcydzIHN0cmluZyByZXByZXNlbnRhdGlvbi5cbiAgICAgKiBcbiAgICAgKiBAcmV0dXJucyBBIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgYWRkcmVzc1xuICAgICAqL1xuICAgIGdldEFkZHJlc3NTdHJpbmcgPSAoKTpzdHJpbmcgPT4ge1xuICAgICAgICBjb25zdCBhZGRyOkJ1ZmZlciA9IHRoaXMuYWRkcmVzc0Zyb21QdWJsaWNLZXkodGhpcy5wdWJrKTtcbiAgICAgICAgcmV0dXJuIGJpbnRvb2xzLmFkZHJlc3NUb1N0cmluZyh0aGlzLmhycCwgdGhpcy5jaGFpbmlkLCBhZGRyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgICAqIFJldHVybnMgdGhlIGNoYWluSUQgYXNzb2NpYXRlZCB3aXRoIHRoaXMga2V5LlxuICAgICAgICpcbiAgICAgICAqIEByZXR1cm5zIFRoZSBbW0tleVBhaXJdXSdzIGNoYWluSURcbiAgICAgICAqL1xuICAgIGdldENoYWluSUQgPSAoKTpzdHJpbmcgPT4gdGhpcy5jaGFpbmlkO1xuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdGhlIGNoYWluSUQgYXNzb2NpYXRlZCB3aXRoIHRoaXMga2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGNoYWluaWQgU3RyaW5nIGZvciB0aGUgY2hhaW5JRFxuICAgICAqL1xuICAgIHNldENoYWluSUQgPSAoY2hhaW5pZDpzdHJpbmcpOnZvaWQgPT4ge1xuICAgICAgICB0aGlzLmNoYWluaWQgPSBjaGFpbmlkO1xuICAgIH07XG4gICAgXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBIdW1hbi1SZWFkYWJsZS1QYXJ0IG9mIHRoZSBuZXR3b3JrIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGtleS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBbW0tleVBhaXJdXSdzIEh1bWFuLVJlYWRhYmxlLVBhcnQgb2YgdGhlIG5ldHdvcmsncyBCZWNoMzIgYWRkcmVzc2luZyBzY2hlbWVcbiAgICAgKi9cbiAgICBnZXRIUlAgPSAoKTpzdHJpbmcgPT4gdGhpcy5ocnA7XG4gIFxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHRoZSBIdW1hbi1SZWFkYWJsZS1QYXJ0IG9mIHRoZSBuZXR3b3JrIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGtleS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBocnAgU3RyaW5nIGZvciB0aGUgSHVtYW4tUmVhZGFibGUtUGFydCBvZiBCZWNoMzIgYWRkcmVzc2VzXG4gICAgICovXG4gICAgc2V0SFJQID0gKGhycDpzdHJpbmcpOnZvaWQgPT4ge1xuICAgICAgdGhpcy5ocnAgPSBocnA7XG4gICAgfTtcblxuICAgIGNsb25lKCk6dGhpcyB7XG4gICAgICAgIGxldCBuZXdrcDpLZXlQYWlyID0gbmV3IEtleVBhaXIodGhpcy5ocnAsIHRoaXMuY2hhaW5pZCk7XG4gICAgICAgIG5ld2twLmltcG9ydEtleShiaW50b29scy5jb3B5RnJvbSh0aGlzLmdldFByaXZhdGVLZXkoKSkpO1xuICAgICAgICByZXR1cm4gbmV3a3AgYXMgdGhpcztcbiAgICB9XG5cbiAgICBjcmVhdGUoLi4uYXJnczphbnlbXSk6dGhpcyB7XG4gICAgICAgIGlmKGFyZ3MubGVuZ3RoID09IDIpe1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBLZXlQYWlyKGFyZ3NbMF0sIGFyZ3NbMV0pIGFzIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBLZXlQYWlyKHRoaXMuaHJwLCB0aGlzLmNoYWluaWQpIGFzIHRoaXM7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoaHJwOnN0cmluZywgY2hhaW5pZDpzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jaGFpbmlkID0gY2hhaW5pZDtcbiAgICAgICAgdGhpcy5ocnAgPSBocnA7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVLZXkoKTtcbiAgICB9XG4gICAgXG59XG5cbi8qKlxuICogQ2xhc3MgZm9yIHJlcHJlc2VudGluZyBhIGtleSBjaGFpbiBpbiBBdmFsYW5jaGUuIFxuICogXG4gKiBAdHlwZXBhcmFtIEtleVBhaXIgQ2xhc3MgZXh0ZW5kaW5nIFtbS2V5UGFpcl1dIHdoaWNoIGlzIHVzZWQgYXMgdGhlIGtleSBpbiBbW0tleUNoYWluXV1cbiAqL1xuZXhwb3J0IGNsYXNzIEtleUNoYWluIGV4dGVuZHMgU0VDUDI1NmsxS2V5Q2hhaW48S2V5UGFpcj4ge1xuXG4gICAgaHJwOnN0cmluZyA9ICcnO1xuICAgIGNoYWluaWQ6c3RyaW5nID0gJyc7XG5cbiAgICAvKipcbiAgICAgKiBNYWtlcyBhIG5ldyBrZXkgcGFpciwgcmV0dXJucyB0aGUgYWRkcmVzcy5cbiAgICAgKiBcbiAgICAgKiBAcmV0dXJucyBUaGUgbmV3IGtleSBwYWlyXG4gICAgICovXG4gICAgbWFrZUtleSA9ICgpOktleVBhaXIgPT4ge1xuICAgICAgICBsZXQga2V5cGFpcjpLZXlQYWlyID0gbmV3IEtleVBhaXIodGhpcy5ocnAsIHRoaXMuY2hhaW5pZCk7XG4gICAgICAgIHRoaXMuYWRkS2V5KGtleXBhaXIpO1xuICAgICAgICByZXR1cm4ga2V5cGFpcjtcbiAgICB9XG5cbiAgICBhZGRLZXkgPSAobmV3S2V5OktleVBhaXIpID0+IHtcbiAgICAgICAgbmV3S2V5LnNldENoYWluSUQodGhpcy5jaGFpbmlkKTtcbiAgICAgICAgc3VwZXIuYWRkS2V5KG5ld0tleSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSBwcml2YXRlIGtleSwgbWFrZXMgYSBuZXcga2V5IHBhaXIsIHJldHVybnMgdGhlIGFkZHJlc3MuXG4gICAgICogXG4gICAgICogQHBhcmFtIHByaXZrIEEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gb3IgY2I1OCBzZXJpYWxpemVkIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHByaXZhdGUga2V5IFxuICAgICAqIFxuICAgICAqIEByZXR1cm5zIFRoZSBuZXcga2V5IHBhaXJcbiAgICAgKi9cbiAgICBpbXBvcnRLZXkgPSAocHJpdms6QnVmZmVyIHwgc3RyaW5nKTpLZXlQYWlyID0+IHtcbiAgICAgICAgbGV0IGtleXBhaXI6S2V5UGFpciA9IG5ldyBLZXlQYWlyKHRoaXMuaHJwLCB0aGlzLmNoYWluaWQpO1xuICAgICAgICBsZXQgcGs6QnVmZmVyO1xuICAgICAgICBpZih0eXBlb2YgcHJpdmsgPT09ICdzdHJpbmcnKXtcbiAgICAgICAgICAgIHBrID0gYmludG9vbHMuY2I1OERlY29kZShwcml2ay5zcGxpdCgnLScpWzFdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBrID0gYmludG9vbHMuY29weUZyb20ocHJpdmspO1xuICAgICAgICB9XG4gICAgICAgIGtleXBhaXIuaW1wb3J0S2V5KHBrKTtcbiAgICAgICAgaWYoIShrZXlwYWlyLmdldEFkZHJlc3MoKS50b1N0cmluZyhcImhleFwiKSBpbiB0aGlzLmtleXMpKXtcbiAgICAgICAgICAgIHRoaXMuYWRkS2V5KGtleXBhaXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBrZXlwYWlyO1xuICAgIH1cblxuICAgIGNyZWF0ZSguLi5hcmdzOmFueVtdKTp0aGlzIHtcbiAgICAgICAgaWYoYXJncy5sZW5ndGggPT0gMil7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEtleUNoYWluKGFyZ3NbMF0sIGFyZ3NbMV0pIGFzIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBLZXlDaGFpbih0aGlzLmhycCwgdGhpcy5jaGFpbmlkKSBhcyB0aGlzO1xuICAgIH07XG5cbiAgICBjbG9uZSgpOnRoaXMge1xuICAgICAgICBjb25zdCBuZXdrYzpLZXlDaGFpbiA9IG5ldyBLZXlDaGFpbih0aGlzLmhycCwgdGhpcy5jaGFpbmlkKTtcbiAgICAgICAgZm9yKGxldCBrIGluIHRoaXMua2V5cyl7XG4gICAgICAgICAgICBuZXdrYy5hZGRLZXkodGhpcy5rZXlzW2tdLmNsb25lKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdrYyBhcyB0aGlzO1xuICAgIH07XG5cbiAgICB1bmlvbihrYzp0aGlzKTp0aGlzIHtcbiAgICAgICAgbGV0IG5ld2tjOktleUNoYWluID0ga2MuY2xvbmUoKTtcbiAgICAgICAgZm9yKGxldCBrIGluIHRoaXMua2V5cyl7XG4gICAgICAgICAgICBuZXdrYy5hZGRLZXkodGhpcy5rZXlzW2tdLmNsb25lKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdrYyBhcyB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgaW5zdGFuY2Ugb2YgS2V5Q2hhaW4uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoaHJwOnN0cmluZywgY2hhaW5pZDpzdHJpbmcpe1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmhycCA9IGhycDtcbiAgICAgICAgdGhpcy5jaGFpbmlkID0gY2hhaW5pZDtcbiAgICB9XG59Il19","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StakeableLockIn = exports.SECPTransferInput = exports.AmountInput = exports.TransferableInput = exports.ParseableInput = exports.SelectInputClass = void 0;\n/**\n * @packageDocumentation\n * @module API-PlatformVM-Inputs\n */\nconst buffer_1 = require(\"buffer/\");\nconst bintools_1 = __importDefault(require(\"../../utils/bintools\"));\nconst constants_1 = require(\"./constants\");\nconst input_1 = require(\"../../common/input\");\nconst serialization_1 = require(\"../../utils/serialization\");\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\nconst serializer = serialization_1.Serialization.getInstance();\n/**\n * Takes a buffer representing the output and returns the proper [[Input]] instance.\n *\n * @param inputid A number representing the inputID parsed prior to the bytes passed in\n *\n * @returns An instance of an [[Input]]-extended class.\n */\nexports.SelectInputClass = (inputid, ...args) => {\n    if (inputid === constants_1.PlatformVMConstants.SECPINPUTID) {\n        return new SECPTransferInput(...args);\n    }\n    else if (inputid === constants_1.PlatformVMConstants.STAKEABLELOCKINID) {\n        return new StakeableLockIn(...args);\n    }\n    /* istanbul ignore next */\n    throw new Error(`Error - SelectInputClass: unknown inputid ${inputid}`);\n};\nclass ParseableInput extends input_1.StandardParseableInput {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"ParseableInput\";\n        this._typeID = undefined;\n    }\n    //serialize is inherited\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.input = exports.SelectInputClass(fields[\"input\"][\"_typeID\"]);\n        this.input.deserialize(fields[\"input\"], encoding);\n    }\n    fromBuffer(bytes, offset = 0) {\n        const inputid = bintools.copyFrom(bytes, offset, offset + 4).readUInt32BE(0);\n        offset += 4;\n        this.input = exports.SelectInputClass(inputid);\n        return this.input.fromBuffer(bytes, offset);\n    }\n}\nexports.ParseableInput = ParseableInput;\nclass TransferableInput extends input_1.StandardTransferableInput {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"TransferableInput\";\n        this._typeID = undefined;\n    }\n    //serialize is inherited\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.input = exports.SelectInputClass(fields[\"input\"][\"_typeID\"]);\n        this.input.deserialize(fields[\"input\"], encoding);\n    }\n    /**\n     * Takes a {@link https://github.com/feross/buffer|Buffer} containing a [[TransferableInput]], parses it, populates the class, and returns the length of the [[TransferableInput]] in bytes.\n     *\n     * @param bytes A {@link https://github.com/feross/buffer|Buffer} containing a raw [[TransferableInput]]\n     *\n     * @returns The length of the raw [[TransferableInput]]\n     */\n    fromBuffer(bytes, offset = 0) {\n        this.txid = bintools.copyFrom(bytes, offset, offset + 32);\n        offset += 32;\n        this.outputidx = bintools.copyFrom(bytes, offset, offset + 4);\n        offset += 4;\n        this.assetid = bintools.copyFrom(bytes, offset, offset + constants_1.PlatformVMConstants.ASSETIDLEN);\n        offset += 32;\n        const inputid = bintools.copyFrom(bytes, offset, offset + 4).readUInt32BE(0);\n        offset += 4;\n        this.input = exports.SelectInputClass(inputid);\n        return this.input.fromBuffer(bytes, offset);\n    }\n}\nexports.TransferableInput = TransferableInput;\nclass AmountInput extends input_1.StandardAmountInput {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"AmountInput\";\n        this._typeID = undefined;\n    }\n    //serialize and deserialize both are inherited\n    select(id, ...args) {\n        return exports.SelectInputClass(id, ...args);\n    }\n}\nexports.AmountInput = AmountInput;\nclass SECPTransferInput extends AmountInput {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"SECPTransferInput\";\n        this._typeID = constants_1.PlatformVMConstants.SECPINPUTID;\n        this.getCredentialID = () => constants_1.PlatformVMConstants.SECPCREDENTIAL;\n    }\n    //serialize and deserialize both are inherited\n    /**\n     * Returns the inputID for this input\n     */\n    getInputID() {\n        return this._typeID;\n    }\n    create(...args) {\n        return new SECPTransferInput(...args);\n    }\n    clone() {\n        const newout = this.create();\n        newout.fromBuffer(this.toBuffer());\n        return newout;\n    }\n}\nexports.SECPTransferInput = SECPTransferInput;\n/**\n * An [[Input]] class which specifies an input that has a locktime which can also enable staking of the value held, preventing transfers but not validation.\n */\nclass StakeableLockIn extends AmountInput {\n    /**\n     * A [[Output]] class which specifies an [[Input]] that has a locktime which can also enable staking of the value held, preventing transfers but not validation.\n     *\n     * @param amount A {@link https://github.com/indutny/bn.js/|BN} representing the amount in the input\n     * @param stakeableLocktime A {@link https://github.com/indutny/bn.js/|BN} representing the stakeable locktime\n     * @param transferableInput A [[ParseableInput]] which is embedded into this input.\n     */\n    constructor(amount = undefined, stakeableLocktime = undefined, transferableInput = undefined) {\n        super(amount);\n        this._typeName = \"StakeableLockIn\";\n        this._typeID = constants_1.PlatformVMConstants.STAKEABLELOCKINID;\n        this.getCredentialID = () => constants_1.PlatformVMConstants.SECPCREDENTIAL;\n        if (typeof stakeableLocktime !== \"undefined\") {\n            this.stakeableLocktime = bintools.fromBNToBuffer(stakeableLocktime, 8);\n        }\n        if (typeof transferableInput !== \"undefined\") {\n            this.transferableInput = transferableInput;\n            this.synchronize();\n        }\n    }\n    //serialize and deserialize both are inherited\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        let outobj = Object.assign(Object.assign({}, fields), { \"stakeableLocktime\": serializer.encoder(this.stakeableLocktime, encoding, \"Buffer\", \"decimalString\", 8), \"transferableInput\": this.transferableInput.serialize(encoding) });\n        delete outobj[\"sigIdxs\"];\n        delete outobj[\"sigCount\"];\n        delete outobj[\"amount\"];\n        return outobj;\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        fields[\"sigIdxs\"] = [];\n        fields[\"sigCount\"] = \"0\";\n        fields[\"amount\"] = \"98\";\n        super.deserialize(fields, encoding);\n        this.stakeableLocktime = serializer.decoder(fields[\"stakeableLocktime\"], encoding, \"decimalString\", \"Buffer\", 8);\n        this.transferableInput = new ParseableInput();\n        this.transferableInput.deserialize(fields[\"transferableInput\"], encoding);\n        this.synchronize();\n    }\n    synchronize() {\n        let input = this.transferableInput.getInput();\n        this.sigIdxs = input.getSigIdxs();\n        this.sigCount = buffer_1.Buffer.alloc(4);\n        this.sigCount.writeUInt32BE(this.sigIdxs.length, 0);\n        this.amount = bintools.fromBNToBuffer(input.getAmount(), 8);\n        this.amountValue = input.getAmount();\n    }\n    getStakeableLocktime() {\n        return bintools.fromBufferToBN(this.stakeableLocktime);\n    }\n    getTransferablInput() {\n        return this.transferableInput;\n    }\n    /**\n     * Returns the inputID for this input\n     */\n    getInputID() {\n        return this._typeID;\n    }\n    /**\n     * Popuates the instance from a {@link https://github.com/feross/buffer|Buffer} representing the [[StakeableLockIn]] and returns the size of the output.\n     */\n    fromBuffer(bytes, offset = 0) {\n        this.stakeableLocktime = bintools.copyFrom(bytes, offset, offset + 8);\n        offset += 8;\n        this.transferableInput = new ParseableInput();\n        offset = this.transferableInput.fromBuffer(bytes, offset);\n        this.synchronize();\n        return offset;\n    }\n    /**\n     * Returns the buffer representing the [[StakeableLockIn]] instance.\n     */\n    toBuffer() {\n        const xferinBuff = this.transferableInput.toBuffer();\n        const bsize = this.stakeableLocktime.length + xferinBuff.length;\n        const barr = [this.stakeableLocktime, xferinBuff];\n        return buffer_1.Buffer.concat(barr, bsize);\n    }\n    create(...args) {\n        return new StakeableLockIn(...args);\n    }\n    clone() {\n        const newout = this.create();\n        newout.fromBuffer(this.toBuffer());\n        return newout;\n    }\n    select(id, ...args) {\n        return exports.SelectInputClass(id, ...args);\n    }\n}\nexports.StakeableLockIn = StakeableLockIn;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXRzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2FwaXMvcGxhdGZvcm12bS9pbnB1dHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7OztHQUdHO0FBQ0gsb0NBQWlDO0FBQ2pDLG9FQUE0QztBQUM1QywyQ0FBa0Q7QUFDbEQsOENBQW1IO0FBQ25ILDZEQUE4RTtBQUc5RTs7R0FFRztBQUNILE1BQU0sUUFBUSxHQUFHLGtCQUFRLENBQUMsV0FBVyxFQUFFLENBQUM7QUFDeEMsTUFBTSxVQUFVLEdBQUcsNkJBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUUvQzs7Ozs7O0dBTUc7QUFDVSxRQUFBLGdCQUFnQixHQUFHLENBQUMsT0FBYyxFQUFFLEdBQUcsSUFBZSxFQUFRLEVBQUU7SUFDM0UsSUFBSSxPQUFPLEtBQUssK0JBQW1CLENBQUMsV0FBVyxFQUFFO1FBQy9DLE9BQU8sSUFBSSxpQkFBaUIsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO0tBQ3ZDO1NBQU0sSUFBSSxPQUFPLEtBQUssK0JBQW1CLENBQUMsaUJBQWlCLEVBQUU7UUFDNUQsT0FBTyxJQUFJLGVBQWUsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO0tBQ3JDO0lBQ0QsMEJBQTBCO0lBQzFCLE1BQU0sSUFBSSxLQUFLLENBQUMsNkNBQTZDLE9BQU8sRUFBRSxDQUFDLENBQUM7QUFDMUUsQ0FBQyxDQUFDO0FBRUYsTUFBYSxjQUFlLFNBQVEsOEJBQXNCO0lBQTFEOztRQUNZLGNBQVMsR0FBRyxnQkFBZ0IsQ0FBQztRQUM3QixZQUFPLEdBQUcsU0FBUyxDQUFDO0lBZ0JoQyxDQUFDO0lBZEMsd0JBQXdCO0lBRXhCLFdBQVcsQ0FBQyxNQUFhLEVBQUUsV0FBOEIsS0FBSztRQUM1RCxLQUFLLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQztRQUNwQyxJQUFJLENBQUMsS0FBSyxHQUFHLHdCQUFnQixDQUFDLE1B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QzlDLE1BQU0sR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztRQUMxRCxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDbkIsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQUVEOztPQUVHO0lBQ0gsUUFBUTtRQUNOLE1BQU0sVUFBVSxHQUFVLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUM1RCxNQUFNLEtBQUssR0FBVSxJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTSxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUM7UUFDdkUsTUFBTSxJQUFJLEdBQWlCLENBQUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQ2hFLE9BQU8sZUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVELE1BQU0sQ0FBQyxHQUFHLElBQVU7UUFDbEIsT0FBTyxJQUFJLGVBQWUsQ0FBQyxHQUFHLElBQUksQ0FBUyxDQUFDO0lBQzlDLENBQUM7SUFFRCxLQUFLO1FBQ0gsTUFBTSxNQUFNLEdBQW1CLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQTtRQUM1QyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1FBQ25DLE9BQU8sTUFBYyxDQUFDO0lBQ3hCLENBQUM7SUFFRCxNQUFNLENBQUMsRUFBUyxFQUFFLEdBQUcsSUFBVztRQUM5QixPQUFPLHdCQUFnQixDQUFDLEVBQUUsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7Q0FtQkY7QUE5R0QsMENBOEdDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqIEBtb2R1bGUgQVBJLVBsYXRmb3JtVk0tSW5wdXRzXG4gKi9cbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ2J1ZmZlci8nO1xuaW1wb3J0IEJpblRvb2xzIGZyb20gJy4uLy4uL3V0aWxzL2JpbnRvb2xzJztcbmltcG9ydCB7IFBsYXRmb3JtVk1Db25zdGFudHMgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBJbnB1dCwgU3RhbmRhcmRUcmFuc2ZlcmFibGVJbnB1dCwgU3RhbmRhcmRBbW91bnRJbnB1dCwgU3RhbmRhcmRQYXJzZWFibGVJbnB1dCB9IGZyb20gJy4uLy4uL2NvbW1vbi9pbnB1dCc7XG5pbXBvcnQgeyBTZXJpYWxpemF0aW9uLCBTZXJpYWxpemVkRW5jb2RpbmcgfSBmcm9tICcuLi8uLi91dGlscy9zZXJpYWxpemF0aW9uJztcbmltcG9ydCBCTiBmcm9tICdibi5qcyc7XG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5jb25zdCBiaW50b29scyA9IEJpblRvb2xzLmdldEluc3RhbmNlKCk7XG5jb25zdCBzZXJpYWxpemVyID0gU2VyaWFsaXphdGlvbi5nZXRJbnN0YW5jZSgpO1xuXG4vKipcbiAqIFRha2VzIGEgYnVmZmVyIHJlcHJlc2VudGluZyB0aGUgb3V0cHV0IGFuZCByZXR1cm5zIHRoZSBwcm9wZXIgW1tJbnB1dF1dIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSBpbnB1dGlkIEEgbnVtYmVyIHJlcHJlc2VudGluZyB0aGUgaW5wdXRJRCBwYXJzZWQgcHJpb3IgdG8gdGhlIGJ5dGVzIHBhc3NlZCBpblxuICpcbiAqIEByZXR1cm5zIEFuIGluc3RhbmNlIG9mIGFuIFtbSW5wdXRdXS1leHRlbmRlZCBjbGFzcy5cbiAqL1xuZXhwb3J0IGNvbnN0IFNlbGVjdElucHV0Q2xhc3MgPSAoaW5wdXRpZDpudW1iZXIsIC4uLmFyZ3M6QXJyYXk8YW55Pik6SW5wdXQgPT4ge1xuICBpZiAoaW5wdXRpZCA9PT0gUGxhdGZvcm1WTUNvbnN0YW50cy5TRUNQSU5QVVRJRCkge1xuICAgIHJldHVybiBuZXcgU0VDUFRyYW5zZmVySW5wdXQoLi4uYXJncyk7XG4gIH0gZWxzZSBpZiAoaW5wdXRpZCA9PT0gUGxhdGZvcm1WTUNvbnN0YW50cy5TVEFLRUFCTEVMT0NLSU5JRCkge1xuICAgIHJldHVybiBuZXcgU3Rha2VhYmxlTG9ja0luKC4uLmFyZ3MpO1xuICB9XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIHRocm93IG5ldyBFcnJvcihgRXJyb3IgLSBTZWxlY3RJbnB1dENsYXNzOiB1bmtub3duIGlucHV0aWQgJHtpbnB1dGlkfWApO1xufTtcblxuZXhwb3J0IGNsYXNzIFBhcnNlYWJsZUlucHV0IGV4dGVuZHMgU3RhbmRhcmRQYXJzZWFibGVJbnB1dHtcbiAgcHJvdGVjdGVkIF90eXBlTmFtZSA9IFwiUGFyc2VhYmxlSW5wdXRcIjtcbiAgcHJvdGVjdGVkIF90eXBlSUQgPSB1bmRlZmluZWQ7XG5cbiAgLy9zZXJpYWxpemUgaXMgaW5oZXJpdGVkXG5cbiAgZGVzZXJpYWxpemUoZmllbGRzOm9iamVjdCwgZW5jb2Rpbmc6U2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIikge1xuICAgIHN1cGVyLmRlc2VyaWFsaXplKGZpZWxkcywgZW5jb2RpbmcpO1xuICAgIHRoaXMuaW5wdXQgPSBTZWxlY3RJbnB1dENsYXNzKGZpZWxkc1tcImlucHV0XCJdW1wiX3R5cGVJRFwiXSk7XG4gICAgdGhpcy5pbnB1dC5kZXNlcmlhbGl6ZShmaWVsZHNbXCJpbnB1dFwiXSwgZW5jb2RpbmcpO1xuICB9XG5cbiAgZnJvbUJ1ZmZlcihieXRlczpCdWZmZXIsIG9mZnNldDpudW1iZXIgPSAwKTpudW1iZXIge1xuICAgIGNvbnN0IGlucHV0aWQ6bnVtYmVyID0gYmludG9vbHMuY29weUZyb20oYnl0ZXMsIG9mZnNldCwgb2Zmc2V0ICsgNCkucmVhZFVJbnQzMkJFKDApO1xuICAgIG9mZnNldCArPSA0O1xuICAgIHRoaXMuaW5wdXQgPSBTZWxlY3RJbnB1dENsYXNzKGlucHV0aWQpO1xuICAgIHJldHVybiB0aGlzLmlucHV0LmZyb21CdWZmZXIoYnl0ZXMsIG9mZnNldCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRyYW5zZmVyYWJsZUlucHV0IGV4dGVuZHMgU3RhbmRhcmRUcmFuc2ZlcmFibGVJbnB1dCB7XG4gIHByb3RlY3RlZCBfdHlwZU5hbWUgPSBcIlRyYW5zZmVyYWJsZUlucHV0XCI7XG4gIHByb3RlY3RlZCBfdHlwZUlEID0gdW5kZWZpbmVkO1xuXG4gIC8vc2VyaWFsaXplIGlzIGluaGVyaXRlZFxuXG4gIGRlc2VyaWFsaXplKGZpZWxkczpvYmplY3QsIGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICBzdXBlci5kZXNlcmlhbGl6ZShmaWVsZHMsIGVuY29kaW5nKTtcbiAgICB0aGlzLmlucHV0ID0gU2VsZWN0SW5wdXRDbGFzcyhmaWVsZHNbXCJpbnB1dFwiXVtcIl90eXBlSURcIl0pO1xuICAgIHRoaXMuaW5wdXQuZGVzZXJpYWxpemUoZmllbGRzW1wiaW5wdXRcIl0sIGVuY29kaW5nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUYWtlcyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IGNvbnRhaW5pbmcgYSBbW1RyYW5zZmVyYWJsZUlucHV0XV0sIHBhcnNlcyBpdCwgcG9wdWxhdGVzIHRoZSBjbGFzcywgYW5kIHJldHVybnMgdGhlIGxlbmd0aCBvZiB0aGUgW1tUcmFuc2ZlcmFibGVJbnB1dF1dIGluIGJ5dGVzLlxuICAgKlxuICAgKiBAcGFyYW0gYnl0ZXMgQSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBjb250YWluaW5nIGEgcmF3IFtbVHJhbnNmZXJhYmxlSW5wdXRdXVxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgbGVuZ3RoIG9mIHRoZSByYXcgW1tUcmFuc2ZlcmFibGVJbnB1dF1dXG4gICAqL1xuICBmcm9tQnVmZmVyKGJ5dGVzOkJ1ZmZlciwgb2Zmc2V0Om51bWJlciA9IDApOm51bWJlciB7XG4gICAgdGhpcy50eGlkID0gYmludG9vbHMuY29weUZyb20oYnl0ZXMsIG9mZnNldCwgb2Zmc2V0ICsgMzIpO1xuICAgIG9mZnNldCArPSAzMjtcbiAgICB0aGlzLm91dHB1dGlkeCA9IGJpbnRvb2xzLmNvcHlGcm9tKGJ5dGVzLCBvZmZzZXQsIG9mZnNldCArIDQpO1xuICAgIG9mZnNldCArPSA0O1xuICAgIHRoaXMuYXNzZXRpZCA9IGJpbnRvb2xzLmNvcHlGcm9tKGJ5dGVzLCBvZmZzZXQsIG9mZnNldCArIFBsYXRmb3JtVk1Db25zdGFudHMuQVNTRVRJRExFTik7XG4gICAgb2Zmc2V0ICs9IDMyO1xuICAgIGNvbnN0IGlucHV0aWQ6bnVtYmVyID0gYmludG9vbHMuY29weUZyb20oYnl0ZXMsIG9mZnNldCwgb2Zmc2V0ICsgNCkucmVhZFVJbnQzMkJFKDApO1xuICAgIG9mZnNldCArPSA0O1xuICAgIHRoaXMuaW5wdXQgPSBTZWxlY3RJbnB1dENsYXNzKGlucHV0aWQpO1xuICAgIHJldHVybiB0aGlzLmlucHV0LmZyb21CdWZmZXIoYnl0ZXMsIG9mZnNldCk7XG4gIH1cblxufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQW1vdW50SW5wdXQgZXh0ZW5kcyBTdGFuZGFyZEFtb3VudElucHV0IHtcbiAgcHJvdGVjdGVkIF90eXBlTmFtZSA9IFwiQW1vdW50SW5wdXRcIjtcbiAgcHJvdGVjdGVkIF90eXBlSUQgPSB1bmRlZmluZWQ7XG5cbiAgLy9zZXJpYWxpemUgYW5kIGRlc2VyaWFsaXplIGJvdGggYXJlIGluaGVyaXRlZFxuXG4gIHNlbGVjdChpZDpudW1iZXIsIC4uLmFyZ3M6IGFueVtdKTpJbnB1dCB7XG4gICAgcmV0dXJuIFNlbGVjdElucHV0Q2xhc3MoaWQsIC4uLmFyZ3MpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTRUNQVHJhbnNmZXJJbnB1dCBleHRlbmRzIEFtb3VudElucHV0IHtcbiAgcHJvdGVjdGVkIF90eXBlTmFtZSA9IFwiU0VDUFRyYW5zZmVySW5wdXRcIjtcbiAgcHJvdGVjdGVkIF90eXBlSUQgPSBQbGF0Zm9ybVZNQ29uc3RhbnRzLlNFQ1BJTlBVVElEO1xuXG4gIC8vc2VyaWFsaXplIGFuZCBkZXNlcmlhbGl6ZSBib3RoIGFyZSBpbmhlcml0ZWRcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgaW5wdXRJRCBmb3IgdGhpcyBpbnB1dFxuICAgKi9cbiAgZ2V0SW5wdXRJRCgpOm51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3R5cGVJRDtcbiAgfVxuXG4gIGdldENyZWRlbnRpYWxJRCA9ICgpOm51bWJlciA9PiBQbGF0Zm9ybVZNQ29uc3RhbnRzLlNFQ1BDUkVERU5USUFMO1xuXG4gIGNyZWF0ZSguLi5hcmdzOmFueVtdKTp0aGlze1xuICAgIHJldHVybiBuZXcgU0VDUFRyYW5zZmVySW5wdXQoLi4uYXJncykgYXMgdGhpcztcbiAgfVxuXG4gIGNsb25lKCk6dGhpcyB7XG4gICAgY29uc3QgbmV3b3V0OlNFQ1BUcmFuc2ZlcklucHV0ID0gdGhpcy5jcmVhdGUoKVxuICAgIG5ld291dC5mcm9tQnVmZmVyKHRoaXMudG9CdWZmZXIoKSk7XG4gICAgcmV0dXJuIG5ld291dCBhcyB0aGlzO1xuICB9XG5cbn1cblxuLyoqXG4gKiBBbiBbW0lucHV0XV0gY2xhc3Mgd2hpY2ggc3BlY2lmaWVzIGFuIGlucHV0IHRoYXQgaGFzIGEgbG9ja3RpbWUgd2hpY2ggY2FuIGFsc28gZW5hYmxlIHN0YWtpbmcgb2YgdGhlIHZhbHVlIGhlbGQsIHByZXZlbnRpbmcgdHJhbnNmZXJzIGJ1dCBub3QgdmFsaWRhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0YWtlYWJsZUxvY2tJbiBleHRlbmRzIEFtb3VudElucHV0IHtcbiAgcHJvdGVjdGVkIF90eXBlTmFtZSA9IFwiU3Rha2VhYmxlTG9ja0luXCI7XG4gIHByb3RlY3RlZCBfdHlwZUlEID0gUGxhdGZvcm1WTUNvbnN0YW50cy5TVEFLRUFCTEVMT0NLSU5JRDtcblxuICAvL3NlcmlhbGl6ZSBhbmQgZGVzZXJpYWxpemUgYm90aCBhcmUgaW5oZXJpdGVkXG5cbiAgc2VyaWFsaXplKGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpOm9iamVjdCB7XG4gICAgbGV0IGZpZWxkczpvYmplY3QgPSBzdXBlci5zZXJpYWxpemUoZW5jb2RpbmcpO1xuICAgIGxldCBvdXRvYmo6b2JqZWN0ID0ge1xuICAgICAgLi4uZmllbGRzLFxuICAgICAgXCJzdGFrZWFibGVMb2NrdGltZVwiOiBzZXJpYWxpemVyLmVuY29kZXIodGhpcy5zdGFrZWFibGVMb2NrdGltZSwgZW5jb2RpbmcsIFwiQnVmZmVyXCIsIFwiZGVjaW1hbFN0cmluZ1wiLCA4KSxcbiAgICAgIFwidHJhbnNmZXJhYmxlSW5wdXRcIjogdGhpcy50cmFuc2ZlcmFibGVJbnB1dC5zZXJpYWxpemUoZW5jb2RpbmcpXG4gICAgfTtcbiAgICBkZWxldGUgb3V0b2JqW1wic2lnSWR4c1wiXTtcbiAgICBkZWxldGUgb3V0b2JqW1wic2lnQ291bnRcIl07XG4gICAgZGVsZXRlIG91dG9ialtcImFtb3VudFwiXTtcbiAgICByZXR1cm4gb3V0b2JqO1xuICB9O1xuICBkZXNlcmlhbGl6ZShmaWVsZHM6b2JqZWN0LCBlbmNvZGluZzpTZXJpYWxpemVkRW5jb2RpbmcgPSBcImhleFwiKSB7XG4gICAgZmllbGRzW1wic2lnSWR4c1wiXSA9IFtdO1xuICAgIGZpZWxkc1tcInNpZ0NvdW50XCJdID0gXCIwXCI7XG4gICAgZmllbGRzW1wiYW1vdW50XCJdID0gXCI5OFwiO1xuICAgIHN1cGVyLmRlc2VyaWFsaXplKGZpZWxkcywgZW5jb2RpbmcpO1xuICAgIHRoaXMuc3Rha2VhYmxlTG9ja3RpbWUgPSBzZXJpYWxpemVyLmRlY29kZXIoZmllbGRzW1wic3Rha2VhYmxlTG9ja3RpbWVcIl0sIGVuY29kaW5nLCBcImRlY2ltYWxTdHJpbmdcIiwgXCJCdWZmZXJcIiwgOCk7XG4gICAgdGhpcy50cmFuc2ZlcmFibGVJbnB1dCA9IG5ldyBQYXJzZWFibGVJbnB1dCgpO1xuICAgIHRoaXMudHJhbnNmZXJhYmxlSW5wdXQuZGVzZXJpYWxpemUoZmllbGRzW1widHJhbnNmZXJhYmxlSW5wdXRcIl0sIGVuY29kaW5nKTtcbiAgICB0aGlzLnN5bmNocm9uaXplKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgc3Rha2VhYmxlTG9ja3RpbWU6QnVmZmVyO1xuICBwcm90ZWN0ZWQgdHJhbnNmZXJhYmxlSW5wdXQ6UGFyc2VhYmxlSW5wdXQ7XG5cbiAgcHJpdmF0ZSBzeW5jaHJvbml6ZSgpe1xuICAgIGxldCBpbnB1dDpBbW91bnRJbnB1dCA9IHRoaXMudHJhbnNmZXJhYmxlSW5wdXQuZ2V0SW5wdXQoKSBhcyBBbW91bnRJbnB1dDtcbiAgICB0aGlzLnNpZ0lkeHMgPSBpbnB1dC5nZXRTaWdJZHhzKCk7XG4gICAgdGhpcy5zaWdDb3VudCA9IEJ1ZmZlci5hbGxvYyg0KTtcbiAgICB0aGlzLnNpZ0NvdW50LndyaXRlVUludDMyQkUodGhpcy5zaWdJZHhzLmxlbmd0aCwgMCk7XG4gICAgdGhpcy5hbW91bnQgPSBiaW50b29scy5mcm9tQk5Ub0J1ZmZlcihpbnB1dC5nZXRBbW91bnQoKSwgOCk7XG4gICAgdGhpcy5hbW91bnRWYWx1ZSA9IGlucHV0LmdldEFtb3VudCgpO1xuICB9XG5cbiAgZ2V0U3Rha2VhYmxlTG9ja3RpbWUoKTpCTiB7XG4gICAgcmV0dXJuIGJpbnRvb2xzLmZyb21CdWZmZXJUb0JOKHRoaXMuc3Rha2VhYmxlTG9ja3RpbWUpO1xuICB9XG5cbiAgZ2V0VHJhbnNmZXJhYmxJbnB1dCgpOlBhcnNlYWJsZUlucHV0IHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2ZlcmFibGVJbnB1dDtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgaW5wdXRJRCBmb3IgdGhpcyBpbnB1dFxuICAgKi9cbiAgZ2V0SW5wdXRJRCgpOm51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3R5cGVJRDtcbiAgfVxuXG4gIGdldENyZWRlbnRpYWxJRCA9ICgpOm51bWJlciA9PiBQbGF0Zm9ybVZNQ29uc3RhbnRzLlNFQ1BDUkVERU5USUFMO1xuXG4gIC8qKlxuICAgKiBQb3B1YXRlcyB0aGUgaW5zdGFuY2UgZnJvbSBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHJlcHJlc2VudGluZyB0aGUgW1tTdGFrZWFibGVMb2NrSW5dXSBhbmQgcmV0dXJucyB0aGUgc2l6ZSBvZiB0aGUgb3V0cHV0LlxuICAgKi9cbiAgZnJvbUJ1ZmZlcihieXRlczpCdWZmZXIsIG9mZnNldDpudW1iZXIgPSAwKTpudW1iZXIge1xuICAgIHRoaXMuc3Rha2VhYmxlTG9ja3RpbWUgPSBiaW50b29scy5jb3B5RnJvbShieXRlcywgb2Zmc2V0LCBvZmZzZXQgKyA4KTtcbiAgICBvZmZzZXQgKz0gODtcbiAgICB0aGlzLnRyYW5zZmVyYWJsZUlucHV0ID0gbmV3IFBhcnNlYWJsZUlucHV0KCk7XG4gICAgb2Zmc2V0ID0gdGhpcy50cmFuc2ZlcmFibGVJbnB1dC5mcm9tQnVmZmVyKGJ5dGVzLCBvZmZzZXQpO1xuICAgIHRoaXMuc3luY2hyb25pemUoKTtcbiAgICByZXR1cm4gb2Zmc2V0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGJ1ZmZlciByZXByZXNlbnRpbmcgdGhlIFtbU3Rha2VhYmxlTG9ja0luXV0gaW5zdGFuY2UuXG4gICAqL1xuICB0b0J1ZmZlcigpOkJ1ZmZlciB7XG4gICAgY29uc3QgeGZlcmluQnVmZjpCdWZmZXIgPSB0aGlzLnRyYW5zZmVyYWJsZUlucHV0LnRvQnVmZmVyKCk7XG4gICAgY29uc3QgYnNpemU6bnVtYmVyID0gdGhpcy5zdGFrZWFibGVMb2NrdGltZS5sZW5ndGggKyB4ZmVyaW5CdWZmLmxlbmd0aDtcbiAgICBjb25zdCBiYXJyOkFycmF5PEJ1ZmZlcj4gPSBbdGhpcy5zdGFrZWFibGVMb2NrdGltZSwgeGZlcmluQnVmZl07XG4gICAgcmV0dXJuIEJ1ZmZlci5jb25jYXQoYmFyciwgYnNpemUpO1xuICB9XG4gIFxuICBjcmVhdGUoLi4uYXJnczphbnlbXSk6dGhpc3tcbiAgICByZXR1cm4gbmV3IFN0YWtlYWJsZUxvY2tJbiguLi5hcmdzKSBhcyB0aGlzO1xuICB9XG5cbiAgY2xvbmUoKTp0aGlzIHtcbiAgICBjb25zdCBuZXdvdXQ6U3Rha2VhYmxlTG9ja0luID0gdGhpcy5jcmVhdGUoKVxuICAgIG5ld291dC5mcm9tQnVmZmVyKHRoaXMudG9CdWZmZXIoKSk7XG4gICAgcmV0dXJuIG5ld291dCBhcyB0aGlzO1xuICB9XG5cbiAgc2VsZWN0KGlkOm51bWJlciwgLi4uYXJnczogYW55W10pOklucHV0IHtcbiAgICByZXR1cm4gU2VsZWN0SW5wdXRDbGFzcyhpZCwgLi4uYXJncyk7XG4gIH1cblxuICAvKipcbiAgICogQSBbW091dHB1dF1dIGNsYXNzIHdoaWNoIHNwZWNpZmllcyBhbiBbW0lucHV0XV0gdGhhdCBoYXMgYSBsb2NrdGltZSB3aGljaCBjYW4gYWxzbyBlbmFibGUgc3Rha2luZyBvZiB0aGUgdmFsdWUgaGVsZCwgcHJldmVudGluZyB0cmFuc2ZlcnMgYnV0IG5vdCB2YWxpZGF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gYW1vdW50IEEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2JuLmpzL3xCTn0gcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgaW4gdGhlIGlucHV0XG4gICAqIEBwYXJhbSBzdGFrZWFibGVMb2NrdGltZSBBIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59IHJlcHJlc2VudGluZyB0aGUgc3Rha2VhYmxlIGxvY2t0aW1lXG4gICAqIEBwYXJhbSB0cmFuc2ZlcmFibGVJbnB1dCBBIFtbUGFyc2VhYmxlSW5wdXRdXSB3aGljaCBpcyBlbWJlZGRlZCBpbnRvIHRoaXMgaW5wdXQuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhbW91bnQ6Qk4gPSB1bmRlZmluZWQsIHN0YWtlYWJsZUxvY2t0aW1lOkJOID0gdW5kZWZpbmVkLCB0cmFuc2ZlcmFibGVJbnB1dDpQYXJzZWFibGVJbnB1dCA9IHVuZGVmaW5lZCkge1xuICAgIHN1cGVyKGFtb3VudCk7XG4gICAgaWYgKHR5cGVvZiBzdGFrZWFibGVMb2NrdGltZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy5zdGFrZWFibGVMb2NrdGltZSA9IGJpbnRvb2xzLmZyb21CTlRvQnVmZmVyKHN0YWtlYWJsZUxvY2t0aW1lLCA4KTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0cmFuc2ZlcmFibGVJbnB1dCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy50cmFuc2ZlcmFibGVJbnB1dCA9IHRyYW5zZmVyYWJsZUlucHV0O1xuICAgICAgdGhpcy5zeW5jaHJvbml6ZSgpO1xuICAgIH1cbiAgfVxufVxuIl19","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImportTx = void 0;\n/**\n * @packageDocumentation\n * @module API-PlatformVM-ImportTx\n */\nconst buffer_1 = require(\"buffer/\");\nconst bintools_1 = __importDefault(require(\"../../utils/bintools\"));\nconst constants_1 = require(\"./constants\");\nconst inputs_1 = require(\"./inputs\");\nconst credentials_1 = require(\"./credentials\");\nconst credentials_2 = require(\"../../common/credentials\");\nconst basetx_1 = require(\"./basetx\");\nconst constants_2 = require(\"../../utils/constants\");\nconst serialization_1 = require(\"../../utils/serialization\");\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\nconst serializer = serialization_1.Serialization.getInstance();\n/**\n * Class representing an unsigned Import transaction.\n */\nclass ImportTx extends basetx_1.BaseTx {\n    /**\n     * Class representing an unsigned Import transaction.\n     *\n     * @param networkid Optional networkid, [[DefaultNetworkID]]\n     * @param blockchainid Optional blockchainid, default Buffer.alloc(32, 16)\n     * @param outs Optional array of the [[TransferableOutput]]s\n     * @param ins Optional array of the [[TransferableInput]]s\n     * @param memo Optional {@link https://github.com/feross/buffer|Buffer} for the memo field\n     * @param sourceChain Optiona chainid for the source inputs to import. Default platform chainid.\n     * @param importIns Array of [[TransferableInput]]s used in the transaction\n     */\n    constructor(networkid = constants_2.DefaultNetworkID, blockchainid = buffer_1.Buffer.alloc(32, 16), outs = undefined, ins = undefined, memo = undefined, sourceChain = undefined, importIns = undefined) {\n        super(networkid, blockchainid, outs, ins, memo);\n        this._typeName = \"ImportTx\";\n        this._typeID = constants_1.PlatformVMConstants.IMPORTTX;\n        this.sourceChain = buffer_1.Buffer.alloc(32);\n        this.numIns = buffer_1.Buffer.alloc(4);\n        this.importIns = [];\n        /**\n           * Returns the id of the [[ImportTx]]\n           */\n        this.getTxType = () => {\n            return this._typeID;\n        };\n        this.sourceChain = sourceChain; // do no correct, if it's wrong it'll bomb on toBuffer\n        if (typeof importIns !== 'undefined' && Array.isArray(importIns)) {\n            for (let i = 0; i < importIns.length; i++) {\n                if (!(importIns[i] instanceof inputs_1.TransferableInput)) {\n                    throw new Error(\"Error - ImportTx.constructor: invalid TransferableInput in array parameter 'importIns'\");\n                }\n            }\n            this.importIns = importIns;\n        }\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"sourceChain\": serializer.encoder(this.sourceChain, encoding, \"Buffer\", \"cb58\"), \"importIns\": this.importIns.map((i) => i.serialize(encoding)) });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.sourceChain = serializer.decoder(fields[\"sourceChain\"], encoding, \"cb58\", \"Buffer\", 32);\n        this.importIns = fields[\"importIns\"].map((i) => {\n            let ii = new inputs_1.TransferableInput();\n            ii.deserialize(i, encoding);\n            return ii;\n        });\n        this.numIns = buffer_1.Buffer.alloc(4);\n        this.numIns.writeUInt32BE(this.importIns.length, 0);\n    }\n    /**\n       * Takes a {@link https://github.com/feross/buffer|Buffer} containing an [[ImportTx]], parses it, populates the class, and returns the length of the [[ImportTx]] in bytes.\n       *\n       * @param bytes A {@link https://github.com/feross/buffer|Buffer} containing a raw [[ImportTx]]\n       *\n       * @returns The length of the raw [[ImportTx]]\n       *\n       * @remarks assume not-checksummed\n       */\n    fromBuffer(bytes, offset = 0) {\n        offset = super.fromBuffer(bytes, offset);\n        this.sourceChain = bintools.copyFrom(bytes, offset, offset + 32);\n        offset += 32;\n        this.numIns = bintools.copyFrom(bytes, offset, offset + 4);\n        offset += 4;\n        const numIns = this.numIns.readUInt32BE(0);\n        for (let i = 0; i < numIns; i++) {\n            const anIn = new inputs_1.TransferableInput();\n            offset = anIn.fromBuffer(bytes, offset);\n            this.importIns.push(anIn);\n        }\n        return offset;\n    }\n    /**\n     * Returns a {@link https://github.com/feross/buffer|Buffer} representation of the [[ImportTx]].\n     */\n    toBuffer() {\n        if (typeof this.sourceChain === \"undefined\") {\n            throw new Error(\"ImportTx.toBuffer -- this.sourceChain is undefined\");\n        }\n        this.numIns.writeUInt32BE(this.importIns.length, 0);\n        let barr = [super.toBuffer(), this.sourceChain, this.numIns];\n        this.importIns = this.importIns.sort(inputs_1.TransferableInput.comparator());\n        for (let i = 0; i < this.importIns.length; i++) {\n            barr.push(this.importIns[i].toBuffer());\n        }\n        return buffer_1.Buffer.concat(barr);\n    }\n    /**\n       * Returns an array of [[TransferableInput]]s in this transaction.\n       */\n    getImportInputs() {\n        return this.importIns;\n    }\n    /**\n       * Takes the bytes of an [[UnsignedTx]] and returns an array of [[Credential]]s\n       *\n       * @param msg A Buffer for the [[UnsignedTx]]\n       * @param kc An [[KeyChain]] used in signing\n       *\n       * @returns An array of [[Credential]]s\n       */\n    sign(msg, kc) {\n        const sigs = super.sign(msg, kc);\n        for (let i = 0; i < this.importIns.length; i++) {\n            const cred = credentials_1.SelectCredentialClass(this.importIns[i].getInput().getCredentialID());\n            const sigidxs = this.importIns[i].getInput().getSigIdxs();\n            for (let j = 0; j < sigidxs.length; j++) {\n                const keypair = kc.getKey(sigidxs[j].getSource());\n                const signval = keypair.sign(msg);\n                const sig = new credentials_2.Signature();\n                sig.fromBuffer(signval);\n                cred.addSignature(sig);\n            }\n            sigs.push(cred);\n        }\n        return sigs;\n    }\n    clone() {\n        let newbase = new ImportTx();\n        newbase.fromBuffer(this.toBuffer());\n        return newbase;\n    }\n    create(...args) {\n        return new ImportTx(...args);\n    }\n}\nexports.ImportTx = ImportTx;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW1wb3J0dHguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvYXBpcy9wbGF0Zm9ybXZtL2ltcG9ydHR4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7R0FHRztBQUNILG9DQUFpQztBQUNqQyxvRUFBNEM7QUFDNUMsMkNBQWtEO0FBRWxELHFDQUE2QztBQUU3QywrQ0FBc0Q7QUFDdEQsMERBQXlFO0FBQ3pFLHFDQUFrQztBQUNsQyxxREFBeUQ7QUFDekQsNkRBQThFO0FBRTlFOztHQUVHO0FBQ0gsTUFBTSxRQUFRLEdBQUcsa0JBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUN4QyxNQUFNLFVBQVUsR0FBRyw2QkFBYSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBRy9DOztHQUVHO0FBQ0gsTUFBYSxRQUFTLFNBQVEsZUFBTTtJQW9IbEM7Ozs7Ozs7Ozs7T0FVRztJQUNILFlBQ0UsWUFBbUIsNEJBQWdCLEVBQUUsZUFBc0IsZUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQy9FLE9BQWlDLFNBQVMsRUFBRSxNQUErQixTQUFTLEVBQ3BGLE9BQWMsU0FBUyxFQUFFLGNBQXFCLFNBQVMsRUFBRSxZQUFxQyxTQUFTO1FBRXZHLEtBQUssQ0FBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFuSXhDLGNBQVMsR0FBRyxVQUFVLENBQUM7UUFDdkIsWUFBTyxHQUFHLCtCQUFtQixDQUFDLFFBQVEsQ0FBQztRQXNCdkMsZ0JBQVcsR0FBVSxlQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3RDLFdBQU0sR0FBVSxlQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2hDLGNBQVMsR0FBNEIsRUFBRSxDQUFDO1FBRWxEOzthQUVLO1FBQ0wsY0FBUyxHQUFHLEdBQVUsRUFBRTtZQUN0QixPQUFPLElB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O0lBQ3pCLENBQUM7SUFFRCxNQUFNLENBQUMsR0FBRyxJQUFVO1FBQ2xCLE9BQU8sSUFBSSxRQUFRLENBQUMsR0FBRyxJQUFJLENBQVMsQ0FBQztJQUN2QyxDQUFDO0NBNkJGO0FBL0lELDRCQStJQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKiBAbW9kdWxlIEFQSS1QbGF0Zm9ybVZNLUltcG9ydFR4XG4gKi9cbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ2J1ZmZlci8nO1xuaW1wb3J0IEJpblRvb2xzIGZyb20gJy4uLy4uL3V0aWxzL2JpbnRvb2xzJztcbmltcG9ydCB7IFBsYXRmb3JtVk1Db25zdGFudHMgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBUcmFuc2ZlcmFibGVPdXRwdXQgfSBmcm9tICcuL291dHB1dHMnO1xuaW1wb3J0IHsgVHJhbnNmZXJhYmxlSW5wdXQgfSBmcm9tICcuL2lucHV0cyc7XG5pbXBvcnQgeyBLZXlDaGFpbiwgS2V5UGFpciB9IGZyb20gJy4va2V5Y2hhaW4nO1xuaW1wb3J0IHsgU2VsZWN0Q3JlZGVudGlhbENsYXNzIH0gZnJvbSAnLi9jcmVkZW50aWFscyc7XG5pbXBvcnQgeyBTaWduYXR1cmUsIFNpZ0lkeCwgQ3JlZGVudGlhbCB9IGZyb20gJy4uLy4uL2NvbW1vbi9jcmVkZW50aWFscyc7XG5pbXBvcnQgeyBCYXNlVHggfSBmcm9tICcuL2Jhc2V0eCc7XG5pbXBvcnQgeyBEZWZhdWx0TmV0d29ya0lEIH0gZnJvbSAnLi4vLi4vdXRpbHMvY29uc3RhbnRzJztcbmltcG9ydCB7IFNlcmlhbGl6YXRpb24sIFNlcmlhbGl6ZWRFbmNvZGluZyB9IGZyb20gJy4uLy4uL3V0aWxzL3NlcmlhbGl6YXRpb24nO1xuXG4vKipcbiAqIEBpZ25vcmVcbiAqL1xuY29uc3QgYmludG9vbHMgPSBCaW5Ub29scy5nZXRJbnN0YW5jZSgpO1xuY29uc3Qgc2VyaWFsaXplciA9IFNlcmlhbGl6YXRpb24uZ2V0SW5zdGFuY2UoKTtcblxuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhbiB1bnNpZ25lZCBJbXBvcnQgdHJhbnNhY3Rpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBJbXBvcnRUeCBleHRlbmRzIEJhc2VUeCB7XG4gIHByb3RlY3RlZCBfdHlwZU5hbWUgPSBcIkltcG9ydFR4XCI7XG4gIHByb3RlY3RlZCBfdHlwZUlEID0gUGxhdGZvcm1WTUNvbnN0YW50cy5JTVBPUlRUWDtcblxuICBzZXJpYWxpemUoZW5jb2Rpbmc6U2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIik6b2JqZWN0IHtcbiAgICBsZXQgZmllbGRzOm9iamVjdCA9IHN1cGVyLnNlcmlhbGl6ZShlbmNvZGluZyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmZpZWxkcyxcbiAgICAgIFwic291cmNlQ2hhaW5cIjogc2VyaWFsaXplci5lbmNvZGVyKHRoaXMuc291cmNlQ2hhaW4sIGVuY29kaW5nLCBcIkJ1ZmZlclwiLCBcImNiNThcIiksXG4gICAgICBcImltcG9ydEluc1wiOiB0aGlzLmltcG9ydElucy5tYXAoKGkpID0+IGkuc2VyaWFsaXplKGVuY29kaW5nKSlcbiAgICB9XG4gIH07XG4gIGRlc2VyaWFsaXplKGZpZWxkczpvYmplY3QsIGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICBzdXBlci5kZXNlcmlhbGl6ZShmaWVsZHMsIGVuY29kaW5nKTtcbiAgICB0aGlzLnNvdXJjZUNoYWluID0gc2VyaWFsaXplci5kZWNvZGVyKGZpZWxkc1tcInNvdXJjZUNoYWluXCJdLCBlbmNvZGluZywgXCJjYjU4XCIsIFwiQnVmZmVyXCIsIDMyKTtcbiAgICB0aGlzLmltcG9ydElucyA9IGZpZWxkc1tcImltcG9ydEluc1wiXS5tYXAoKGk6b2JqZWN0KSA9PiB7XG4gICAgICBsZXQgaWk6VHJhbnNmZXJhYmxlSW5wdXQgPSBuZXcgVHJhbnNmZXJhYmxlSW5wdXQoKTtcbiAgICAgIGlpLmRlc2VyaWFsaXplKGksIGVuY29kaW5nKTtcbiAgICAgIHJldHVybiBpaTtcbiAgICB9KTtcbiAgICB0aGlzLm51bUlucyA9IEJ1ZmZlci5hbGxvYyg0KTtcbiAgICB0aGlzLm51bUlucy53cml0ZVVJbnQzMkJFKHRoaXMuaW1wb3J0SW5zLmxlbmd0aCwgMCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgc291cmNlQ2hhaW46QnVmZmVyID0gQnVmZmVyLmFsbG9jKDMyKTtcbiAgcHJvdGVjdGVkIG51bUluczpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoNCk7XG4gIHByb3RlY3RlZCBpbXBvcnRJbnM6QXJyYXk8VHJhbnNmZXJhYmxlSW5wdXQ+ID0gW107XG5cbiAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaWQgb2YgdGhlIFtbSW1wb3J0VHhdXVxuICAgICAqL1xuICBnZXRUeFR5cGUgPSAoKTpudW1iZXIgPT4ge1xuICAgIHJldHVybiB0aGlzLl90eXBlSUQ7XG4gIH1cbiAgXG4gIC8qKlxuICAgICAqIFRha2VzIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gY29udGFpbmluZyBhbiBbW0ltcG9ydFR4XV0sIHBhcnNlcyBpdCwgcG9wdWxhdGVzIHRoZSBjbGFzcywgYW5kIHJldHVybnMgdGhlIGxlbmd0aCBvZiB0aGUgW1tJbXBvcnRUeF1dIGluIGJ5dGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJ5dGVzIEEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gY29udGFpbmluZyBhIHJhdyBbW0ltcG9ydFR4XV1cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBsZW5ndGggb2YgdGhlIHJhdyBbW0ltcG9ydFR4XV1cbiAgICAgKlxuICAgICAqIEByZW1hcmtzIGFzc3VtZSBub3QtY2hlY2tzdW1tZWRcbiAgICAgKi9cbiAgZnJvbUJ1ZmZlcihieXRlczpCdWZmZXIsIG9mZnNldDpudW1iZXIgPSAwKTpudW1iZXIge1xuICAgIG9mZnNldCA9IHN1cGVyLmZyb21CdWZmZXIoYnl0ZXMsIG9mZnNldCk7XG4gICAgdGhpcy5zb3VyY2VDaGFpbiA9IGJpbnRvb2xzLmNvcHlGcm9tKGJ5dGVzLCBvZmZzZXQsIG9mZnNldCArIDMyKTtcbiAgICBvZmZzZXQgKz0gMzI7XG4gICAgdGhpcy5udW1JbnMgPSBiaW50b29scy5jb3B5RnJvbShieXRlcywgb2Zmc2V0LCBvZmZzZXQgKyA0KTtcbiAgICBvZmZzZXQgKz0gNDtcbiAgICBjb25zdCBudW1JbnM6bnVtYmVyID0gdGhpcy5udW1JbnMucmVhZFVJbnQzMkJFKDApO1xuICAgIGZvciAobGV0IGk6bnVtYmVyID0gMDsgaSA8IG51bUluczsgaSsrKSB7XG4gICAgICBjb25zdCBhbkluOlRyYW5zZmVyYWJsZUlucHV0ID0gbmV3IFRyYW5zZmVyYWJsZUlucHV0KCk7XG4gICAgICBvZmZzZXQgPSBhbkluLmZyb21CdWZmZXIoYnl0ZXMsIG9mZnNldCk7XG4gICAgICB0aGlzLmltcG9ydElucy5wdXNoKGFuSW4pO1xuICAgIH1cbiAgICByZXR1cm4gb2Zmc2V0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSByZXByZXNlbnRhdGlvbiBvZiB0aGUgW1tJbXBvcnRUeF1dLlxuICAgKi9cbiAgdG9CdWZmZXIoKTpCdWZmZXIge1xuICAgIGlmKHR5cGVvZiB0aGlzLnNvdXJjZUNoYWluID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbXBvcnRUeC50b0J1ZmZlciAtLSB0aGlzLnNvdXJjZUNoYWluIGlzIHVuZGVmaW5lZFwiKTtcbiAgICB9XG4gICAgdGhpcy5udW1JbnMud3JpdGVVSW50MzJCRSh0aGlzLmltcG9ydElucy5sZW5ndGgsIDApO1xuICAgIGxldCBiYXJyOkFycmF5PEJ1ZmZlcj4gPSBbc3VwZXIudG9CdWZmZXIoKSwgdGhpcy5zb3VyY2VDaGFpbiwgdGhpcy5udW1JbnNdO1xuICAgIHRoaXMuaW1wb3J0SW5zID0gdGhpcy5pbXBvcnRJbnMuc29ydChUcmFuc2ZlcmFibGVJbnB1dC5jb21wYXJhdG9yKCkpO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmltcG9ydElucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBiYXJyLnB1c2godGhpcy5pbXBvcnRJbnNbaV0udG9CdWZmZXIoKSk7XG4gICAgfVxuICAgIHJldHVybiBCdWZmZXIuY29uY2F0KGJhcnIpO1xuICB9XG4gIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgW1tUcmFuc2ZlcmFibGVJbnB1dF1dcyBpbiB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAqL1xuICBnZXRJbXBvcnRJbnB1dHMoKTpBcnJheTxUcmFuc2ZlcmFibGVJbnB1dD4ge1xuICAgIHJldHVybiB0aGlzLmltcG9ydElucztcbiAgfVxuXG4gIC8qKlxuICAgICAqIFRha2VzIHRoZSBieXRlcyBvZiBhbiBbW1Vuc2lnbmVkVHhdXSBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiBbW0NyZWRlbnRpYWxdXXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSBtc2cgQSBCdWZmZXIgZm9yIHRoZSBbW1Vuc2lnbmVkVHhdXVxuICAgICAqIEBwYXJhbSBrYyBBbiBbW0tleUNoYWluXV0gdXNlZCBpbiBzaWduaW5nXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiBbW0NyZWRlbnRpYWxdXXNcbiAgICAgKi9cbiAgc2lnbihtc2c6QnVmZmVyLCBrYzpLZXlDaGFpbik6QXJyYXk8Q3JlZGVudGlhbD4ge1xuICAgIGNvbnN0IHNpZ3M6QXJyYXk8Q3JlZGVudGlhbD4gPSBzdXBlci5zaWduKG1zZywga2MpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbXBvcnRJbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNyZWQ6Q3JlZGVudGlhbCA9IFNlbGVjdENyZWRlbnRpYWxDbGFzcyh0aGlzLmltcG9ydEluc1tpXS5nZXRJbnB1dCgpLmdldENyZWRlbnRpYWxJRCgpKTtcbiAgICAgIGNvbnN0IHNpZ2lkeHM6QXJyYXk8U2lnSWR4PiA9IHRoaXMuaW1wb3J0SW5zW2ldLmdldElucHV0KCkuZ2V0U2lnSWR4cygpO1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaWdpZHhzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGNvbnN0IGtleXBhaXI6S2V5UGFpciA9IGtjLmdldEtleShzaWdpZHhzW2pdLmdldFNvdXJjZSgpKTtcbiAgICAgICAgY29uc3Qgc2lnbnZhbDpCdWZmZXIgPSBrZXlwYWlyLnNpZ24obXNnKTtcbiAgICAgICAgY29uc3Qgc2lnOlNpZ25hdHVyZSA9IG5ldyBTaWduYXR1cmUoKTtcbiAgICAgICAgc2lnLmZyb21CdWZmZXIoc2lnbnZhbCk7XG4gICAgICAgIGNyZWQuYWRkU2lnbmF0dXJlKHNpZyk7XG4gICAgICB9XG4gICAgICBzaWdzLnB1c2goY3JlZCk7XG4gICAgfVxuICAgIHJldHVybiBzaWdzO1xuICB9XG5cbiAgY2xvbmUoKTp0aGlzIHtcbiAgICBsZXQgbmV3YmFzZTpJbXBvcnRUeCA9IG5ldyBJbXBvcnRUeCgpO1xuICAgIG5ld2Jhc2UuZnJvbUJ1ZmZlcih0aGlzLnRvQnVmZmVyKCkpO1xuICAgIHJldHVybiBuZXdiYXNlIGFzIHRoaXM7XG4gIH1cblxuICBjcmVhdGUoLi4uYXJnczphbnlbXSk6dGhpcyB7XG4gICAgcmV0dXJuIG5ldyBJbXBvcnRUeCguLi5hcmdzKSBhcyB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIENsYXNzIHJlcHJlc2VudGluZyBhbiB1bnNpZ25lZCBJbXBvcnQgdHJhbnNhY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSBuZXR3b3JraWQgT3B0aW9uYWwgbmV0d29ya2lkLCBbW0RlZmF1bHROZXR3b3JrSURdXVxuICAgKiBAcGFyYW0gYmxvY2tjaGFpbmlkIE9wdGlvbmFsIGJsb2NrY2hhaW5pZCwgZGVmYXVsdCBCdWZmZXIuYWxsb2MoMzIsIDE2KVxuICAgKiBAcGFyYW0gb3V0cyBPcHRpb25hbCBhcnJheSBvZiB0aGUgW1tUcmFuc2ZlcmFibGVPdXRwdXRdXXNcbiAgICogQHBhcmFtIGlucyBPcHRpb25hbCBhcnJheSBvZiB0aGUgW1tUcmFuc2ZlcmFibGVJbnB1dF1dc1xuICAgKiBAcGFyYW0gbWVtbyBPcHRpb25hbCB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBmb3IgdGhlIG1lbW8gZmllbGRcbiAgICogQHBhcmFtIHNvdXJjZUNoYWluIE9wdGlvbmEgY2hhaW5pZCBmb3IgdGhlIHNvdXJjZSBpbnB1dHMgdG8gaW1wb3J0LiBEZWZhdWx0IHBsYXRmb3JtIGNoYWluaWQuXG4gICAqIEBwYXJhbSBpbXBvcnRJbnMgQXJyYXkgb2YgW1tUcmFuc2ZlcmFibGVJbnB1dF1dcyB1c2VkIGluIHRoZSB0cmFuc2FjdGlvblxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgbmV0d29ya2lkOm51bWJlciA9IERlZmF1bHROZXR3b3JrSUQsIGJsb2NrY2hhaW5pZDpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoMzIsIDE2KSwgXG4gICAgb3V0czpBcnJheTxUcmFuc2ZlcmFibGVPdXRwdXQ+ID0gdW5kZWZpbmVkLCBpbnM6QXJyYXk8VHJhbnNmZXJhYmxlSW5wdXQ+ID0gdW5kZWZpbmVkLFxuICAgIG1lbW86QnVmZmVyID0gdW5kZWZpbmVkLCBzb3VyY2VDaGFpbjpCdWZmZXIgPSB1bmRlZmluZWQsIGltcG9ydEluczpBcnJheTxUcmFuc2ZlcmFibGVJbnB1dD4gPSB1bmRlZmluZWRcbiAgKSB7XG4gICAgc3VwZXIobmV0d29ya2lkLCBibG9ja2NoYWluaWQsIG91dHMsIGlucywgbWVtbyk7XG4gICAgdGhpcy5zb3VyY2VDaGFpbiA9IHNvdXJjZUNoYWluOyAvLyBkbyBubyBjb3JyZWN0LCBpZiBpdCdzIHdyb25nIGl0J2xsIGJvbWIgb24gdG9CdWZmZXJcbiAgICBpZiAodHlwZW9mIGltcG9ydElucyAhPT0gJ3VuZGVmaW5lZCcgJiYgQXJyYXkuaXNBcnJheShpbXBvcnRJbnMpKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGltcG9ydElucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIShpbXBvcnRJbnNbaV0gaW5zdGFuY2VvZiBUcmFuc2ZlcmFibGVJbnB1dCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciAtIEltcG9ydFR4LmNvbnN0cnVjdG9yOiBpbnZhbGlkIFRyYW5zZmVyYWJsZUlucHV0IGluIGFycmF5IHBhcmFtZXRlciAnaW1wb3J0SW5zJ1wiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5pbXBvcnRJbnMgPSBpbXBvcnRJbnM7XG4gICAgfVxuICB9XG59Il19","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./apibase\"), exports);\n__exportStar(require(\"./assetamount\"), exports);\n__exportStar(require(\"./credentials\"), exports);\n__exportStar(require(\"./evmtx\"), exports);\n__exportStar(require(\"./input\"), exports);\n__exportStar(require(\"./interfaces\"), exports);\n__exportStar(require(\"./jrpcapi\"), exports);\n__exportStar(require(\"./keychain\"), exports);\n__exportStar(require(\"./nbytes\"), exports);\n__exportStar(require(\"./output\"), exports);\n__exportStar(require(\"./restapi\"), exports);\n__exportStar(require(\"./secp256k1\"), exports);\n__exportStar(require(\"./tx\"), exports);\n__exportStar(require(\"./utxos\"), exports);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tbW9uL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBLDRDQUEwQjtBQUMxQixnREFBOEI7QUFDOUIsZ0RBQThCO0FBQzlCLDBDQUF3QjtBQUN4QiwwQ0FBd0I7QUFDeEIsK0NBQTZCO0FBQzdCLDRDQUEwQjtBQUMxQiw2Q0FBMkI7QUFDM0IsMkNBQXlCO0FBQ3pCLDJDQUF5QjtBQUN6Qiw0Q0FBMEI7QUFDMUIsOENBQTRCO0FBQzVCLHVDQUFxQjtBQUNyQiwwQ0FBd0IiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2FwaWJhc2UnO1xuZXhwb3J0ICogZnJvbSAnLi9hc3NldGFtb3VudCc7XG5leHBvcnQgKiBmcm9tICcuL2NyZWRlbnRpYWxzJztcbmV4cG9ydCAqIGZyb20gJy4vZXZtdHgnO1xuZXhwb3J0ICogZnJvbSAnLi9pbnB1dCc7XG5leHBvcnQgKiBmcm9tICcuL2ludGVyZmFjZXMnO1xuZXhwb3J0ICogZnJvbSAnLi9qcnBjYXBpJztcbmV4cG9ydCAqIGZyb20gJy4va2V5Y2hhaW4nO1xuZXhwb3J0ICogZnJvbSAnLi9uYnl0ZXMnO1xuZXhwb3J0ICogZnJvbSAnLi9vdXRwdXQnO1xuZXhwb3J0ICogZnJvbSAnLi9yZXN0YXBpJztcbmV4cG9ydCAqIGZyb20gJy4vc2VjcDI1NmsxJztcbmV4cG9ydCAqIGZyb20gJy4vdHgnO1xuZXhwb3J0ICogZnJvbSAnLi91dHhvcyc7XG4iXX0=","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./api\"), exports);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvYXBpcy9oZWFsdGgvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsd0NBQXNCIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9hcGknO1xuIl19","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StandardUTXOSet = exports.StandardUTXO = void 0;\n/**\n * @packageDocumentation\n * @module Common-UTXOs\n */\nconst buffer_1 = require(\"buffer/\");\nconst bintools_1 = __importDefault(require(\"../utils/bintools\"));\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nconst output_1 = require(\"./output\");\nconst helperfunctions_1 = require(\"../utils/helperfunctions\");\nconst serialization_1 = require(\"../utils/serialization\");\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\nconst serializer = serialization_1.Serialization.getInstance();\n/**\n * Class for representing a single StandardUTXO.\n */\nclass StandardUTXO extends serialization_1.Serializable {\n    /**\n       * Class for representing a single StandardUTXO.\n       *\n       * @param codecID Optional number which specifies the codeID of the UTXO. Default 1\n       * @param txid Optional {@link https://github.com/feross/buffer|Buffer} of transaction ID for the StandardUTXO\n       * @param txidx Optional {@link https://github.com/feross/buffer|Buffer} or number for the index of the transaction's [[Output]]\n       * @param assetid Optional {@link https://github.com/feross/buffer|Buffer} of the asset ID for the StandardUTXO\n       * @param outputid Optional {@link https://github.com/feross/buffer|Buffer} or number of the output ID for the StandardUTXO\n       */\n    constructor(codecID = 0, txid = undefined, outputidx = undefined, assetid = undefined, output = undefined) {\n        super();\n        this._typeName = \"StandardUTXO\";\n        this._typeID = undefined;\n        this.codecid = buffer_1.Buffer.alloc(2);\n        this.txid = buffer_1.Buffer.alloc(32);\n        this.outputidx = buffer_1.Buffer.alloc(4);\n        this.assetid = buffer_1.Buffer.alloc(32);\n        this.output = undefined;\n        /**\n           * Returns the numeric representation of the CodecID.\n           */\n        this.getCodecID = () => this.codecid.readUInt8(0);\n        /**\n         * Returns the {@link https://github.com/feross/buffer|Buffer} representation of the CodecID\n          */\n        this.getCodecIDBuffer = () => this.codecid;\n        /**\n           * Returns a {@link https://github.com/feross/buffer|Buffer} of the TxID.\n           */\n        this.getTxID = () => this.txid;\n        /**\n           * Returns a {@link https://github.com/feross/buffer|Buffer}  of the OutputIdx.\n           */\n        this.getOutputIdx = () => this.outputidx;\n        /**\n           * Returns the assetID as a {@link https://github.com/feross/buffer|Buffer}.\n           */\n        this.getAssetID = () => this.assetid;\n        /**\n           * Returns the UTXOID as a base-58 string (UTXOID is a string )\n           */\n        this.getUTXOID = () => bintools.bufferToB58(buffer_1.Buffer.concat([this.getTxID(), this.getOutputIdx()]));\n        /**\n         * Returns a reference to the output;\n        */\n        this.getOutput = () => this.output;\n        if (typeof codecID !== 'undefined') {\n            this.codecid.writeUInt8(codecID, 0);\n        }\n        if (typeof txid !== 'undefined') {\n            this.txid = txid;\n        }\n        if (typeof outputidx === 'number') {\n            this.outputidx.writeUInt32BE(outputidx, 0);\n        }\n        else if (outputidx instanceof buffer_1.Buffer) {\n            this.outputidx = outputidx;\n        }\n        if (typeof assetid !== 'undefined') {\n            this.assetid = assetid;\n        }\n        if (typeof output !== 'undefined') {\n            this.output = output;\n        }\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"codecid\": serializer.encoder(this.codecid, encoding, \"Buffer\", \"decimalString\"), \"txid\": serializer.encoder(this.txid, encoding, \"Buffer\", \"cb58\"), \"outputidx\": serializer.encoder(this.outputidx, encoding, \"Buffer\", \"decimalString\"), \"assetid\": serializer.encoder(this.assetid, encoding, \"Buffer\", \"cb58\"), \"output\": this.output.serialize(encoding) });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.codecid = serializer.decoder(fields[\"codecid\"], encoding, \"decimalString\", \"Buffer\", 2);\n        this.txid = serializer.decoder(fields[\"txid\"], encoding, \"cb58\", \"Buffer\", 32);\n        this.outputidx = serializer.decoder(fields[\"outputidx\"], encoding, \"decimalString\", \"Buffer\", 4);\n        this.assetid = serializer.decoder(fields[\"assetid\"], encoding, \"cb58\", \"Buffer\", 32);\n    }\n    /**\n       * Returns a {@link https://github.com/feross/buffer|Buffer} representation of the [[StandardUTXO]].\n       */\n    toBuffer() {\n        const outbuff = this.output.toBuffer();\n        const outputidbuffer = buffer_1.Buffer.alloc(4);\n        outputidbuffer.writeUInt32BE(this.output.getOutputID(), 0);\n        const barr = [this.codecid, this.txid, this.outputidx, this.assetid, outputidbuffer, outbuff];\n        return buffer_1.Buffer.concat(barr, this.codecid.length + this.txid.length\n            + this.outputidx.length + this.assetid.length\n            + outputidbuffer.length + outbuff.length);\n    }\n}\nexports.StandardUTXO = StandardUTXO;\n/**\n * Class representing a set of [[StandardUTXO]]s.\n */\nclass StandardUTXOSet extends serialization_1.Serializable {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"StandardUTXOSet\";\n        this._typeID = undefined;\n        this.utxos = {};\n        this.addressUTXOs = {}; // maps address to utxoids:locktime\n        /**\n         * Returns true if the [[StandardUTXO]] is in the StandardUTXOSet.\n         *\n         * @param utxo Either a [[StandardUTXO]] a cb58 serialized string representing a StandardUTXO\n         */\n        this.includes = (utxo) => {\n            let utxoX = undefined;\n            let utxoid = undefined;\n            try {\n                utxoX = this.parseUTXO(utxo);\n                utxoid = utxoX.getUTXOID();\n            }\n            catch (e) {\n                if (e instanceof Error) {\n                    console.log(e.message);\n                }\n                else {\n                    console.log(e);\n                }\n                return false;\n            }\n            return (utxoid in this.utxos);\n        };\n        /**\n           * Removes a [[StandardUTXO]] from the [[StandardUTXOSet]] if it exists.\n           *\n           * @param utxo Either a [[StandardUTXO]] an cb58 serialized string representing a StandardUTXO\n           *\n           * @returns A [[StandardUTXO]] if it was removed and undefined if nothing was removed.\n           */\n        this.remove = (utxo) => {\n            let utxovar = undefined;\n            try {\n                utxovar = this.parseUTXO(utxo);\n            }\n            catch (e) {\n                if (e instanceof Error) {\n                    console.log(e.message);\n                }\n                else {\n                    console.log(e);\n                }\n                return undefined;\n            }\n            const utxoid = utxovar.getUTXOID();\n            if (!(utxoid in this.utxos)) {\n                return undefined;\n            }\n            delete this.utxos[utxoid];\n            const addresses = Object.keys(this.addressUTXOs);\n            for (let i = 0; i < addresses.length; i++) {\n                if (utxoid in this.addressUTXOs[addresses[i]]) {\n                    delete this.addressUTXOs[addresses[i]][utxoid];\n                }\n            }\n            return utxovar;\n        };\n        /**\n           * Removes an array of [[StandardUTXO]]s to the [[StandardUTXOSet]].\n           *\n           * @param utxo Either a [[StandardUTXO]] an cb58 serialized string representing a StandardUTXO\n           * @param overwrite If true, if the UTXOID already exists, overwrite it... default false\n           *\n           * @returns An array of UTXOs which were removed.\n           */\n        this.removeArray = (utxos) => {\n            const removed = [];\n            for (let i = 0; i < utxos.length; i++) {\n                const result = this.remove(utxos[i]);\n                if (typeof result !== 'undefined') {\n                    removed.push(result);\n                }\n            }\n            return removed;\n        };\n        /**\n           * Gets a [[StandardUTXO]] from the [[StandardUTXOSet]] by its UTXOID.\n           *\n           * @param utxoid String representing the UTXOID\n           *\n           * @returns A [[StandardUTXO]] if it exists in the set.\n           */\n        this.getUTXO = (utxoid) => this.utxos[utxoid];\n        /**\n           * Gets all the [[StandardUTXO]]s, optionally that match with UTXOIDs in an array\n           *\n           * @param utxoids An optional array of UTXOIDs, returns all [[StandardUTXO]]s if not provided\n           *\n           * @returns An array of [[StandardUTXO]]s.\n           */\n        this.getAllUTXOs = (utxoids = undefined) => {\n            let results = [];\n            if (typeof utxoids !== 'undefined' && Array.isArray(utxoids)) {\n                for (let i = 0; i < utxoids.length; i++) {\n                    if (utxoids[i] in this.utxos && !(utxoids[i] in results)) {\n                        results.push(this.utxos[utxoids[i]]);\n                    }\n                }\n            }\n            else {\n                results = Object.values(this.utxos);\n            }\n            return results;\n        };\n        /**\n           * Gets all the [[StandardUTXO]]s as strings, optionally that match with UTXOIDs in an array.\n           *\n           * @param utxoids An optional array of UTXOIDs, returns all [[StandardUTXO]]s if not provided\n           *\n           * @returns An array of [[StandardUTXO]]s as cb58 serialized strings.\n           */\n        this.getAllUTXOStrings = (utxoids = undefined) => {\n            const results = [];\n            const utxos = Object.keys(this.utxos);\n            if (typeof utxoids !== 'undefined' && Array.isArray(utxoids)) {\n                for (let i = 0; i < utxoids.length; i++) {\n                    if (utxoids[i] in this.utxos) {\n                        results.push(this.utxos[utxoids[i]].toString());\n                    }\n                }\n            }\n            else {\n                for (const u of utxos) {\n                    results.push(this.utxos[u].toString());\n                }\n            }\n            return results;\n        };\n        /**\n           * Given an address or array of addresses, returns all the UTXOIDs for those addresses\n           *\n           * @param address An array of address {@link https://github.com/feross/buffer|Buffer}s\n           * @param spendable If true, only retrieves UTXOIDs whose locktime has passed\n           *\n           * @returns An array of addresses.\n           */\n        this.getUTXOIDs = (addresses = undefined, spendable = true) => {\n            if (typeof addresses !== 'undefined') {\n                const results = [];\n                const now = helperfunctions_1.UnixNow();\n                for (let i = 0; i < addresses.length; i++) {\n                    if (addresses[i].toString('hex') in this.addressUTXOs) {\n                        const entries = Object.entries(this.addressUTXOs[addresses[i].toString('hex')]);\n                        for (const [utxoid, locktime] of entries) {\n                            if ((results.indexOf(utxoid) === -1\n                                && (spendable && locktime.lte(now)))\n                                || !spendable) {\n                                results.push(utxoid);\n                            }\n                        }\n                    }\n                }\n                return results;\n            }\n            return Object.keys(this.utxos);\n        };\n        /**\n           * Gets the addresses in the [[StandardUTXOSet]] and returns an array of {@link https://github.com/feross/buffer|Buffer}.\n           */\n        this.getAddresses = () => Object.keys(this.addressUTXOs)\n            .map((k) => buffer_1.Buffer.from(k, 'hex'));\n        /**\n           * Returns the balance of a set of addresses in the StandardUTXOSet.\n           *\n           * @param addresses An array of addresses\n           * @param assetID Either a {@link https://github.com/feross/buffer|Buffer} or an cb58 serialized representation of an AssetID\n           * @param asOf The timestamp to verify the transaction against as a {@link https://github.com/indutny/bn.js/|BN}\n           *\n           * @returns Returns the total balance as a {@link https://github.com/indutny/bn.js/|BN}.\n           */\n        this.getBalance = (addresses, assetID, asOf = undefined) => {\n            const utxoids = this.getUTXOIDs(addresses);\n            const utxos = this.getAllUTXOs(utxoids);\n            let spend = new bn_js_1.default(0);\n            let asset;\n            if (typeof assetID === 'string') {\n                asset = bintools.cb58Decode(assetID);\n            }\n            else {\n                asset = assetID;\n            }\n            for (let i = 0; i < utxos.length; i++) {\n                if (utxos[i].getOutput() instanceof output_1.StandardAmountOutput\n                    && utxos[i].getAssetID().toString('hex') === asset.toString('hex')\n                    && utxos[i].getOutput().meetsThreshold(addresses, asOf)) {\n                    spend = spend.add(utxos[i].getOutput().getAmount());\n                }\n            }\n            return spend;\n        };\n        /**\n           * Gets all the Asset IDs, optionally that match with Asset IDs in an array\n           *\n           * @param utxoids An optional array of Addresses as string or Buffer, returns all Asset IDs if not provided\n           *\n           * @returns An array of {@link https://github.com/feross/buffer|Buffer} representing the Asset IDs.\n           */\n        this.getAssetIDs = (addresses = undefined) => {\n            const results = new Set();\n            let utxoids = [];\n            if (typeof addresses !== 'undefined') {\n                utxoids = this.getUTXOIDs(addresses);\n            }\n            else {\n                utxoids = this.getUTXOIDs();\n            }\n            for (let i = 0; i < utxoids.length; i++) {\n                if (utxoids[i] in this.utxos && !(utxoids[i] in results)) {\n                    results.add(this.utxos[utxoids[i]].getAssetID());\n                }\n            }\n            return [...results];\n        };\n        /**\n           * Returns a new set with copy of UTXOs in this and set parameter.\n           *\n           * @param utxoset The [[StandardUTXOSet]] to merge with this one\n           * @param hasUTXOIDs Will subselect a set of [[StandardUTXO]]s which have the UTXOIDs provided in this array, defults to all UTXOs\n           *\n           * @returns A new StandardUTXOSet that contains all the filtered elements.\n           */\n        this.merge = (utxoset, hasUTXOIDs = undefined) => {\n            const results = this.create();\n            const utxos1 = this.getAllUTXOs(hasUTXOIDs);\n            const utxos2 = utxoset.getAllUTXOs(hasUTXOIDs);\n            const process = (utxo) => {\n                results.add(utxo);\n            };\n            utxos1.forEach(process);\n            utxos2.forEach(process);\n            return results;\n        };\n        /**\n           * Set intersetion between this set and a parameter.\n           *\n           * @param utxoset The set to intersect\n           *\n           * @returns A new StandardUTXOSet containing the intersection\n           */\n        this.intersection = (utxoset) => {\n            const us1 = this.getUTXOIDs();\n            const us2 = utxoset.getUTXOIDs();\n            const results = us1.filter((utxoid) => us2.includes(utxoid));\n            return this.merge(utxoset, results);\n        };\n        /**\n           * Set difference between this set and a parameter.\n           *\n           * @param utxoset The set to difference\n           *\n           * @returns A new StandardUTXOSet containing the difference\n           */\n        this.difference = (utxoset) => {\n            const us1 = this.getUTXOIDs();\n            const us2 = utxoset.getUTXOIDs();\n            const results = us1.filter((utxoid) => !us2.includes(utxoid));\n            return this.merge(utxoset, results);\n        };\n        /**\n           * Set symmetrical difference between this set and a parameter.\n           *\n           * @param utxoset The set to symmetrical difference\n           *\n           * @returns A new StandardUTXOSet containing the symmetrical difference\n           */\n        this.symDifference = (utxoset) => {\n            const us1 = this.getUTXOIDs();\n            const us2 = utxoset.getUTXOIDs();\n            const results = us1.filter((utxoid) => !us2.includes(utxoid))\n                .concat(us2.filter((utxoid) => !us1.includes(utxoid)));\n            return this.merge(utxoset, results);\n        };\n        /**\n           * Set union between this set and a parameter.\n           *\n           * @param utxoset The set to union\n           *\n           * @returns A new StandardUTXOSet containing the union\n           */\n        this.union = (utxoset) => this.merge(utxoset);\n        /**\n           * Merges a set by the rule provided.\n           *\n           * @param utxoset The set to merge by the MergeRule\n           * @param mergeRule The [[MergeRule]] to apply\n           *\n           * @returns A new StandardUTXOSet containing the merged data\n           *\n           * @remarks\n           * The merge rules are as follows:\n           *   * \"intersection\" - the intersection of the set\n           *   * \"differenceSelf\" - the difference between the existing data and new set\n           *   * \"differenceNew\" - the difference between the new data and the existing set\n           *   * \"symDifference\" - the union of the differences between both sets of data\n           *   * \"union\" - the unique set of all elements contained in both sets\n           *   * \"unionMinusNew\" - the unique set of all elements contained in both sets, excluding values only found in the new set\n           *   * \"unionMinusSelf\" - the unique set of all elements contained in both sets, excluding values only found in the existing set\n           */\n        this.mergeByRule = (utxoset, mergeRule) => {\n            let uSet;\n            switch (mergeRule) {\n                case 'intersection':\n                    return this.intersection(utxoset);\n                case 'differenceSelf':\n                    return this.difference(utxoset);\n                case 'differenceNew':\n                    return utxoset.difference(this);\n                case 'symDifference':\n                    return this.symDifference(utxoset);\n                case 'union':\n                    return this.union(utxoset);\n                case 'unionMinusNew':\n                    uSet = this.union(utxoset);\n                    return uSet.difference(utxoset);\n                case 'unionMinusSelf':\n                    uSet = this.union(utxoset);\n                    return uSet.difference(this);\n                default:\n                    throw new Error(`Error - StandardUTXOSet.mergeByRule: bad MergeRule - ${mergeRule}`);\n            }\n        };\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        let utxos = {};\n        for (let utxoid in this.utxos) {\n            let utxoidCleaned = serializer.encoder(utxoid, encoding, \"base58\", \"base58\");\n            utxos[utxoidCleaned] = this.utxos[utxoid].serialize(encoding);\n        }\n        let addressUTXOs = {};\n        for (let address in this.addressUTXOs) {\n            let addressCleaned = serializer.encoder(address, encoding, \"hex\", \"cb58\");\n            let utxobalance = {};\n            for (let utxoid in this.addressUTXOs[address]) {\n                let utxoidCleaned = serializer.encoder(utxoid, encoding, \"base58\", \"base58\");\n                utxobalance[utxoidCleaned] = serializer.encoder(this.addressUTXOs[address][utxoid], encoding, \"BN\", \"decimalString\");\n            }\n            addressUTXOs[addressCleaned] = utxobalance;\n        }\n        return Object.assign(Object.assign({}, fields), { utxos,\n            addressUTXOs });\n    }\n    ;\n    /**\n       * Adds a [[StandardUTXO]] to the StandardUTXOSet.\n       *\n       * @param utxo Either a [[StandardUTXO]] an cb58 serialized string representing a StandardUTXO\n       * @param overwrite If true, if the UTXOID already exists, overwrite it... default false\n       *\n       * @returns A [[StandardUTXO]] if one was added and undefined if nothing was added.\n       */\n    add(utxo, overwrite = false) {\n        let utxovar = undefined;\n        try {\n            utxovar = this.parseUTXO(utxo);\n        }\n        catch (e) {\n            if (e instanceof Error) {\n                console.log(e.message);\n            }\n            else {\n                console.log(e);\n            }\n            return undefined;\n        }\n        const utxoid = utxovar.getUTXOID();\n        if (!(utxoid in this.utxos) || overwrite === true) {\n            this.utxos[utxoid] = utxovar;\n            const addresses = utxovar.getOutput().getAddresses();\n            const locktime = utxovar.getOutput().getLocktime();\n            for (let i = 0; i < addresses.length; i++) {\n                const address = addresses[i].toString('hex');\n                if (!(address in this.addressUTXOs)) {\n                    this.addressUTXOs[address] = {};\n                }\n                this.addressUTXOs[address][utxoid] = locktime;\n            }\n            return utxovar;\n        }\n        return undefined;\n    }\n    ;\n    /**\n       * Adds an array of [[StandardUTXO]]s to the [[StandardUTXOSet]].\n       *\n       * @param utxo Either a [[StandardUTXO]] an cb58 serialized string representing a StandardUTXO\n       * @param overwrite If true, if the UTXOID already exists, overwrite it... default false\n       *\n       * @returns An array of StandardUTXOs which were added.\n       */\n    addArray(utxos, overwrite = false) {\n        const added = [];\n        for (let i = 0; i < utxos.length; i++) {\n            let result = this.add(utxos[i], overwrite);\n            if (typeof result !== 'undefined') {\n                added.push(result);\n            }\n        }\n        return added;\n    }\n    ;\n    filter(args, lambda) {\n        let newset = this.clone();\n        let utxos = this.getAllUTXOs();\n        for (let i = 0; i < utxos.length; i++) {\n            if (lambda(utxos[i], ...args) === false) {\n                newset.remove(utxos[i]);\n            }\n        }\n        return newset;\n    }\n}\nexports.StandardUTXOSet = StandardUTXOSet;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXR4b3MuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tbW9uL3V0eG9zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7R0FHRztBQUNILG9DQUFpQztBQUNqQyxpRUFBeUM7QUFDekMsa0RBQXVCO0FBQ3ZCLHFDQUF3RDtBQUN4RCw4REFBbUQ7QUFFbkQsMERBQXlGO0FBRXpGOztHQUVHO0FBQ0gsTUFBTSxRQUFRLEdBQUcsa0JBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUN4QyxNQUFNLFVBQVUsR0FBRyw2QkFBYSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBRS9DOztHQUVHO0FBQ0gsTUFBc0IsWUFBYSxTQUFRLDRCQUFZO0lBd0dyRDs7Ozs7Ozs7U0FRSztJQUNMLFlBQVksVUFBaUIsQ0FBQyxFQUFFLE9BQWMsU0FBUyxFQUNyRCxZQUE0QixTQUFTLEVBQ3JDLFVBQWlCLFNBQVMsRUFDMUIsU0FBZ0IsU0FBUztRQUN6QixLQUFLLEVBQUUsQ0FBQztRQXBIQSxjQUFTLEdBQUcsY0FBYyxDQUFDO1FBQzNCLFlBQU8sR0FBRyxTQUFTLENBQUM7UUFxQnBCLFlBQU8sR0FBVSxlQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLFNBQUksR0FBVSxlQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQy9CLGNBQVMsR0FBVSxlQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25DLFlBQU8sR0FBVSxlQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2xDLFdBQU0sR0FBVSxTQUFTLENBQUM7UUFFcEM7O2FBRUs7UUFDTCxlQUFVLEdBQUcsR0FFTCxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFckM7O1lBRUk7UUFDSixxQkFBZ0IsR0FBRyxHQUFVLEVBQUUsQ0FBQyxJQUFJLENB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QU8sU0FBUyxDQUFDO0lBQ25CLENBQUM7SUFBQSxDQUFDO0lBRUY7Ozs7Ozs7U0FPSztJQUNMLFFBQVEsQ0FBQyxLQUErQixFQUFFLFlBQW9CLEtBQUs7UUFDakUsTUFBTSxLQUFLLEdBQW9CLEVBQUUsQ0FBQztRQUNsQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNyQyxJQUFJLE1BQU0sR0FBYSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUNyRCxJQUFJLE9BQU8sTUFBTSxLQUFLLFdBQVcsRUFBRTtnQkFDL0IsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUN0QjtTQUNGO1FBQ0QsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0lBQUEsQ0FBQztJQTBNRixNQUFNLENBQUMsSUFBVSxFQUFFLE1BQWtEO1FBQ25FLElBQUksTUFBTSxHQUFRLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUMvQixJQUFJLEtBQUssR0FBb0IsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ2hELEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFDO1lBQ25DLElBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLEtBQUssRUFBRTtnQkFDdEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUN6QjtTQUNGO1FBQ0QsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztDQW1IRjtBQXBiRCwwQ0FvYkMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICogQG1vZHVsZSBDb21tb24tVVRYT3NcbiAqL1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyLyc7XG5pbXBvcnQgQmluVG9vbHMgZnJvbSAnLi4vdXRpbHMvYmludG9vbHMnO1xuaW1wb3J0IEJOIGZyb20gXCJibi5qc1wiO1xuaW1wb3J0IHsgT3V0cHV0LCBTdGFuZGFyZEFtb3VudE91dHB1dCB9IGZyb20gJy4vb3V0cHV0JztcbmltcG9ydCB7IFVuaXhOb3cgfSBmcm9tICcuLi91dGlscy9oZWxwZXJmdW5jdGlvbnMnO1xuaW1wb3J0IHsgTWVyZ2VSdWxlIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcbmltcG9ydCB7IFNlcmlhbGl6YWJsZSwgU2VyaWFsaXphdGlvbiwgU2VyaWFsaXplZEVuY29kaW5nIH0gZnJvbSAnLi4vdXRpbHMvc2VyaWFsaXphdGlvbic7XG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5jb25zdCBiaW50b29scyA9IEJpblRvb2xzLmdldEluc3RhbmNlKCk7XG5jb25zdCBzZXJpYWxpemVyID0gU2VyaWFsaXphdGlvbi5nZXRJbnN0YW5jZSgpO1xuXG4vKipcbiAqIENsYXNzIGZvciByZXByZXNlbnRpbmcgYSBzaW5nbGUgU3RhbmRhcmRVVFhPLlxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgU3RhbmRhcmRVVFhPIGV4dGVuZHMgU2VyaWFsaXphYmxle1xuICBwcm90ZWN0ZWQgX3R5cGVOYW1lID0gXCJTdGFuZGFyZFVUWE9cIjtcbiAgcHJvdGVjdGVkIF90eXBlSUQgPSB1bmRlZmluZWQ7XG5cbiAgc2VyaWFsaXplKGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpOm9iamVjdCB7XG4gICAgbGV0IGZpZWxkczpvYmplY3QgPSBzdXBlci5zZXJpYWxpemUoZW5jb2RpbmcpO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5maWVsZHMsXG4gICAgICBcImNvZGVjaWRcIjogc2VyaWFsaXplci5lbmNvZGVyKHRoaXMuY29kZWNpZCwgZW5jb2RpbmcsIFwiQnVmZmVyXCIsIFwiZGVjaW1hbFN0cmluZ1wiKSxcbiAgICAgIFwidHhpZFwiOiBzZXJpYWxpemVyLmVuY29kZXIodGhpcy50eGlkLCBlbmNvZGluZywgXCJCdWZmZXJcIiwgXCJjYjU4XCIpLFxuICAgICAgXCJvdXRwdXRpZHhcIjogc2VyaWFsaXplci5lbmNvZGVyKHRoaXMub3V0cHV0aWR4LCBlbmNvZGluZywgXCJCdWZmZXJcIiwgXCJkZWNpbWFsU3RyaW5nXCIpLFxuICAgICAgXCJhc3NldGlkXCI6IHNlcmlhbGl6ZXIuZW5jb2Rlcih0aGlzLmFzc2V0aWQsIGVuY29kaW5nLCBcIkJ1ZmZlclwiLCBcImNiNThcIiksXG4gICAgICBcIm91dHB1dFwiOiB0aGlzLm91dHB1dC5zZXJpYWxpemUoZW5jb2RpbmcpXG4gICAgfVxuICB9O1xuICBkZXNlcmlhbGl6ZShmaWVsZHM6b2JqZWN0LCBlbmNvZGluZzpTZXJpYWxpemVkRW5jb2RpbmcgPSBcImhleFwiKSB7XG4gICAgc3VwZXIuZGVzZXJpYWxpemUoZmllbGRzLCBlbmNvZGluZyk7XG4gICAgdGhpcy5jb2RlY2lkID0gc2VyaWFsaXplci5kZWNvZGVyKGZpZWxkc1tcImNvZGVjaWRcIl0sIGVuY29kaW5nLCBcImRlY2ltYWxTdHJpbmdcIiwgXCJCdWZmZXJcIiwgMik7XG4gICAgdGhpcy50eGlkID0gc2VyaWFsaXplci5kZWNvZGVyKGZpZWxkc1tcInR4aWRcIl0sIGVuY29kaW5nLCBcImNiNThcIiwgXCJCdWZmZXJcIiwgMzIpO1xuICAgIHRoaXMub3V0cHV0aWR4ID0gc2VyaWFsaXplci5kZWNvZGVyKGZpZWxkc1tcIm91dHB1dGlkeFwiXSwgZW5jb2RpbmcsIFwiZGVjaW1hbFN0cmluZ1wiLCBcIkJ1ZmZlclwiLCA0KTtcbiAgICB0aGlzLmFzc2V0aWQgPSBzZXJpYWxpemVyLmRlY29kZXIoZmllbGRzW1wiYXNzZXRpZFwiXSwgZW5jb2RpbmcsIFwiY2I1OFwiLCBcIkJ1ZmZlclwiLCAzMik7XG4gIH1cblxuICBwcm90ZWN0ZWQgY29kZWNpZDpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoMik7XG4gIHByb3RlY3RlZCB0eGlkOkJ1ZmZlciA9IEJ1ZmZlci5hbGxvYygzMik7XG4gIHByb3RlY3RlZCBvdXRwdXRpZHg6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDQpO1xuICBwcm90ZWN0ZWQgYXNzZXRpZDpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoMzIpO1xuICBwcm90ZWN0ZWQgb3V0cHV0Ok91dHB1dCA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1lcmljIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBDb2RlY0lELlxuICAgICAqL1xuICBnZXRDb2RlY0lEID0gKClcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgOm51bWJlciA9PiB0aGlzLmNvZGVjaWQucmVhZFVJbnQ4KDApO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSByZXByZXNlbnRhdGlvbiBvZiB0aGUgQ29kZWNJRFxuICAgICovXG4gIGdldENvZGVjSURCdWZmZXIgPSAoKTpCdWZmZXIgPT4gdGhpcy5jb2RlY2lkO1xuXG4gIC8qKlxuICAgICAqIFJldHVybnMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBvZiB0aGUgVHhJRC5cbiAgICAgKi9cbiAgZ2V0VHhJRCA9ICgpXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIDpCdWZmZXIgPT4gdGhpcy50eGlkO1xuXG4gIC8qKlxuICAgICAqIFJldHVybnMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSAgb2YgdGhlIE91dHB1dElkeC5cbiAgICAgKi9cbiAgZ2V0T3V0cHV0SWR4ID0gKClcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgOkJ1ZmZlciA9PiB0aGlzLm91dHB1dGlkeDtcblxuICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBhc3NldElEIGFzIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0uXG4gICAgICovXG4gIGdldEFzc2V0SUQgPSAoKTpCdWZmZXIgPT4gdGhpcy5hc3NldGlkO1xuXG4gIC8qKlxuICAgICAqIFJldHVybnMgdGhlIFVUWE9JRCBhcyBhIGJhc2UtNTggc3RyaW5nIChVVFhPSUQgaXMgYSBzdHJpbmcgKVxuICAgICAqL1xuICBnZXRVVFhPSUQgPSAoKVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICA6c3RyaW5nID0+IGJpbnRvb2xzLmJ1ZmZlclRvQjU4KEJ1ZmZlci5jb25jYXQoW3RoaXMuZ2V0VHhJRCgpLCB0aGlzLmdldE91dHB1dElkeCgpXSkpO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoZSBvdXRwdXQ7XG4gICovXG4gIGdldE91dHB1dCA9ICgpOk91dHB1dCA9PiB0aGlzLm91dHB1dDtcblxuICAvKipcbiAgICogVGFrZXMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBjb250YWluaW5nIGFuIFtbU3RhbmRhcmRVVFhPXV0sIHBhcnNlcyBpdCwgcG9wdWxhdGVzIHRoZSBjbGFzcywgYW5kIHJldHVybnMgdGhlIGxlbmd0aCBvZiB0aGUgU3RhbmRhcmRVVFhPIGluIGJ5dGVzLlxuICAgKlxuICAgKiBAcGFyYW0gYnl0ZXMgQSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBjb250YWluaW5nIGEgcmF3IFtbU3RhbmRhcmRVVFhPXV1cbiAgICovXG4gIGFic3RyYWN0IGZyb21CdWZmZXIoYnl0ZXM6QnVmZmVyLCBvZmZzZXQ/Om51bWJlcik6bnVtYmVyO1xuXG4gIC8qKlxuICAgICAqIFJldHVybnMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSByZXByZXNlbnRhdGlvbiBvZiB0aGUgW1tTdGFuZGFyZFVUWE9dXS5cbiAgICAgKi9cbiAgdG9CdWZmZXIoKTpCdWZmZXIge1xuICAgIGNvbnN0IG91dGJ1ZmY6QnVmZmVyID0gdGhpcy5vdXRwdXQudG9CdWZmZXIoKTtcbiAgICBjb25zdCBvdXRwdXRpZGJ1ZmZlcjpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoNCk7XG4gICAgb3V0cHV0aWRidWZmZXIud3JpdGVVSW50MzJCRSh0aGlzLm91dHB1dC5nZXRPdXRwdXRJRCgpLCAwKTtcbiAgICBjb25zdCBiYXJyOkFycmF5PEJ1ZmZlcj4gPSBbdGhpcy5jb2RlY2lkLCB0aGlzLnR4aWQsIHRoaXMub3V0cHV0aWR4LCB0aGlzLmFzc2V0aWQsIG91dHB1dGlkYnVmZmVyLCBvdXRidWZmXTtcbiAgICByZXR1cm4gQnVmZmVyLmNvbmNhdChiYXJyLCBcbiAgICAgIHRoaXMuY29kZWNpZC5sZW5ndGggKyB0aGlzLnR4aWQubGVuZ3RoIFxuICAgICAgKyB0aGlzLm91dHB1dGlkeC5sZW5ndGggKyB0aGlzLmFzc2V0aWQubGVuZ3RoXG4gICAgICArIG91dHB1dGlkYnVmZmVyLmxlbmd0aCArIG91dGJ1ZmYubGVuZ3RoKTtcbiAgfVxuXG4gIGFic3RyYWN0IGZyb21TdHJpbmcoc2VyaWFsaXplZDpzdHJpbmcpOm51bWJlcjtcblxuICBhYnN0cmFjdCB0b1N0cmluZygpOnN0cmluZztcblxuICBhYnN0cmFjdCBjbG9uZSgpOnRoaXM7XG5cbiAgYWJzdHJhY3QgY3JlYXRlKGNvZGVjSUQ/Om51bWJlciwgdHhpZD86QnVmZmVyLFxuICAgIG91dHB1dGlkeD86QnVmZmVyIHwgbnVtYmVyLFxuICAgIGFzc2V0aWQ/OkJ1ZmZlcixcbiAgICBvdXRwdXQ/Ok91dHB1dCk6dGhpcztcblxuICAvKipcbiAgICAgKiBDbGFzcyBmb3IgcmVwcmVzZW50aW5nIGEgc2luZ2xlIFN0YW5kYXJkVVRYTy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb2RlY0lEIE9wdGlvbmFsIG51bWJlciB3aGljaCBzcGVjaWZpZXMgdGhlIGNvZGVJRCBvZiB0aGUgVVRYTy4gRGVmYXVsdCAxXG4gICAgICogQHBhcmFtIHR4aWQgT3B0aW9uYWwge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gb2YgdHJhbnNhY3Rpb24gSUQgZm9yIHRoZSBTdGFuZGFyZFVUWE9cbiAgICAgKiBAcGFyYW0gdHhpZHggT3B0aW9uYWwge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gb3IgbnVtYmVyIGZvciB0aGUgaW5kZXggb2YgdGhlIHRyYW5zYWN0aW9uJ3MgW1tPdXRwdXRdXVxuICAgICAqIEBwYXJhbSBhc3NldGlkIE9wdGlvbmFsIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IG9mIHRoZSBhc3NldCBJRCBmb3IgdGhlIFN0YW5kYXJkVVRYT1xuICAgICAqIEBwYXJhbSBvdXRwdXRpZCBPcHRpb25hbCB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBvciBudW1iZXIgb2YgdGhlIG91dHB1dCBJRCBmb3IgdGhlIFN0YW5kYXJkVVRYT1xuICAgICAqL1xuICBjb25zdHJ1Y3Rvcihjb2RlY0lEOm51bWJlciA9IDAsIHR4aWQ6QnVmZmVyID0gdW5kZWZpbmVkLFxuICAgIG91dHB1dGlkeDpCdWZmZXIgfCBudW1iZXIgPSB1bmRlZmluZWQsXG4gICAgYXNzZXRpZDpCdWZmZXIgPSB1bmRlZmluZWQsXG4gICAgb3V0cHV0Ok91dHB1dCA9IHVuZGVmaW5lZCl7XG4gICAgc3VwZXIoKTtcbiAgICBpZiAodHlwZW9mIGNvZGVjSUQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmNvZGVjaWQgLndyaXRlVUludDgoY29kZWNJRCwgMCk7XG4gICAgfVxuICAgIGlmKHR5cGVvZiB0eGlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy50eGlkID0gdHhpZDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvdXRwdXRpZHggPT09ICdudW1iZXInKSB7XG4gICAgICB0aGlzLm91dHB1dGlkeC53cml0ZVVJbnQzMkJFKG91dHB1dGlkeCwgMCk7XG4gICAgfSBlbHNlIGlmIChvdXRwdXRpZHggaW5zdGFuY2VvZiBCdWZmZXIpIHtcbiAgICAgIHRoaXMub3V0cHV0aWR4ID0gb3V0cHV0aWR4O1xuICAgIH0gXG5cbiAgICBpZih0eXBlb2YgYXNzZXRpZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuYXNzZXRpZCA9IGFzc2V0aWQ7XG4gICAgfVxuICAgIGlmKHR5cGVvZiBvdXRwdXQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm91dHB1dCA9IG91dHB1dDtcbiAgICB9XG4gICAgICBcbiAgfVxufVxuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYSBzZXQgb2YgW1tTdGFuZGFyZFVUWE9dXXMuXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTdGFuZGFyZFVUWE9TZXQ8VVRYT0NsYXNzIGV4dGVuZHMgU3RhbmRhcmRVVFhPPiBleHRlbmRzIFNlcmlhbGl6YWJsZXtcbiAgcHJvdGVjdGVkIF90eXBlTmFtZSA9IFwiU3RhbmRhcmRVVFhPU2V0XCI7XG4gIHByb3RlY3RlZCBfdHlwZUlEID0gdW5kZWZpbmVkO1xuXG4gIHNlcmlhbGl6ZShlbmNvZGluZzpTZXJpYWxpemVkRW5jb2RpbmcgPSBcImhleFwiKTpvYmplY3Qge1xuICAgIGxldCBmaWVsZHM6b2JqZWN0ID0gc3VwZXIuc2VyaWFsaXplKGVuY29kaW5nKTtcbiAgICBsZXQgdXR4b3MgPSB7fTtcbiAgICBmb3IobGV0IHV0eG9pZCBpbiB0aGlzLnV0eG9zKSB7XG4gICAgICBsZXQgdXR4b2lkQ2xlYW5lZDpzdHJpbmcgPSBzZXJpYWxpemVyLmVuY29kZXIodXR4b2lkLCBlbmNvZGluZywgXCJiYXNlNThcIiwgXCJiYXNlNThcIik7XG4gICAgICB1dHhvc1t1dHhvaWRDbGVhbmVkXSA9IHRoaXMudXR4b3NbdXR4b2lkXS5zZXJpYWxpemUoZW5jb2RpbmcpO1xuICAgIH1cbiAgICBsZXQgYWRkcmVzc1VUWE9zID0ge307XG4gICAgZm9yKGxldCBhZGRyZXNzIGluIHRoaXMuYWRkcmVzc1VUWE9zKSB7XG4gICAgICBsZXQgYWRkcmVzc0NsZWFuZWQ6c3RyaW5nID0gc2VyaWFsaXplci5lbmNvZGVyKGFkZHJlc3MsIGVuY29kaW5nLCBcImhleFwiLCBcImNiNThcIik7XG4gICAgICBsZXQgdXR4b2JhbGFuY2UgPSB7fTtcbiAgICAgIGZvcihsZXQgdXR4b2lkIGluIHRoaXMuYWRkcmVzc1VUWE9zW2FkZHJlc3NdKXtcbiAgICAgICAgbGV0IHV0eG9pZENsZWFuZWQ6c3RyaW5nID0gc2VyaWFsaXplci5lbmNvZGVyKHV0eG9pZCwgZW5jb2RpbmcsIFwiYmFzZTU4XCIsIFwiYmFzZTU4XCIpO1xuICAgICAgICB1dHhvYmFsYW5jZVt1dHhvaWRDbGVhbmVkXSA9IHNlcmlhbGl6ZXIuZW5jb2Rlcih0aGlzLmFkZHJlc3NVVFhPc1thZGRyZXNzXVt1dHhvaWRdLCBlbmNvZGluZywgXCJCTlwiLCBcImRlY2ltYWxTdHJpbmdcIik7XG4gICAgICB9XG4gICAgICBhZGRyZXNzVVRYT3NbYWRkcmVzc0NsZWFuZWRdID0gdXR4b2JhbGFuY2U7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAuLi5maWVsZHMsXG4gICAgICB1dHhvcyxcbiAgICAgIGFkZHJlc3NVVFhPc1xuICAgIH1cbiAgfTtcblxuICBwcm90ZWN0ZWQgdXR4b3M6e1t1dHhvaWQ6IHN0cmluZ106IFVUWE9DbGFzcyB9ID0ge307XG4gIHByb3RlY3RlZCBhZGRyZXNzVVRYT3M6e1thZGRyZXNzOiBzdHJpbmddOiB7W3V0eG9pZDogc3RyaW5nXTogQk59fSA9IHt9OyAvLyBtYXBzIGFkZHJlc3MgdG8gdXR4b2lkczpsb2NrdGltZVxuXG4gIGFic3RyYWN0IHBhcnNlVVRYTyh1dHhvOlVUWE9DbGFzcyB8IHN0cmluZyk6VVRYT0NsYXNzO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIFtbU3RhbmRhcmRVVFhPXV0gaXMgaW4gdGhlIFN0YW5kYXJkVVRYT1NldC5cbiAgICpcbiAgICogQHBhcmFtIHV0eG8gRWl0aGVyIGEgW1tTdGFuZGFyZFVUWE9dXSBhIGNiNTggc2VyaWFsaXplZCBzdHJpbmcgcmVwcmVzZW50aW5nIGEgU3RhbmRhcmRVVFhPXG4gICAqL1xuICBpbmNsdWRlcyA9ICh1dHhvOlVUWE9DbGFzcyB8IHN0cmluZyk6Ym9vbGVhbiA9PiB7XG4gICAgbGV0IHV0eG9YOlVUWE9DbGFzcyA9IHVuZGVmaW5lZDtcbiAgICBsZXQgdXR4b2lkOnN0cmluZyA9IHVuZGVmaW5lZDtcbiAgICB0cnkge1xuICAgICAgdXR4b1ggPSB0aGlzLnBhcnNlVVRYTyh1dHhvKTtcbiAgICAgIHV0eG9pZCA9IHV0eG9YLmdldFVUWE9JRCgpO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgaWYoZSBpbnN0YW5jZW9mIEVycm9yKXtcbiAgICAgICAgY29uc29sZS5sb2coZS5tZXNzYWdlKTtcbiAgICAgIH0gZWxzZXsgXG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gKHV0eG9pZCBpbiB0aGlzLnV0eG9zKTtcbiAgfTtcblxuICAvKipcbiAgICAgKiBBZGRzIGEgW1tTdGFuZGFyZFVUWE9dXSB0byB0aGUgU3RhbmRhcmRVVFhPU2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHV0eG8gRWl0aGVyIGEgW1tTdGFuZGFyZFVUWE9dXSBhbiBjYjU4IHNlcmlhbGl6ZWQgc3RyaW5nIHJlcHJlc2VudGluZyBhIFN0YW5kYXJkVVRYT1xuICAgICAqIEBwYXJhbSBvdmVyd3JpdGUgSWYgdHJ1ZSwgaWYgdGhlIFVUWE9JRCBhbHJlYWR5IGV4aXN0cywgb3ZlcndyaXRlIGl0Li4uIGRlZmF1bHQgZmFsc2VcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgW1tTdGFuZGFyZFVUWE9dXSBpZiBvbmUgd2FzIGFkZGVkIGFuZCB1bmRlZmluZWQgaWYgbm90aGluZyB3YXMgYWRkZWQuXG4gICAgICovXG4gIGFkZCh1dHhvOlVUWE9DbGFzcyB8IHN0cmluZywgb3ZlcndyaXRlOmJvb2xlYW4gPSBmYWxzZSk6VVRYT0NsYXNzIHtcbiAgICBsZXQgdXR4b3ZhcjpVVFhPQ2xhc3MgPSB1bmRlZmluZWQ7XG4gICAgdHJ5IHtcbiAgICAgIHV0eG92YXIgPSB0aGlzLnBhcnNlVVRYTyh1dHhvKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIGlmKGUgaW5zdGFuY2VvZiBFcnJvcil7XG4gICAgICAgIGNvbnNvbGUubG9nKGUubWVzc2FnZSk7XG4gICAgICB9IGVsc2V7IFxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7IFxuICAgIH1cblxuICAgIGNvbnN0IHV0eG9pZDpzdHJpbmcgPSB1dHhvdmFyLmdldFVUWE9JRCgpO1xuICAgIGlmICghKHV0eG9pZCBpbiB0aGlzLnV0eG9zKSB8fCBvdmVyd3JpdGUgPT09IHRydWUpIHtcbiAgICAgIHRoaXMudXR4b3NbdXR4b2lkXSA9IHV0eG92YXI7XG4gICAgICBjb25zdCBhZGRyZXNzZXM6QXJyYXk8QnVmZmVyPiA9IHV0eG92YXIuZ2V0T3V0cHV0KCkuZ2V0QWRkcmVzc2VzKCk7XG4gICAgICBjb25zdCBsb2NrdGltZTpCTiA9IHV0eG92YXIuZ2V0T3V0cHV0KCkuZ2V0TG9ja3RpbWUoKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWRkcmVzc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGFkZHJlc3M6c3RyaW5nID0gYWRkcmVzc2VzW2ldLnRvU3RyaW5nKCdoZXgnKTtcbiAgICAgICAgaWYgKCEoYWRkcmVzcyBpbiB0aGlzLmFkZHJlc3NVVFhPcykpIHtcbiAgICAgICAgICB0aGlzLmFkZHJlc3NVVFhPc1thZGRyZXNzXSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRkcmVzc1VUWE9zW2FkZHJlc3NdW3V0eG9pZF0gPSBsb2NrdGltZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1dHhvdmFyO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9O1xuXG4gIC8qKlxuICAgICAqIEFkZHMgYW4gYXJyYXkgb2YgW1tTdGFuZGFyZFVUWE9dXXMgdG8gdGhlIFtbU3RhbmRhcmRVVFhPU2V0XV0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXR4byBFaXRoZXIgYSBbW1N0YW5kYXJkVVRYT11dIGFuIGNiNTggc2VyaWFsaXplZCBzdHJpbmcgcmVwcmVzZW50aW5nIGEgU3RhbmRhcmRVVFhPXG4gICAgICogQHBhcmFtIG92ZXJ3cml0ZSBJZiB0cnVlLCBpZiB0aGUgVVRYT0lEIGFscmVhZHkgZXhpc3RzLCBvdmVyd3JpdGUgaXQuLi4gZGVmYXVsdCBmYWxzZVxuICAgICAqXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2YgU3RhbmRhcmRVVFhPcyB3aGljaCB3ZXJlIGFkZGVkLlxuICAgICAqL1xuICBhZGRBcnJheSh1dHhvczpBcnJheTxzdHJpbmcgfCBVVFhPQ2xhc3M+LCBvdmVyd3JpdGU6Ym9vbGVhbiA9IGZhbHNlKTpBcnJheTxTdGFuZGFyZFVUWE8+IHtcbiAgICBjb25zdCBhZGRlZDpBcnJheTxVVFhPQ2xhc3M+ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1dHhvcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IHJlc3VsdDpVVFhPQ2xhc3MgPSB0aGlzLmFkZCh1dHhvc1tpXSwgb3ZlcndyaXRlKTtcbiAgICAgIGlmICh0eXBlb2YgcmVzdWx0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGFkZGVkLnB1c2gocmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFkZGVkO1xuICB9O1xuXG4gIC8qKlxuICAgICAqIFJlbW92ZXMgYSBbW1N0YW5kYXJkVVRYT11dIGZyb20gdGhlIFtbU3RhbmRhcmRVVFhPU2V0XV0gaWYgaXQgZXhpc3RzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHV0eG8gRWl0aGVyIGEgW1tTdGFuZGFyZFVUWE9dXSBhbiBjYjU4IHNlcmlhbGl6ZWQgc3RyaW5nIHJlcHJlc2VudGluZyBhIFN0YW5kYXJkVVRYT1xuICAgICAqXG4gICAgICogQHJldHVybnMgQSBbW1N0YW5kYXJkVVRYT11dIGlmIGl0IHdhcyByZW1vdmVkIGFuZCB1bmRlZmluZWQgaWYgbm90aGluZyB3YXMgcmVtb3ZlZC5cbiAgICAgKi9cbiAgcmVtb3ZlID0gKHV0eG86VVRYT0NsYXNzIHwgc3RyaW5nKTpVVFhPQ2xhc3MgPT4ge1xuICAgIGxldCB1dHhvdmFyOlVUWE9DbGFzcyA9IHVuZGVmaW5lZDtcbiAgICB0cnkge1xuICAgICAgdXR4b3ZhciA9IHRoaXMucGFyc2VVVFhPKHV0eG8pO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgaWYoZSBpbnN0YW5jZW9mIEVycm9yKXtcbiAgICAgICAgY29uc29sZS5sb2coZS5tZXNzYWdlKTtcbiAgICAgIH0gZWxzZXsgXG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDsgXG4gICAgfVxuXG4gICAgY29uc3QgdXR4b2lkOnN0cmluZyA9IHV0eG92YXIuZ2V0VVRYT0lEKCk7XG4gICAgaWYgKCEodXR4b2lkIGluIHRoaXMudXR4b3MpKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBkZWxldGUgdGhpcy51dHhvc1t1dHhvaWRdO1xuICAgIGNvbnN0IGFkZHJlc3NlcyA9IE9iamVjdC5rZXlzKHRoaXMuYWRkcmVzc1VUWE9zKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFkZHJlc3Nlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHV0eG9pZCBpbiB0aGlzLmFkZHJlc3NVVFhPc1thZGRyZXNzZXNbaV1dKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmFkZHJlc3NVVFhPc1thZGRyZXNzZXNbaV1dW3V0eG9pZF07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1dHhvdmFyO1xuICB9O1xuXG4gIC8qKlxuICAgICAqIFJlbW92ZXMgYW4gYXJyYXkgb2YgW1tTdGFuZGFyZFVUWE9dXXMgdG8gdGhlIFtbU3RhbmRhcmRVVFhPU2V0XV0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXR4byBFaXRoZXIgYSBbW1N0YW5kYXJkVVRYT11dIGFuIGNiNTggc2VyaWFsaXplZCBzdHJpbmcgcmVwcmVzZW50aW5nIGEgU3RhbmRhcmRVVFhPXG4gICAgICogQHBhcmFtIG92ZXJ3cml0ZSBJZiB0cnVlLCBpZiB0aGUgVVRYT0lEIGFscmVhZHkgZXhpc3RzLCBvdmVyd3JpdGUgaXQuLi4gZGVmYXVsdCBmYWxzZVxuICAgICAqXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2YgVVRYT3Mgd2hpY2ggd2VyZSByZW1vdmVkLlxuICAgICAqL1xuICByZW1vdmVBcnJheSA9ICh1dHhvczpBcnJheTxzdHJpbmcgfCBVVFhPQ2xhc3M+KTpBcnJheTxVVFhPQ2xhc3M+ID0+IHtcbiAgICBjb25zdCByZW1vdmVkOkFycmF5PFVUWE9DbGFzcz4gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHV0eG9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCByZXN1bHQ6VVRYT0NsYXNzID0gdGhpcy5yZW1vdmUodXR4b3NbaV0pO1xuICAgICAgaWYgKHR5cGVvZiByZXN1bHQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJlbW92ZWQucHVzaChyZXN1bHQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVtb3ZlZDtcbiAgfTtcblxuICAvKipcbiAgICAgKiBHZXRzIGEgW1tTdGFuZGFyZFVUWE9dXSBmcm9tIHRoZSBbW1N0YW5kYXJkVVRYT1NldF1dIGJ5IGl0cyBVVFhPSUQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXR4b2lkIFN0cmluZyByZXByZXNlbnRpbmcgdGhlIFVUWE9JRFxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBbW1N0YW5kYXJkVVRYT11dIGlmIGl0IGV4aXN0cyBpbiB0aGUgc2V0LlxuICAgICAqL1xuICBnZXRVVFhPID0gKHV0eG9pZDpzdHJpbmcpOlVUWE9DbGFzcyA9PiB0aGlzLnV0eG9zW3V0eG9pZF07XG5cbiAgLyoqXG4gICAgICogR2V0cyBhbGwgdGhlIFtbU3RhbmRhcmRVVFhPXV1zLCBvcHRpb25hbGx5IHRoYXQgbWF0Y2ggd2l0aCBVVFhPSURzIGluIGFuIGFycmF5XG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXR4b2lkcyBBbiBvcHRpb25hbCBhcnJheSBvZiBVVFhPSURzLCByZXR1cm5zIGFsbCBbW1N0YW5kYXJkVVRYT11dcyBpZiBub3QgcHJvdmlkZWRcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIFtbU3RhbmRhcmRVVFhPXV1zLlxuICAgICAqL1xuICBnZXRBbGxVVFhPcyA9ICh1dHhvaWRzOkFycmF5PHN0cmluZz4gPSB1bmRlZmluZWQpOkFycmF5PFVUWE9DbGFzcz4gPT4ge1xuICAgIGxldCByZXN1bHRzOkFycmF5PFVUWE9DbGFzcz4gPSBbXTtcbiAgICBpZiAodHlwZW9mIHV0eG9pZHMgIT09ICd1bmRlZmluZWQnICYmIEFycmF5LmlzQXJyYXkodXR4b2lkcykpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXR4b2lkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodXR4b2lkc1tpXSBpbiB0aGlzLnV0eG9zICYmICEodXR4b2lkc1tpXSBpbiByZXN1bHRzKSkge1xuICAgICAgICAgIHJlc3VsdHMucHVzaCh0aGlzLnV0eG9zW3V0eG9pZHNbaV1dKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHRzID0gT2JqZWN0LnZhbHVlcyh0aGlzLnV0eG9zKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLyoqXG4gICAgICogR2V0cyBhbGwgdGhlIFtbU3RhbmRhcmRVVFhPXV1zIGFzIHN0cmluZ3MsIG9wdGlvbmFsbHkgdGhhdCBtYXRjaCB3aXRoIFVUWE9JRHMgaW4gYW4gYXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXR4b2lkcyBBbiBvcHRpb25hbCBhcnJheSBvZiBVVFhPSURzLCByZXR1cm5zIGFsbCBbW1N0YW5kYXJkVVRYT11dcyBpZiBub3QgcHJvdmlkZWRcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIFtbU3RhbmRhcmRVVFhPXV1zIGFzIGNiNTggc2VyaWFsaXplZCBzdHJpbmdzLlxuICAgICAqL1xuICBnZXRBbGxVVFhPU3RyaW5ncyA9ICh1dHhvaWRzOkFycmF5PHN0cmluZz4gPSB1bmRlZmluZWQpOkFycmF5PHN0cmluZz4gPT4ge1xuICAgIGNvbnN0IHJlc3VsdHM6QXJyYXk8c3RyaW5nPiA9IFtdO1xuICAgIGNvbnN0IHV0eG9zID0gT2JqZWN0LmtleXModGhpcy51dHhvcyk7XG4gICAgaWYgKHR5cGVvZiB1dHhvaWRzICE9PSAndW5kZWZpbmVkJyAmJiBBcnJheS5pc0FycmF5KHV0eG9pZHMpKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHV0eG9pZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHV0eG9pZHNbaV0gaW4gdGhpcy51dHhvcykge1xuICAgICAgICAgIHJlc3VsdHMucHVzaCh0aGlzLnV0eG9zW3V0eG9pZHNbaV1dLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoY29uc3QgdSBvZiB1dHhvcykge1xuICAgICAgICByZXN1bHRzLnB1c2godGhpcy51dHhvc1t1XS50b1N0cmluZygpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLyoqXG4gICAgICogR2l2ZW4gYW4gYWRkcmVzcyBvciBhcnJheSBvZiBhZGRyZXNzZXMsIHJldHVybnMgYWxsIHRoZSBVVFhPSURzIGZvciB0aG9zZSBhZGRyZXNzZXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSBhZGRyZXNzIEFuIGFycmF5IG9mIGFkZHJlc3Mge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn1zXG4gICAgICogQHBhcmFtIHNwZW5kYWJsZSBJZiB0cnVlLCBvbmx5IHJldHJpZXZlcyBVVFhPSURzIHdob3NlIGxvY2t0aW1lIGhhcyBwYXNzZWRcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIGFkZHJlc3Nlcy5cbiAgICAgKi9cbiAgZ2V0VVRYT0lEcyA9IChhZGRyZXNzZXM6QXJyYXk8QnVmZmVyPiA9IHVuZGVmaW5lZCwgc3BlbmRhYmxlOmJvb2xlYW4gPSB0cnVlKTpBcnJheTxzdHJpbmc+ID0+IHtcbiAgICBpZiAodHlwZW9mIGFkZHJlc3NlcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHJlc3VsdHM6QXJyYXk8c3RyaW5nPiA9IFtdO1xuICAgICAgY29uc3Qgbm93OkJOID0gVW5peE5vdygpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhZGRyZXNzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGFkZHJlc3Nlc1tpXS50b1N0cmluZygnaGV4JykgaW4gdGhpcy5hZGRyZXNzVVRYT3MpIHtcbiAgICAgICAgICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXModGhpcy5hZGRyZXNzVVRYT3NbYWRkcmVzc2VzW2ldLnRvU3RyaW5nKCdoZXgnKV0pO1xuICAgICAgICAgIGZvciAoY29uc3QgW3V0eG9pZCwgbG9ja3RpbWVdIG9mIGVudHJpZXMpIHtcbiAgICAgICAgICAgIGlmICgocmVzdWx0cy5pbmRleE9mKHV0eG9pZCkgPT09IC0xXG4gICAgICAgICAgICAmJiAoc3BlbmRhYmxlICYmIGxvY2t0aW1lLmx0ZShub3cpKSlcbiAgICAgICAgICAgIHx8ICFzcGVuZGFibGUpIHtcbiAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHV0eG9pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMudXR4b3MpO1xuICB9O1xuXG4gIC8qKlxuICAgICAqIEdldHMgdGhlIGFkZHJlc3NlcyBpbiB0aGUgW1tTdGFuZGFyZFVUWE9TZXRdXSBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfS5cbiAgICAgKi9cbiAgZ2V0QWRkcmVzc2VzID0gKCk6QXJyYXk8QnVmZmVyPiA9PiBPYmplY3Qua2V5cyh0aGlzLmFkZHJlc3NVVFhPcylcbiAgICAubWFwKChrKSA9PiBCdWZmZXIuZnJvbShrLCAnaGV4JykpO1xuXG4gIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGJhbGFuY2Ugb2YgYSBzZXQgb2YgYWRkcmVzc2VzIGluIHRoZSBTdGFuZGFyZFVUWE9TZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWRkcmVzc2VzIEFuIGFycmF5IG9mIGFkZHJlc3Nlc1xuICAgICAqIEBwYXJhbSBhc3NldElEIEVpdGhlciBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IG9yIGFuIGNiNTggc2VyaWFsaXplZCByZXByZXNlbnRhdGlvbiBvZiBhbiBBc3NldElEXG4gICAgICogQHBhcmFtIGFzT2YgVGhlIHRpbWVzdGFtcCB0byB2ZXJpZnkgdGhlIHRyYW5zYWN0aW9uIGFnYWluc3QgYXMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfVxuICAgICAqXG4gICAgICogQHJldHVybnMgUmV0dXJucyB0aGUgdG90YWwgYmFsYW5jZSBhcyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59LlxuICAgICAqL1xuICBnZXRCYWxhbmNlID0gKGFkZHJlc3NlczpBcnJheTxCdWZmZXI+LCBhc3NldElEOkJ1ZmZlcnxzdHJpbmcsIGFzT2Y6Qk4gPSB1bmRlZmluZWQpOkJOID0+IHtcbiAgICBjb25zdCB1dHhvaWRzOkFycmF5PHN0cmluZz4gPSB0aGlzLmdldFVUWE9JRHMoYWRkcmVzc2VzKTtcbiAgICBjb25zdCB1dHhvczpBcnJheTxTdGFuZGFyZFVUWE8+ID0gdGhpcy5nZXRBbGxVVFhPcyh1dHhvaWRzKTtcbiAgICBsZXQgc3BlbmQ6Qk4gPSBuZXcgQk4oMCk7XG4gICAgbGV0IGFzc2V0OkJ1ZmZlcjtcbiAgICBpZiAodHlwZW9mIGFzc2V0SUQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBhc3NldCA9IGJpbnRvb2xzLmNiNThEZWNvZGUoYXNzZXRJRCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFzc2V0ID0gYXNzZXRJRDtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1dHhvcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHV0eG9zW2ldLmdldE91dHB1dCgpIGluc3RhbmNlb2YgU3RhbmRhcmRBbW91bnRPdXRwdXRcbiAgICAgICYmIHV0eG9zW2ldLmdldEFzc2V0SUQoKS50b1N0cmluZygnaGV4JykgPT09IGFzc2V0LnRvU3RyaW5nKCdoZXgnKVxuICAgICAgJiYgdXR4b3NbaV0uZ2V0T3V0cHV0KCkubWVldHNUaHJlc2hvbGQoYWRkcmVzc2VzLCBhc09mKSkge1xuICAgICAgICBzcGVuZCA9IHNwZW5kLmFkZCgodXR4b3NbaV0uZ2V0T3V0cHV0KCkgYXMgU3RhbmRhcmRBbW91bnRPdXRwdXQpLmdldEFtb3VudCgpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNwZW5kO1xuICB9O1xuXG4gIC8qKlxuICAgICAqIEdldHMgYWxsIHRoZSBBc3NldCBJRHMsIG9wdGlvbmFsbHkgdGhhdCBtYXRjaCB3aXRoIEFzc2V0IElEcyBpbiBhbiBhcnJheVxuICAgICAqXG4gICAgICogQHBhcmFtIHV0eG9pZHMgQW4gb3B0aW9uYWwgYXJyYXkgb2YgQWRkcmVzc2VzIGFzIHN0cmluZyBvciBCdWZmZXIsIHJldHVybnMgYWxsIEFzc2V0IElEcyBpZiBub3QgcHJvdmlkZWRcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHJlcHJlc2VudGluZyB0aGUgQXNzZXQgSURzLlxuICAgICAqL1xuICBnZXRBc3NldElEcyA9IChhZGRyZXNzZXM6QXJyYXk8QnVmZmVyPiA9IHVuZGVmaW5lZCk6QXJyYXk8QnVmZmVyPiA9PiB7XG4gICAgY29uc3QgcmVzdWx0czpTZXQ8QnVmZmVyPiA9IG5ldyBTZXQoKTtcbiAgICBsZXQgdXR4b2lkczpBcnJheTxzdHJpbmc+ID0gW107XG4gICAgaWYgKHR5cGVvZiBhZGRyZXNzZXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB1dHhvaWRzID0gdGhpcy5nZXRVVFhPSURzKGFkZHJlc3Nlcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHV0eG9pZHMgPSB0aGlzLmdldFVUWE9JRHMoKTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHV0eG9pZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh1dHhvaWRzW2ldIGluIHRoaXMudXR4b3MgJiYgISh1dHhvaWRzW2ldIGluIHJlc3VsdHMpKSB7XG4gICAgICAgIHJlc3VsdHMuYWRkKHRoaXMudXR4b3NbdXR4b2lkc1tpXV0uZ2V0QXNzZXRJRCgpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gWy4uLnJlc3VsdHNdO1xuICB9O1xuXG4gIGFic3RyYWN0IGNsb25lKCk6dGhpcztcblxuICBhYnN0cmFjdCBjcmVhdGUoLi4uYXJnczphbnlbXSk6dGhpcztcblxuICBmaWx0ZXIoYXJnczphbnlbXSwgbGFtYmRhOih1dHhvOlVUWE9DbGFzcywgLi4ubGFyZ3M6YW55W10pID0+IGJvb2xlYW4pOnRoaXMge1xuICAgIGxldCBuZXdzZXQ6dGhpcyA9IHRoaXMuY2xvbmUoKTtcbiAgICBsZXQgdXR4b3M6QXJyYXk8VVRYT0NsYXNzPiA9IHRoaXMuZ2V0QWxsVVRYT3MoKTtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgdXR4b3MubGVuZ3RoOyBpKyspe1xuICAgICAgaWYobGFtYmRhKHV0eG9zW2ldLCAuLi5hcmdzKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgbmV3c2V0LnJlbW92ZSh1dHhvc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXdzZXQ7XG4gIH1cblxuICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHNldCB3aXRoIGNvcHkgb2YgVVRYT3MgaW4gdGhpcyBhbmQgc2V0IHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB1dHhvc2V0IFRoZSBbW1N0YW5kYXJkVVRYT1NldF1dIHRvIG1lcmdlIHdpdGggdGhpcyBvbmVcbiAgICAgKiBAcGFyYW0gaGFzVVRYT0lEcyBXaWxsIHN1YnNlbGVjdCBhIHNldCBvZiBbW1N0YW5kYXJkVVRYT11dcyB3aGljaCBoYXZlIHRoZSBVVFhPSURzIHByb3ZpZGVkIGluIHRoaXMgYXJyYXksIGRlZnVsdHMgdG8gYWxsIFVUWE9zXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIG5ldyBTdGFuZGFyZFVUWE9TZXQgdGhhdCBjb250YWlucyBhbGwgdGhlIGZpbHRlcmVkIGVsZW1lbnRzLlxuICAgICAqL1xuICBtZXJnZSA9ICh1dHhvc2V0OnRoaXMsIGhhc1VUWE9JRHM6QXJyYXk8c3RyaW5nPiA9IHVuZGVmaW5lZCk6dGhpcyA9PiB7XG4gICAgY29uc3QgcmVzdWx0czp0aGlzID0gdGhpcy5jcmVhdGUoKTtcbiAgICBjb25zdCB1dHhvczE6QXJyYXk8VVRYT0NsYXNzPiA9IHRoaXMuZ2V0QWxsVVRYT3MoaGFzVVRYT0lEcyk7XG4gICAgY29uc3QgdXR4b3MyOkFycmF5PFVUWE9DbGFzcz4gPSB1dHhvc2V0LmdldEFsbFVUWE9zKGhhc1VUWE9JRHMpO1xuICAgIGNvbnN0IHByb2Nlc3MgPSAodXR4bzpVVFhPQ2xhc3MpID0+IHtcbiAgICAgIHJlc3VsdHMuYWRkKHV0eG8pO1xuICAgIH07XG4gICAgdXR4b3MxLmZvckVhY2gocHJvY2Vzcyk7XG4gICAgdXR4b3MyLmZvckVhY2gocHJvY2Vzcyk7XG4gICAgcmV0dXJuIHJlc3VsdHMgYXMgdGhpcztcbiAgfTtcblxuICAvKipcbiAgICAgKiBTZXQgaW50ZXJzZXRpb24gYmV0d2VlbiB0aGlzIHNldCBhbmQgYSBwYXJhbWV0ZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXR4b3NldCBUaGUgc2V0IHRvIGludGVyc2VjdFxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBuZXcgU3RhbmRhcmRVVFhPU2V0IGNvbnRhaW5pbmcgdGhlIGludGVyc2VjdGlvblxuICAgICAqL1xuICBpbnRlcnNlY3Rpb24gPSAodXR4b3NldDp0aGlzKTp0aGlzID0+IHtcbiAgICBjb25zdCB1czE6QXJyYXk8c3RyaW5nPiA9IHRoaXMuZ2V0VVRYT0lEcygpO1xuICAgIGNvbnN0IHVzMjpBcnJheTxzdHJpbmc+ID0gdXR4b3NldC5nZXRVVFhPSURzKCk7XG4gICAgY29uc3QgcmVzdWx0czpBcnJheTxzdHJpbmc+ID0gdXMxLmZpbHRlcigodXR4b2lkKSA9PiB1czIuaW5jbHVkZXModXR4b2lkKSk7XG4gICAgcmV0dXJuIHRoaXMubWVyZ2UodXR4b3NldCwgcmVzdWx0cykgYXMgdGhpcztcbiAgfTtcblxuICAvKipcbiAgICAgKiBTZXQgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoaXMgc2V0IGFuZCBhIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB1dHhvc2V0IFRoZSBzZXQgdG8gZGlmZmVyZW5jZVxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBuZXcgU3RhbmRhcmRVVFhPU2V0IGNvbnRhaW5pbmcgdGhlIGRpZmZlcmVuY2VcbiAgICAgKi9cbiAgZGlmZmVyZW5jZSA9ICh1dHhvc2V0OnRoaXMpOnRoaXMgPT4ge1xuICAgIGNvbnN0IHVzMTpBcnJheTxzdHJpbmc+ID0gdGhpcy5nZXRVVFhPSURzKCk7XG4gICAgY29uc3QgdXMyOkFycmF5PHN0cmluZz4gPSB1dHhvc2V0LmdldFVUWE9JRHMoKTtcbiAgICBjb25zdCByZXN1bHRzOkFycmF5PHN0cmluZz4gPSB1czEuZmlsdGVyKCh1dHhvaWQpID0+ICF1czIuaW5jbHVkZXModXR4b2lkKSk7XG4gICAgcmV0dXJuIHRoaXMubWVyZ2UodXR4b3NldCwgcmVzdWx0cykgYXMgdGhpcztcbiAgfTtcblxuICAvKipcbiAgICAgKiBTZXQgc3ltbWV0cmljYWwgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoaXMgc2V0IGFuZCBhIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB1dHhvc2V0IFRoZSBzZXQgdG8gc3ltbWV0cmljYWwgZGlmZmVyZW5jZVxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBuZXcgU3RhbmRhcmRVVFhPU2V0IGNvbnRhaW5pbmcgdGhlIHN5bW1ldHJpY2FsIGRpZmZlcmVuY2VcbiAgICAgKi9cbiAgc3ltRGlmZmVyZW5jZSA9ICh1dHhvc2V0OnRoaXMpOnRoaXMgPT4ge1xuICAgIGNvbnN0IHVzMTpBcnJheTxzdHJpbmc+ID0gdGhpcy5nZXRVVFhPSURzKCk7XG4gICAgY29uc3QgdXMyOkFycmF5PHN0cmluZz4gPSB1dHhvc2V0LmdldFVUWE9JRHMoKTtcbiAgICBjb25zdCByZXN1bHRzOkFycmF5PHN0cmluZz4gPSB1czEuZmlsdGVyKCh1dHhvaWQpID0+ICF1czIuaW5jbHVkZXModXR4b2lkKSlcbiAgICAgIC5jb25jYXQodXMyLmZpbHRlcigodXR4b2lkKSA9PiAhdXMxLmluY2x1ZGVzKHV0eG9pZCkpKTtcbiAgICByZXR1cm4gdGhpcy5tZXJnZSh1dHhvc2V0LCByZXN1bHRzKSBhcyB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgICAqIFNldCB1bmlvbiBiZXR3ZWVuIHRoaXMgc2V0IGFuZCBhIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB1dHhvc2V0IFRoZSBzZXQgdG8gdW5pb25cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgbmV3IFN0YW5kYXJkVVRYT1NldCBjb250YWluaW5nIHRoZSB1bmlvblxuICAgICAqL1xuICB1bmlvbiA9ICh1dHhvc2V0OnRoaXMpOnRoaXMgPT4gdGhpcy5tZXJnZSh1dHhvc2V0KSBhcyB0aGlzO1xuXG4gIC8qKlxuICAgICAqIE1lcmdlcyBhIHNldCBieSB0aGUgcnVsZSBwcm92aWRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB1dHhvc2V0IFRoZSBzZXQgdG8gbWVyZ2UgYnkgdGhlIE1lcmdlUnVsZVxuICAgICAqIEBwYXJhbSBtZXJnZVJ1bGUgVGhlIFtbTWVyZ2VSdWxlXV0gdG8gYXBwbHlcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgbmV3IFN0YW5kYXJkVVRYT1NldCBjb250YWluaW5nIHRoZSBtZXJnZWQgZGF0YVxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUaGUgbWVyZ2UgcnVsZXMgYXJlIGFzIGZvbGxvd3M6XG4gICAgICogICAqIFwiaW50ZXJzZWN0aW9uXCIgLSB0aGUgaW50ZXJzZWN0aW9uIG9mIHRoZSBzZXRcbiAgICAgKiAgICogXCJkaWZmZXJlbmNlU2VsZlwiIC0gdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUgZXhpc3RpbmcgZGF0YSBhbmQgbmV3IHNldFxuICAgICAqICAgKiBcImRpZmZlcmVuY2VOZXdcIiAtIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIG5ldyBkYXRhIGFuZCB0aGUgZXhpc3Rpbmcgc2V0XG4gICAgICogICAqIFwic3ltRGlmZmVyZW5jZVwiIC0gdGhlIHVuaW9uIG9mIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGJvdGggc2V0cyBvZiBkYXRhXG4gICAgICogICAqIFwidW5pb25cIiAtIHRoZSB1bmlxdWUgc2V0IG9mIGFsbCBlbGVtZW50cyBjb250YWluZWQgaW4gYm90aCBzZXRzXG4gICAgICogICAqIFwidW5pb25NaW51c05ld1wiIC0gdGhlIHVuaXF1ZSBzZXQgb2YgYWxsIGVsZW1lbnRzIGNvbnRhaW5lZCBpbiBib3RoIHNldHMsIGV4Y2x1ZGluZyB2YWx1ZXMgb25seSBmb3VuZCBpbiB0aGUgbmV3IHNldFxuICAgICAqICAgKiBcInVuaW9uTWludXNTZWxmXCIgLSB0aGUgdW5pcXVlIHNldCBvZiBhbGwgZWxlbWVudHMgY29udGFpbmVkIGluIGJvdGggc2V0cywgZXhjbHVkaW5nIHZhbHVlcyBvbmx5IGZvdW5kIGluIHRoZSBleGlzdGluZyBzZXRcbiAgICAgKi9cbiAgbWVyZ2VCeVJ1bGUgPSAodXR4b3NldDp0aGlzLCBtZXJnZVJ1bGU6TWVyZ2VSdWxlKTp0aGlzID0+IHtcbiAgICBsZXQgdVNldDp0aGlzO1xuICAgIHN3aXRjaCAobWVyZ2VSdWxlKSB7XG4gICAgICBjYXNlICdpbnRlcnNlY3Rpb24nOlxuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcnNlY3Rpb24odXR4b3NldCk7XG4gICAgICBjYXNlICdkaWZmZXJlbmNlU2VsZic6XG4gICAgICAgIHJldHVybiB0aGlzLmRpZmZlcmVuY2UodXR4b3NldCk7XG4gICAgICBjYXNlICdkaWZmZXJlbmNlTmV3JzpcbiAgICAgICAgcmV0dXJuIHV0eG9zZXQuZGlmZmVyZW5jZSh0aGlzKSBhcyB0aGlzO1xuICAgICAgY2FzZSAnc3ltRGlmZmVyZW5jZSc6XG4gICAgICAgIHJldHVybiB0aGlzLnN5bURpZmZlcmVuY2UodXR4b3NldCk7XG4gICAgICBjYXNlICd1bmlvbic6XG4gICAgICAgIHJldHVybiB0aGlzLnVuaW9uKHV0eG9zZXQpO1xuICAgICAgY2FzZSAndW5pb25NaW51c05ldyc6XG4gICAgICAgIHVTZXQgPSB0aGlzLnVuaW9uKHV0eG9zZXQpO1xuICAgICAgICByZXR1cm4gdVNldC5kaWZmZXJlbmNlKHV0eG9zZXQpIGFzIHRoaXM7XG4gICAgICBjYXNlICd1bmlvbk1pbnVzU2VsZic6XG4gICAgICAgIHVTZXQgPSB0aGlzLnVuaW9uKHV0eG9zZXQpO1xuICAgICAgICByZXR1cm4gdVNldC5kaWZmZXJlbmNlKHRoaXMpIGFzIHRoaXM7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIC0gU3RhbmRhcmRVVFhPU2V0Lm1lcmdlQnlSdWxlOiBiYWQgTWVyZ2VSdWxlIC0gJHttZXJnZVJ1bGV9YCk7XG4gICAgfVxuICB9O1xufVxuIl19","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./api\"), exports);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvYXBpcy9rZXlzdG9yZS9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQSx3Q0FBc0IiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2FwaSc7XG4iXX0=","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./api\"), exports);\n__exportStar(require(\"./basetx\"), exports);\n__exportStar(require(\"./constants\"), exports);\n__exportStar(require(\"./createsubnettx\"), exports);\n__exportStar(require(\"./credentials\"), exports);\n__exportStar(require(\"./exporttx\"), exports);\n__exportStar(require(\"./importtx\"), exports);\n__exportStar(require(\"./inputs\"), exports);\n__exportStar(require(\"./keychain\"), exports);\n__exportStar(require(\"./outputs\"), exports);\n__exportStar(require(\"./tx\"), exports);\n__exportStar(require(\"./utxos\"), exports);\n__exportStar(require(\"./validationtx\"), exports);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvYXBpcy9wbGF0Zm9ybXZtL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBLHdDQUFzQjtBQUN0QiwyQ0FBeUI7QUFDekIsOENBQTRCO0FBQzVCLG1EQUFpQztBQUNqQyxnREFBOEI7QUFDOUIsNkNBQTJCO0FBQzNCLDZDQUEyQjtBQUMzQiwyQ0FBeUI7QUFDekIsNkNBQTJCO0FBQzNCLDRDQUEwQjtBQUMxQix1Q0FBcUI7QUFDckIsMENBQXdCO0FBQ3hCLGlEQUErQiIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vYXBpJztcbmV4cG9ydCAqIGZyb20gJy4vYmFzZXR4JztcbmV4cG9ydCAqIGZyb20gJy4vY29uc3RhbnRzJztcbmV4cG9ydCAqIGZyb20gJy4vY3JlYXRlc3VibmV0dHgnO1xuZXhwb3J0ICogZnJvbSAnLi9jcmVkZW50aWFscyc7XG5leHBvcnQgKiBmcm9tICcuL2V4cG9ydHR4JztcbmV4cG9ydCAqIGZyb20gJy4vaW1wb3J0dHgnO1xuZXhwb3J0ICogZnJvbSAnLi9pbnB1dHMnO1xuZXhwb3J0ICogZnJvbSAnLi9rZXljaGFpbic7XG5leHBvcnQgKiBmcm9tICcuL291dHB1dHMnO1xuZXhwb3J0ICogZnJvbSAnLi90eCc7XG5leHBvcnQgKiBmcm9tICcuL3V0eG9zJztcbmV4cG9ydCAqIGZyb20gJy4vdmFsaWRhdGlvbnR4JztcbiJdfQ==","\"use strict\";\n/**\n * @packageDocumentation\n * @module Common-Interfaces\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW50ZXJmYWNlcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tb24vaW50ZXJmYWNlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7OztHQUdHIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqIEBtb2R1bGUgQ29tbW9uLUludGVyZmFjZXNcbiAqL1xuXG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tICdidWZmZXIvJztcblxuZXhwb3J0IGludGVyZmFjZSBJbmRleCB7XG4gIGFkZHJlc3M6IHN0cmluZ1xuICB1dHhvOiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVVFhPUmVzcG9uc2Uge1xuICBudW1GZXRjaGVkOiBudW1iZXJcbiAgdXR4b3M6IGFueVxuICBlbmRJbmRleDogSW5kZXhcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBc3NldCB7XG4gIG5hbWU6IHN0cmluZ1xuICBzeW1ib2w6IHN0cmluZ1xuICBhc3NldElEOiBCdWZmZXJcbiAgZGVub21pbmF0aW9uOiBudW1iZXJcbn1cbiJdfQ==","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MetricsAPI = void 0;\nconst restapi_1 = require(\"../../common/restapi\");\n/**\n * Class for interacting with a node API that is using the node's MetricsApi.\n *\n * @category RPCAPIs\n *\n * @remarks This extends the [[RESTAPI]] class. This class should not be directly called. Instead, use the [[Avalanche.addAPI]] function to register this interface with Avalanche.\n */\nclass MetricsAPI extends restapi_1.RESTAPI {\n    /**\n       * This class should not be instantiated directly. Instead use the [[Avalanche.addAPI]] method.\n       *\n       * @param core A reference to the Avalanche class\n       * @param baseurl Defaults to the string \"/ext/metrics\" as the path to blockchain's baseurl\n       */\n    constructor(core, baseurl = '/ext/metrics') {\n        super(core, baseurl);\n        this.axConf = () => {\n            return {\n                baseURL: `${this.core.getProtocol()}://${this.core.getIP()}:${this.core.getPort()}`,\n                responseType: 'text',\n            };\n        };\n        /**\n           *\n           * @returns Promise for an object containing the metrics response\n           */\n        this.getMetrics = () => __awaiter(this, void 0, void 0, function* () {\n            return this.post('')\n                .then((response) => response.data);\n        });\n    }\n}\nexports.MetricsAPI = MetricsAPI;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2FwaXMvbWV0cmljcy9hcGkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBS0Esa0RBQStDO0FBSy9DOzs7Ozs7R0FNRztBQUNILE1BQWEsVUFBVyxTQUFRLGlCQUFPO0lBZ0JyQzs7Ozs7U0FLSztJQUNMLFlBQVksSUFBa0IsRUFBRSxVQUFpQixjQUFjO1FBQUksS0FBSyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztRQXJCOUUsV0FBTSxHQUFHLEdBQXNCLEVBQUU7WUFDekMsT0FBUTtnQkFDTixPQUFPLEVBQUUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsRUFBRTtnQkFDbkYsWUFBWSxFQUFFLE1BQU07YUFDckIsQ0FBQztRQUVKLENBQUMsQ0FBQTtRQUVEOzs7YUFHSztRQUNMLGVBQVUsR0FBRyxHQUF5QixFQUFFO1lBQUMsT0FBQSxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztpQkFDbkQsSUFBSSxDQUFDLENBQUMsUUFBNEIsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQWMsQ0FBQyxDQUFBO1VBQUEsQ0FBQztJQVFzQixDQUFDO0NBQzNGO0FBdkJELGdDQXVCQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKiBAbW9kdWxlIEFQSS1NZXRyaWNzXG4gKi9cbmltcG9ydCBBdmFsYW5jaGVDb3JlIGZyb20gJy4uLy4uL2F2YWxhbmNoZSc7XG5pbXBvcnQgeyBSRVNUQVBJIH0gZnJvbSAnLi4vLi4vY29tbW9uL3Jlc3RhcGknO1xuaW1wb3J0IHsgUmVxdWVzdFJlc3BvbnNlRGF0YSB9IGZyb20gJy4uLy4uL2NvbW1vbi9hcGliYXNlJztcbmltcG9ydCB7IEF4aW9zUmVxdWVzdENvbmZpZyB9IGZyb20gJ2F4aW9zJztcblxuXG4vKipcbiAqIENsYXNzIGZvciBpbnRlcmFjdGluZyB3aXRoIGEgbm9kZSBBUEkgdGhhdCBpcyB1c2luZyB0aGUgbm9kZSdzIE1ldHJpY3NBcGkuXG4gKlxuICogQGNhdGVnb3J5IFJQQ0FQSXNcbiAqXG4gKiBAcmVtYXJrcyBUaGlzIGV4dGVuZHMgdGhlIFtbUkVTVEFQSV1dIGNsYXNzLiBUaGlzIGNsYXNzIHNob3VsZCBub3QgYmUgZGlyZWN0bHkgY2FsbGVkLiBJbnN0ZWFkLCB1c2UgdGhlIFtbQXZhbGFuY2hlLmFkZEFQSV1dIGZ1bmN0aW9uIHRvIHJlZ2lzdGVyIHRoaXMgaW50ZXJmYWNlIHdpdGggQXZhbGFuY2hlLlxuICovXG5leHBvcnQgY2xhc3MgTWV0cmljc0FQSSBleHRlbmRzIFJFU1RBUEkge1xuICBwcm90ZWN0ZWQgYXhDb25mID0gKCk6QXhpb3NSZXF1ZXN0Q29uZmlnID0+IHtcbiAgICByZXR1cm4gIHtcbiAgICAgIGJhc2VVUkw6IGAke3RoaXMuY29yZS5nZXRQcm90b2NvbCgpfTovLyR7dGhpcy5jb3JlLmdldElQKCl9OiR7dGhpcy5jb3JlLmdldFBvcnQoKX1gLFxuICAgICAgcmVzcG9uc2VUeXBlOiAndGV4dCcsXG4gICAgfTtcblxuICB9XG5cbiAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIGZvciBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgbWV0cmljcyByZXNwb25zZVxuICAgICAqL1xuICBnZXRNZXRyaWNzID0gYXN5bmMgKCk6UHJvbWlzZTxzdHJpbmc+ID0+IHRoaXMucG9zdCgnJylcbiAgICAudGhlbigocmVzcG9uc2U6UmVxdWVzdFJlc3BvbnNlRGF0YSkgPT4gcmVzcG9uc2UuZGF0YSBhcyBzdHJpbmcpO1xuXG4gIC8qKlxuICAgICAqIFRoaXMgY2xhc3Mgc2hvdWxkIG5vdCBiZSBpbnN0YW50aWF0ZWQgZGlyZWN0bHkuIEluc3RlYWQgdXNlIHRoZSBbW0F2YWxhbmNoZS5hZGRBUEldXSBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29yZSBBIHJlZmVyZW5jZSB0byB0aGUgQXZhbGFuY2hlIGNsYXNzXG4gICAgICogQHBhcmFtIGJhc2V1cmwgRGVmYXVsdHMgdG8gdGhlIHN0cmluZyBcIi9leHQvbWV0cmljc1wiIGFzIHRoZSBwYXRoIHRvIGJsb2NrY2hhaW4ncyBiYXNldXJsXG4gICAgICovXG4gIGNvbnN0cnVjdG9yKGNvcmU6QXZhbGFuY2hlQ29yZSwgYmFzZXVybDpzdHJpbmcgPSAnL2V4dC9tZXRyaWNzJykgeyBzdXBlcihjb3JlLCBiYXNldXJsKTsgfVxufVxuXG4iXX0=","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PlatformVMAPI = void 0;\n/**\n * @packageDocumentation\n * @module API-PlatformVM\n */\nconst buffer_1 = require(\"buffer/\");\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nconst jrpcapi_1 = require(\"../../common/jrpcapi\");\nconst bintools_1 = __importDefault(require(\"../../utils/bintools\"));\nconst keychain_1 = require(\"./keychain\");\nconst constants_1 = require(\"../../utils/constants\");\nconst constants_2 = require(\"./constants\");\nconst tx_1 = require(\"./tx\");\nconst payload_1 = require(\"../../utils/payload\");\nconst helperfunctions_1 = require(\"../../utils/helperfunctions\");\nconst utxos_1 = require(\"../platformvm/utxos\");\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\n/**\n * Class for interacting with a node's PlatformVMAPI\n *\n * @category RPCAPIs\n *\n * @remarks This extends the [[JRPCAPI]] class. This class should not be directly called. Instead, use the [[Avalanche.addAPI]] function to register this interface with Avalanche.\n */\nclass PlatformVMAPI extends jrpcapi_1.JRPCAPI {\n    /**\n     * This class should not be instantiated directly.\n     * Instead use the [[Avalanche.addAPI]] method.\n     *\n     * @param core A reference to the Avalanche class\n     * @param baseurl Defaults to the string \"/ext/P\" as the path to blockchain's baseurl\n     */\n    constructor(core, baseurl = '/ext/bc/P') {\n        super(core, baseurl);\n        /**\n         * @ignore\n         */\n        this.keychain = new keychain_1.KeyChain('', '');\n        this.blockchainID = constants_1.PlatformChainID;\n        this.blockchainAlias = undefined;\n        this.AVAXAssetID = undefined;\n        this.txFee = undefined;\n        this.creationTxFee = undefined;\n        this.minValidatorStake = undefined;\n        this.minDelegatorStake = undefined;\n        /**\n         * Gets the alias for the blockchainID if it exists, otherwise returns `undefined`.\n         *\n         * @returns The alias for the blockchainID\n         */\n        this.getBlockchainAlias = () => {\n            if (typeof this.blockchainAlias === \"undefined\") {\n                const netid = this.core.getNetworkID();\n                if (netid in constants_1.Defaults.network && this.blockchainID in constants_1.Defaults.network[netid]) {\n                    this.blockchainAlias = constants_1.Defaults.network[netid][this.blockchainID].alias;\n                    return this.blockchainAlias;\n                }\n                else {\n                    /* istanbul ignore next */\n                    return undefined;\n                }\n            }\n            return this.blockchainAlias;\n        };\n        /**\n         * Sets the alias for the blockchainID.\n         *\n         * @param alias The alias for the blockchainID.\n         *\n         */\n        this.setBlockchainAlias = (alias) => {\n            this.blockchainAlias = alias;\n            /* istanbul ignore next */\n            return undefined;\n        };\n        /**\n         * Gets the blockchainID and returns it.\n         *\n         * @returns The blockchainID\n         */\n        this.getBlockchainID = () => this.blockchainID;\n        /**\n         * Refresh blockchainID, and if a blockchainID is passed in, use that.\n         *\n         * @param Optional. BlockchainID to assign, if none, uses the default based on networkID.\n         *\n         * @returns The blockchainID\n         */\n        this.refreshBlockchainID = (blockchainID = undefined) => {\n            const netid = this.core.getNetworkID();\n            if (typeof blockchainID === 'undefined' && typeof constants_1.Defaults.network[netid] !== \"undefined\") {\n                this.blockchainID = constants_1.PlatformChainID; //default to P-Chain\n                return true;\n            }\n            if (typeof blockchainID === 'string') {\n                this.blockchainID = blockchainID;\n                return true;\n            }\n            return false;\n        };\n        /**\n         * Takes an address string and returns its {@link https://github.com/feross/buffer|Buffer} representation if valid.\n         *\n         * @returns A {@link https://github.com/feross/buffer|Buffer} for the address if valid, undefined if not valid.\n         */\n        this.parseAddress = (addr) => {\n            const alias = this.getBlockchainAlias();\n            const blockchainID = this.getBlockchainID();\n            return bintools.parseAddress(addr, blockchainID, alias, constants_2.PlatformVMConstants.ADDRESSLENGTH);\n        };\n        this.addressFromBuffer = (address) => {\n            const chainid = this.getBlockchainAlias() ? this.getBlockchainAlias() : this.getBlockchainID();\n            return bintools.addressToString(this.core.getHRP(), chainid, address);\n        };\n        /**\n         * Fetches the AVAX AssetID and returns it in a Promise.\n         *\n         * @param refresh This function caches the response. Refresh = true will bust the cache.\n         *\n         * @returns The the provided string representing the AVAX AssetID\n         */\n        this.getAVAXAssetID = (refresh = false) => __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.AVAXAssetID === 'undefined' || refresh) {\n                const assetID = yield this.getStakingAssetID();\n                this.AVAXAssetID = bintools.cb58Decode(assetID);\n            }\n            return this.AVAXAssetID;\n        });\n        /**\n         * Overrides the defaults and sets the cache to a specific AVAX AssetID\n         *\n         * @param avaxAssetID A cb58 string or Buffer representing the AVAX AssetID\n         *\n         * @returns The the provided string representing the AVAX AssetID\n         */\n        this.setAVAXAssetID = (avaxAssetID) => {\n            if (typeof avaxAssetID === \"string\") {\n                avaxAssetID = bintools.cb58Decode(avaxAssetID);\n            }\n            this.AVAXAssetID = avaxAssetID;\n        };\n        /**\n         * Gets the default tx fee for this chain.\n         *\n         * @returns The default tx fee as a {@link https://github.com/indutny/bn.js/|BN}\n         */\n        this.getDefaultTxFee = () => {\n            return this.core.getNetworkID() in constants_1.Defaults.network ? new bn_js_1.default(constants_1.Defaults.network[this.core.getNetworkID()][\"P\"][\"txFee\"]) : new bn_js_1.default(0);\n        };\n        /**\n         * Gets the tx fee for this chain.\n         *\n         * @returns The tx fee as a {@link https://github.com/indutny/bn.js/|BN}\n         */\n        this.getTxFee = () => {\n            if (typeof this.txFee === \"undefined\") {\n                this.txFee = this.getDefaultTxFee();\n            }\n            return this.txFee;\n        };\n        /**\n         * Sets the tx fee for this chain.\n         *\n         * @param fee The tx fee amount to set as {@link https://github.com/indutny/bn.js/|BN}\n         */\n        this.setTxFee = (fee) => {\n            this.txFee = fee;\n        };\n        /**\n         * Gets the default creation fee for this chain.\n         *\n         * @returns The default creation fee as a {@link https://github.com/indutny/bn.js/|BN}\n         */\n        this.getDefaultCreationTxFee = () => {\n            return this.core.getNetworkID() in constants_1.Defaults.network ? new bn_js_1.default(constants_1.Defaults.network[this.core.getNetworkID()][\"P\"][\"creationTxFee\"]) : new bn_js_1.default(0);\n        };\n        /**\n         * Gets the creation fee for this chain.\n         *\n         * @returns The creation fee as a {@link https://github.com/indutny/bn.js/|BN}\n         */\n        this.getCreationTxFee = () => {\n            if (typeof this.creationTxFee === \"undefined\") {\n                this.creationTxFee = this.getDefaultCreationTxFee();\n            }\n            return this.creationTxFee;\n        };\n        /**\n         * Sets the creation fee for this chain.\n         *\n         * @param fee The creation fee amount to set as {@link https://github.com/indutny/bn.js/|BN}\n         */\n        this.setCreationTxFee = (fee) => {\n            this.creationTxFee = fee;\n        };\n        /**\n         * Gets a reference to the keychain for this class.\n         *\n         * @returns The instance of [[]] for this class\n         */\n        this.keyChain = () => this.keychain;\n        /**\n         * @ignore\n         */\n        this.newKeyChain = () => {\n            // warning, overwrites the old keychain\n            const alias = this.getBlockchainAlias();\n            if (alias) {\n                this.keychain = new keychain_1.KeyChain(this.core.getHRP(), alias);\n            }\n            else {\n                this.keychain = new keychain_1.KeyChain(this.core.getHRP(), this.blockchainID);\n            }\n            return this.keychain;\n        };\n        /**\n         * Helper function which determines if a tx is a goose egg transaction.\n         *\n         * @param utx An UnsignedTx\n         *\n         * @returns boolean true if passes goose egg test and false if fails.\n         *\n         * @remarks\n         * A \"Goose Egg Transaction\" is when the fee far exceeds a reasonable amount\n         */\n        this.checkGooseEgg = (utx, outTotal = new bn_js_1.default(0)) => __awaiter(this, void 0, void 0, function* () {\n            const avaxAssetID = yield this.getAVAXAssetID();\n            let outputTotal = outTotal.gt(new bn_js_1.default(0)) ? outTotal : utx.getOutputTotal(avaxAssetID);\n            const fee = utx.getBurn(avaxAssetID);\n            if (fee.lte(constants_1.ONEAVAX.mul(new bn_js_1.default(10))) || fee.lte(outputTotal)) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        });\n        /**\n         * Retrieves an assetID for a subnet's staking assset.\n         *\n         * @returns Returns a Promise<string> with cb58 encoded value of the assetID.\n         */\n        this.getStakingAssetID = () => __awaiter(this, void 0, void 0, function* () {\n            const params = {};\n            return this.callMethod('platform.getStakingAssetID', params).then((response) => (response.data.result.assetID));\n        });\n        /**\n         * Creates a new blockchain.\n         *\n         * @param username The username of the Keystore user that controls the new account\n         * @param password The password of the Keystore user that controls the new account\n         * @param subnetID Optional. Either a {@link https://github.com/feross/buffer|Buffer} or an cb58 serialized string for the SubnetID or its alias.\n         * @param vmID The ID of the Virtual Machine the blockchain runs. Can also be an alias of the Virtual Machine.\n         * @param FXIDs The ids of the FXs the VM is running.\n         * @param name A human-readable name for the new blockchain\n         * @param genesis The base 58 (with checksum) representation of the genesis state of the new blockchain. Virtual Machines should have a static API method named buildGenesis that can be used to generate genesisData.\n         *\n         * @returns Promise for the unsigned transaction to create this blockchain. Must be signed by a sufficient number of the Subnets control keys and by the account paying the transaction fee.\n         */\n        this.createBlockchain = (username, password, subnetID = undefined, vmID, fxIDs, name, genesis) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                username,\n                password,\n                fxIDs,\n                vmID,\n                name,\n                genesisData: genesis,\n            };\n            if (typeof subnetID === 'string') {\n                params.subnetID = subnetID;\n            }\n            else if (typeof subnetID !== 'undefined') {\n                params.subnetID = bintools.cb58Encode(subnetID);\n            }\n            return this.callMethod('platform.createBlockchain', params)\n                .then((response) => response.data.result.txID);\n        });\n        /**\n         * Gets the status of a blockchain.\n         *\n         * @param blockchainID The blockchainID requesting a status update\n         *\n         * @returns Promise for a string of one of: \"Validating\", \"Created\", \"Preferred\", \"Unknown\".\n         */\n        this.getBlockchainStatus = (blockchainID) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                blockchainID,\n            };\n            return this.callMethod('platform.getBlockchainStatus', params)\n                .then((response) => response.data.result.status);\n        });\n        /**\n         * Create an address in the node's keystore.\n         *\n         * @param username The username of the Keystore user that controls the new account\n         * @param password The password of the Keystore user that controls the new account\n         *\n         * @returns Promise for a string of the newly created account address.\n         */\n        this.createAddress = (username, password) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                username,\n                password,\n            };\n            return this.callMethod('platform.createAddress', params)\n                .then((response) => response.data.result.address);\n        });\n        /**\n         * Gets the balance of a particular asset.\n         *\n         * @param address The address to pull the asset balance from\n         *\n         * @returns Promise with the balance as a {@link https://github.com/indutny/bn.js/|BN} on the provided address.\n         */\n        this.getBalance = (address) => __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.parseAddress(address) === 'undefined') {\n                /* istanbul ignore next */\n                throw new Error(`Error - PlatformVMAPI.getBalance: Invalid address format ${address}`);\n            }\n            const params = {\n                address\n            };\n            return this.callMethod('platform.getBalance', params).then((response) => response.data.result);\n        });\n        /**\n         * List the addresses controlled by the user.\n         *\n         * @param username The username of the Keystore user\n         * @param password The password of the Keystore user\n         *\n         * @returns Promise for an array of addresses.\n         */\n        this.listAddresses = (username, password) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                username,\n                password,\n            };\n            return this.callMethod('platform.listAddresses', params)\n                .then((response) => response.data.result.addresses);\n        });\n        /**\n         * Lists the set of current validators.\n         *\n         * @param subnetID Optional. Either a {@link https://github.com/feross/buffer|Buffer} or an\n         * cb58 serialized string for the SubnetID or its alias.\n         *\n         * @returns Promise for an array of validators that are currently staking, see: {@link https://docs.avax.network/v1.0/en/api/platform/#platformgetcurrentvalidators|platform.getCurrentValidators documentation}.\n         *\n         */\n        this.getCurrentValidators = (subnetID = undefined) => __awaiter(this, void 0, void 0, function* () {\n            const params = {};\n            if (typeof subnetID === 'string') {\n                params.subnetID = subnetID;\n            }\n            else if (typeof subnetID !== 'undefined') {\n                params.subnetID = bintools.cb58Encode(subnetID);\n            }\n            return this.callMethod('platform.getCurrentValidators', params)\n                .then((response) => response.data.result);\n        });\n        /**\n         * Lists the set of pending validators.\n         *\n         * @param subnetID Optional. Either a {@link https://github.com/feross/buffer|Buffer}\n         * or a cb58 serialized string for the SubnetID or its alias.\n         *\n         * @returns Promise for an array of validators that are pending staking, see: {@link https://docs.avax.network/v1.0/en/api/platform/#platformgetpendingvalidators|platform.getPendingValidators documentation}.\n         *\n         */\n        this.getPendingValidators = (subnetID = undefined) => __awaiter(this, void 0, void 0, function* () {\n            const params = {};\n            if (typeof subnetID === 'string') {\n                params.subnetID = subnetID;\n            }\n            else if (typeof subnetID !== 'undefined') {\n                params.subnetID = bintools.cb58Encode(subnetID);\n            }\n            return this.callMethod('platform.getPendingValidators', params)\n                .then((response) => response.data.result);\n        });\n        /**\n         * Samples `Size` validators from the current validator set.\n         *\n         * @param sampleSize Of the total universe of validators, select this many at random\n         * @param subnetID Optional. Either a {@link https://github.com/feross/buffer|Buffer} or an\n         * cb58 serialized string for the SubnetID or its alias.\n         *\n         * @returns Promise for an array of validator's stakingIDs.\n         */\n        this.sampleValidators = (sampleSize, subnetID = undefined) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                size: sampleSize.toString(),\n            };\n            if (typeof subnetID === 'string') {\n                params.subnetID = subnetID;\n            }\n            else if (typeof subnetID !== 'undefined') {\n                params.subnetID = bintools.cb58Encode(subnetID);\n            }\n            return this.callMethod('platform.sampleValidators', params)\n                .then((response) => response.data.result.validators);\n        });\n        /**\n         * Add a validator to the Primary Network.\n         *\n         * @param username The username of the Keystore user\n         * @param password The password of the Keystore user\n         * @param nodeID The node ID of the validator\n         * @param startTime Javascript Date object for the start time to validate\n         * @param endTime Javascript Date object for the end time to validate\n         * @param stakeAmount The amount of nAVAX the validator is staking as\n         * a {@link https://github.com/indutny/bn.js/|BN}\n         * @param rewardAddress The address the validator reward will go to, if there is one.\n         * @param delegationFeeRate Optional. A {@link https://github.com/indutny/bn.js/|BN} for the percent fee this validator\n         * charges when others delegate stake to them. Up to 4 decimal places allowed; additional decimal places are ignored.\n         * Must be between 0 and 100, inclusive. For example, if delegationFeeRate is 1.2345 and someone delegates to this\n         * validator, then when the delegation period is over, 1.2345% of the reward goes to the validator and the rest goes\n         * to the delegator.\n         *\n         * @returns Promise for a base58 string of the unsigned transaction.\n         */\n        this.addValidator = (username, password, nodeID, startTime, endTime, stakeAmount, rewardAddress, delegationFeeRate = undefined) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                username,\n                password,\n                nodeID,\n                startTime: startTime.getTime() / 1000,\n                endTime: endTime.getTime() / 1000,\n                stakeAmount: stakeAmount.toString(10),\n                rewardAddress,\n            };\n            if (typeof delegationFeeRate !== 'undefined') {\n                params.delegationFeeRate = delegationFeeRate.toString(10);\n            }\n            return this.callMethod('platform.addValidator', params)\n                .then((response) => response.data.result.txID);\n        });\n        /**\n         * Add a validator to a Subnet other than the Primary Network. The validator must validate the Primary Network for the entire duration they validate this Subnet.\n         *\n         * @param username The username of the Keystore user\n         * @param password The password of the Keystore user\n         * @param nodeID The node ID of the validator\n         * @param subnetID Either a {@link https://github.com/feross/buffer|Buffer} or a cb58 serialized string for the SubnetID or its alias.\n         * @param startTime Javascript Date object for the start time to validate\n         * @param endTime Javascript Date object for the end time to validate\n         * @param weight The validators weight used for sampling\n         *\n         * @returns Promise for the unsigned transaction. It must be signed (using sign) by the proper number of the Subnets control keys and by the key of the account paying the transaction fee before it can be issued.\n         */\n        this.addSubnetValidator = (username, password, nodeID, subnetID, startTime, endTime, weight) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                username,\n                password,\n                nodeID,\n                startTime: startTime.getTime() / 1000,\n                endTime: endTime.getTime() / 1000,\n                weight\n            };\n            if (typeof subnetID === 'string') {\n                params.subnetID = subnetID;\n            }\n            else if (typeof subnetID !== 'undefined') {\n                params.subnetID = bintools.cb58Encode(subnetID);\n            }\n            return this.callMethod('platform.addSubnetValidator', params)\n                .then((response) => response.data.result.txID);\n        });\n        /**\n         * Add a delegator to the Primary Network.\n         *\n         * @param username The username of the Keystore user\n         * @param password The password of the Keystore user\n         * @param nodeID The node ID of the delegatee\n         * @param startTime Javascript Date object for when the delegator starts delegating\n         * @param endTime Javascript Date object for when the delegator starts delegating\n         * @param stakeAmount The amount of nAVAX the delegator is staking as\n         * a {@link https://github.com/indutny/bn.js/|BN}\n         * @param rewardAddress The address of the account the staked AVAX and validation reward\n         * (if applicable) are sent to at endTime\n         *\n         * @returns Promise for an array of validator's stakingIDs.\n         */\n        this.addDelegator = (username, password, nodeID, startTime, endTime, stakeAmount, rewardAddress) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                username,\n                password,\n                nodeID,\n                startTime: startTime.getTime() / 1000,\n                endTime: endTime.getTime() / 1000,\n                stakeAmount: stakeAmount.toString(10),\n                rewardAddress,\n            };\n            return this.callMethod('platform.addDelegator', params)\n                .then((response) => response.data.result.txID);\n        });\n        /**\n         * Create an unsigned transaction to create a new Subnet. The unsigned transaction must be\n         * signed with the key of the account paying the transaction fee. The Subnets ID is the ID of the transaction that creates it (ie the response from issueTx when issuing the signed transaction).\n         *\n         * @param username The username of the Keystore user\n         * @param password The password of the Keystore user\n         * @param controlKeys Array of platform addresses as strings\n         * @param threshold To add a validator to this Subnet, a transaction must have threshold\n         * signatures, where each signature is from a key whose address is an element of `controlKeys`\n         *\n         * @returns Promise for a string with the unsigned transaction encoded as base58.\n         */\n        this.createSubnet = (username, password, controlKeys, threshold) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                username,\n                password,\n                controlKeys,\n                threshold\n            };\n            return this.callMethod('platform.createSubnet', params)\n                .then((response) => response.data.result.txID);\n        });\n        /**\n         * Get the Subnet that validates a given blockchain.\n         *\n         * @param blockchainID Either a {@link https://github.com/feross/buffer|Buffer} or a cb58\n         * encoded string for the blockchainID or its alias.\n         *\n         * @returns Promise for a string of the subnetID that validates the blockchain.\n         */\n        this.validatedBy = (blockchainID) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                blockchainID,\n            };\n            return this.callMethod('platform.validatedBy', params)\n                .then((response) => response.data.result.subnetID);\n        });\n        /**\n         * Get the IDs of the blockchains a Subnet validates.\n         *\n         * @param subnetID Either a {@link https://github.com/feross/buffer|Buffer} or an AVAX\n         * serialized string for the SubnetID or its alias.\n         *\n         * @returns Promise for an array of blockchainIDs the subnet validates.\n         */\n        this.validates = (subnetID) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                subnetID,\n            };\n            if (typeof subnetID === 'string') {\n                params.subnetID = subnetID;\n            }\n            else if (typeof subnetID !== 'undefined') {\n                params.subnetID = bintools.cb58Encode(subnetID);\n            }\n            return this.callMethod('platform.validates', params)\n                .then((response) => response.data.result.blockchainIDs);\n        });\n        /**\n         * Get all the blockchains that exist (excluding the P-Chain).\n         *\n         * @returns Promise for an array of objects containing fields \"id\", \"subnetID\", and \"vmID\".\n         */\n        this.getBlockchains = () => __awaiter(this, void 0, void 0, function* () {\n            const params = {};\n            return this.callMethod('platform.getBlockchains', params)\n                .then((response) => response.data.result.blockchains);\n        });\n        /**\n         * Send AVAX from an account on the P-Chain to an address on the X-Chain. This transaction\n         * must be signed with the key of the account that the AVAX is sent from and which pays the\n         * transaction fee. After issuing this transaction, you must call the X-Chains importAVAX\n         * method to complete the transfer.\n         *\n         * @param username The Keystore user that controls the account specified in `to`\n         * @param password The password of the Keystore user\n         * @param to The address on the X-Chain to send the AVAX to. Do not include X- in the address\n         * @param amount Amount of AVAX to export as a {@link https://github.com/indutny/bn.js/|BN}\n         *\n         * @returns Promise for an unsigned transaction to be signed by the account the the AVAX is\n         * sent from and pays the transaction fee.\n         */\n        this.exportAVAX = (username, password, amount, to) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                username,\n                password,\n                to,\n                amount: amount.toString(10)\n            };\n            return this.callMethod('platform.exportAVAX', params)\n                .then((response) => response.data.result.txID);\n        });\n        /**\n         * Send AVAX from an account on the P-Chain to an address on the X-Chain. This transaction\n         * must be signed with the key of the account that the AVAX is sent from and which pays\n         * the transaction fee. After issuing this transaction, you must call the X-Chains\n         * importAVAX method to complete the transfer.\n         *\n         * @param username The Keystore user that controls the account specified in `to`\n         * @param password The password of the Keystore user\n         * @param to The ID of the account the AVAX is sent to. This must be the same as the to\n         * argument in the corresponding call to the X-Chains exportAVAX\n         * @param sourceChain The chainID where the funds are coming from.\n         *\n         * @returns Promise for a string for the transaction, which should be sent to the network\n         * by calling issueTx.\n         */\n        this.importAVAX = (username, password, to, sourceChain) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                to,\n                sourceChain,\n                username,\n                password,\n            };\n            return this.callMethod('platform.importAVAX', params)\n                .then((response) => response.data.result.txID);\n        });\n        /**\n         * Calls the node's issueTx method from the API and returns the resulting transaction ID as a string.\n         *\n         * @param tx A string, {@link https://github.com/feross/buffer|Buffer}, or [[Tx]] representing a transaction\n         *\n         * @returns A Promise<string> representing the transaction ID of the posted transaction.\n         */\n        this.issueTx = (tx) => __awaiter(this, void 0, void 0, function* () {\n            let Transaction = '';\n            if (typeof tx === 'string') {\n                Transaction = tx;\n            }\n            else if (tx instanceof buffer_1.Buffer) {\n                const txobj = new tx_1.Tx();\n                txobj.fromBuffer(tx);\n                Transaction = txobj.toString();\n            }\n            else if (tx instanceof tx_1.Tx) {\n                Transaction = tx.toString();\n            }\n            else {\n                /* istanbul ignore next */\n                throw new Error('Error - platform.issueTx: provided tx is not expected type of string, Buffer, or Tx');\n            }\n            const params = {\n                tx: Transaction.toString(),\n            };\n            return this.callMethod('platform.issueTx', params).then((response) => response.data.result.txID);\n        });\n        /**\n         * Returns an upper bound on the amount of tokens that exist. Not monotonically increasing because this number can go down if a staker's reward is denied.\n         */\n        this.getCurrentSupply = () => __awaiter(this, void 0, void 0, function* () {\n            const params = {};\n            return this.callMethod('platform.getCurrentSupply', params)\n                .then((response) => new bn_js_1.default(response.data.result.supply, 10));\n        });\n        /**\n         * Returns the height of the platform chain.\n         */\n        this.getHeight = () => __awaiter(this, void 0, void 0, function* () {\n            const params = {};\n            return this.callMethod('platform.getHeight', params)\n                .then((response) => new bn_js_1.default(response.data.result.height, 10));\n        });\n        /**\n         * Gets the minimum staking amount.\n         *\n         * @param refresh A boolean to bypass the local cached value of Minimum Stake Amount, polling the node instead.\n         */\n        this.getMinStake = (refresh = false) => __awaiter(this, void 0, void 0, function* () {\n            if (refresh !== true && typeof this.minValidatorStake !== \"undefined\" && typeof this.minDelegatorStake !== \"undefined\") {\n                return {\n                    minValidatorStake: this.minValidatorStake,\n                    minDelegatorStake: this.minDelegatorStake\n                };\n            }\n            const params = {};\n            return this.callMethod('platform.getMinStake', params)\n                .then((response) => {\n                this.minValidatorStake = new bn_js_1.default(response.data.result.minValidatorStake, 10);\n                this.minDelegatorStake = new bn_js_1.default(response.data.result.minDelegatorStake, 10);\n                return {\n                    minValidatorStake: this.minValidatorStake,\n                    minDelegatorStake: this.minDelegatorStake\n                };\n            });\n        });\n        /**\n         * Sets the minimum stake cached in this class.\n         * @param minValidatorStake A {@link https://github.com/indutny/bn.js/|BN} to set the minimum stake amount cached in this class.\n         * @param minDelegatorStake A {@link https://github.com/indutny/bn.js/|BN} to set the minimum delegation amount cached in this class.\n         */\n        this.setMinStake = (minValidatorStake = undefined, minDelegatorStake = undefined) => {\n            if (typeof minValidatorStake !== \"undefined\") {\n                this.minValidatorStake = minValidatorStake;\n            }\n            if (typeof minDelegatorStake !== \"undefined\") {\n                this.minDelegatorStake = minDelegatorStake;\n            }\n        };\n        /**\n         * Gets the total amount staked for an array of addresses.\n         */\n        this.getStake = (addresses) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                addresses\n            };\n            return this.callMethod('platform.getStake', params)\n                .then((response) => new bn_js_1.default(response.data.result.staked, 10));\n        });\n        /**\n         * Get all the subnets that exist.\n         *\n         * @param ids IDs of the subnets to retrieve information about. If omitted, gets all subnets\n         *\n         * @returns Promise for an array of objects containing fields \"id\",\n         * \"controlKeys\", and \"threshold\".\n         */\n        this.getSubnets = (ids = undefined) => __awaiter(this, void 0, void 0, function* () {\n            const params = {};\n            if (typeof ids !== undefined) {\n                params.ids = ids;\n            }\n            return this.callMethod('platform.getSubnets', params)\n                .then((response) => response.data.result.subnets);\n        });\n        /**\n         * Exports the private key for an address.\n         *\n         * @param username The name of the user with the private key\n         * @param password The password used to decrypt the private key\n         * @param address The address whose private key should be exported\n         *\n         * @returns Promise with the decrypted private key as store in the database\n         */\n        this.exportKey = (username, password, address) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                username,\n                password,\n                address,\n            };\n            return this.callMethod('platform.exportKey', params)\n                .then((response) => response.data.result.privateKey);\n        });\n        /**\n         * Give a user control over an address by providing the private key that controls the address.\n         *\n         * @param username The name of the user to store the private key\n         * @param password The password that unlocks the user\n         * @param privateKey A string representing the private key in the vm's format\n         *\n         * @returns The address for the imported private key.\n         */\n        this.importKey = (username, password, privateKey) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                username,\n                password,\n                privateKey,\n            };\n            return this.callMethod('platform.importKey', params)\n                .then((response) => response.data.result.address);\n        });\n        /**\n         * Returns the treansaction data of a provided transaction ID by calling the node's `getTx` method.\n         *\n         * @param txid The string representation of the transaction ID\n         *\n         * @returns Returns a Promise<string> containing the bytes retrieved from the node\n         */\n        this.getTx = (txid) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                txID: txid,\n            };\n            return this.callMethod('platform.getTx', params).then((response) => response.data.result.tx);\n        });\n        /**\n         * Returns the status of a provided transaction ID by calling the node's `getTxStatus` method.\n         *\n         * @param txid The string representation of the transaction ID\n         * @param includeReason Return the reason tx was dropped, if applicable. Defaults to true\n         *\n         * @returns Returns a Promise<string> containing the status retrieved from the node and the reason a tx was dropped, if applicable.\n         */\n        this.getTxStatus = (txid, includeReason = true) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                txID: txid,\n                includeReason: includeReason\n            };\n            return this.callMethod('platform.getTxStatus', params).then((response) => response.data.result);\n        });\n        /**\n         * Retrieves the UTXOs related to the addresses provided from the node's `getUTXOs` method.\n         *\n         * @param addresses An array of addresses as cb58 strings or addresses as {@link https://github.com/feross/buffer|Buffer}s\n         * @param sourceChain A string for the chain to look for the UTXO's. Default is to use this chain, but if exported UTXOs exist from other chains, this can used to pull them instead.\n         * @param limit Optional. Returns at most [limit] addresses. If [limit] == 0 or > [maxUTXOsToFetch], fetches up to [maxUTXOsToFetch].\n         * @param startIndex Optional. [StartIndex] defines where to start fetching UTXOs (for pagination.)\n         * UTXOs fetched are from addresses equal to or greater than [StartIndex.Address]\n         * For address [StartIndex.Address], only UTXOs with IDs greater than [StartIndex.Utxo] will be returned.\n         * @param persistOpts Options available to persist these UTXOs in local storage\n         *\n         * @remarks\n         * persistOpts is optional and must be of type [[PersistanceOptions]]\n         *\n         */\n        this.getUTXOs = (addresses, sourceChain = undefined, limit = 0, startIndex = undefined, persistOpts = undefined) => __awaiter(this, void 0, void 0, function* () {\n            if (typeof addresses === \"string\") {\n                addresses = [addresses];\n            }\n            const params = {\n                addresses: addresses,\n                limit\n            };\n            if (typeof startIndex !== \"undefined\" && startIndex) {\n                params.startIndex = startIndex;\n            }\n            if (typeof sourceChain !== \"undefined\") {\n                params.sourceChain = sourceChain;\n            }\n            return this.callMethod('platform.getUTXOs', params).then((response) => {\n                const utxos = new utxos_1.UTXOSet();\n                let data = response.data.result.utxos;\n                if (persistOpts && typeof persistOpts === 'object') {\n                    if (this.db.has(persistOpts.getName())) {\n                        const selfArray = this.db.get(persistOpts.getName());\n                        if (Array.isArray(selfArray)) {\n                            utxos.addArray(data);\n                            const self = new utxos_1.UTXOSet();\n                            self.addArray(selfArray);\n                            self.mergeByRule(utxos, persistOpts.getMergeRule());\n                            data = self.getAllUTXOStrings();\n                        }\n                    }\n                    this.db.set(persistOpts.getName(), data, persistOpts.getOverwrite());\n                }\n                utxos.addArray(data, false);\n                response.data.result.utxos = utxos;\n                return response.data.result;\n            });\n        });\n        /**\n         * Helper function which creates an unsigned Import Tx. For more granular control, you may create your own\n         * [[UnsignedTx]] manually (with their corresponding [[TransferableInput]]s, [[TransferableOutput]]s, and [[TransferOperation]]s).\n         *\n         * @param utxoset A set of UTXOs that the transaction is built on\n         * @param ownerAddresses The addresses being used to import\n         * @param sourceChain The chainid for where the import is coming from.\n         * @param toAddresses The addresses to send the funds\n         * @param fromAddresses The addresses being used to send the funds from the UTXOs provided\n         * @param changeAddresses The addresses that can spend the change remaining from the spent UTXOs\n         * @param memo Optional contains arbitrary bytes, up to 256 bytes\n         * @param asOf Optional. The timestamp to verify the transaction against as a {@link https://github.com/indutny/bn.js/|BN}\n         * @param locktime Optional. The locktime field created in the resulting outputs\n         * @param threshold Optional. The number of signatures required to spend the funds in the resultant UTXO\n         *\n         * @returns An unsigned transaction ([[UnsignedTx]]) which contains a [[ImportTx]].\n         *\n         * @remarks\n         * This helper exists because the endpoint API should be the primary point of entry for most functionality.\n         */\n        this.buildImportTx = (utxoset, ownerAddresses, sourceChain, toAddresses, fromAddresses, changeAddresses = undefined, memo = undefined, asOf = helperfunctions_1.UnixNow(), locktime = new bn_js_1.default(0), threshold = 1) => __awaiter(this, void 0, void 0, function* () {\n            const to = this._cleanAddressArray(toAddresses, 'buildBaseTx').map((a) => bintools.stringToAddress(a));\n            const from = this._cleanAddressArray(fromAddresses, 'buildBaseTx').map((a) => bintools.stringToAddress(a));\n            const change = this._cleanAddressArray(changeAddresses, 'buildBaseTx').map((a) => bintools.stringToAddress(a));\n            let srcChain = undefined;\n            if (typeof sourceChain === \"undefined\") {\n                throw new Error(\"Error - PlatformVMAPI.buildImportTx: Source ChainID is undefined.\");\n            }\n            else if (typeof sourceChain === \"string\") {\n                srcChain = sourceChain;\n                sourceChain = bintools.cb58Decode(sourceChain);\n            }\n            else if (!(sourceChain instanceof buffer_1.Buffer)) {\n                srcChain = bintools.cb58Encode(sourceChain);\n                throw new Error(\"Error - PlatformVMAPI.buildImportTx: Invalid destinationChain type: \" + (typeof sourceChain));\n            }\n            const atomicUTXOs = yield (yield this.getUTXOs(ownerAddresses, srcChain, 0, undefined)).utxos;\n            const avaxAssetID = yield this.getAVAXAssetID();\n            if (memo instanceof payload_1.PayloadBase) {\n                memo = memo.getPayload();\n            }\n            const atomics = atomicUTXOs.getAllUTXOs();\n            const builtUnsignedTx = utxoset.buildImportTx(this.core.getNetworkID(), bintools.cb58Decode(this.blockchainID), to, from, change, atomics, sourceChain, this.getTxFee(), avaxAssetID, memo, asOf, locktime, threshold);\n            if (!(yield this.checkGooseEgg(builtUnsignedTx))) {\n                /* istanbul ignore next */\n                throw new Error(\"Failed Goose Egg Check\");\n            }\n            return builtUnsignedTx;\n        });\n        /**\n         * Helper function which creates an unsigned Export Tx. For more granular control, you may create your own\n         * [[UnsignedTx]] manually (with their corresponding [[TransferableInput]]s, [[TransferableOutput]]s, and [[TransferOperation]]s).\n         *\n         * @param utxoset A set of UTXOs that the transaction is built on\n         * @param amount The amount being exported as a {@link https://github.com/indutny/bn.js/|BN}\n         * @param destinationChain The chainid for where the assets will be sent.\n         * @param toAddresses The addresses to send the funds\n         * @param fromAddresses The addresses being used to send the funds from the UTXOs provided\n         * @param changeAddresses The addresses that can spend the change remaining from the spent UTXOs\n         * @param memo Optional contains arbitrary bytes, up to 256 bytes\n         * @param asOf Optional. The timestamp to verify the transaction against as a {@link https://github.com/indutny/bn.js/|BN}\n         * @param locktime Optional. The locktime field created in the resulting outputs\n         * @param threshold Optional. The number of signatures required to spend the funds in the resultant UTXO\n         *\n         * @returns An unsigned transaction ([[UnsignedTx]]) which contains an [[ExportTx]].\n         */\n        this.buildExportTx = (utxoset, amount, destinationChain, toAddresses, fromAddresses, changeAddresses = undefined, memo = undefined, asOf = helperfunctions_1.UnixNow(), locktime = new bn_js_1.default(0), threshold = 1) => __awaiter(this, void 0, void 0, function* () {\n            let prefixes = {};\n            toAddresses.map((a) => {\n                prefixes[a.split(\"-\")[0]] = true;\n            });\n            if (Object.keys(prefixes).length !== 1) {\n                throw new Error(\"Error - PlatformVMAPI.buildExportTx: To addresses must have the same chainID prefix.\");\n            }\n            if (typeof destinationChain === \"undefined\") {\n                throw new Error(\"Error - PlatformVMAPI.buildExportTx: Destination ChainID is undefined.\");\n            }\n            else if (typeof destinationChain === \"string\") {\n                destinationChain = bintools.cb58Decode(destinationChain); //\n            }\n            else if (!(destinationChain instanceof buffer_1.Buffer)) {\n                throw new Error(\"Error - PlatformVMAPI.buildExportTx: Invalid destinationChain type: \" + (typeof destinationChain));\n            }\n            if (destinationChain.length !== 32) {\n                throw new Error(\"Error - PlatformVMAPI.buildExportTx: Destination ChainID must be 32 bytes in length.\");\n            }\n            /*\n            if(bintools.cb58Encode(destinationChain) !== Defaults.network[this.core.getNetworkID()].X[\"blockchainID\"]) {\n              throw new Error(\"Error - PlatformVMAPI.buildExportTx: Destination ChainID must The X-Chain ID in the current version of AvalancheJS.\");\n            }*/\n            let to = [];\n            toAddresses.map((a) => {\n                to.push(bintools.stringToAddress(a));\n            });\n            const from = this._cleanAddressArray(fromAddresses, 'buildExportTx').map((a) => bintools.stringToAddress(a));\n            const change = this._cleanAddressArray(changeAddresses, 'buildExportTx').map((a) => bintools.stringToAddress(a));\n            if (memo instanceof payload_1.PayloadBase) {\n                memo = memo.getPayload();\n            }\n            const avaxAssetID = yield this.getAVAXAssetID();\n            const builtUnsignedTx = utxoset.buildExportTx(this.core.getNetworkID(), bintools.cb58Decode(this.blockchainID), amount, avaxAssetID, to, from, change, destinationChain, this.getTxFee(), avaxAssetID, memo, asOf, locktime, threshold);\n            if (!(yield this.checkGooseEgg(builtUnsignedTx))) {\n                /* istanbul ignore next */\n                throw new Error(\"Failed Goose Egg Check\");\n            }\n            return builtUnsignedTx;\n        });\n        /**\n        * Helper function which creates an unsigned [[AddSubnetValidatorTx]]. For more granular control, you may create your own\n        * [[UnsignedTx]] manually and import the [[AddSubnetValidatorTx]] class directly.\n        *\n        * @param utxoset A set of UTXOs that the transaction is built on.\n        * @param fromAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} who pays the fees in AVAX\n        * @param changeAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} who gets the change leftover from the fee payment\n        * @param nodeID The node ID of the validator being added.\n        * @param startTime The Unix time when the validator starts validating the Primary Network.\n        * @param endTime The Unix time when the validator stops validating the Primary Network (and staked AVAX is returned).\n        * @param weight The amount of weight for this subnet validator.\n        * @param memo Optional contains arbitrary bytes, up to 256 bytes\n        * @param asOf Optional. The timestamp to verify the transaction against as a {@link https://github.com/indutny/bn.js/|BN}\n        *\n        * @returns An unsigned transaction created from the passed in parameters.\n        */\n        /* Re-implement when subnetValidator signing process is clearer\n        buildAddSubnetValidatorTx = async (\n          utxoset:UTXOSet,\n          fromAddresses:Array<string>,\n          changeAddresses:Array<string>,\n          nodeID:string,\n          startTime:BN,\n          endTime:BN,\n          weight:BN,\n          memo:PayloadBase|Buffer = undefined,\n          asOf:BN = UnixNow()\n        ):Promise<UnsignedTx> => {\n          const from:Array<Buffer> = this._cleanAddressArray(fromAddresses, 'buildAddSubnetValidatorTx').map((a) => bintools.stringToAddress(a));\n          const change:Array<Buffer> = this._cleanAddressArray(changeAddresses, 'buildAddSubnetValidatorTx').map((a) => bintools.stringToAddress(a));\n      \n          if( memo instanceof PayloadBase) {\n            memo = memo.getPayload();\n          }\n      \n          const avaxAssetID:Buffer = await this.getAVAXAssetID();\n          \n          const now:BN = UnixNow();\n          if (startTime.lt(now) || endTime.lte(startTime)) {\n            throw new Error(\"PlatformVMAPI.buildAddSubnetValidatorTx -- startTime must be in the future and endTime must come after startTime\");\n          }\n      \n          const builtUnsignedTx:UnsignedTx = utxoset.buildAddSubnetValidatorTx(\n            this.core.getNetworkID(),\n            bintools.cb58Decode(this.blockchainID),\n            from,\n            change,\n            NodeIDStringToBuffer(nodeID),\n            startTime, endTime,\n            weight,\n            this.getFee(),\n            avaxAssetID,\n            memo, asOf\n          );\n      \n          if(! await this.checkGooseEgg(builtUnsignedTx)) {\n            /* istanbul ignore next */ /*\n        throw new Error(\"Failed Goose Egg Check\");\n      }\n  \n      return builtUnsignedTx;\n    }\n  \n    */\n        /**\n        * Helper function which creates an unsigned [[AddDelegatorTx]]. For more granular control, you may create your own\n        * [[UnsignedTx]] manually and import the [[AddDelegatorTx]] class directly.\n        *\n        * @param utxoset A set of UTXOs that the transaction is built on\n        * @param toAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} who recieved the staked tokens at the end of the staking period\n        * @param fromAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} who own the staking UTXOs the fees in AVAX\n        * @param changeAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} who gets the change leftover from the fee payment\n        * @param nodeID The node ID of the validator being added.\n        * @param startTime The Unix time when the validator starts validating the Primary Network.\n        * @param endTime The Unix time when the validator stops validating the Primary Network (and staked AVAX is returned).\n        * @param stakeAmount The amount being delegated as a {@link https://github.com/indutny/bn.js/|BN}\n        * @param rewardAddresses The addresses which will recieve the rewards from the delegated stake.\n        * @param rewardLocktime Optional. The locktime field created in the resulting reward outputs\n        * @param rewardThreshold Opional. The number of signatures required to spend the funds in the resultant reward UTXO. Default 1.\n        * @param memo Optional contains arbitrary bytes, up to 256 bytes\n        * @param asOf Optional. The timestamp to verify the transaction against as a {@link https://github.com/indutny/bn.js/|BN}\n        *\n        * @returns An unsigned transaction created from the passed in parameters.\n        */\n        this.buildAddDelegatorTx = (utxoset, toAddresses, fromAddresses, changeAddresses, nodeID, startTime, endTime, stakeAmount, rewardAddresses, rewardLocktime = new bn_js_1.default(0), rewardThreshold = 1, memo = undefined, asOf = helperfunctions_1.UnixNow()) => __awaiter(this, void 0, void 0, function* () {\n            const to = this._cleanAddressArray(toAddresses, 'buildAddDelegatorTx').map((a) => bintools.stringToAddress(a));\n            const from = this._cleanAddressArray(fromAddresses, 'buildAddDelegatorTx').map((a) => bintools.stringToAddress(a));\n            const change = this._cleanAddressArray(changeAddresses, 'buildAddDelegatorTx').map((a) => bintools.stringToAddress(a));\n            const rewards = this._cleanAddressArray(rewardAddresses, 'buildAddValidatorTx').map((a) => bintools.stringToAddress(a));\n            if (memo instanceof payload_1.PayloadBase) {\n                memo = memo.getPayload();\n            }\n            const minStake = (yield this.getMinStake())[\"minDelegatorStake\"];\n            if (stakeAmount.lt(minStake)) {\n                throw new Error(\"PlatformVMAPI.buildAddDelegatorTx -- stake amount must be at least \" + minStake.toString(10));\n            }\n            const avaxAssetID = yield this.getAVAXAssetID();\n            const now = helperfunctions_1.UnixNow();\n            if (startTime.lt(now) || endTime.lte(startTime)) {\n                throw new Error(\"PlatformVMAPI.buildAddDelegatorTx -- startTime must be in the future and endTime must come after startTime\");\n            }\n            const builtUnsignedTx = utxoset.buildAddDelegatorTx(this.core.getNetworkID(), bintools.cb58Decode(this.blockchainID), avaxAssetID, to, from, change, helperfunctions_1.NodeIDStringToBuffer(nodeID), startTime, endTime, stakeAmount, rewardLocktime, rewardThreshold, rewards, new bn_js_1.default(0), avaxAssetID, memo, asOf);\n            if (!(yield this.checkGooseEgg(builtUnsignedTx))) {\n                /* istanbul ignore next */\n                throw new Error(\"Failed Goose Egg Check\");\n            }\n            return builtUnsignedTx;\n        });\n        /**\n        * Helper function which creates an unsigned [[AddValidatorTx]]. For more granular control, you may create your own\n        * [[UnsignedTx]] manually and import the [[AddValidatorTx]] class directly.\n        *\n        * @param utxoset A set of UTXOs that the transaction is built on\n        * @param toAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} who recieved the staked tokens at the end of the staking period\n        * @param fromAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} who own the staking UTXOs the fees in AVAX\n        * @param changeAddresses An array of addresses as {@link https://github.com/feross/buffer|Buffer} who gets the change leftover from the fee payment\n        * @param nodeID The node ID of the validator being added.\n        * @param startTime The Unix time when the validator starts validating the Primary Network.\n        * @param endTime The Unix time when the validator stops validating the Primary Network (and staked AVAX is returned).\n        * @param stakeAmount The amount being delegated as a {@link https://github.com/indutny/bn.js/|BN}\n        * @param rewardAddresses The addresses which will recieve the rewards from the delegated stake.\n        * @param delegationFee A number for the percentage of reward to be given to the validator when someone delegates to them. Must be between 0 and 100.\n        * @param rewardLocktime Optional. The locktime field created in the resulting reward outputs\n        * @param rewardThreshold Opional. The number of signatures required to spend the funds in the resultant reward UTXO. Default 1.\n        * @param memo Optional contains arbitrary bytes, up to 256 bytes\n        * @param asOf Optional. The timestamp to verify the transaction against as a {@link https://github.com/indutny/bn.js/|BN}\n        *\n        * @returns An unsigned transaction created from the passed in parameters.\n        */\n        this.buildAddValidatorTx = (utxoset, toAddresses, fromAddresses, changeAddresses, nodeID, startTime, endTime, stakeAmount, rewardAddresses, delegationFee, rewardLocktime = new bn_js_1.default(0), rewardThreshold = 1, memo = undefined, asOf = helperfunctions_1.UnixNow()) => __awaiter(this, void 0, void 0, function* () {\n            const to = this._cleanAddressArray(toAddresses, 'buildAddValidatorTx').map((a) => bintools.stringToAddress(a));\n            const from = this._cleanAddressArray(fromAddresses, 'buildAddValidatorTx').map((a) => bintools.stringToAddress(a));\n            const change = this._cleanAddressArray(changeAddresses, 'buildAddValidatorTx').map((a) => bintools.stringToAddress(a));\n            const rewards = this._cleanAddressArray(rewardAddresses, 'buildAddValidatorTx').map((a) => bintools.stringToAddress(a));\n            if (memo instanceof payload_1.PayloadBase) {\n                memo = memo.getPayload();\n            }\n            const minStake = (yield this.getMinStake())[\"minValidatorStake\"];\n            if (stakeAmount.lt(minStake)) {\n                throw new Error(\"PlatformVMAPI.buildAddValidatorTx -- stake amount must be at least \" + minStake.toString(10));\n            }\n            if (typeof delegationFee !== \"number\" || delegationFee > 100 || delegationFee < 0) {\n                throw new Error(\"PlatformVMAPI.buildAddValidatorTx -- delegationFee must be a number between 0 and 100\");\n            }\n            const avaxAssetID = yield this.getAVAXAssetID();\n            const now = helperfunctions_1.UnixNow();\n            if (startTime.lt(now) || endTime.lte(startTime)) {\n                throw new Error(\"PlatformVMAPI.buildAddValidatorTx -- startTime must be in the future and endTime must come after startTime\");\n            }\n            const builtUnsignedTx = utxoset.buildAddValidatorTx(this.core.getNetworkID(), bintools.cb58Decode(this.blockchainID), avaxAssetID, to, from, change, helperfunctions_1.NodeIDStringToBuffer(nodeID), startTime, endTime, stakeAmount, rewardLocktime, rewardThreshold, rewards, delegationFee, new bn_js_1.default(0), avaxAssetID, memo, asOf);\n            if (!(yield this.checkGooseEgg(builtUnsignedTx))) {\n                /* istanbul ignore next */\n                throw new Error(\"Failed Goose Egg Check\");\n            }\n            return builtUnsignedTx;\n        });\n        /**\n          * Class representing an unsigned [[CreateSubnetTx]] transaction.\n          *\n          * @param utxoset A set of UTXOs that the transaction is built on\n          * @param fromAddresses The addresses being used to send the funds from the UTXOs {@link https://github.com/feross/buffer|Buffer}\n          * @param changeAddresses The addresses that can spend the change remaining from the spent UTXOs\n          * @param subnetOwnerAddresses An array of addresses for owners of the new subnet\n          * @param subnetOwnerThreshold A number indicating the amount of signatures required to add validators to a subnet\n          * @param memo Optional contains arbitrary bytes, up to 256 bytes\n          * @param asOf Optional. The timestamp to verify the transaction against as a {@link https://github.com/indutny/bn.js/|BN}\n          *\n          * @returns An unsigned transaction created from the passed in parameters.\n          */\n        this.buildCreateSubnetTx = (utxoset, fromAddresses, changeAddresses, subnetOwnerAddresses, subnetOwnerThreshold, memo = undefined, asOf = helperfunctions_1.UnixNow()) => __awaiter(this, void 0, void 0, function* () {\n            const from = this._cleanAddressArray(fromAddresses, 'buildCreateSubnetTx').map((a) => bintools.stringToAddress(a));\n            const change = this._cleanAddressArray(changeAddresses, 'buildCreateSubnetTx').map((a) => bintools.stringToAddress(a));\n            const owners = this._cleanAddressArray(subnetOwnerAddresses, 'buildCreateSubnetTx').map((a) => bintools.stringToAddress(a));\n            if (memo instanceof payload_1.PayloadBase) {\n                memo = memo.getPayload();\n            }\n            const avaxAssetID = yield this.getAVAXAssetID();\n            const builtUnsignedTx = utxoset.buildCreateSubnetTx(this.core.getNetworkID(), bintools.cb58Decode(this.blockchainID), from, change, owners, subnetOwnerThreshold, this.getCreationTxFee(), avaxAssetID, memo, asOf);\n            if (!(yield this.checkGooseEgg(builtUnsignedTx, this.getCreationTxFee()))) {\n                /* istanbul ignore next */\n                throw new Error(\"Failed Goose Egg Check\");\n            }\n            return builtUnsignedTx;\n        });\n        this.blockchainID = constants_1.PlatformChainID;\n        const netid = core.getNetworkID();\n        if (netid in constants_1.Defaults.network && this.blockchainID in constants_1.Defaults.network[netid]) {\n            const { alias } = constants_1.Defaults.network[netid][this.blockchainID];\n            this.keychain = new keychain_1.KeyChain(this.core.getHRP(), alias);\n        }\n        else {\n            this.keychain = new keychain_1.KeyChain(this.core.getHRP(), this.blockchainID);\n        }\n    }\n    /**\n     * @ignore\n     */\n    _cleanAddressArray(addresses, caller) {\n        const addrs = [];\n        const chainid = this.getBlockchainAlias() ? this.getBlockchainAlias() : this.getBlockchainID();\n        if (addresses && addresses.length > 0) {\n            for (let i = 0; i < addresses.length; i++) {\n                if (typeof addresses[i] === 'string') {\n                    if (typeof this.parseAddress(addresses[i]) === 'undefined') {\n                        /* istanbul ignore next */\n                        throw new Error(`Error - PlatformVMAPI.${caller}: Invalid address format ${addresses[i]}`);\n                    }\n                    addrs.push(addresses[i]);\n                }\n                else {\n                    addrs.push(bintools.addressToString(this.core.getHRP(), chainid, addresses[i]));\n                }\n            }\n        }\n        return addrs;\n    }\n}\nexports.PlatformVMAPI = PlatformVMAPI;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2FwaXMvcGxhdGZvcm12bS9hcGkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7OztHQUdHO0FBQ0gsb0NBQWlDO0FBQ2pDLGtEQUF1QjtBQUV2QixrREFBK0M7QUFFL0Msb0VBQTRDO0FBQzVDLHlDQUFzQztBQUN0QyxxREFBMkU7QUFDM0UsMkNBQWtEO0FBQ2xELDZCQUFzQztBQUN0QyxpREFBa0Q7QUFDbEQsaUVBQTRFO0FBQzVFLCtDQUE4QztBQUc5Qzs7R0FFRztBQUNILE1BQU0sUUFBUSxHQUFZLGtCQUFRLENBQUMsV0FBVyxFQUFFLENBQUM7QUFFakQ7Ozs7OztHQU1HO0FBQ0gsTUFBYSxhQUFjLFNBQVEsaUJBQU87SUEwMkN4Qzs7Ozs7O09BTUc7SUFDSCxZQUFZLElBQWtCLEVBQUUsVUFBaUIsV0FBVztRQUMxRCxLQUFLLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBaDNDdkI7O1dBRUc7UUFDTyxhQUFRLEdBQVksSUFBSSxtQkFBUSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUV6QyxpQkFBWSxHQUFVLDJCQUFlLENBQUM7UUFFdEMsb0JBQWUsR0FBVSxTQUFTLENBQUM7UUFFbkMsZ0JBQVcsR0FBVSxTQUFTLENBQUM7UUFFL0IsVUFBSyxHQUFNLFNBQVMsQ0FBQztRQUVyQixrQkFBYSxHQUFNLFNBQVMsQ0FBQztRQUU3QixzQkFBaUIsR0FBTSxTQUFTLENBQUM7UUFFakMsc0JBQWlCLEdBQU0sU0FBUyxDQUFDO1FBRTNDOzs7O1dBSUc7UUFDSCx1QkFBa0IsR0FBRyxHQUFVLEVBQUU7WUFDL0IsSUFBRyxPQUFPLElBQUksQ0FBQyxlQUFlLEtBQUssV0FBVyxFQUFDO2dCQUM3QyxNQUFNLEtBQUssR0FBVSxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO2dCQUM5QyxJQUFJLEtB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QyxFQUFFLEVBQUU7Z0JBQ3pDLElBQUksT0FBTyxTQUFTLENBQUMsQ0FBQyxDQUFDLEtBQUssUUFBUSxFQUFFO29CQUNwQyxJQUFJLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFXLENBQUMsS0FBSyxXQUFXLEVBQUU7d0JBQ3BFLDBCQUEwQjt3QkFDMUIsTUFBTSxJQUFJLEtBQUssQ0FBQyx5QkFBeUIsTUFBTSw0QkFBNEIsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztxQkFDNUY7b0JBQ0QsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFXLENBQUMsQ0FBQztpQkFDcEM7cUJBQU07b0JBQ0wsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsT0FBTyxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQVcsQ0FBQyxDQUFDLENBQUM7aUJBQzNGO2FBQ0Y7U0FDRjtRQUNELE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztDQW9CRjtBQTUzQ0Qsc0NBNDNDQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKiBAbW9kdWxlIEFQSS1QbGF0Zm9ybVZNXG4gKi9cbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ2J1ZmZlci8nO1xuaW1wb3J0IEJOIGZyb20gJ2JuLmpzJztcbmltcG9ydCBBdmFsYW5jaGVDb3JlIGZyb20gJy4uLy4uL2F2YWxhbmNoZSc7XG5pbXBvcnQgeyBKUlBDQVBJIH0gZnJvbSAnLi4vLi4vY29tbW9uL2pycGNhcGknO1xuaW1wb3J0IHsgUmVxdWVzdFJlc3BvbnNlRGF0YSB9IGZyb20gJy4uLy4uL2NvbW1vbi9hcGliYXNlJztcbmltcG9ydCBCaW5Ub29scyBmcm9tICcuLi8uLi91dGlscy9iaW50b29scyc7XG5pbXBvcnQgeyBLZXlDaGFpbiB9IGZyb20gJy4va2V5Y2hhaW4nO1xuaW1wb3J0IHsgRGVmYXVsdHMsIFBsYXRmb3JtQ2hhaW5JRCwgT05FQVZBWCB9IGZyb20gJy4uLy4uL3V0aWxzL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBQbGF0Zm9ybVZNQ29uc3RhbnRzIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgVW5zaWduZWRUeCwgVHggfSBmcm9tICcuL3R4JztcbmltcG9ydCB7IFBheWxvYWRCYXNlIH0gZnJvbSAnLi4vLi4vdXRpbHMvcGF5bG9hZCc7XG5pbXBvcnQgeyBVbml4Tm93LCBOb2RlSURTdHJpbmdUb0J1ZmZlciB9IGZyb20gJy4uLy4uL3V0aWxzL2hlbHBlcmZ1bmN0aW9ucyc7XG5pbXBvcnQgeyBVVFhPU2V0IH0gZnJvbSAnLi4vcGxhdGZvcm12bS91dHhvcyc7XG5pbXBvcnQgeyBQZXJzaXN0YW5jZU9wdGlvbnMgfSBmcm9tICcuLi8uLi91dGlscy9wZXJzaXN0ZW5jZW9wdGlvbnMnO1xuXG4vKipcbiAqIEBpZ25vcmVcbiAqL1xuY29uc3QgYmludG9vbHM6QmluVG9vbHMgPSBCaW5Ub29scy5nZXRJbnN0YW5jZSgpO1xuXG4vKipcbiAqIENsYXNzIGZvciBpbnRlcmFjdGluZyB3aXRoIGEgbm9kZSdzIFBsYXRmb3JtVk1BUElcbiAqXG4gKiBAY2F0ZWdvcnkgUlBDQVBJc1xuICpcbiAqIEByZW1hcmtzIFRoaXMgZXh0ZW5kcyB0aGUgW1tKUlBDQVBJXV0gY2xhc3MuIFRoaXMgY2xhc3Mgc2hvdWxkIG5vdCBiZSBkaXJlY3RseSBjYWxsZWQuIEluc3RlYWQsIHVzZSB0aGUgW1tBdmFsYW5jaGUuYWRkQVBJXV0gZnVuY3Rpb24gdG8gcmVnaXN0ZXIgdGhpcyBpbnRlcmZhY2Ugd2l0aCBBdmFsYW5jaGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBQbGF0Zm9ybVZNQVBJIGV4dGVuZHMgSlJQQ0FQSSB7XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHByb3RlY3RlZCBrZXljaGFpbjpLZXlDaGFpbiA9IG5ldyBLZXlDaGFpbignJywgJycpO1xuXG4gIHByb3RlY3RlZCBibG9ja2NoYWluSUQ6c3RyaW5nID0gUGxhdGZvcm1DaGFpbklEO1xuXG4gIHByb3RlY3RlZCBibG9ja2NoYWluQWxpYXM6c3RyaW5nID0gdW5kZWZpbmVkO1xuXG4gIHByb3RlY3RlZCBBVkFYQXNzZXRJRDpCdWZmZXIgPSB1bmRlZmluZWQ7XG5cbiAgcHJvdGVjdGVkIHR4RmVlOkJOID0gdW5kZWZpbmVkO1xuXG4gIHByb3RlY3RlZCBjcmVhdGlvblR4RmVlOkJOID0gdW5kZWZpbmVkO1xuXG4gIHByb3RlY3RlZCBtaW5WYWxpZGF0b3JTdGFrZTpCTiA9IHVuZGVmaW5lZDtcblxuICBwcm90ZWN0ZWQgbWluRGVsZWdhdG9yU3Rha2U6Qk4gPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGFsaWFzIGZvciB0aGUgYmxvY2tjaGFpbklEIGlmIGl0IGV4aXN0cywgb3RoZXJ3aXNlIHJldHVybnMgYHVuZGVmaW5lZGAuXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSBhbGlhcyBmb3IgdGhlIGJsb2NrY2hhaW5JRFxuICAgKi9cbiAgZ2V0QmxvY2tjaGFpbkFsaWFzID0gKCk6c3RyaW5nID0+IHtcbiAgICBpZih0eXBlb2YgdGhpcy5ibG9ja2NoYWluQWxpYXMgPT09IFwidW5kZWZpbmVkXCIpe1xuICAgICAgY29uc3QgbmV0aWQ6bnVtYmVyID0gdGhpcy5jb3JlLmdldE5ldHdvcmtJRCgpO1xuICAgICAgaWYgKG5ldGlkIGluIERlZmF1bHRzLm5ldHdvcmsgJiYgdGhpcy5ibG9ja2NoYWluSUQgaW4gRGVmYXVsdHMubmV0d29ya1tuZXRpZF0pIHtcbiAgICAgICAgdGhpcy5ibG9ja2NoYWluQWxpYXMgPSBEZWZhdWx0cy5uZXR3b3JrW25ldGlkXVt0aGlzLmJsb2NrY2hhaW5JRF0uYWxpYXM7XG4gICAgICAgIHJldHVybiB0aGlzLmJsb2NrY2hhaW5BbGlhcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSBcbiAgICByZXR1cm4gdGhpcy5ibG9ja2NoYWluQWxpYXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGFsaWFzIGZvciB0aGUgYmxvY2tjaGFpbklELlxuICAgKiBcbiAgICogQHBhcmFtIGFsaWFzIFRoZSBhbGlhcyBmb3IgdGhlIGJsb2NrY2hhaW5JRC5cbiAgICogXG4gICAqL1xuICBzZXRCbG9ja2NoYWluQWxpYXMgPSAoYWxpYXM6c3RyaW5nKTpzdHJpbmcgPT4ge1xuICAgIHRoaXMuYmxvY2tjaGFpbkFsaWFzID0gYWxpYXM7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBibG9ja2NoYWluSUQgYW5kIHJldHVybnMgaXQuXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSBibG9ja2NoYWluSURcbiAgICovXG4gIGdldEJsb2NrY2hhaW5JRCA9ICgpOnN0cmluZyA9PiB0aGlzLmJsb2NrY2hhaW5JRDtcblxuICAvKipcbiAgICogUmVmcmVzaCBibG9ja2NoYWluSUQsIGFuZCBpZiBhIGJsb2NrY2hhaW5JRCBpcyBwYXNzZWQgaW4sIHVzZSB0aGF0LlxuICAgKlxuICAgKiBAcGFyYW0gT3B0aW9uYWwuIEJsb2NrY2hhaW5JRCB0byBhc3NpZ24sIGlmIG5vbmUsIHVzZXMgdGhlIGRlZmF1bHQgYmFzZWQgb24gbmV0d29ya0lELlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgYmxvY2tjaGFpbklEXG4gICAqL1xuICByZWZyZXNoQmxvY2tjaGFpbklEID0gKGJsb2NrY2hhaW5JRDpzdHJpbmcgPSB1bmRlZmluZWQpOmJvb2xlYW4gPT4ge1xuICAgIGNvbnN0IG5ldGlkOm51bWJlciA9IHRoaXMuY29yZS5nZXROZXR3b3JrSUQoKTtcbiAgICBpZiAodHlwZW9mIGJsb2NrY2hhaW5JRCA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIERlZmF1bHRzLm5ldHdvcmtbbmV0aWRdICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB0aGlzLmJsb2NrY2hhaW5JRCA9IFBsYXRmb3JtQ2hhaW5JRDsgLy9kZWZhdWx0IHRvIFAtQ2hhaW5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gaWYgKHR5cGVvZiBibG9ja2NoYWluSUQgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLmJsb2NrY2hhaW5JRCA9IGJsb2NrY2hhaW5JRDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRha2VzIGFuIGFkZHJlc3Mgc3RyaW5nIGFuZCByZXR1cm5zIGl0cyB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSByZXByZXNlbnRhdGlvbiBpZiB2YWxpZC5cbiAgICpcbiAgICogQHJldHVybnMgQSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBmb3IgdGhlIGFkZHJlc3MgaWYgdmFsaWQsIHVuZGVmaW5lZCBpZiBub3QgdmFsaWQuXG4gICAqL1xuICBwYXJzZUFkZHJlc3MgPSAoYWRkcjpzdHJpbmcpOkJ1ZmZlciA9PiB7XG4gICAgY29uc3QgYWxpYXM6c3RyaW5nID0gdGhpcy5nZXRCbG9ja2NoYWluQWxpYXMoKTtcbiAgICBjb25zdCBibG9ja2NoYWluSUQ6c3RyaW5nID0gdGhpcy5nZXRCbG9ja2NoYWluSUQoKTtcbiAgICByZXR1cm4gYmludG9vbHMucGFyc2VBZGRyZXNzKGFkZHIsIGJsb2NrY2hhaW5JRCwgYWxpYXMsIFBsYXRmb3JtVk1Db25zdGFudHMuQUREUkVTU0xFTkdUSCk7XG4gIH07XG5cbiAgYWRkcmVzc0Zyb21CdWZmZXIgPSAoYWRkcmVzczpCdWZmZXIpOnN0cmluZyA9PiB7XG4gICAgY29uc3QgY2hhaW5pZDpzdHJpbmcgPSB0aGlzLmdldEJsb2NrY2hhaW5BbGlhcygpID8gdGhpcy5nZXRCbG9ja2NoYWluQWxpYXMoKSA6IHRoaXMuZ2V0QmxvY2tjaGFpbklEKCk7XG4gICAgcmV0dXJuIGJpbnRvb2xzLmFkZHJlc3NUb1N0cmluZyh0aGlzLmNvcmUuZ2V0SFJQKCksIGNoYWluaWQsIGFkZHJlc3MpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBGZXRjaGVzIHRoZSBBVkFYIEFzc2V0SUQgYW5kIHJldHVybnMgaXQgaW4gYSBQcm9taXNlLlxuICAgKlxuICAgKiBAcGFyYW0gcmVmcmVzaCBUaGlzIGZ1bmN0aW9uIGNhY2hlcyB0aGUgcmVzcG9uc2UuIFJlZnJlc2ggPSB0cnVlIHdpbGwgYnVzdCB0aGUgY2FjaGUuXG4gICAqIFxuICAgKiBAcmV0dXJucyBUaGUgdGhlIHByb3ZpZGVkIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIEFWQVggQXNzZXRJRFxuICAgKi9cbiAgZ2V0QVZBWEFzc2V0SUQgPSBhc3luYyAocmVmcmVzaDpib29sZWFuID0gZmFsc2UpOlByb21pc2U8QnVmZmVyPiA9PiB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLkFWQVhBc3NldElEID09PSAndW5kZWZpbmVkJyB8fCByZWZyZXNoKSB7XG4gICAgICBjb25zdCBhc3NldElEOnN0cmluZyA9IGF3YWl0IHRoaXMuZ2V0U3Rha2luZ0Fzc2V0SUQoKTtcbiAgICAgIHRoaXMuQVZBWEFzc2V0SUQgPSBiaW50b29scy5jYjU4RGVjb2RlKGFzc2V0SUQpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5BVkFYQXNzZXRJRDtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBPdmVycmlkZXMgdGhlIGRlZmF1bHRzIGFuZCBzZXRzIHRoZSBjYWNoZSB0byBhIHNwZWNpZmljIEFWQVggQXNzZXRJRFxuICAgKiBcbiAgICogQHBhcmFtIGF2YXhBc3NldElEIEEgY2I1OCBzdHJpbmcgb3IgQnVmZmVyIHJlcHJlc2VudGluZyB0aGUgQVZBWCBBc3NldElEXG4gICAqIFxuICAgKiBAcmV0dXJucyBUaGUgdGhlIHByb3ZpZGVkIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIEFWQVggQXNzZXRJRFxuICAgKi9cbiAgc2V0QVZBWEFzc2V0SUQgPSAoYXZheEFzc2V0SUQ6c3RyaW5nIHwgQnVmZmVyKSA9PiB7XG4gICAgaWYodHlwZW9mIGF2YXhBc3NldElEID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBhdmF4QXNzZXRJRCA9IGJpbnRvb2xzLmNiNThEZWNvZGUoYXZheEFzc2V0SUQpO1xuICAgIH1cbiAgICB0aGlzLkFWQVhBc3NldElEID0gYXZheEFzc2V0SUQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZGVmYXVsdCB0eCBmZWUgZm9yIHRoaXMgY2hhaW4uXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSBkZWZhdWx0IHR4IGZlZSBhcyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59XG4gICAqL1xuICBnZXREZWZhdWx0VHhGZWUgPSAgKCk6Qk4gPT4ge1xuICAgIHJldHVybiB0aGlzLmNvcmUuZ2V0TmV0d29ya0lEKCkgaW4gRGVmYXVsdHMubmV0d29yayA/IG5ldyBCTihEZWZhdWx0cy5uZXR3b3JrW3RoaXMuY29yZS5nZXROZXR3b3JrSUQoKV1bXCJQXCJdW1widHhGZWVcIl0pIDogbmV3IEJOKDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHR4IGZlZSBmb3IgdGhpcyBjaGFpbi5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIHR4IGZlZSBhcyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59XG4gICAqL1xuICBnZXRUeEZlZSA9ICgpOkJOID0+IHtcbiAgICBpZih0eXBlb2YgdGhpcy50eEZlZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy50eEZlZSA9IHRoaXMuZ2V0RGVmYXVsdFR4RmVlKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnR4RmVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHR4IGZlZSBmb3IgdGhpcyBjaGFpbi5cbiAgICpcbiAgICogQHBhcmFtIGZlZSBUaGUgdHggZmVlIGFtb3VudCB0byBzZXQgYXMge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2JuLmpzL3xCTn1cbiAgICovXG4gIHNldFR4RmVlID0gKGZlZTpCTikgPT4ge1xuICAgIHRoaXMudHhGZWUgPSBmZWU7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBkZWZhdWx0IGNyZWF0aW9uIGZlZSBmb3IgdGhpcyBjaGFpbi5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIGRlZmF1bHQgY3JlYXRpb24gZmVlIGFzIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2JuLmpzL3xCTn1cbiAgICovXG4gIGdldERlZmF1bHRDcmVhdGlvblR4RmVlID0gICgpOkJOID0+IHtcbiAgICByZXR1cm4gdGhpcy5jb3JlLmdldE5ldHdvcmtJRCgpIGluIERlZmF1bHRzLm5ldHdvcmsgPyBuZXcgQk4oRGVmYXVsdHMubmV0d29ya1t0aGlzLmNvcmUuZ2V0TmV0d29ya0lEKCldW1wiUFwiXVtcImNyZWF0aW9uVHhGZWVcIl0pIDogbmV3IEJOKDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGNyZWF0aW9uIGZlZSBmb3IgdGhpcyBjaGFpbi5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIGNyZWF0aW9uIGZlZSBhcyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59XG4gICAqL1xuICBnZXRDcmVhdGlvblR4RmVlID0gKCk6Qk4gPT4ge1xuICAgIGlmKHR5cGVvZiB0aGlzLmNyZWF0aW9uVHhGZWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRoaXMuY3JlYXRpb25UeEZlZSA9IHRoaXMuZ2V0RGVmYXVsdENyZWF0aW9uVHhGZWUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRpb25UeEZlZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjcmVhdGlvbiBmZWUgZm9yIHRoaXMgY2hhaW4uXG4gICAqXG4gICAqIEBwYXJhbSBmZWUgVGhlIGNyZWF0aW9uIGZlZSBhbW91bnQgdG8gc2V0IGFzIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59XG4gICAqL1xuICBzZXRDcmVhdGlvblR4RmVlID0gKGZlZTpCTikgPT4ge1xuICAgIHRoaXMuY3JlYXRpb25UeEZlZSA9IGZlZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGEgcmVmZXJlbmNlIHRvIHRoZSBrZXljaGFpbiBmb3IgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIGluc3RhbmNlIG9mIFtbXV0gZm9yIHRoaXMgY2xhc3NcbiAgICovXG4gIGtleUNoYWluID0gKCk6S2V5Q2hhaW4gPT4gdGhpcy5rZXljaGFpbjtcblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgbmV3S2V5Q2hhaW4gPSAoKTpLZXlDaGFpbiA9PiB7XG4gICAgLy8gd2FybmluZywgb3ZlcndyaXRlcyB0aGUgb2xkIGtleWNoYWluXG4gICAgY29uc3QgYWxpYXMgPSB0aGlzLmdldEJsb2NrY2hhaW5BbGlhcygpO1xuICAgIGlmIChhbGlhcykge1xuICAgICAgdGhpcy5rZXljaGFpbiA9IG5ldyBLZXlDaGFpbih0aGlzLmNvcmUuZ2V0SFJQKCksIGFsaWFzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5rZXljaGFpbiA9IG5ldyBLZXlDaGFpbih0aGlzLmNvcmUuZ2V0SFJQKCksIHRoaXMuYmxvY2tjaGFpbklEKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMua2V5Y2hhaW47XG4gIH07XG5cbiAgLyoqXG4gICAqIEhlbHBlciBmdW5jdGlvbiB3aGljaCBkZXRlcm1pbmVzIGlmIGEgdHggaXMgYSBnb29zZSBlZ2cgdHJhbnNhY3Rpb24uIFxuICAgKlxuICAgKiBAcGFyYW0gdXR4IEFuIFVuc2lnbmVkVHhcbiAgICpcbiAgICogQHJldHVybnMgYm9vbGVhbiB0cnVlIGlmIHBhc3NlcyBnb29zZSBlZ2cgdGVzdCBhbmQgZmFsc2UgaWYgZmFpbHMuXG4gICAqXG4gICAqIEByZW1hcmtzXG4gICAqIEEgXCJHb29zZSBFZ2cgVHJhbnNhY3Rpb25cIiBpcyB3aGVuIHRoZSBmZWUgZmFyIGV4Y2VlZHMgYSByZWFzb25hYmxlIGFtb3VudFxuICAgKi9cbiAgY2hlY2tHb29zZUVnZyA9IGFzeW5jICh1dHg6VW5zaWduZWRUeCwgb3V0VG90YWw6Qk4gPSBuZXcgQk4oMCkpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICBjb25zdCBhdmF4QXNzZXRJRDpCdWZmZXIgPSBhd2FpdCB0aGlzLmdldEFWQVhBc3NldElEKCk7XG4gICAgbGV0IG91dHB1dFRvdGFsOkJOID0gb3V0VG90YWwuZ3QobmV3IEJOKDApKSA/IG91dFRvdGFsIDogdXR4LmdldE91dHB1dFRvdGFsKGF2YXhBc3NldElEKTtcbiAgICBjb25zdCBmZWU6Qk4gPSB1dHguZ2V0QnVybihhdmF4QXNzZXRJRCk7XG4gICAgaWYoZmVlLmx0ZShPTkVBVkFYLm11bChuZXcgQk4oMTApKSkgfHwgZmVlLmx0ZShvdXRwdXRUb3RhbCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhbiBhc3NldElEIGZvciBhIHN1Ym5ldCdzIHN0YWtpbmcgYXNzc2V0LlxuICAgKlxuICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgUHJvbWlzZTxzdHJpbmc+IHdpdGggY2I1OCBlbmNvZGVkIHZhbHVlIG9mIHRoZSBhc3NldElELlxuICAgKi9cbiAgZ2V0U3Rha2luZ0Fzc2V0SUQgPSBhc3luYyAoKTpQcm9taXNlPHN0cmluZz4gPT4ge1xuICAgIGNvbnN0IHBhcmFtczphbnkgPSB7fTtcbiAgICByZXR1cm4gdGhpcy5jYWxsTWV0aG9kKCdwbGF0Zm9ybS5nZXRTdGFraW5nQXNzZXRJRCcsIHBhcmFtcykudGhlbigocmVzcG9uc2U6UmVxdWVzdFJlc3BvbnNlRGF0YSkgPT4gKHJlc3BvbnNlLmRhdGEucmVzdWx0LmFzc2V0SUQpKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBibG9ja2NoYWluLlxuICAgKlxuICAgKiBAcGFyYW0gdXNlcm5hbWUgVGhlIHVzZXJuYW1lIG9mIHRoZSBLZXlzdG9yZSB1c2VyIHRoYXQgY29udHJvbHMgdGhlIG5ldyBhY2NvdW50XG4gICAqIEBwYXJhbSBwYXNzd29yZCBUaGUgcGFzc3dvcmQgb2YgdGhlIEtleXN0b3JlIHVzZXIgdGhhdCBjb250cm9scyB0aGUgbmV3IGFjY291bnRcbiAgICogQHBhcmFtIHN1Ym5ldElEIE9wdGlvbmFsLiBFaXRoZXIgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBvciBhbiBjYjU4IHNlcmlhbGl6ZWQgc3RyaW5nIGZvciB0aGUgU3VibmV0SUQgb3IgaXRzIGFsaWFzLlxuICAgKiBAcGFyYW0gdm1JRCBUaGUgSUQgb2YgdGhlIFZpcnR1YWwgTWFjaGluZSB0aGUgYmxvY2tjaGFpbiBydW5zLiBDYW4gYWxzbyBiZSBhbiBhbGlhcyBvZiB0aGUgVmlydHVhbCBNYWNoaW5lLlxuICAgKiBAcGFyYW0gRlhJRHMgVGhlIGlkcyBvZiB0aGUgRlhzIHRoZSBWTSBpcyBydW5uaW5nLlxuICAgKiBAcGFyYW0gbmFtZSBBIGh1bWFuLXJlYWRhYmxlIG5hbWUgZm9yIHRoZSBuZXcgYmxvY2tjaGFpblxuICAgKiBAcGFyYW0gZ2VuZXNpcyBUaGUgYmFzZSA1OCAod2l0aCBjaGVja3N1bSkgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdlbmVzaXMgc3RhdGUgb2YgdGhlIG5ldyBibG9ja2NoYWluLiBWaXJ0dWFsIE1hY2hpbmVzIHNob3VsZCBoYXZlIGEgc3RhdGljIEFQSSBtZXRob2QgbmFtZWQgYnVpbGRHZW5lc2lzIHRoYXQgY2FuIGJlIHVzZWQgdG8gZ2VuZXJhdGUgZ2VuZXNpc0RhdGEuXG4gICAqXG4gICAqIEByZXR1cm5zIFByb21pc2UgZm9yIHRoZSB1bnNpZ25lZCB0cmFuc2FjdGlvbiB0byBjcmVhdGUgdGhpcyBibG9ja2NoYWluLiBNdXN0IGJlIHNpZ25lZCBieSBhIHN1ZmZpY2llbnQgbnVtYmVyIG9mIHRoZSBTdWJuZXTigJlzIGNvbnRyb2wga2V5cyBhbmQgYnkgdGhlIGFjY291bnQgcGF5aW5nIHRoZSB0cmFuc2FjdGlvbiBmZWUuXG4gICAqL1xuICBjcmVhdGVCbG9ja2NoYWluID0gYXN5bmMgKFxuICAgIHVzZXJuYW1lOiBzdHJpbmcsXG4gICAgcGFzc3dvcmQ6c3RyaW5nLFxuICAgIHN1Ym5ldElEOkJ1ZmZlciB8IHN0cmluZyA9IHVuZGVmaW5lZCxcbiAgICB2bUlEOnN0cmluZyxcbiAgICBmeElEczogQXJyYXk8bnVtYmVyPixcbiAgICBuYW1lOnN0cmluZyxcbiAgICBnZW5lc2lzOnN0cmluZyxcbiAgICApXG4gIDpQcm9taXNlPHN0cmluZz4gPT4ge1xuICAgIGNvbnN0IHBhcmFtczphbnkgPSB7XG4gICAgICB1c2VybmFtZSwgXG4gICAgICBwYXNzd29yZCxcbiAgICAgIGZ4SURzLFxuICAgICAgdm1JRCxcbiAgICAgIG5hbWUsXG4gICAgICBnZW5lc2lzRGF0YTogZ2VuZXNpcyxcbiAgICB9O1xuICAgIGlmICh0eXBlb2Ygc3VibmV0SUQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBwYXJhbXMuc3VibmV0SUQgPSBzdWJuZXRJRDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzdWJuZXRJRCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHBhcmFtcy5zdWJuZXRJRCA9IGJpbnRvb2xzLmNiNThFbmNvZGUoc3VibmV0SUQpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jYWxsTWV0aG9kKCdwbGF0Zm9ybS5jcmVhdGVCbG9ja2NoYWluJywgcGFyYW1zKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3BvbnNlLmRhdGEucmVzdWx0LnR4SUQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBzdGF0dXMgb2YgYSBibG9ja2NoYWluLlxuICAgKlxuICAgKiBAcGFyYW0gYmxvY2tjaGFpbklEIFRoZSBibG9ja2NoYWluSUQgcmVxdWVzdGluZyBhIHN0YXR1cyB1cGRhdGVcbiAgICpcbiAgICogQHJldHVybnMgUHJvbWlzZSBmb3IgYSBzdHJpbmcgb2Ygb25lIG9mOiBcIlZhbGlkYXRpbmdcIiwgXCJDcmVhdGVkXCIsIFwiUHJlZmVycmVkXCIsIFwiVW5rbm93blwiLlxuICAgKi9cbiAgZ2V0QmxvY2tjaGFpblN0YXR1cyA9IGFzeW5jIChibG9ja2NoYWluSUQ6IHN0cmluZyk6UHJvbWlzZTxzdHJpbmc+ID0+IHtcbiAgICBjb25zdCBwYXJhbXM6YW55ID0ge1xuICAgICAgYmxvY2tjaGFpbklELFxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuY2FsbE1ldGhvZCgncGxhdGZvcm0uZ2V0QmxvY2tjaGFpblN0YXR1cycsIHBhcmFtcylcbiAgICAgIC50aGVuKChyZXNwb25zZTpSZXF1ZXN0UmVzcG9uc2VEYXRhKSA9PiByZXNwb25zZS5kYXRhLnJlc3VsdC5zdGF0dXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gYWRkcmVzcyBpbiB0aGUgbm9kZSdzIGtleXN0b3JlLlxuICAgKlxuICAgKiBAcGFyYW0gdXNlcm5hbWUgVGhlIHVzZXJuYW1lIG9mIHRoZSBLZXlzdG9yZSB1c2VyIHRoYXQgY29udHJvbHMgdGhlIG5ldyBhY2NvdW50XG4gICAqIEBwYXJhbSBwYXNzd29yZCBUaGUgcGFzc3dvcmQgb2YgdGhlIEtleXN0b3JlIHVzZXIgdGhhdCBjb250cm9scyB0aGUgbmV3IGFjY291bnRcbiAgICpcbiAgICogQHJldHVybnMgUHJvbWlzZSBmb3IgYSBzdHJpbmcgb2YgdGhlIG5ld2x5IGNyZWF0ZWQgYWNjb3VudCBhZGRyZXNzLlxuICAgKi9cbiAgY3JlYXRlQWRkcmVzcyA9IGFzeW5jIChcbiAgICB1c2VybmFtZTogc3RyaW5nLFxuICAgIHBhc3N3b3JkOnN0cmluZ1xuICApXG4gIDpQcm9taXNlPHN0cmluZz4gPT4ge1xuICAgIGNvbnN0IHBhcmFtczphbnkgPSB7XG4gICAgICB1c2VybmFtZSxcbiAgICAgIHBhc3N3b3JkLFxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuY2FsbE1ldGhvZCgncGxhdGZvcm0uY3JlYXRlQWRkcmVzcycsIHBhcmFtcylcbiAgICAgIC50aGVuKChyZXNwb25zZTpSZXF1ZXN0UmVzcG9uc2VEYXRhKSA9PiByZXNwb25zZS5kYXRhLnJlc3VsdC5hZGRyZXNzKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0cyB0aGUgYmFsYW5jZSBvZiBhIHBhcnRpY3VsYXIgYXNzZXQuXG4gICAqXG4gICAqIEBwYXJhbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHRvIHB1bGwgdGhlIGFzc2V0IGJhbGFuY2UgZnJvbVxuICAgKlxuICAgKiBAcmV0dXJucyBQcm9taXNlIHdpdGggdGhlIGJhbGFuY2UgYXMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfSBvbiB0aGUgcHJvdmlkZWQgYWRkcmVzcy5cbiAgICovXG4gIGdldEJhbGFuY2UgPSBhc3luYyAoYWRkcmVzczpzdHJpbmcpOlByb21pc2U8b2JqZWN0PiA9PiB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLnBhcnNlQWRkcmVzcyhhZGRyZXNzKSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIC0gUGxhdGZvcm1WTUFQSS5nZXRCYWxhbmNlOiBJbnZhbGlkIGFkZHJlc3MgZm9ybWF0ICR7YWRkcmVzc31gKTtcbiAgICB9XG4gICAgY29uc3QgcGFyYW1zOmFueSA9IHtcbiAgICAgIGFkZHJlc3NcbiAgICB9O1xuICAgIHJldHVybiAgdGhpcy5jYWxsTWV0aG9kKCdwbGF0Zm9ybS5nZXRCYWxhbmNlJywgcGFyYW1zKS50aGVuKChyZXNwb25zZTpSZXF1ZXN0UmVzcG9uc2VEYXRhKSA9PiByZXNwb25zZS5kYXRhLnJlc3VsdCk7XG4gIH07XG4gIFxuICAvKipcbiAgICogTGlzdCB0aGUgYWRkcmVzc2VzIGNvbnRyb2xsZWQgYnkgdGhlIHVzZXIuXG4gICAqXG4gICAqIEBwYXJhbSB1c2VybmFtZSBUaGUgdXNlcm5hbWUgb2YgdGhlIEtleXN0b3JlIHVzZXJcbiAgICogQHBhcmFtIHBhc3N3b3JkIFRoZSBwYXNzd29yZCBvZiB0aGUgS2V5c3RvcmUgdXNlclxuICAgKlxuICAgKiBAcmV0dXJucyBQcm9taXNlIGZvciBhbiBhcnJheSBvZiBhZGRyZXNzZXMuXG4gICAqL1xuICBsaXN0QWRkcmVzc2VzID0gYXN5bmMgKHVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkOnN0cmluZyk6UHJvbWlzZTxBcnJheTxzdHJpbmc+PiA9PiB7XG4gICAgY29uc3QgcGFyYW1zOmFueSA9IHtcbiAgICAgIHVzZXJuYW1lLFxuICAgICAgcGFzc3dvcmQsXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5jYWxsTWV0aG9kKCdwbGF0Zm9ybS5saXN0QWRkcmVzc2VzJywgcGFyYW1zKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3BvbnNlLmRhdGEucmVzdWx0LmFkZHJlc3Nlcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIExpc3RzIHRoZSBzZXQgb2YgY3VycmVudCB2YWxpZGF0b3JzLlxuICAgKlxuICAgKiBAcGFyYW0gc3VibmV0SUQgT3B0aW9uYWwuIEVpdGhlciBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IG9yIGFuXG4gICAqIGNiNTggc2VyaWFsaXplZCBzdHJpbmcgZm9yIHRoZSBTdWJuZXRJRCBvciBpdHMgYWxpYXMuXG4gICAqXG4gICAqIEByZXR1cm5zIFByb21pc2UgZm9yIGFuIGFycmF5IG9mIHZhbGlkYXRvcnMgdGhhdCBhcmUgY3VycmVudGx5IHN0YWtpbmcsIHNlZToge0BsaW5rIGh0dHBzOi8vZG9jcy5hdmF4Lm5ldHdvcmsvdjEuMC9lbi9hcGkvcGxhdGZvcm0vI3BsYXRmb3JtZ2V0Y3VycmVudHZhbGlkYXRvcnN8cGxhdGZvcm0uZ2V0Q3VycmVudFZhbGlkYXRvcnMgZG9jdW1lbnRhdGlvbn0uXG4gICAqXG4gICAqL1xuICBnZXRDdXJyZW50VmFsaWRhdG9ycyA9IGFzeW5jIChzdWJuZXRJRDpCdWZmZXIgfCBzdHJpbmcgPSB1bmRlZmluZWQpOlByb21pc2U8b2JqZWN0PiA9PiB7XG4gICAgY29uc3QgcGFyYW1zOmFueSA9IHt9O1xuICAgIGlmICh0eXBlb2Ygc3VibmV0SUQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBwYXJhbXMuc3VibmV0SUQgPSBzdWJuZXRJRDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzdWJuZXRJRCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHBhcmFtcy5zdWJuZXRJRCA9IGJpbnRvb2xzLmNiNThFbmNvZGUoc3VibmV0SUQpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jYWxsTWV0aG9kKCdwbGF0Zm9ybS5nZXRDdXJyZW50VmFsaWRhdG9ycycsIHBhcmFtcylcbiAgICAgIC50aGVuKChyZXNwb25zZTpSZXF1ZXN0UmVzcG9uc2VEYXRhKSA9PiByZXNwb25zZS5kYXRhLnJlc3VsdCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIExpc3RzIHRoZSBzZXQgb2YgcGVuZGluZyB2YWxpZGF0b3JzLlxuICAgKlxuICAgKiBAcGFyYW0gc3VibmV0SUQgT3B0aW9uYWwuIEVpdGhlciBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9XG4gICAqIG9yIGEgY2I1OCBzZXJpYWxpemVkIHN0cmluZyBmb3IgdGhlIFN1Ym5ldElEIG9yIGl0cyBhbGlhcy5cbiAgICpcbiAgICogQHJldHVybnMgUHJvbWlzZSBmb3IgYW4gYXJyYXkgb2YgdmFsaWRhdG9ycyB0aGF0IGFyZSBwZW5kaW5nIHN0YWtpbmcsIHNlZToge0BsaW5rIGh0dHBzOi8vZG9jcy5hdmF4Lm5ldHdvcmsvdjEuMC9lbi9hcGkvcGxhdGZvcm0vI3BsYXRmb3JtZ2V0cGVuZGluZ3ZhbGlkYXRvcnN8cGxhdGZvcm0uZ2V0UGVuZGluZ1ZhbGlkYXRvcnMgZG9jdW1lbnRhdGlvbn0uXG4gICAqXG4gICAqL1xuICBnZXRQZW5kaW5nVmFsaWRhdG9ycyA9IGFzeW5jIChzdWJuZXRJRDpCdWZmZXIgfCBzdHJpbmcgPSB1bmRlZmluZWQpOlByb21pc2U8b2JqZWN0PiA9PiB7XG4gICAgY29uc3QgcGFyYW1zOmFueSA9IHt9O1xuICAgIGlmICh0eXBlb2Ygc3VibmV0SUQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBwYXJhbXMuc3VibmV0SUQgPSBzdWJuZXRJRDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzdWJuZXRJRCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHBhcmFtcy5zdWJuZXRJRCA9IGJpbnRvb2xzLmNiNThFbmNvZGUoc3VibmV0SUQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNhbGxNZXRob2QoJ3BsYXRmb3JtLmdldFBlbmRpbmdWYWxpZGF0b3JzJywgcGFyYW1zKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3BvbnNlLmRhdGEucmVzdWx0KTtcbiAgfTtcblxuICAvKipcbiAgICogU2FtcGxlcyBgU2l6ZWAgdmFsaWRhdG9ycyBmcm9tIHRoZSBjdXJyZW50IHZhbGlkYXRvciBzZXQuXG4gICAqXG4gICAqIEBwYXJhbSBzYW1wbGVTaXplIE9mIHRoZSB0b3RhbCB1bml2ZXJzZSBvZiB2YWxpZGF0b3JzLCBzZWxlY3QgdGhpcyBtYW55IGF0IHJhbmRvbVxuICAgKiBAcGFyYW0gc3VibmV0SUQgT3B0aW9uYWwuIEVpdGhlciBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IG9yIGFuXG4gICAqIGNiNTggc2VyaWFsaXplZCBzdHJpbmcgZm9yIHRoZSBTdWJuZXRJRCBvciBpdHMgYWxpYXMuXG4gICAqXG4gICAqIEByZXR1cm5zIFByb21pc2UgZm9yIGFuIGFycmF5IG9mIHZhbGlkYXRvcidzIHN0YWtpbmdJRHMuXG4gICAqL1xuICBzYW1wbGVWYWxpZGF0b3JzID0gYXN5bmMgKHNhbXBsZVNpemU6bnVtYmVyLFxuICAgIHN1Ym5ldElEOkJ1ZmZlciB8IHN0cmluZyA9IHVuZGVmaW5lZClcbiAgOlByb21pc2U8QXJyYXk8c3RyaW5nPj4gPT4ge1xuICAgIGNvbnN0IHBhcmFtczphbnkgPSB7XG4gICAgICBzaXplOiBzYW1wbGVTaXplLnRvU3RyaW5nKCksXG4gICAgfTtcbiAgICBpZiAodHlwZW9mIHN1Ym5ldElEID09PSAnc3RyaW5nJykge1xuICAgICAgcGFyYW1zLnN1Ym5ldElEID0gc3VibmV0SUQ7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc3VibmV0SUQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBwYXJhbXMuc3VibmV0SUQgPSBiaW50b29scy5jYjU4RW5jb2RlKHN1Ym5ldElEKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY2FsbE1ldGhvZCgncGxhdGZvcm0uc2FtcGxlVmFsaWRhdG9ycycsIHBhcmFtcylcbiAgICAgIC50aGVuKChyZXNwb25zZTpSZXF1ZXN0UmVzcG9uc2VEYXRhKSA9PiByZXNwb25zZS5kYXRhLnJlc3VsdC52YWxpZGF0b3JzKTtcbiAgfTtcblxuICAvKipcbiAgICogQWRkIGEgdmFsaWRhdG9yIHRvIHRoZSBQcmltYXJ5IE5ldHdvcmsuXG4gICAqXG4gICAqIEBwYXJhbSB1c2VybmFtZSBUaGUgdXNlcm5hbWUgb2YgdGhlIEtleXN0b3JlIHVzZXJcbiAgICogQHBhcmFtIHBhc3N3b3JkIFRoZSBwYXNzd29yZCBvZiB0aGUgS2V5c3RvcmUgdXNlclxuICAgKiBAcGFyYW0gbm9kZUlEIFRoZSBub2RlIElEIG9mIHRoZSB2YWxpZGF0b3JcbiAgICogQHBhcmFtIHN0YXJ0VGltZSBKYXZhc2NyaXB0IERhdGUgb2JqZWN0IGZvciB0aGUgc3RhcnQgdGltZSB0byB2YWxpZGF0ZVxuICAgKiBAcGFyYW0gZW5kVGltZSBKYXZhc2NyaXB0IERhdGUgb2JqZWN0IGZvciB0aGUgZW5kIHRpbWUgdG8gdmFsaWRhdGVcbiAgICogQHBhcmFtIHN0YWtlQW1vdW50IFRoZSBhbW91bnQgb2YgbkFWQVggdGhlIHZhbGlkYXRvciBpcyBzdGFraW5nIGFzXG4gICAqIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2JuLmpzL3xCTn1cbiAgICogQHBhcmFtIHJld2FyZEFkZHJlc3MgVGhlIGFkZHJlc3MgdGhlIHZhbGlkYXRvciByZXdhcmQgd2lsbCBnbyB0bywgaWYgdGhlcmUgaXMgb25lLlxuICAgKiBAcGFyYW0gZGVsZWdhdGlvbkZlZVJhdGUgT3B0aW9uYWwuIEEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2JuLmpzL3xCTn0gZm9yIHRoZSBwZXJjZW50IGZlZSB0aGlzIHZhbGlkYXRvciBcbiAgICogY2hhcmdlcyB3aGVuIG90aGVycyBkZWxlZ2F0ZSBzdGFrZSB0byB0aGVtLiBVcCB0byA0IGRlY2ltYWwgcGxhY2VzIGFsbG93ZWQ7IGFkZGl0aW9uYWwgZGVjaW1hbCBwbGFjZXMgYXJlIGlnbm9yZWQuIFxuICAgKiBNdXN0IGJlIGJldHdlZW4gMCBhbmQgMTAwLCBpbmNsdXNpdmUuIEZvciBleGFtcGxlLCBpZiBkZWxlZ2F0aW9uRmVlUmF0ZSBpcyAxLjIzNDUgYW5kIHNvbWVvbmUgZGVsZWdhdGVzIHRvIHRoaXMgXG4gICAqIHZhbGlkYXRvciwgdGhlbiB3aGVuIHRoZSBkZWxlZ2F0aW9uIHBlcmlvZCBpcyBvdmVyLCAxLjIzNDUlIG9mIHRoZSByZXdhcmQgZ29lcyB0byB0aGUgdmFsaWRhdG9yIGFuZCB0aGUgcmVzdCBnb2VzIFxuICAgKiB0byB0aGUgZGVsZWdhdG9yLlxuICAgKlxuICAgKiBAcmV0dXJucyBQcm9taXNlIGZvciBhIGJhc2U1OCBzdHJpbmcgb2YgdGhlIHVuc2lnbmVkIHRyYW5zYWN0aW9uLlxuICAgKi9cbiAgYWRkVmFsaWRhdG9yID0gYXN5bmMgKFxuICAgIHVzZXJuYW1lOnN0cmluZyxcbiAgICBwYXNzd29yZDpzdHJpbmcsXG4gICAgbm9kZUlEOnN0cmluZyxcbiAgICBzdGFydFRpbWU6RGF0ZSxcbiAgICBlbmRUaW1lOkRhdGUsXG4gICAgc3Rha2VBbW91bnQ6Qk4sXG4gICAgcmV3YXJkQWRkcmVzczpzdHJpbmcsXG4gICAgZGVsZWdhdGlvbkZlZVJhdGU6Qk4gPSB1bmRlZmluZWRcbiAgKTpQcm9taXNlPHN0cmluZz4gPT4ge1xuICAgIGNvbnN0IHBhcmFtczphbnkgPSB7XG4gICAgICB1c2VybmFtZSxcbiAgICAgIHBhc3N3b3JkLFxuICAgICAgbm9kZUlELFxuICAgICAgc3RhcnRUaW1lOiBzdGFydFRpbWUuZ2V0VGltZSgpIC8gMTAwMCxcbiAgICAgIGVuZFRpbWU6IGVuZFRpbWUuZ2V0VGltZSgpIC8gMTAwMCxcbiAgICAgIHN0YWtlQW1vdW50OiBzdGFrZUFtb3VudC50b1N0cmluZygxMCksXG4gICAgICByZXdhcmRBZGRyZXNzLFxuICAgIH07XG4gICAgaWYgKHR5cGVvZiBkZWxlZ2F0aW9uRmVlUmF0ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHBhcmFtcy5kZWxlZ2F0aW9uRmVlUmF0ZSA9IGRlbGVnYXRpb25GZWVSYXRlLnRvU3RyaW5nKDEwKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY2FsbE1ldGhvZCgncGxhdGZvcm0uYWRkVmFsaWRhdG9yJywgcGFyYW1zKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3BvbnNlLmRhdGEucmVzdWx0LnR4SUQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGQgYSB2YWxpZGF0b3IgdG8gYSBTdWJuZXQgb3RoZXIgdGhhbiB0aGUgUHJpbWFyeSBOZXR3b3JrLiBUaGUgdmFsaWRhdG9yIG11c3QgdmFsaWRhdGUgdGhlIFByaW1hcnkgTmV0d29yayBmb3IgdGhlIGVudGlyZSBkdXJhdGlvbiB0aGV5IHZhbGlkYXRlIHRoaXMgU3VibmV0LlxuICAgKlxuICAgKiBAcGFyYW0gdXNlcm5hbWUgVGhlIHVzZXJuYW1lIG9mIHRoZSBLZXlzdG9yZSB1c2VyXG4gICAqIEBwYXJhbSBwYXNzd29yZCBUaGUgcGFzc3dvcmQgb2YgdGhlIEtleXN0b3JlIHVzZXJcbiAgICogQHBhcmFtIG5vZGVJRCBUaGUgbm9kZSBJRCBvZiB0aGUgdmFsaWRhdG9yXG4gICAqIEBwYXJhbSBzdWJuZXRJRCBFaXRoZXIgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBvciBhIGNiNTggc2VyaWFsaXplZCBzdHJpbmcgZm9yIHRoZSBTdWJuZXRJRCBvciBpdHMgYWxpYXMuXG4gICAqIEBwYXJhbSBzdGFydFRpbWUgSmF2YXNjcmlwdCBEYXRlIG9iamVjdCBmb3IgdGhlIHN0YXJ0IHRpbWUgdG8gdmFsaWRhdGVcbiAgICogQHBhcmFtIGVuZFRpbWUgSmF2YXNjcmlwdCBEYXRlIG9iamVjdCBmb3IgdGhlIGVuZCB0aW1lIHRvIHZhbGlkYXRlXG4gICAqIEBwYXJhbSB3ZWlnaHQgVGhlIHZhbGlkYXRvcuKAmXMgd2VpZ2h0IHVzZWQgZm9yIHNhbXBsaW5nXG4gICAqXG4gICAqIEByZXR1cm5zIFByb21pc2UgZm9yIHRoZSB1bnNpZ25lZCB0cmFuc2FjdGlvbi4gSXQgbXVzdCBiZSBzaWduZWQgKHVzaW5nIHNpZ24pIGJ5IHRoZSBwcm9wZXIgbnVtYmVyIG9mIHRoZSBTdWJuZXTigJlzIGNvbnRyb2wga2V5cyBhbmQgYnkgdGhlIGtleSBvZiB0aGUgYWNjb3VudCBwYXlpbmcgdGhlIHRyYW5zYWN0aW9uIGZlZSBiZWZvcmUgaXQgY2FuIGJlIGlzc3VlZC5cbiAgICovXG4gIGFkZFN1Ym5ldFZhbGlkYXRvciA9IGFzeW5jIChcbiAgICB1c2VybmFtZTpzdHJpbmcsXG4gICAgcGFzc3dvcmQ6c3RyaW5nLFxuICAgIG5vZGVJRDpzdHJpbmcsXG4gICAgc3VibmV0SUQ6QnVmZmVyIHwgc3RyaW5nLFxuICAgIHN0YXJ0VGltZTpEYXRlLFxuICAgIGVuZFRpbWU6RGF0ZSxcbiAgICB3ZWlnaHQ6bnVtYmVyXG4gICAgKVxuICA6UHJvbWlzZTxzdHJpbmc+ID0+IHtcbiAgICBjb25zdCBwYXJhbXM6YW55ID0ge1xuICAgICAgdXNlcm5hbWUsXG4gICAgICBwYXNzd29yZCxcbiAgICAgIG5vZGVJRCxcbiAgICAgIHN0YXJ0VGltZTogc3RhcnRUaW1lLmdldFRpbWUoKSAvIDEwMDAsXG4gICAgICBlbmRUaW1lOiBlbmRUaW1lLmdldFRpbWUoKSAvIDEwMDAsXG4gICAgICB3ZWlnaHRcbiAgICB9O1xuICAgIGlmICh0eXBlb2Ygc3VibmV0SUQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBwYXJhbXMuc3VibmV0SUQgPSBzdWJuZXRJRDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzdWJuZXRJRCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHBhcmFtcy5zdWJuZXRJRCA9IGJpbnRvb2xzLmNiNThFbmNvZGUoc3VibmV0SUQpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jYWxsTWV0aG9kKCdwbGF0Zm9ybS5hZGRTdWJuZXRWYWxpZGF0b3InLCBwYXJhbXMpXG4gICAgICAudGhlbigocmVzcG9uc2U6UmVxdWVzdFJlc3BvbnNlRGF0YSkgPT4gcmVzcG9uc2UuZGF0YS5yZXN1bHQudHhJRCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCBhIGRlbGVnYXRvciB0byB0aGUgUHJpbWFyeSBOZXR3b3JrLlxuICAgKlxuICAgKiBAcGFyYW0gdXNlcm5hbWUgVGhlIHVzZXJuYW1lIG9mIHRoZSBLZXlzdG9yZSB1c2VyXG4gICAqIEBwYXJhbSBwYXNzd29yZCBUaGUgcGFzc3dvcmQgb2YgdGhlIEtleXN0b3JlIHVzZXJcbiAgICogQHBhcmFtIG5vZGVJRCBUaGUgbm9kZSBJRCBvZiB0aGUgZGVsZWdhdGVlXG4gICAqIEBwYXJhbSBzdGFydFRpbWUgSmF2YXNjcmlwdCBEYXRlIG9iamVjdCBmb3Igd2hlbiB0aGUgZGVsZWdhdG9yIHN0YXJ0cyBkZWxlZ2F0aW5nXG4gICAqIEBwYXJhbSBlbmRUaW1lIEphdmFzY3JpcHQgRGF0ZSBvYmplY3QgZm9yIHdoZW4gdGhlIGRlbGVnYXRvciBzdGFydHMgZGVsZWdhdGluZ1xuICAgKiBAcGFyYW0gc3Rha2VBbW91bnQgVGhlIGFtb3VudCBvZiBuQVZBWCB0aGUgZGVsZWdhdG9yIGlzIHN0YWtpbmcgYXNcbiAgICogYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfVxuICAgKiBAcGFyYW0gcmV3YXJkQWRkcmVzcyBUaGUgYWRkcmVzcyBvZiB0aGUgYWNjb3VudCB0aGUgc3Rha2VkIEFWQVggYW5kIHZhbGlkYXRpb24gcmV3YXJkXG4gICAqIChpZiBhcHBsaWNhYmxlKSBhcmUgc2VudCB0byBhdCBlbmRUaW1lXG4gICAqXG4gICAqIEByZXR1cm5zIFByb21pc2UgZm9yIGFuIGFycmF5IG9mIHZhbGlkYXRvcidzIHN0YWtpbmdJRHMuXG4gICAqL1xuICBhZGREZWxlZ2F0b3IgPSBhc3luYyAoXG4gICAgdXNlcm5hbWU6c3RyaW5nLFxuICAgIHBhc3N3b3JkOnN0cmluZyxcbiAgICBub2RlSUQ6c3RyaW5nLFxuICAgIHN0YXJ0VGltZTpEYXRlLFxuICAgIGVuZFRpbWU6RGF0ZSxcbiAgICBzdGFrZUFtb3VudDpCTixcbiAgICByZXdhcmRBZGRyZXNzOnN0cmluZylcbiAgOlByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgY29uc3QgcGFyYW1zOmFueSA9IHtcbiAgICAgIHVzZXJuYW1lLFxuICAgICAgcGFzc3dvcmQsXG4gICAgICBub2RlSUQsXG4gICAgICBzdGFydFRpbWU6IHN0YXJ0VGltZS5nZXRUaW1lKCkgLyAxMDAwLFxuICAgICAgZW5kVGltZTogZW5kVGltZS5nZXRUaW1lKCkgLyAxMDAwLFxuICAgICAgc3Rha2VBbW91bnQ6IHN0YWtlQW1vdW50LnRvU3RyaW5nKDEwKSxcbiAgICAgIHJld2FyZEFkZHJlc3MsXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5jYWxsTWV0aG9kKCdwbGF0Zm9ybS5hZGREZWxlZ2F0b3InLCBwYXJhbXMpXG4gICAgICAudGhlbigocmVzcG9uc2U6UmVxdWVzdFJlc3BvbnNlRGF0YSkgPT4gcmVzcG9uc2UuZGF0YS5yZXN1bHQudHhJRCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiB1bnNpZ25lZCB0cmFuc2FjdGlvbiB0byBjcmVhdGUgYSBuZXcgU3VibmV0LiBUaGUgdW5zaWduZWQgdHJhbnNhY3Rpb24gbXVzdCBiZVxuICAgKiBzaWduZWQgd2l0aCB0aGUga2V5IG9mIHRoZSBhY2NvdW50IHBheWluZyB0aGUgdHJhbnNhY3Rpb24gZmVlLiBUaGUgU3VibmV04oCZcyBJRCBpcyB0aGUgSUQgb2YgdGhlIHRyYW5zYWN0aW9uIHRoYXQgY3JlYXRlcyBpdCAoaWUgdGhlIHJlc3BvbnNlIGZyb20gaXNzdWVUeCB3aGVuIGlzc3VpbmcgdGhlIHNpZ25lZCB0cmFuc2FjdGlvbikuXG4gICAqXG4gICAqIEBwYXJhbSB1c2VybmFtZSBUaGUgdXNlcm5hbWUgb2YgdGhlIEtleXN0b3JlIHVzZXJcbiAgICogQHBhcmFtIHBhc3N3b3JkIFRoZSBwYXNzd29yZCBvZiB0aGUgS2V5c3RvcmUgdXNlclxuICAgKiBAcGFyYW0gY29udHJvbEtleXMgQXJyYXkgb2YgcGxhdGZvcm0gYWRkcmVzc2VzIGFzIHN0cmluZ3NcbiAgICogQHBhcmFtIHRocmVzaG9sZCBUbyBhZGQgYSB2YWxpZGF0b3IgdG8gdGhpcyBTdWJuZXQsIGEgdHJhbnNhY3Rpb24gbXVzdCBoYXZlIHRocmVzaG9sZFxuICAgKiBzaWduYXR1cmVzLCB3aGVyZSBlYWNoIHNpZ25hdHVyZSBpcyBmcm9tIGEga2V5IHdob3NlIGFkZHJlc3MgaXMgYW4gZWxlbWVudCBvZiBgY29udHJvbEtleXNgXG4gICAqXG4gICAqIEByZXR1cm5zIFByb21pc2UgZm9yIGEgc3RyaW5nIHdpdGggdGhlIHVuc2lnbmVkIHRyYW5zYWN0aW9uIGVuY29kZWQgYXMgYmFzZTU4LlxuICAgKi9cbiAgY3JlYXRlU3VibmV0ID0gYXN5bmMgKFxuICAgIHVzZXJuYW1lOiBzdHJpbmcsIFxuICAgIHBhc3N3b3JkOnN0cmluZyxcbiAgICBjb250cm9sS2V5czpBcnJheTxzdHJpbmc+LCBcbiAgICB0aHJlc2hvbGQ6bnVtYmVyXG4gIClcbiAgOlByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgY29uc3QgcGFyYW1zOmFueSA9IHtcbiAgICAgIHVzZXJuYW1lLFxuICAgICAgcGFzc3dvcmQsXG4gICAgICBjb250cm9sS2V5cyxcbiAgICAgIHRocmVzaG9sZFxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuY2FsbE1ldGhvZCgncGxhdGZvcm0uY3JlYXRlU3VibmV0JywgcGFyYW1zKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3BvbnNlLmRhdGEucmVzdWx0LnR4SUQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIFN1Ym5ldCB0aGF0IHZhbGlkYXRlcyBhIGdpdmVuIGJsb2NrY2hhaW4uXG4gICAqXG4gICAqIEBwYXJhbSBibG9ja2NoYWluSUQgRWl0aGVyIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gb3IgYSBjYjU4IFxuICAgKiBlbmNvZGVkIHN0cmluZyBmb3IgdGhlIGJsb2NrY2hhaW5JRCBvciBpdHMgYWxpYXMuXG4gICAqXG4gICAqIEByZXR1cm5zIFByb21pc2UgZm9yIGEgc3RyaW5nIG9mIHRoZSBzdWJuZXRJRCB0aGF0IHZhbGlkYXRlcyB0aGUgYmxvY2tjaGFpbi5cbiAgICovXG4gIHZhbGlkYXRlZEJ5ID0gYXN5bmMgKGJsb2NrY2hhaW5JRDpzdHJpbmcpOlByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgY29uc3QgcGFyYW1zOmFueSA9IHtcbiAgICAgIGJsb2NrY2hhaW5JRCxcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLmNhbGxNZXRob2QoJ3BsYXRmb3JtLnZhbGlkYXRlZEJ5JywgcGFyYW1zKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3BvbnNlLmRhdGEucmVzdWx0LnN1Ym5ldElEKTtcbiAgfTtcblxuICAvKipcbiAgICogR2V0IHRoZSBJRHMgb2YgdGhlIGJsb2NrY2hhaW5zIGEgU3VibmV0IHZhbGlkYXRlcy5cbiAgICpcbiAgICogQHBhcmFtIHN1Ym5ldElEIEVpdGhlciBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IG9yIGFuIEFWQVhcbiAgICogc2VyaWFsaXplZCBzdHJpbmcgZm9yIHRoZSBTdWJuZXRJRCBvciBpdHMgYWxpYXMuXG4gICAqXG4gICAqIEByZXR1cm5zIFByb21pc2UgZm9yIGFuIGFycmF5IG9mIGJsb2NrY2hhaW5JRHMgdGhlIHN1Ym5ldCB2YWxpZGF0ZXMuXG4gICAqL1xuICB2YWxpZGF0ZXMgPSBhc3luYyAoc3VibmV0SUQ6QnVmZmVyIHwgc3RyaW5nKTpQcm9taXNlPEFycmF5PHN0cmluZz4+ID0+IHtcbiAgICBjb25zdCBwYXJhbXM6YW55ID0ge1xuICAgICAgc3VibmV0SUQsXG4gICAgfTtcbiAgICBpZiAodHlwZW9mIHN1Ym5ldElEID09PSAnc3RyaW5nJykge1xuICAgICAgcGFyYW1zLnN1Ym5ldElEID0gc3VibmV0SUQ7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc3VibmV0SUQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBwYXJhbXMuc3VibmV0SUQgPSBiaW50b29scy5jYjU4RW5jb2RlKHN1Ym5ldElEKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY2FsbE1ldGhvZCgncGxhdGZvcm0udmFsaWRhdGVzJywgcGFyYW1zKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3BvbnNlLmRhdGEucmVzdWx0LmJsb2NrY2hhaW5JRHMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQgYWxsIHRoZSBibG9ja2NoYWlucyB0aGF0IGV4aXN0IChleGNsdWRpbmcgdGhlIFAtQ2hhaW4pLlxuICAgKlxuICAgKiBAcmV0dXJucyBQcm9taXNlIGZvciBhbiBhcnJheSBvZiBvYmplY3RzIGNvbnRhaW5pbmcgZmllbGRzIFwiaWRcIiwgXCJzdWJuZXRJRFwiLCBhbmQgXCJ2bUlEXCIuXG4gICAqL1xuICBnZXRCbG9ja2NoYWlucyA9IGFzeW5jICgpOlByb21pc2U8QXJyYXk8b2JqZWN0Pj4gPT4ge1xuICAgIGNvbnN0IHBhcmFtczphbnkgPSB7fTtcbiAgICByZXR1cm4gdGhpcy5jYWxsTWV0aG9kKCdwbGF0Zm9ybS5nZXRCbG9ja2NoYWlucycsIHBhcmFtcylcbiAgICAgIC50aGVuKChyZXNwb25zZTpSZXF1ZXN0UmVzcG9uc2VEYXRhKSA9PiByZXNwb25zZS5kYXRhLnJlc3VsdC5ibG9ja2NoYWlucyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNlbmQgQVZBWCBmcm9tIGFuIGFjY291bnQgb24gdGhlIFAtQ2hhaW4gdG8gYW4gYWRkcmVzcyBvbiB0aGUgWC1DaGFpbi4gVGhpcyB0cmFuc2FjdGlvblxuICAgKiBtdXN0IGJlIHNpZ25lZCB3aXRoIHRoZSBrZXkgb2YgdGhlIGFjY291bnQgdGhhdCB0aGUgQVZBWCBpcyBzZW50IGZyb20gYW5kIHdoaWNoIHBheXMgdGhlXG4gICAqIHRyYW5zYWN0aW9uIGZlZS4gQWZ0ZXIgaXNzdWluZyB0aGlzIHRyYW5zYWN0aW9uLCB5b3UgbXVzdCBjYWxsIHRoZSBYLUNoYWlu4oCZcyBpbXBvcnRBVkFYXG4gICAqIG1ldGhvZCB0byBjb21wbGV0ZSB0aGUgdHJhbnNmZXIuXG4gICAqXG4gICAqIEBwYXJhbSB1c2VybmFtZSBUaGUgS2V5c3RvcmUgdXNlciB0aGF0IGNvbnRyb2xzIHRoZSBhY2NvdW50IHNwZWNpZmllZCBpbiBgdG9gXG4gICAqIEBwYXJhbSBwYXNzd29yZCBUaGUgcGFzc3dvcmQgb2YgdGhlIEtleXN0b3JlIHVzZXJcbiAgICogQHBhcmFtIHRvIFRoZSBhZGRyZXNzIG9uIHRoZSBYLUNoYWluIHRvIHNlbmQgdGhlIEFWQVggdG8uIERvIG5vdCBpbmNsdWRlIFgtIGluIHRoZSBhZGRyZXNzXG4gICAqIEBwYXJhbSBhbW91bnQgQW1vdW50IG9mIEFWQVggdG8gZXhwb3J0IGFzIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2JuLmpzL3xCTn1cbiAgICpcbiAgICogQHJldHVybnMgUHJvbWlzZSBmb3IgYW4gdW5zaWduZWQgdHJhbnNhY3Rpb24gdG8gYmUgc2lnbmVkIGJ5IHRoZSBhY2NvdW50IHRoZSB0aGUgQVZBWCBpc1xuICAgKiBzZW50IGZyb20gYW5kIHBheXMgdGhlIHRyYW5zYWN0aW9uIGZlZS5cbiAgICovXG4gIGV4cG9ydEFWQVggPSBhc3luYyAodXNlcm5hbWU6IHN0cmluZywgcGFzc3dvcmQ6c3RyaW5nLCBhbW91bnQ6Qk4sIHRvOnN0cmluZywpOlByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgY29uc3QgcGFyYW1zOmFueSA9IHtcbiAgICAgIHVzZXJuYW1lLFxuICAgICAgcGFzc3dvcmQsXG4gICAgICB0byxcbiAgICAgIGFtb3VudDogYW1vdW50LnRvU3RyaW5nKDEwKVxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuY2FsbE1ldGhvZCgncGxhdGZvcm0uZXhwb3J0QVZBWCcsIHBhcmFtcylcbiAgICAgIC50aGVuKChyZXNwb25zZTpSZXF1ZXN0UmVzcG9uc2VEYXRhKSA9PiByZXNwb25zZS5kYXRhLnJlc3VsdC50eElEKTtcbiAgfTtcblxuICAvKipcbiAgICogU2VuZCBBVkFYIGZyb20gYW4gYWNjb3VudCBvbiB0aGUgUC1DaGFpbiB0byBhbiBhZGRyZXNzIG9uIHRoZSBYLUNoYWluLiBUaGlzIHRyYW5zYWN0aW9uXG4gICAqIG11c3QgYmUgc2lnbmVkIHdpdGggdGhlIGtleSBvZiB0aGUgYWNjb3VudCB0aGF0IHRoZSBBVkFYIGlzIHNlbnQgZnJvbSBhbmQgd2hpY2ggcGF5c1xuICAgKiB0aGUgdHJhbnNhY3Rpb24gZmVlLiBBZnRlciBpc3N1aW5nIHRoaXMgdHJhbnNhY3Rpb24sIHlvdSBtdXN0IGNhbGwgdGhlIFgtQ2hhaW7igJlzXG4gICAqIGltcG9ydEFWQVggbWV0aG9kIHRvIGNvbXBsZXRlIHRoZSB0cmFuc2Zlci5cbiAgICpcbiAgICogQHBhcmFtIHVzZXJuYW1lIFRoZSBLZXlzdG9yZSB1c2VyIHRoYXQgY29udHJvbHMgdGhlIGFjY291bnQgc3BlY2lmaWVkIGluIGB0b2BcbiAgICogQHBhcmFtIHBhc3N3b3JkIFRoZSBwYXNzd29yZCBvZiB0aGUgS2V5c3RvcmUgdXNlclxuICAgKiBAcGFyYW0gdG8gVGhlIElEIG9mIHRoZSBhY2NvdW50IHRoZSBBVkFYIGlzIHNlbnQgdG8uIFRoaXMgbXVzdCBiZSB0aGUgc2FtZSBhcyB0aGUgdG9cbiAgICogYXJndW1lbnQgaW4gdGhlIGNvcnJlc3BvbmRpbmcgY2FsbCB0byB0aGUgWC1DaGFpbuKAmXMgZXhwb3J0QVZBWFxuICAgKiBAcGFyYW0gc291cmNlQ2hhaW4gVGhlIGNoYWluSUQgd2hlcmUgdGhlIGZ1bmRzIGFyZSBjb21pbmcgZnJvbS5cbiAgICpcbiAgICogQHJldHVybnMgUHJvbWlzZSBmb3IgYSBzdHJpbmcgZm9yIHRoZSB0cmFuc2FjdGlvbiwgd2hpY2ggc2hvdWxkIGJlIHNlbnQgdG8gdGhlIG5ldHdvcmtcbiAgICogYnkgY2FsbGluZyBpc3N1ZVR4LlxuICAgKi9cbiAgaW1wb3J0QVZBWCA9IGFzeW5jICh1c2VybmFtZTogc3RyaW5nLCBwYXNzd29yZDpzdHJpbmcsIHRvOnN0cmluZywgc291cmNlQ2hhaW46c3RyaW5nKVxuICA6UHJvbWlzZTxzdHJpbmc+ID0+IHtcbiAgICBjb25zdCBwYXJhbXM6YW55ID0ge1xuICAgICAgdG8sXG4gICAgICBzb3VyY2VDaGFpbixcbiAgICAgIHVzZXJuYW1lLFxuICAgICAgcGFzc3dvcmQsXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5jYWxsTWV0aG9kKCdwbGF0Zm9ybS5pbXBvcnRBVkFYJywgcGFyYW1zKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3BvbnNlLmRhdGEucmVzdWx0LnR4SUQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxscyB0aGUgbm9kZSdzIGlzc3VlVHggbWV0aG9kIGZyb20gdGhlIEFQSSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0aW5nIHRyYW5zYWN0aW9uIElEIGFzIGEgc3RyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0gdHggQSBzdHJpbmcsIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9LCBvciBbW1R4XV0gcmVwcmVzZW50aW5nIGEgdHJhbnNhY3Rpb25cbiAgICpcbiAgICogQHJldHVybnMgQSBQcm9taXNlPHN0cmluZz4gcmVwcmVzZW50aW5nIHRoZSB0cmFuc2FjdGlvbiBJRCBvZiB0aGUgcG9zdGVkIHRyYW5zYWN0aW9uLlxuICAgKi9cbiAgaXNzdWVUeCA9IGFzeW5jICh0eDpzdHJpbmcgfCBCdWZmZXIgfCBUeCk6UHJvbWlzZTxzdHJpbmc+ID0+IHtcbiAgICBsZXQgVHJhbnNhY3Rpb24gPSAnJztcbiAgICBpZiAodHlwZW9mIHR4ID09PSAnc3RyaW5nJykge1xuICAgICAgVHJhbnNhY3Rpb24gPSB0eDtcbiAgICB9IGVsc2UgaWYgKHR4IGluc3RhbmNlb2YgQnVmZmVyKSB7XG4gICAgICBjb25zdCB0eG9iajpUeCA9IG5ldyBUeCgpO1xuICAgICAgdHhvYmouZnJvbUJ1ZmZlcih0eCk7XG4gICAgICBUcmFuc2FjdGlvbiA9IHR4b2JqLnRvU3RyaW5nKCk7XG4gICAgfSBlbHNlIGlmICh0eCBpbnN0YW5jZW9mIFR4KSB7XG4gICAgICBUcmFuc2FjdGlvbiA9IHR4LnRvU3RyaW5nKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIC0gcGxhdGZvcm0uaXNzdWVUeDogcHJvdmlkZWQgdHggaXMgbm90IGV4cGVjdGVkIHR5cGUgb2Ygc3RyaW5nLCBCdWZmZXIsIG9yIFR4Jyk7XG4gICAgfVxuICAgIGNvbnN0IHBhcmFtczphbnkgPSB7XG4gICAgICB0eDogVHJhbnNhY3Rpb24udG9TdHJpbmcoKSxcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLmNhbGxNZXRob2QoJ3BsYXRmb3JtLmlzc3VlVHgnLCBwYXJhbXMpLnRoZW4oKHJlc3BvbnNlOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3BvbnNlLmRhdGEucmVzdWx0LnR4SUQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIHVwcGVyIGJvdW5kIG9uIHRoZSBhbW91bnQgb2YgdG9rZW5zIHRoYXQgZXhpc3QuIE5vdCBtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcgYmVjYXVzZSB0aGlzIG51bWJlciBjYW4gZ28gZG93biBpZiBhIHN0YWtlcidzIHJld2FyZCBpcyBkZW5pZWQuXG4gICAqL1xuICBnZXRDdXJyZW50U3VwcGx5ID0gYXN5bmMgKCk6UHJvbWlzZTxCTj4gPT4ge1xuICAgIGNvbnN0IHBhcmFtczphbnkgPSB7fTtcbiAgICByZXR1cm4gdGhpcy5jYWxsTWV0aG9kKCdwbGF0Zm9ybS5nZXRDdXJyZW50U3VwcGx5JywgcGFyYW1zKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IG5ldyBCTihyZXNwb25zZS5kYXRhLnJlc3VsdC5zdXBwbHksIDEwKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgaGVpZ2h0IG9mIHRoZSBwbGF0Zm9ybSBjaGFpbi5cbiAgICovXG4gIGdldEhlaWdodCA9IGFzeW5jICgpOlByb21pc2U8Qk4+ID0+IHtcbiAgICBjb25zdCBwYXJhbXM6YW55ID0ge307XG4gICAgcmV0dXJuIHRoaXMuY2FsbE1ldGhvZCgncGxhdGZvcm0uZ2V0SGVpZ2h0JywgcGFyYW1zKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IG5ldyBCTihyZXNwb25zZS5kYXRhLnJlc3VsdC5oZWlnaHQsIDEwKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgbWluaW11bSBzdGFraW5nIGFtb3VudC5cbiAgICogXG4gICAqIEBwYXJhbSByZWZyZXNoIEEgYm9vbGVhbiB0byBieXBhc3MgdGhlIGxvY2FsIGNhY2hlZCB2YWx1ZSBvZiBNaW5pbXVtIFN0YWtlIEFtb3VudCwgcG9sbGluZyB0aGUgbm9kZSBpbnN0ZWFkLlxuICAgKi9cbiAgZ2V0TWluU3Rha2UgPSBhc3luYyAocmVmcmVzaDpib29sZWFuID0gZmFsc2UpOlByb21pc2U8e21pblZhbGlkYXRvclN0YWtlOkJOLCBtaW5EZWxlZ2F0b3JTdGFrZTpCTn0+ID0+IHtcbiAgICBpZihyZWZyZXNoICE9PSB0cnVlICYmIHR5cGVvZiB0aGlzLm1pblZhbGlkYXRvclN0YWtlICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiB0aGlzLm1pbkRlbGVnYXRvclN0YWtlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBtaW5WYWxpZGF0b3JTdGFrZTogdGhpcy5taW5WYWxpZGF0b3JTdGFrZSxcbiAgICAgICAgbWluRGVsZWdhdG9yU3Rha2U6IHRoaXMubWluRGVsZWdhdG9yU3Rha2VcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHBhcmFtczphbnkgPSB7fTtcbiAgICByZXR1cm4gdGhpcy5jYWxsTWV0aG9kKCdwbGF0Zm9ybS5nZXRNaW5TdGFrZScsIHBhcmFtcylcbiAgICAgIC50aGVuKChyZXNwb25zZTpSZXF1ZXN0UmVzcG9uc2VEYXRhKSA9PiB7XG4gICAgICAgIHRoaXMubWluVmFsaWRhdG9yU3Rha2UgPSBuZXcgQk4ocmVzcG9uc2UuZGF0YS5yZXN1bHQubWluVmFsaWRhdG9yU3Rha2UsIDEwKTtcbiAgICAgICAgdGhpcy5taW5EZWxlZ2F0b3JTdGFrZSA9IG5ldyBCTihyZXNwb25zZS5kYXRhLnJlc3VsdC5taW5EZWxlZ2F0b3JTdGFrZSwgMTApO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG1pblZhbGlkYXRvclN0YWtlOiB0aGlzLm1pblZhbGlkYXRvclN0YWtlLFxuICAgICAgICAgIG1pbkRlbGVnYXRvclN0YWtlOiB0aGlzLm1pbkRlbGVnYXRvclN0YWtlXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBtaW5pbXVtIHN0YWtlIGNhY2hlZCBpbiB0aGlzIGNsYXNzLlxuICAgKiBAcGFyYW0gbWluVmFsaWRhdG9yU3Rha2UgQSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfSB0byBzZXQgdGhlIG1pbmltdW0gc3Rha2UgYW1vdW50IGNhY2hlZCBpbiB0aGlzIGNsYXNzLlxuICAgKiBAcGFyYW0gbWluRGVsZWdhdG9yU3Rha2UgQSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfSB0byBzZXQgdGhlIG1pbmltdW0gZGVsZWdhdGlvbiBhbW91bnQgY2FjaGVkIGluIHRoaXMgY2xhc3MuXG4gICAqL1xuICBzZXRNaW5TdGFrZSA9IChtaW5WYWxpZGF0b3JTdGFrZTpCTiA9IHVuZGVmaW5lZCwgbWluRGVsZWdhdG9yU3Rha2U6Qk4gPSB1bmRlZmluZWQpOnZvaWQgPT4ge1xuICAgIGlmKHR5cGVvZiBtaW5WYWxpZGF0b3JTdGFrZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhpcy5taW5WYWxpZGF0b3JTdGFrZSA9IG1pblZhbGlkYXRvclN0YWtlO1xuICAgIH1cbiAgICBpZih0eXBlb2YgbWluRGVsZWdhdG9yU3Rha2UgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRoaXMubWluRGVsZWdhdG9yU3Rha2UgPSBtaW5EZWxlZ2F0b3JTdGFrZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgdG90YWwgYW1vdW50IHN0YWtlZCBmb3IgYW4gYXJyYXkgb2YgYWRkcmVzc2VzLlxuICAgKi9cbiAgZ2V0U3Rha2UgPSBhc3luYyAoYWRkcmVzc2VzOkFycmF5PHN0cmluZz4pOlByb21pc2U8Qk4+ID0+IHtcbiAgICBjb25zdCBwYXJhbXM6YW55ID0ge1xuICAgICAgYWRkcmVzc2VzXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5jYWxsTWV0aG9kKCdwbGF0Zm9ybS5nZXRTdGFrZScsIHBhcmFtcylcbiAgICAgIC50aGVuKChyZXNwb25zZTpSZXF1ZXN0UmVzcG9uc2VEYXRhKSA9PiBuZXcgQk4ocmVzcG9uc2UuZGF0YS5yZXN1bHQuc3Rha2VkLCAxMCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgdGhlIHN1Ym5ldHMgdGhhdCBleGlzdC5cbiAgICpcbiAgICogQHBhcmFtIGlkcyBJRHMgb2YgdGhlIHN1Ym5ldHMgdG8gcmV0cmlldmUgaW5mb3JtYXRpb24gYWJvdXQuIElmIG9taXR0ZWQsIGdldHMgYWxsIHN1Ym5ldHNcbiAgICogXG4gICAqIEByZXR1cm5zIFByb21pc2UgZm9yIGFuIGFycmF5IG9mIG9iamVjdHMgY29udGFpbmluZyBmaWVsZHMgXCJpZFwiLFxuICAgKiBcImNvbnRyb2xLZXlzXCIsIGFuZCBcInRocmVzaG9sZFwiLlxuICAgKi9cbiAgZ2V0U3VibmV0cyA9IGFzeW5jIChpZHM6QXJyYXk8c3RyaW5nPiA9IHVuZGVmaW5lZCk6UHJvbWlzZTxBcnJheTxvYmplY3Q+PiA9PiB7XG4gICAgY29uc3QgcGFyYW1zOmFueSA9IHt9O1xuICAgIGlmKHR5cGVvZiBpZHMgIT09IHVuZGVmaW5lZCl7XG4gICAgICBwYXJhbXMuaWRzID0gaWRzO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jYWxsTWV0aG9kKCdwbGF0Zm9ybS5nZXRTdWJuZXRzJywgcGFyYW1zKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3BvbnNlLmRhdGEucmVzdWx0LnN1Ym5ldHMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFeHBvcnRzIHRoZSBwcml2YXRlIGtleSBmb3IgYW4gYWRkcmVzcy5cbiAgICpcbiAgICogQHBhcmFtIHVzZXJuYW1lIFRoZSBuYW1lIG9mIHRoZSB1c2VyIHdpdGggdGhlIHByaXZhdGUga2V5XG4gICAqIEBwYXJhbSBwYXNzd29yZCBUaGUgcGFzc3dvcmQgdXNlZCB0byBkZWNyeXB0IHRoZSBwcml2YXRlIGtleVxuICAgKiBAcGFyYW0gYWRkcmVzcyBUaGUgYWRkcmVzcyB3aG9zZSBwcml2YXRlIGtleSBzaG91bGQgYmUgZXhwb3J0ZWRcbiAgICpcbiAgICogQHJldHVybnMgUHJvbWlzZSB3aXRoIHRoZSBkZWNyeXB0ZWQgcHJpdmF0ZSBrZXkgYXMgc3RvcmUgaW4gdGhlIGRhdGFiYXNlXG4gICAqL1xuICBleHBvcnRLZXkgPSBhc3luYyAodXNlcm5hbWU6c3RyaW5nLCBwYXNzd29yZDpzdHJpbmcsIGFkZHJlc3M6c3RyaW5nKTpQcm9taXNlPHN0cmluZz4gPT4ge1xuICAgIGNvbnN0IHBhcmFtczphbnkgPSB7XG4gICAgICB1c2VybmFtZSxcbiAgICAgIHBhc3N3b3JkLFxuICAgICAgYWRkcmVzcyxcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLmNhbGxNZXRob2QoJ3BsYXRmb3JtLmV4cG9ydEtleScsIHBhcmFtcylcbiAgICAgIC50aGVuKChyZXNwb25zZTpSZXF1ZXN0UmVzcG9uc2VEYXRhKSA9PiByZXNwb25zZS5kYXRhLnJlc3VsdC5wcml2YXRlS2V5KTtcbiAgfTtcblxuICAvKipcbiAgICogR2l2ZSBhIHVzZXIgY29udHJvbCBvdmVyIGFuIGFkZHJlc3MgYnkgcHJvdmlkaW5nIHRoZSBwcml2YXRlIGtleSB0aGF0IGNvbnRyb2xzIHRoZSBhZGRyZXNzLlxuICAgKlxuICAgKiBAcGFyYW0gdXNlcm5hbWUgVGhlIG5hbWUgb2YgdGhlIHVzZXIgdG8gc3RvcmUgdGhlIHByaXZhdGUga2V5XG4gICAqIEBwYXJhbSBwYXNzd29yZCBUaGUgcGFzc3dvcmQgdGhhdCB1bmxvY2tzIHRoZSB1c2VyXG4gICAqIEBwYXJhbSBwcml2YXRlS2V5IEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcHJpdmF0ZSBrZXkgaW4gdGhlIHZtJ3MgZm9ybWF0XG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSBhZGRyZXNzIGZvciB0aGUgaW1wb3J0ZWQgcHJpdmF0ZSBrZXkuXG4gICAqL1xuICBpbXBvcnRLZXkgPSBhc3luYyAodXNlcm5hbWU6c3RyaW5nLCBwYXNzd29yZDpzdHJpbmcsIHByaXZhdGVLZXk6c3RyaW5nKTpQcm9taXNlPHN0cmluZz4gPT4ge1xuICAgIGNvbnN0IHBhcmFtczphbnkgPSB7XG4gICAgICB1c2VybmFtZSxcbiAgICAgIHBhc3N3b3JkLFxuICAgICAgcHJpdmF0ZUtleSxcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLmNhbGxNZXRob2QoJ3BsYXRmb3JtLmltcG9ydEtleScsIHBhcmFtcylcbiAgICAgIC50aGVuKChyZXNwb25zZTpSZXF1ZXN0UmVzcG9uc2VEYXRhKSA9PiByZXNwb25zZS5kYXRhLnJlc3VsdC5hZGRyZXNzKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdHJlYW5zYWN0aW9uIGRhdGEgb2YgYSBwcm92aWRlZCB0cmFuc2FjdGlvbiBJRCBieSBjYWxsaW5nIHRoZSBub2RlJ3MgYGdldFR4YCBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSB0eGlkIFRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHRyYW5zYWN0aW9uIElEXG4gICAqXG4gICAqIEByZXR1cm5zIFJldHVybnMgYSBQcm9taXNlPHN0cmluZz4gY29udGFpbmluZyB0aGUgYnl0ZXMgcmV0cmlldmVkIGZyb20gdGhlIG5vZGVcbiAgICovXG4gIGdldFR4ID0gYXN5bmMgKHR4aWQ6c3RyaW5nKTpQcm9taXNlPHN0cmluZz4gPT4ge1xuICAgIGNvbnN0IHBhcmFtczphbnkgPSB7XG4gICAgICB0eElEOiB0eGlkLFxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuY2FsbE1ldGhvZCgncGxhdGZvcm0uZ2V0VHgnLCBwYXJhbXMpLnRoZW4oKHJlc3BvbnNlOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3BvbnNlLmRhdGEucmVzdWx0LnR4KTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgc3RhdHVzIG9mIGEgcHJvdmlkZWQgdHJhbnNhY3Rpb24gSUQgYnkgY2FsbGluZyB0aGUgbm9kZSdzIGBnZXRUeFN0YXR1c2AgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0gdHhpZCBUaGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB0cmFuc2FjdGlvbiBJRFxuICAgKiBAcGFyYW0gaW5jbHVkZVJlYXNvbiBSZXR1cm4gdGhlIHJlYXNvbiB0eCB3YXMgZHJvcHBlZCwgaWYgYXBwbGljYWJsZS4gRGVmYXVsdHMgdG8gdHJ1ZVxuICAgKlxuICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgUHJvbWlzZTxzdHJpbmc+IGNvbnRhaW5pbmcgdGhlIHN0YXR1cyByZXRyaWV2ZWQgZnJvbSB0aGUgbm9kZSBhbmQgdGhlIHJlYXNvbiBhIHR4IHdhcyBkcm9wcGVkLCBpZiBhcHBsaWNhYmxlLlxuICAgKi9cbiAgZ2V0VHhTdGF0dXMgPSBhc3luYyAodHhpZDpzdHJpbmcsIGluY2x1ZGVSZWFzb246Ym9vbGVhbiA9IHRydWUpOlByb21pc2U8c3RyaW5nfHtzdGF0dXM6c3RyaW5nLCByZWFzb246c3RyaW5nfT4gPT4ge1xuICAgIGNvbnN0IHBhcmFtczphbnkgPSB7XG4gICAgICB0eElEOiB0eGlkLFxuICAgICAgaW5jbHVkZVJlYXNvbjogaW5jbHVkZVJlYXNvblxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuY2FsbE1ldGhvZCgncGxhdGZvcm0uZ2V0VHhTdGF0dXMnLCBwYXJhbXMpLnRoZW4oKHJlc3BvbnNlOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3BvbnNlLmRhdGEucmVzdWx0KTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0cmlldmVzIHRoZSBVVFhPcyByZWxhdGVkIHRvIHRoZSBhZGRyZXNzZXMgcHJvdmlkZWQgZnJvbSB0aGUgbm9kZSdzIGBnZXRVVFhPc2AgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0gYWRkcmVzc2VzIEFuIGFycmF5IG9mIGFkZHJlc3NlcyBhcyBjYjU4IHN0cmluZ3Mgb3IgYWRkcmVzc2VzIGFzIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9c1xuICAgKiBAcGFyYW0gc291cmNlQ2hhaW4gQSBzdHJpbmcgZm9yIHRoZSBjaGFpbiB0byBsb29rIGZvciB0aGUgVVRYTydzLiBEZWZhdWx0IGlzIHRvIHVzZSB0aGlzIGNoYWluLCBidXQgaWYgZXhwb3J0ZWQgVVRYT3MgZXhpc3QgZnJvbSBvdGhlciBjaGFpbnMsIHRoaXMgY2FuIHVzZWQgdG8gcHVsbCB0aGVtIGluc3RlYWQuXG4gICAqIEBwYXJhbSBsaW1pdCBPcHRpb25hbC4gUmV0dXJucyBhdCBtb3N0IFtsaW1pdF0gYWRkcmVzc2VzLiBJZiBbbGltaXRdID09IDAgb3IgPiBbbWF4VVRYT3NUb0ZldGNoXSwgZmV0Y2hlcyB1cCB0byBbbWF4VVRYT3NUb0ZldGNoXS5cbiAgICogQHBhcmFtIHN0YXJ0SW5kZXggT3B0aW9uYWwuIFtTdGFydEluZGV4XSBkZWZpbmVzIHdoZXJlIHRvIHN0YXJ0IGZldGNoaW5nIFVUWE9zIChmb3IgcGFnaW5hdGlvbi4pXG4gICAqIFVUWE9zIGZldGNoZWQgYXJlIGZyb20gYWRkcmVzc2VzIGVxdWFsIHRvIG9yIGdyZWF0ZXIgdGhhbiBbU3RhcnRJbmRleC5BZGRyZXNzXVxuICAgKiBGb3IgYWRkcmVzcyBbU3RhcnRJbmRleC5BZGRyZXNzXSwgb25seSBVVFhPcyB3aXRoIElEcyBncmVhdGVyIHRoYW4gW1N0YXJ0SW5kZXguVXR4b10gd2lsbCBiZSByZXR1cm5lZC5cbiAgICogQHBhcmFtIHBlcnNpc3RPcHRzIE9wdGlvbnMgYXZhaWxhYmxlIHRvIHBlcnNpc3QgdGhlc2UgVVRYT3MgaW4gbG9jYWwgc3RvcmFnZVxuICAgKlxuICAgKiBAcmVtYXJrc1xuICAgKiBwZXJzaXN0T3B0cyBpcyBvcHRpb25hbCBhbmQgbXVzdCBiZSBvZiB0eXBlIFtbUGVyc2lzdGFuY2VPcHRpb25zXV1cbiAgICpcbiAgICovXG4gIGdldFVUWE9zID0gYXN5bmMgKFxuICAgIGFkZHJlc3NlczpBcnJheTxzdHJpbmc+IHwgc3RyaW5nLFxuICAgIHNvdXJjZUNoYWluOnN0cmluZyA9IHVuZGVmaW5lZCxcbiAgICBsaW1pdDpudW1iZXIgPSAwLFxuICAgIHN0YXJ0SW5kZXg6e2FkZHJlc3M6c3RyaW5nLCB1dHhvOnN0cmluZ30gPSB1bmRlZmluZWQsXG4gICAgcGVyc2lzdE9wdHM6UGVyc2lzdGFuY2VPcHRpb25zID0gdW5kZWZpbmVkXG4gICk6UHJvbWlzZTx7XG4gICAgbnVtRmV0Y2hlZDpudW1iZXIsXG4gICAgdXR4b3M6VVRYT1NldCxcbiAgICBlbmRJbmRleDp7YWRkcmVzczpzdHJpbmcsIHV0eG86c3RyaW5nfVxuICB9PiA9PiB7XG4gICAgXG4gICAgaWYodHlwZW9mIGFkZHJlc3NlcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgYWRkcmVzc2VzID0gW2FkZHJlc3Nlc107XG4gICAgfVxuXG4gICAgY29uc3QgcGFyYW1zOmFueSA9IHtcbiAgICAgIGFkZHJlc3NlczogYWRkcmVzc2VzLFxuICAgICAgbGltaXRcbiAgICB9O1xuICAgIGlmKHR5cGVvZiBzdGFydEluZGV4ICE9PSBcInVuZGVmaW5lZFwiICYmIHN0YXJ0SW5kZXgpIHtcbiAgICAgIHBhcmFtcy5zdGFydEluZGV4ID0gc3RhcnRJbmRleDtcbiAgICB9XG5cbiAgICBpZih0eXBlb2Ygc291cmNlQ2hhaW4gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHBhcmFtcy5zb3VyY2VDaGFpbiA9IHNvdXJjZUNoYWluO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNhbGxNZXRob2QoJ3BsYXRmb3JtLmdldFVUWE9zJywgcGFyYW1zKS50aGVuKChyZXNwb25zZTpSZXF1ZXN0UmVzcG9uc2VEYXRhKSA9PiB7XG5cbiAgICAgIGNvbnN0IHV0eG9zOlVUWE9TZXQgPSBuZXcgVVRYT1NldCgpO1xuICAgICAgbGV0IGRhdGEgPSByZXNwb25zZS5kYXRhLnJlc3VsdC51dHhvcztcbiAgICAgIGlmIChwZXJzaXN0T3B0cyAmJiB0eXBlb2YgcGVyc2lzdE9wdHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmICh0aGlzLmRiLmhhcyhwZXJzaXN0T3B0cy5nZXROYW1lKCkpKSB7XG4gICAgICAgICAgY29uc3Qgc2VsZkFycmF5OkFycmF5PHN0cmluZz4gPSB0aGlzLmRiLmdldChwZXJzaXN0T3B0cy5nZXROYW1lKCkpO1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNlbGZBcnJheSkpIHtcbiAgICAgICAgICAgIHV0eG9zLmFkZEFycmF5KGRhdGEpO1xuICAgICAgICAgICAgY29uc3Qgc2VsZjpVVFhPU2V0ID0gbmV3IFVUWE9TZXQoKTtcbiAgICAgICAgICAgIHNlbGYuYWRkQXJyYXkoc2VsZkFycmF5KTtcbiAgICAgICAgICAgIHNlbGYubWVyZ2VCeVJ1bGUodXR4b3MsIHBlcnNpc3RPcHRzLmdldE1lcmdlUnVsZSgpKTtcbiAgICAgICAgICAgIGRhdGEgPSBzZWxmLmdldEFsbFVUWE9TdHJpbmdzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGIuc2V0KHBlcnNpc3RPcHRzLmdldE5hbWUoKSwgZGF0YSwgcGVyc2lzdE9wdHMuZ2V0T3ZlcndyaXRlKCkpO1xuICAgICAgfVxuICAgICAgdXR4b3MuYWRkQXJyYXkoZGF0YSwgZmFsc2UpO1xuICAgICAgcmVzcG9uc2UuZGF0YS5yZXN1bHQudXR4b3MgPSB1dHhvcztcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLnJlc3VsdDtcbiAgICB9KTtcbiAgfTtcblxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB3aGljaCBjcmVhdGVzIGFuIHVuc2lnbmVkIEltcG9ydCBUeC4gRm9yIG1vcmUgZ3JhbnVsYXIgY29udHJvbCwgeW91IG1heSBjcmVhdGUgeW91ciBvd25cbiAqIFtbVW5zaWduZWRUeF1dIG1hbnVhbGx5ICh3aXRoIHRoZWlyIGNvcnJlc3BvbmRpbmcgW1tUcmFuc2ZlcmFibGVJbnB1dF1dcywgW1tUcmFuc2ZlcmFibGVPdXRwdXRdXXMsIGFuZCBbW1RyYW5zZmVyT3BlcmF0aW9uXV1zKS5cbiAqXG4gKiBAcGFyYW0gdXR4b3NldCBBIHNldCBvZiBVVFhPcyB0aGF0IHRoZSB0cmFuc2FjdGlvbiBpcyBidWlsdCBvblxuICogQHBhcmFtIG93bmVyQWRkcmVzc2VzIFRoZSBhZGRyZXNzZXMgYmVpbmcgdXNlZCB0byBpbXBvcnRcbiAqIEBwYXJhbSBzb3VyY2VDaGFpbiBUaGUgY2hhaW5pZCBmb3Igd2hlcmUgdGhlIGltcG9ydCBpcyBjb21pbmcgZnJvbS5cbiAqIEBwYXJhbSB0b0FkZHJlc3NlcyBUaGUgYWRkcmVzc2VzIHRvIHNlbmQgdGhlIGZ1bmRzXG4gKiBAcGFyYW0gZnJvbUFkZHJlc3NlcyBUaGUgYWRkcmVzc2VzIGJlaW5nIHVzZWQgdG8gc2VuZCB0aGUgZnVuZHMgZnJvbSB0aGUgVVRYT3MgcHJvdmlkZWRcbiAqIEBwYXJhbSBjaGFuZ2VBZGRyZXNzZXMgVGhlIGFkZHJlc3NlcyB0aGF0IGNhbiBzcGVuZCB0aGUgY2hhbmdlIHJlbWFpbmluZyBmcm9tIHRoZSBzcGVudCBVVFhPc1xuICogQHBhcmFtIG1lbW8gT3B0aW9uYWwgY29udGFpbnMgYXJiaXRyYXJ5IGJ5dGVzLCB1cCB0byAyNTYgYnl0ZXNcbiAqIEBwYXJhbSBhc09mIE9wdGlvbmFsLiBUaGUgdGltZXN0YW1wIHRvIHZlcmlmeSB0aGUgdHJhbnNhY3Rpb24gYWdhaW5zdCBhcyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59XG4gKiBAcGFyYW0gbG9ja3RpbWUgT3B0aW9uYWwuIFRoZSBsb2NrdGltZSBmaWVsZCBjcmVhdGVkIGluIHRoZSByZXN1bHRpbmcgb3V0cHV0c1xuICogQHBhcmFtIHRocmVzaG9sZCBPcHRpb25hbC4gVGhlIG51bWJlciBvZiBzaWduYXR1cmVzIHJlcXVpcmVkIHRvIHNwZW5kIHRoZSBmdW5kcyBpbiB0aGUgcmVzdWx0YW50IFVUWE9cbiAqXG4gKiBAcmV0dXJucyBBbiB1bnNpZ25lZCB0cmFuc2FjdGlvbiAoW1tVbnNpZ25lZFR4XV0pIHdoaWNoIGNvbnRhaW5zIGEgW1tJbXBvcnRUeF1dLlxuICpcbiAqIEByZW1hcmtzXG4gKiBUaGlzIGhlbHBlciBleGlzdHMgYmVjYXVzZSB0aGUgZW5kcG9pbnQgQVBJIHNob3VsZCBiZSB0aGUgcHJpbWFyeSBwb2ludCBvZiBlbnRyeSBmb3IgbW9zdCBmdW5jdGlvbmFsaXR5LlxuICovXG4gIGJ1aWxkSW1wb3J0VHggPSBhc3luYyAoXG4gICAgdXR4b3NldDpVVFhPU2V0LCBcbiAgICBvd25lckFkZHJlc3NlczpBcnJheTxzdHJpbmc+LFxuICAgIHNvdXJjZUNoYWluOkJ1ZmZlciB8IHN0cmluZyxcbiAgICB0b0FkZHJlc3NlczpBcnJheTxzdHJpbmc+LCBcbiAgICBmcm9tQWRkcmVzc2VzOkFycmF5PHN0cmluZz4sXG4gICAgY2hhbmdlQWRkcmVzc2VzOkFycmF5PHN0cmluZz4gPSB1bmRlZmluZWQsXG4gICAgbWVtbzpQYXlsb2FkQmFzZXxCdWZmZXIgPSB1bmRlZmluZWQsIFxuICAgIGFzT2Y6Qk4gPSBVbml4Tm93KCksIFxuICAgIGxvY2t0aW1lOkJOID0gbmV3IEJOKDApLCBcbiAgICB0aHJlc2hvbGQ6bnVtYmVyID0gMVxuICApOlByb21pc2U8VW5zaWduZWRUeD4gPT4ge1xuICAgIGNvbnN0IHRvOkFycmF5PEJ1ZmZlcj4gPSB0aGlzLl9jbGVhbkFkZHJlc3NBcnJheSh0b0FkZHJlc3NlcywgJ2J1aWxkQmFzZVR4JykubWFwKChhKSA9PiBiaW50b29scy5zdHJpbmdUb0FkZHJlc3MoYSkpO1xuICAgIGNvbnN0IGZyb206QXJyYXk8QnVmZmVyPiA9IHRoaXMuX2NsZWFuQWRkcmVzc0FycmF5KGZyb21BZGRyZXNzZXMsICdidWlsZEJhc2VUeCcpLm1hcCgoYSkgPT4gYmludG9vbHMuc3RyaW5nVG9BZGRyZXNzKGEpKTtcbiAgICBjb25zdCBjaGFuZ2U6QXJyYXk8QnVmZmVyPiA9IHRoaXMuX2NsZWFuQWRkcmVzc0FycmF5KGNoYW5nZUFkZHJlc3NlcywgJ2J1aWxkQmFzZVR4JykubWFwKChhKSA9PiBiaW50b29scy5zdHJpbmdUb0FkZHJlc3MoYSkpO1xuXG4gICAgbGV0IHNyY0NoYWluOnN0cmluZyA9IHVuZGVmaW5lZDtcblxuICAgIGlmKHR5cGVvZiBzb3VyY2VDaGFpbiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgLSBQbGF0Zm9ybVZNQVBJLmJ1aWxkSW1wb3J0VHg6IFNvdXJjZSBDaGFpbklEIGlzIHVuZGVmaW5lZC5cIik7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc291cmNlQ2hhaW4gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHNyY0NoYWluID0gc291cmNlQ2hhaW47XG4gICAgICBzb3VyY2VDaGFpbiA9IGJpbnRvb2xzLmNiNThEZWNvZGUoc291cmNlQ2hhaW4pO1xuICAgIH0gZWxzZSBpZighKHNvdXJjZUNoYWluIGluc3RhbmNlb2YgQnVmZmVyKSkge1xuICAgICAgc3JjQ2hhaW4gPSBiaW50b29scy5jYjU4RW5jb2RlKHNvdXJjZUNoYWluKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIC0gUGxhdGZvcm1WTUFQSS5idWlsZEltcG9ydFR4OiBJbnZhbGlkIGRlc3RpbmF0aW9uQ2hhaW4gdHlwZTogXCIgKyAodHlwZW9mIHNvdXJjZUNoYWluKSApO1xuICAgIH1cbiAgICBjb25zdCBhdG9taWNVVFhPczpVVFhPU2V0ID0gYXdhaXQgKGF3YWl0IHRoaXMuZ2V0VVRYT3Mob3duZXJBZGRyZXNzZXMsIHNyY0NoYWluLCAwLCB1bmRlZmluZWQpKS51dHhvcztcbiAgICBjb25zdCBhdmF4QXNzZXRJRDpCdWZmZXIgPSBhd2FpdCB0aGlzLmdldEFWQVhBc3NldElEKCk7XG5cbiAgICBpZiggbWVtbyBpbnN0YW5jZW9mIFBheWxvYWRCYXNlKSB7XG4gICAgICBtZW1vID0gbWVtby5nZXRQYXlsb2FkKCk7XG4gICAgfVxuXG4gICAgY29uc3QgYXRvbWljcyA9IGF0b21pY1VUWE9zLmdldEFsbFVUWE9zKCk7XG5cbiAgICBjb25zdCBidWlsdFVuc2lnbmVkVHg6VW5zaWduZWRUeCA9IHV0eG9zZXQuYnVpbGRJbXBvcnRUeChcbiAgICAgIHRoaXMuY29yZS5nZXROZXR3b3JrSUQoKSwgXG4gICAgICBiaW50b29scy5jYjU4RGVjb2RlKHRoaXMuYmxvY2tjaGFpbklEKSwgXG4gICAgICB0byxcbiAgICAgIGZyb20sXG4gICAgICBjaGFuZ2UsXG4gICAgICBhdG9taWNzLCBcbiAgICAgIHNvdXJjZUNoYWluLFxuICAgICAgdGhpcy5nZXRUeEZlZSgpLCBcbiAgICAgIGF2YXhBc3NldElELCBcbiAgICAgIG1lbW8sIGFzT2YsIGxvY2t0aW1lLCB0aHJlc2hvbGRcbiAgICApO1xuXG4gICAgaWYoISBhd2FpdCB0aGlzLmNoZWNrR29vc2VFZ2coYnVpbHRVbnNpZ25lZFR4KSkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCBHb29zZSBFZ2cgQ2hlY2tcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1aWx0VW5zaWduZWRUeDtcbiAgfTtcblxuICAvKipcbiAgICogSGVscGVyIGZ1bmN0aW9uIHdoaWNoIGNyZWF0ZXMgYW4gdW5zaWduZWQgRXhwb3J0IFR4LiBGb3IgbW9yZSBncmFudWxhciBjb250cm9sLCB5b3UgbWF5IGNyZWF0ZSB5b3VyIG93blxuICAgKiBbW1Vuc2lnbmVkVHhdXSBtYW51YWxseSAod2l0aCB0aGVpciBjb3JyZXNwb25kaW5nIFtbVHJhbnNmZXJhYmxlSW5wdXRdXXMsIFtbVHJhbnNmZXJhYmxlT3V0cHV0XV1zLCBhbmQgW1tUcmFuc2Zlck9wZXJhdGlvbl1dcykuXG4gICAqXG4gICAqIEBwYXJhbSB1dHhvc2V0IEEgc2V0IG9mIFVUWE9zIHRoYXQgdGhlIHRyYW5zYWN0aW9uIGlzIGJ1aWx0IG9uXG4gICAqIEBwYXJhbSBhbW91bnQgVGhlIGFtb3VudCBiZWluZyBleHBvcnRlZCBhcyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59XG4gICAqIEBwYXJhbSBkZXN0aW5hdGlvbkNoYWluIFRoZSBjaGFpbmlkIGZvciB3aGVyZSB0aGUgYXNzZXRzIHdpbGwgYmUgc2VudC5cbiAgICogQHBhcmFtIHRvQWRkcmVzc2VzIFRoZSBhZGRyZXNzZXMgdG8gc2VuZCB0aGUgZnVuZHNcbiAgICogQHBhcmFtIGZyb21BZGRyZXNzZXMgVGhlIGFkZHJlc3NlcyBiZWluZyB1c2VkIHRvIHNlbmQgdGhlIGZ1bmRzIGZyb20gdGhlIFVUWE9zIHByb3ZpZGVkXG4gICAqIEBwYXJhbSBjaGFuZ2VBZGRyZXNzZXMgVGhlIGFkZHJlc3NlcyB0aGF0IGNhbiBzcGVuZCB0aGUgY2hhbmdlIHJlbWFpbmluZyBmcm9tIHRoZSBzcGVudCBVVFhPc1xuICAgKiBAcGFyYW0gbWVtbyBPcHRpb25hbCBjb250YWlucyBhcmJpdHJhcnkgYnl0ZXMsIHVwIHRvIDI1NiBieXRlc1xuICAgKiBAcGFyYW0gYXNPZiBPcHRpb25hbC4gVGhlIHRpbWVzdGFtcCB0byB2ZXJpZnkgdGhlIHRyYW5zYWN0aW9uIGFnYWluc3QgYXMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfVxuICAgKiBAcGFyYW0gbG9ja3RpbWUgT3B0aW9uYWwuIFRoZSBsb2NrdGltZSBmaWVsZCBjcmVhdGVkIGluIHRoZSByZXN1bHRpbmcgb3V0cHV0c1xuICAgKiBAcGFyYW0gdGhyZXNob2xkIE9wdGlvbmFsLiBUaGUgbnVtYmVyIG9mIHNpZ25hdHVyZXMgcmVxdWlyZWQgdG8gc3BlbmQgdGhlIGZ1bmRzIGluIHRoZSByZXN1bHRhbnQgVVRYT1xuICAgKlxuICAgKiBAcmV0dXJucyBBbiB1bnNpZ25lZCB0cmFuc2FjdGlvbiAoW1tVbnNpZ25lZFR4XV0pIHdoaWNoIGNvbnRhaW5zIGFuIFtbRXhwb3J0VHhdXS5cbiAgICovXG4gIGJ1aWxkRXhwb3J0VHggPSBhc3luYyAoXG4gICAgdXR4b3NldDpVVFhPU2V0LCBcbiAgICBhbW91bnQ6Qk4sXG4gICAgZGVzdGluYXRpb25DaGFpbjpCdWZmZXIgfCBzdHJpbmcsXG4gICAgdG9BZGRyZXNzZXM6QXJyYXk8c3RyaW5nPiwgXG4gICAgZnJvbUFkZHJlc3NlczpBcnJheTxzdHJpbmc+LFxuICAgIGNoYW5nZUFkZHJlc3NlczpBcnJheTxzdHJpbmc+ID0gdW5kZWZpbmVkLFxuICAgIG1lbW86UGF5bG9hZEJhc2V8QnVmZmVyID0gdW5kZWZpbmVkLCBcbiAgICBhc09mOkJOID0gVW5peE5vdygpLFxuICAgIGxvY2t0aW1lOkJOID0gbmV3IEJOKDApLCBcbiAgICB0aHJlc2hvbGQ6bnVtYmVyID0gMVxuICApOlByb21pc2U8VW5zaWduZWRUeD4gPT4ge1xuICAgIFxuICAgIGxldCBwcmVmaXhlczpvYmplY3QgPSB7fTtcbiAgICB0b0FkZHJlc3Nlcy5tYXAoKGEpID0+IHtcbiAgICAgIHByZWZpeGVzW2Euc3BsaXQoXCItXCIpWzBdXSA9IHRydWU7XG4gICAgfSk7XG4gICAgaWYoT2JqZWN0LmtleXMocHJlZml4ZXMpLmxlbmd0aCAhPT0gMSl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciAtIFBsYXRmb3JtVk1BUEkuYnVpbGRFeHBvcnRUeDogVG8gYWRkcmVzc2VzIG11c3QgaGF2ZSB0aGUgc2FtZSBjaGFpbklEIHByZWZpeC5cIik7XG4gICAgfVxuXG4gICAgaWYodHlwZW9mIGRlc3RpbmF0aW9uQ2hhaW4gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIC0gUGxhdGZvcm1WTUFQSS5idWlsZEV4cG9ydFR4OiBEZXN0aW5hdGlvbiBDaGFpbklEIGlzIHVuZGVmaW5lZC5cIik7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZGVzdGluYXRpb25DaGFpbiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgZGVzdGluYXRpb25DaGFpbiA9IGJpbnRvb2xzLmNiNThEZWNvZGUoZGVzdGluYXRpb25DaGFpbik7IC8vXG4gICAgfSBlbHNlIGlmKCEoZGVzdGluYXRpb25DaGFpbiBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIC0gUGxhdGZvcm1WTUFQSS5idWlsZEV4cG9ydFR4OiBJbnZhbGlkIGRlc3RpbmF0aW9uQ2hhaW4gdHlwZTogXCIgKyAodHlwZW9mIGRlc3RpbmF0aW9uQ2hhaW4pICk7XG4gICAgfVxuICAgIGlmKGRlc3RpbmF0aW9uQ2hhaW4ubGVuZ3RoICE9PSAzMikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgLSBQbGF0Zm9ybVZNQVBJLmJ1aWxkRXhwb3J0VHg6IERlc3RpbmF0aW9uIENoYWluSUQgbXVzdCBiZSAzMiBieXRlcyBpbiBsZW5ndGguXCIpO1xuICAgIH1cbiAgICAvKlxuICAgIGlmKGJpbnRvb2xzLmNiNThFbmNvZGUoZGVzdGluYXRpb25DaGFpbikgIT09IERlZmF1bHRzLm5ldHdvcmtbdGhpcy5jb3JlLmdldE5ldHdvcmtJRCgpXS5YW1wiYmxvY2tjaGFpbklEXCJdKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciAtIFBsYXRmb3JtVk1BUEkuYnVpbGRFeHBvcnRUeDogRGVzdGluYXRpb24gQ2hhaW5JRCBtdXN0IFRoZSBYLUNoYWluIElEIGluIHRoZSBjdXJyZW50IHZlcnNpb24gb2YgQXZhbGFuY2hlSlMuXCIpO1xuICAgIH0qL1xuXG4gICAgbGV0IHRvOkFycmF5PEJ1ZmZlcj4gPSBbXTtcbiAgICB0b0FkZHJlc3Nlcy5tYXAoKGEpID0+IHtcbiAgICAgIHRvLnB1c2goYmludG9vbHMuc3RyaW5nVG9BZGRyZXNzKGEpKTtcbiAgICB9KTtcbiAgICBjb25zdCBmcm9tOkFycmF5PEJ1ZmZlcj4gPSB0aGlzLl9jbGVhbkFkZHJlc3NBcnJheShmcm9tQWRkcmVzc2VzLCAnYnVpbGRFeHBvcnRUeCcpLm1hcCgoYSkgPT4gYmludG9vbHMuc3RyaW5nVG9BZGRyZXNzKGEpKTtcbiAgICBjb25zdCBjaGFuZ2U6QXJyYXk8QnVmZmVyPiA9IHRoaXMuX2NsZWFuQWRkcmVzc0FycmF5KGNoYW5nZUFkZHJlc3NlcywgJ2J1aWxkRXhwb3J0VHgnKS5tYXAoKGEpID0+IGJpbnRvb2xzLnN0cmluZ1RvQWRkcmVzcyhhKSk7XG5cbiAgICBpZiggbWVtbyBpbnN0YW5jZW9mIFBheWxvYWRCYXNlKSB7XG4gICAgICBtZW1vID0gbWVtby5nZXRQYXlsb2FkKCk7XG4gICAgfVxuXG4gICAgY29uc3QgYXZheEFzc2V0SUQ6QnVmZmVyID0gYXdhaXQgdGhpcy5nZXRBVkFYQXNzZXRJRCgpO1xuXG4gICAgY29uc3QgYnVpbHRVbnNpZ25lZFR4OlVuc2lnbmVkVHggPSB1dHhvc2V0LmJ1aWxkRXhwb3J0VHgoXG4gICAgICB0aGlzLmNvcmUuZ2V0TmV0d29ya0lEKCksIFxuICAgICAgYmludG9vbHMuY2I1OERlY29kZSh0aGlzLmJsb2NrY2hhaW5JRCksIFxuICAgICAgYW1vdW50LFxuICAgICAgYXZheEFzc2V0SUQsIFxuICAgICAgdG8sXG4gICAgICBmcm9tLFxuICAgICAgY2hhbmdlLFxuICAgICAgZGVzdGluYXRpb25DaGFpbixcbiAgICAgIHRoaXMuZ2V0VHhGZWUoKSwgXG4gICAgICBhdmF4QXNzZXRJRCxcbiAgICAgIG1lbW8sIGFzT2YsIGxvY2t0aW1lLCB0aHJlc2hvbGRcbiAgICApO1xuXG4gICAgaWYoISBhd2FpdCB0aGlzLmNoZWNrR29vc2VFZ2coYnVpbHRVbnNpZ25lZFR4KSkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCBHb29zZSBFZ2cgQ2hlY2tcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1aWx0VW5zaWduZWRUeDtcbiAgfTtcblxuICAvKipcbiAgKiBIZWxwZXIgZnVuY3Rpb24gd2hpY2ggY3JlYXRlcyBhbiB1bnNpZ25lZCBbW0FkZFN1Ym5ldFZhbGlkYXRvclR4XV0uIEZvciBtb3JlIGdyYW51bGFyIGNvbnRyb2wsIHlvdSBtYXkgY3JlYXRlIHlvdXIgb3duXG4gICogW1tVbnNpZ25lZFR4XV0gbWFudWFsbHkgYW5kIGltcG9ydCB0aGUgW1tBZGRTdWJuZXRWYWxpZGF0b3JUeF1dIGNsYXNzIGRpcmVjdGx5LlxuICAqXG4gICogQHBhcmFtIHV0eG9zZXQgQSBzZXQgb2YgVVRYT3MgdGhhdCB0aGUgdHJhbnNhY3Rpb24gaXMgYnVpbHQgb24uXG4gICogQHBhcmFtIGZyb21BZGRyZXNzZXMgQW4gYXJyYXkgb2YgYWRkcmVzc2VzIGFzIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHdobyBwYXlzIHRoZSBmZWVzIGluIEFWQVhcbiAgKiBAcGFyYW0gY2hhbmdlQWRkcmVzc2VzIEFuIGFycmF5IG9mIGFkZHJlc3NlcyBhcyB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSB3aG8gZ2V0cyB0aGUgY2hhbmdlIGxlZnRvdmVyIGZyb20gdGhlIGZlZSBwYXltZW50XG4gICogQHBhcmFtIG5vZGVJRCBUaGUgbm9kZSBJRCBvZiB0aGUgdmFsaWRhdG9yIGJlaW5nIGFkZGVkLlxuICAqIEBwYXJhbSBzdGFydFRpbWUgVGhlIFVuaXggdGltZSB3aGVuIHRoZSB2YWxpZGF0b3Igc3RhcnRzIHZhbGlkYXRpbmcgdGhlIFByaW1hcnkgTmV0d29yay5cbiAgKiBAcGFyYW0gZW5kVGltZSBUaGUgVW5peCB0aW1lIHdoZW4gdGhlIHZhbGlkYXRvciBzdG9wcyB2YWxpZGF0aW5nIHRoZSBQcmltYXJ5IE5ldHdvcmsgKGFuZCBzdGFrZWQgQVZBWCBpcyByZXR1cm5lZCkuXG4gICogQHBhcmFtIHdlaWdodCBUaGUgYW1vdW50IG9mIHdlaWdodCBmb3IgdGhpcyBzdWJuZXQgdmFsaWRhdG9yLlxuICAqIEBwYXJhbSBtZW1vIE9wdGlvbmFsIGNvbnRhaW5zIGFyYml0cmFyeSBieXRlcywgdXAgdG8gMjU2IGJ5dGVzXG4gICogQHBhcmFtIGFzT2YgT3B0aW9uYWwuIFRoZSB0aW1lc3RhbXAgdG8gdmVyaWZ5IHRoZSB0cmFuc2FjdGlvbiBhZ2FpbnN0IGFzIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2JuLmpzL3xCTn1cbiAgKiAgXG4gICogQHJldHVybnMgQW4gdW5zaWduZWQgdHJhbnNhY3Rpb24gY3JlYXRlZCBmcm9tIHRoZSBwYXNzZWQgaW4gcGFyYW1ldGVycy5cbiAgKi9cblxuICAvKiBSZS1pbXBsZW1lbnQgd2hlbiBzdWJuZXRWYWxpZGF0b3Igc2lnbmluZyBwcm9jZXNzIGlzIGNsZWFyZXJcbiAgYnVpbGRBZGRTdWJuZXRWYWxpZGF0b3JUeCA9IGFzeW5jIChcbiAgICB1dHhvc2V0OlVUWE9TZXQsIFxuICAgIGZyb21BZGRyZXNzZXM6QXJyYXk8c3RyaW5nPixcbiAgICBjaGFuZ2VBZGRyZXNzZXM6QXJyYXk8c3RyaW5nPixcbiAgICBub2RlSUQ6c3RyaW5nLCBcbiAgICBzdGFydFRpbWU6Qk4sIFxuICAgIGVuZFRpbWU6Qk4sXG4gICAgd2VpZ2h0OkJOLFxuICAgIG1lbW86UGF5bG9hZEJhc2V8QnVmZmVyID0gdW5kZWZpbmVkLCBcbiAgICBhc09mOkJOID0gVW5peE5vdygpXG4gICk6UHJvbWlzZTxVbnNpZ25lZFR4PiA9PiB7XG4gICAgY29uc3QgZnJvbTpBcnJheTxCdWZmZXI+ID0gdGhpcy5fY2xlYW5BZGRyZXNzQXJyYXkoZnJvbUFkZHJlc3NlcywgJ2J1aWxkQWRkU3VibmV0VmFsaWRhdG9yVHgnKS5tYXAoKGEpID0+IGJpbnRvb2xzLnN0cmluZ1RvQWRkcmVzcyhhKSk7XG4gICAgY29uc3QgY2hhbmdlOkFycmF5PEJ1ZmZlcj4gPSB0aGlzLl9jbGVhbkFkZHJlc3NBcnJheShjaGFuZ2VBZGRyZXNzZXMsICdidWlsZEFkZFN1Ym5ldFZhbGlkYXRvclR4JykubWFwKChhKSA9PiBiaW50b29scy5zdHJpbmdUb0FkZHJlc3MoYSkpO1xuXG4gICAgaWYoIG1lbW8gaW5zdGFuY2VvZiBQYXlsb2FkQmFzZSkge1xuICAgICAgbWVtbyA9IG1lbW8uZ2V0UGF5bG9hZCgpO1xuICAgIH1cblxuICAgIGNvbnN0IGF2YXhBc3NldElEOkJ1ZmZlciA9IGF3YWl0IHRoaXMuZ2V0QVZBWEFzc2V0SUQoKTtcbiAgICBcbiAgICBjb25zdCBub3c6Qk4gPSBVbml4Tm93KCk7XG4gICAgaWYgKHN0YXJ0VGltZS5sdChub3cpIHx8IGVuZFRpbWUubHRlKHN0YXJ0VGltZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlBsYXRmb3JtVk1BUEkuYnVpbGRBZGRTdWJuZXRWYWxpZGF0b3JUeCAtLSBzdGFydFRpbWUgbXVzdCBiZSBpbiB0aGUgZnV0dXJlIGFuZCBlbmRUaW1lIG11c3QgY29tZSBhZnRlciBzdGFydFRpbWVcIik7XG4gICAgfVxuXG4gICAgY29uc3QgYnVpbHRVbnNpZ25lZFR4OlVuc2lnbmVkVHggPSB1dHhvc2V0LmJ1aWxkQWRkU3VibmV0VmFsaWRhdG9yVHgoXG4gICAgICB0aGlzLmNvcmUuZ2V0TmV0d29ya0lEKCksIFxuICAgICAgYmludG9vbHMuY2I1OERlY29kZSh0aGlzLmJsb2NrY2hhaW5JRCksIFxuICAgICAgZnJvbSxcbiAgICAgIGNoYW5nZSxcbiAgICAgIE5vZGVJRFN0cmluZ1RvQnVmZmVyKG5vZGVJRCksXG4gICAgICBzdGFydFRpbWUsIGVuZFRpbWUsXG4gICAgICB3ZWlnaHQsIFxuICAgICAgdGhpcy5nZXRGZWUoKSwgXG4gICAgICBhdmF4QXNzZXRJRCxcbiAgICAgIG1lbW8sIGFzT2ZcbiAgICApO1xuXG4gICAgaWYoISBhd2FpdCB0aGlzLmNoZWNrR29vc2VFZ2coYnVpbHRVbnNpZ25lZFR4KSkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8vKlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIEdvb3NlIEVnZyBDaGVja1wiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVpbHRVbnNpZ25lZFR4O1xuICB9XG5cbiAgKi9cblxuICAvKipcbiAgKiBIZWxwZXIgZnVuY3Rpb24gd2hpY2ggY3JlYXRlcyBhbiB1bnNpZ25lZCBbW0FkZERlbGVnYXRvclR4XV0uIEZvciBtb3JlIGdyYW51bGFyIGNvbnRyb2wsIHlvdSBtYXkgY3JlYXRlIHlvdXIgb3duXG4gICogW1tVbnNpZ25lZFR4XV0gbWFudWFsbHkgYW5kIGltcG9ydCB0aGUgW1tBZGREZWxlZ2F0b3JUeF1dIGNsYXNzIGRpcmVjdGx5LlxuICAqXG4gICogQHBhcmFtIHV0eG9zZXQgQSBzZXQgb2YgVVRYT3MgdGhhdCB0aGUgdHJhbnNhY3Rpb24gaXMgYnVpbHQgb25cbiAgKiBAcGFyYW0gdG9BZGRyZXNzZXMgQW4gYXJyYXkgb2YgYWRkcmVzc2VzIGFzIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHdobyByZWNpZXZlZCB0aGUgc3Rha2VkIHRva2VucyBhdCB0aGUgZW5kIG9mIHRoZSBzdGFraW5nIHBlcmlvZFxuICAqIEBwYXJhbSBmcm9tQWRkcmVzc2VzIEFuIGFycmF5IG9mIGFkZHJlc3NlcyBhcyB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSB3aG8gb3duIHRoZSBzdGFraW5nIFVUWE9zIHRoZSBmZWVzIGluIEFWQVhcbiAgKiBAcGFyYW0gY2hhbmdlQWRkcmVzc2VzIEFuIGFycmF5IG9mIGFkZHJlc3NlcyBhcyB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSB3aG8gZ2V0cyB0aGUgY2hhbmdlIGxlZnRvdmVyIGZyb20gdGhlIGZlZSBwYXltZW50XG4gICogQHBhcmFtIG5vZGVJRCBUaGUgbm9kZSBJRCBvZiB0aGUgdmFsaWRhdG9yIGJlaW5nIGFkZGVkLlxuICAqIEBwYXJhbSBzdGFydFRpbWUgVGhlIFVuaXggdGltZSB3aGVuIHRoZSB2YWxpZGF0b3Igc3RhcnRzIHZhbGlkYXRpbmcgdGhlIFByaW1hcnkgTmV0d29yay5cbiAgKiBAcGFyYW0gZW5kVGltZSBUaGUgVW5peCB0aW1lIHdoZW4gdGhlIHZhbGlkYXRvciBzdG9wcyB2YWxpZGF0aW5nIHRoZSBQcmltYXJ5IE5ldHdvcmsgKGFuZCBzdGFrZWQgQVZBWCBpcyByZXR1cm5lZCkuXG4gICogQHBhcmFtIHN0YWtlQW1vdW50IFRoZSBhbW91bnQgYmVpbmcgZGVsZWdhdGVkIGFzIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2JuLmpzL3xCTn1cbiAgKiBAcGFyYW0gcmV3YXJkQWRkcmVzc2VzIFRoZSBhZGRyZXNzZXMgd2hpY2ggd2lsbCByZWNpZXZlIHRoZSByZXdhcmRzIGZyb20gdGhlIGRlbGVnYXRlZCBzdGFrZS5cbiAgKiBAcGFyYW0gcmV3YXJkTG9ja3RpbWUgT3B0aW9uYWwuIFRoZSBsb2NrdGltZSBmaWVsZCBjcmVhdGVkIGluIHRoZSByZXN1bHRpbmcgcmV3YXJkIG91dHB1dHNcbiAgKiBAcGFyYW0gcmV3YXJkVGhyZXNob2xkIE9waW9uYWwuIFRoZSBudW1iZXIgb2Ygc2lnbmF0dXJlcyByZXF1aXJlZCB0byBzcGVuZCB0aGUgZnVuZHMgaW4gdGhlIHJlc3VsdGFudCByZXdhcmQgVVRYTy4gRGVmYXVsdCAxLlxuICAqIEBwYXJhbSBtZW1vIE9wdGlvbmFsIGNvbnRhaW5zIGFyYml0cmFyeSBieXRlcywgdXAgdG8gMjU2IGJ5dGVzXG4gICogQHBhcmFtIGFzT2YgT3B0aW9uYWwuIFRoZSB0aW1lc3RhbXAgdG8gdmVyaWZ5IHRoZSB0cmFuc2FjdGlvbiBhZ2FpbnN0IGFzIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2JuLmpzL3xCTn1cbiAgKiAgXG4gICogQHJldHVybnMgQW4gdW5zaWduZWQgdHJhbnNhY3Rpb24gY3JlYXRlZCBmcm9tIHRoZSBwYXNzZWQgaW4gcGFyYW1ldGVycy5cbiAgKi9cbiAgYnVpbGRBZGREZWxlZ2F0b3JUeCA9IGFzeW5jIChcbiAgICB1dHhvc2V0OlVUWE9TZXQsIFxuICAgIHRvQWRkcmVzc2VzOkFycmF5PHN0cmluZz4sXG4gICAgZnJvbUFkZHJlc3NlczpBcnJheTxzdHJpbmc+LFxuICAgIGNoYW5nZUFkZHJlc3NlczpBcnJheTxzdHJpbmc+LFxuICAgIG5vZGVJRDpzdHJpbmcsIFxuICAgIHN0YXJ0VGltZTpCTiwgXG4gICAgZW5kVGltZTpCTixcbiAgICBzdGFrZUFtb3VudDpCTixcbiAgICByZXdhcmRBZGRyZXNzZXM6QXJyYXk8c3RyaW5nPixcbiAgICByZXdhcmRMb2NrdGltZTpCTiA9IG5ldyBCTigwKSxcbiAgICByZXdhcmRUaHJlc2hvbGQ6bnVtYmVyID0gMSxcbiAgICBtZW1vOlBheWxvYWRCYXNlfEJ1ZmZlciA9IHVuZGVmaW5lZCwgXG4gICAgYXNPZjpCTiA9IFVuaXhOb3coKVxuICApOlByb21pc2U8VW5zaWduZWRUeD4gPT4ge1xuICAgIGNvbnN0IHRvOkFycmF5PEJ1ZmZlcj4gPSB0aGlzLl9jbGVhbkFkZHJlc3NBcnJheSh0b0FkZHJlc3NlcywgJ2J1aWxkQWRkRGVsZWdhdG9yVHgnKS5tYXAoKGEpID0+IGJpbnRvb2xzLnN0cmluZ1RvQWRkcmVzcyhhKSk7XG4gICAgY29uc3QgZnJvbTpBcnJheTxCdWZmZXI+ID0gdGhpcy5fY2xlYW5BZGRyZXNzQXJyYXkoZnJvbUFkZHJlc3NlcywgJ2J1aWxkQWRkRGVsZWdhdG9yVHgnKS5tYXAoKGEpID0+IGJpbnRvb2xzLnN0cmluZ1RvQWRkcmVzcyhhKSk7XG4gICAgY29uc3QgY2hhbmdlOkFycmF5PEJ1ZmZlcj4gPSB0aGlzLl9jbGVhbkFkZHJlc3NBcnJheShjaGFuZ2VBZGRyZXNzZXMsICdidWlsZEFkZERlbGVnYXRvclR4JykubWFwKChhKSA9PiBiaW50b29scy5zdHJpbmdUb0FkZHJlc3MoYSkpO1xuICAgIGNvbnN0IHJld2FyZHM6QXJyYXk8QnVmZmVyPiA9IHRoaXMuX2NsZWFuQWRkcmVzc0FycmF5KHJld2FyZEFkZHJlc3NlcywgJ2J1aWxkQWRkVmFsaWRhdG9yVHgnKS5tYXAoKGEpID0+IGJpbnRvb2xzLnN0cmluZ1RvQWRkcmVzcyhhKSk7XG5cbiAgICBpZiggbWVtbyBpbnN0YW5jZW9mIFBheWxvYWRCYXNlKSB7XG4gICAgICBtZW1vID0gbWVtby5nZXRQYXlsb2FkKCk7XG4gICAgfVxuXG4gICAgY29uc3QgbWluU3Rha2U6Qk4gPSAoYXdhaXQgdGhpcy5nZXRNaW5TdGFrZSgpKVtcIm1pbkRlbGVnYXRvclN0YWtlXCJdO1xuICAgIGlmKHN0YWtlQW1vdW50Lmx0KG1pblN0YWtlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGxhdGZvcm1WTUFQSS5idWlsZEFkZERlbGVnYXRvclR4IC0tIHN0YWtlIGFtb3VudCBtdXN0IGJlIGF0IGxlYXN0IFwiICsgbWluU3Rha2UudG9TdHJpbmcoMTApKTtcbiAgICB9XG5cbiAgICBjb25zdCBhdmF4QXNzZXRJRDpCdWZmZXIgPSBhd2FpdCB0aGlzLmdldEFWQVhBc3NldElEKCk7XG4gICAgXG4gICAgY29uc3Qgbm93OkJOID0gVW5peE5vdygpO1xuICAgIGlmIChzdGFydFRpbWUubHQobm93KSB8fCBlbmRUaW1lLmx0ZShzdGFydFRpbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGF0Zm9ybVZNQVBJLmJ1aWxkQWRkRGVsZWdhdG9yVHggLS0gc3RhcnRUaW1lIG11c3QgYmUgaW4gdGhlIGZ1dHVyZSBhbmQgZW5kVGltZSBtdXN0IGNvbWUgYWZ0ZXIgc3RhcnRUaW1lXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1aWx0VW5zaWduZWRUeDpVbnNpZ25lZFR4ID0gdXR4b3NldC5idWlsZEFkZERlbGVnYXRvclR4KFxuICAgICAgdGhpcy5jb3JlLmdldE5ldHdvcmtJRCgpLCBcbiAgICAgIGJpbnRvb2xzLmNiNThEZWNvZGUodGhpcy5ibG9ja2NoYWluSUQpLCBcbiAgICAgIGF2YXhBc3NldElELFxuICAgICAgdG8sXG4gICAgICBmcm9tLFxuICAgICAgY2hhbmdlLFxuICAgICAgTm9kZUlEU3RyaW5nVG9CdWZmZXIobm9kZUlEKSxcbiAgICAgIHN0YXJ0VGltZSwgZW5kVGltZSxcbiAgICAgIHN0YWtlQW1vdW50LFxuICAgICAgcmV3YXJkTG9ja3RpbWUsXG4gICAgICByZXdhcmRUaHJlc2hvbGQsXG4gICAgICByZXdhcmRzLFxuICAgICAgbmV3IEJOKDApLCBcbiAgICAgIGF2YXhBc3NldElELFxuICAgICAgbWVtbywgYXNPZlxuICAgICk7XG5cbiAgICBpZighYXdhaXQgdGhpcy5jaGVja0dvb3NlRWdnKGJ1aWx0VW5zaWduZWRUeCkpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgR29vc2UgRWdnIENoZWNrXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBidWlsdFVuc2lnbmVkVHg7XG4gIH1cblxuXG4gIC8qKlxuICAqIEhlbHBlciBmdW5jdGlvbiB3aGljaCBjcmVhdGVzIGFuIHVuc2lnbmVkIFtbQWRkVmFsaWRhdG9yVHhdXS4gRm9yIG1vcmUgZ3JhbnVsYXIgY29udHJvbCwgeW91IG1heSBjcmVhdGUgeW91ciBvd25cbiAgKiBbW1Vuc2lnbmVkVHhdXSBtYW51YWxseSBhbmQgaW1wb3J0IHRoZSBbW0FkZFZhbGlkYXRvclR4XV0gY2xhc3MgZGlyZWN0bHkuXG4gICpcbiAgKiBAcGFyYW0gdXR4b3NldCBBIHNldCBvZiBVVFhPcyB0aGF0IHRoZSB0cmFuc2FjdGlvbiBpcyBidWlsdCBvblxuICAqIEBwYXJhbSB0b0FkZHJlc3NlcyBBbiBhcnJheSBvZiBhZGRyZXNzZXMgYXMge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gd2hvIHJlY2lldmVkIHRoZSBzdGFrZWQgdG9rZW5zIGF0IHRoZSBlbmQgb2YgdGhlIHN0YWtpbmcgcGVyaW9kXG4gICogQHBhcmFtIGZyb21BZGRyZXNzZXMgQW4gYXJyYXkgb2YgYWRkcmVzc2VzIGFzIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHdobyBvd24gdGhlIHN0YWtpbmcgVVRYT3MgdGhlIGZlZXMgaW4gQVZBWFxuICAqIEBwYXJhbSBjaGFuZ2VBZGRyZXNzZXMgQW4gYXJyYXkgb2YgYWRkcmVzc2VzIGFzIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHdobyBnZXRzIHRoZSBjaGFuZ2UgbGVmdG92ZXIgZnJvbSB0aGUgZmVlIHBheW1lbnRcbiAgKiBAcGFyYW0gbm9kZUlEIFRoZSBub2RlIElEIG9mIHRoZSB2YWxpZGF0b3IgYmVpbmcgYWRkZWQuXG4gICogQHBhcmFtIHN0YXJ0VGltZSBUaGUgVW5peCB0aW1lIHdoZW4gdGhlIHZhbGlkYXRvciBzdGFydHMgdmFsaWRhdGluZyB0aGUgUHJpbWFyeSBOZXR3b3JrLlxuICAqIEBwYXJhbSBlbmRUaW1lIFRoZSBVbml4IHRpbWUgd2hlbiB0aGUgdmFsaWRhdG9yIHN0b3BzIHZhbGlkYXRpbmcgdGhlIFByaW1hcnkgTmV0d29yayAoYW5kIHN0YWtlZCBBVkFYIGlzIHJldHVybmVkKS5cbiAgKiBAcGFyYW0gc3Rha2VBbW91bnQgVGhlIGFtb3VudCBiZWluZyBkZWxlZ2F0ZWQgYXMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfVxuICAqIEBwYXJhbSByZXdhcmRBZGRyZXNzZXMgVGhlIGFkZHJlc3NlcyB3aGljaCB3aWxsIHJlY2lldmUgdGhlIHJld2FyZHMgZnJvbSB0aGUgZGVsZWdhdGVkIHN0YWtlLlxuICAqIEBwYXJhbSBkZWxlZ2F0aW9uRmVlIEEgbnVtYmVyIGZvciB0aGUgcGVyY2VudGFnZSBvZiByZXdhcmQgdG8gYmUgZ2l2ZW4gdG8gdGhlIHZhbGlkYXRvciB3aGVuIHNvbWVvbmUgZGVsZWdhdGVzIHRvIHRoZW0uIE11c3QgYmUgYmV0d2VlbiAwIGFuZCAxMDAuIFxuICAqIEBwYXJhbSByZXdhcmRMb2NrdGltZSBPcHRpb25hbC4gVGhlIGxvY2t0aW1lIGZpZWxkIGNyZWF0ZWQgaW4gdGhlIHJlc3VsdGluZyByZXdhcmQgb3V0cHV0c1xuICAqIEBwYXJhbSByZXdhcmRUaHJlc2hvbGQgT3Bpb25hbC4gVGhlIG51bWJlciBvZiBzaWduYXR1cmVzIHJlcXVpcmVkIHRvIHNwZW5kIHRoZSBmdW5kcyBpbiB0aGUgcmVzdWx0YW50IHJld2FyZCBVVFhPLiBEZWZhdWx0IDEuXG4gICogQHBhcmFtIG1lbW8gT3B0aW9uYWwgY29udGFpbnMgYXJiaXRyYXJ5IGJ5dGVzLCB1cCB0byAyNTYgYnl0ZXNcbiAgKiBAcGFyYW0gYXNPZiBPcHRpb25hbC4gVGhlIHRpbWVzdGFtcCB0byB2ZXJpZnkgdGhlIHRyYW5zYWN0aW9uIGFnYWluc3QgYXMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2luZHV0bnkvYm4uanMvfEJOfVxuICAqICBcbiAgKiBAcmV0dXJucyBBbiB1bnNpZ25lZCB0cmFuc2FjdGlvbiBjcmVhdGVkIGZyb20gdGhlIHBhc3NlZCBpbiBwYXJhbWV0ZXJzLlxuICAqL1xuICBidWlsZEFkZFZhbGlkYXRvclR4ID0gYXN5bmMgKFxuICAgIHV0eG9zZXQ6VVRYT1NldCwgXG4gICAgdG9BZGRyZXNzZXM6QXJyYXk8c3RyaW5nPixcbiAgICBmcm9tQWRkcmVzc2VzOkFycmF5PHN0cmluZz4sXG4gICAgY2hhbmdlQWRkcmVzc2VzOkFycmF5PHN0cmluZz4sXG4gICAgbm9kZUlEOnN0cmluZywgXG4gICAgc3RhcnRUaW1lOkJOLCBcbiAgICBlbmRUaW1lOkJOLFxuICAgIHN0YWtlQW1vdW50OkJOLFxuICAgIHJld2FyZEFkZHJlc3NlczpBcnJheTxzdHJpbmc+LFxuICAgIGRlbGVnYXRpb25GZWU6bnVtYmVyLFxuICAgIHJld2FyZExvY2t0aW1lOkJOID0gbmV3IEJOKDApLFxuICAgIHJld2FyZFRocmVzaG9sZDpudW1iZXIgPSAxLFxuICAgIG1lbW86UGF5bG9hZEJhc2V8QnVmZmVyID0gdW5kZWZpbmVkLCBcbiAgICBhc09mOkJOID0gVW5peE5vdygpXG4gICk6UHJvbWlzZTxVbnNpZ25lZFR4PiA9PiB7XG4gICAgY29uc3QgdG86QXJyYXk8QnVmZmVyPiA9IHRoaXMuX2NsZWFuQWRkcmVzc0FycmF5KHRvQWRkcmVzc2VzLCAnYnVpbGRBZGRWYWxpZGF0b3JUeCcpLm1hcCgoYSkgPT4gYmludG9vbHMuc3RyaW5nVG9BZGRyZXNzKGEpKTtcbiAgICBjb25zdCBmcm9tOkFycmF5PEJ1ZmZlcj4gPSB0aGlzLl9jbGVhbkFkZHJlc3NBcnJheShmcm9tQWRkcmVzc2VzLCAnYnVpbGRBZGRWYWxpZGF0b3JUeCcpLm1hcCgoYSkgPT4gYmludG9vbHMuc3RyaW5nVG9BZGRyZXNzKGEpKTtcbiAgICBjb25zdCBjaGFuZ2U6QXJyYXk8QnVmZmVyPiA9IHRoaXMuX2NsZWFuQWRkcmVzc0FycmF5KGNoYW5nZUFkZHJlc3NlcywgJ2J1aWxkQWRkVmFsaWRhdG9yVHgnKS5tYXAoKGEpID0+IGJpbnRvb2xzLnN0cmluZ1RvQWRkcmVzcyhhKSk7XG4gICAgY29uc3QgcmV3YXJkczpBcnJheTxCdWZmZXI+ID0gdGhpcy5fY2xlYW5BZGRyZXNzQXJyYXkocmV3YXJkQWRkcmVzc2VzLCAnYnVpbGRBZGRWYWxpZGF0b3JUeCcpLm1hcCgoYSkgPT4gYmludG9vbHMuc3RyaW5nVG9BZGRyZXNzKGEpKTtcblxuICAgIGlmKCBtZW1vIGluc3RhbmNlb2YgUGF5bG9hZEJhc2UpIHtcbiAgICAgIG1lbW8gPSBtZW1vLmdldFBheWxvYWQoKTtcbiAgICB9XG5cbiAgICBjb25zdCBtaW5TdGFrZTpCTiA9IChhd2FpdCB0aGlzLmdldE1pblN0YWtlKCkpW1wibWluVmFsaWRhdG9yU3Rha2VcIl07XG4gICAgaWYoc3Rha2VBbW91bnQubHQobWluU3Rha2UpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGF0Zm9ybVZNQVBJLmJ1aWxkQWRkVmFsaWRhdG9yVHggLS0gc3Rha2UgYW1vdW50IG11c3QgYmUgYXQgbGVhc3QgXCIgKyBtaW5TdGFrZS50b1N0cmluZygxMCkpO1xuICAgIH1cblxuICAgIGlmKHR5cGVvZiBkZWxlZ2F0aW9uRmVlICE9PSBcIm51bWJlclwiIHx8IGRlbGVnYXRpb25GZWUgPiAxMDAgfHwgZGVsZWdhdGlvbkZlZSA8IDApe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGxhdGZvcm1WTUFQSS5idWlsZEFkZFZhbGlkYXRvclR4IC0tIGRlbGVnYXRpb25GZWUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDEwMFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBhdmF4QXNzZXRJRDpCdWZmZXIgPSBhd2FpdCB0aGlzLmdldEFWQVhBc3NldElEKCk7XG4gICAgXG4gICAgY29uc3Qgbm93OkJOID0gVW5peE5vdygpO1xuICAgIGlmIChzdGFydFRpbWUubHQobm93KSB8fCBlbmRUaW1lLmx0ZShzdGFydFRpbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGF0Zm9ybVZNQVBJLmJ1aWxkQWRkVmFsaWRhdG9yVHggLS0gc3RhcnRUaW1lIG11c3QgYmUgaW4gdGhlIGZ1dHVyZSBhbmQgZW5kVGltZSBtdXN0IGNvbWUgYWZ0ZXIgc3RhcnRUaW1lXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGJ1aWx0VW5zaWduZWRUeDpVbnNpZ25lZFR4ID0gdXR4b3NldC5idWlsZEFkZFZhbGlkYXRvclR4KFxuICAgICAgdGhpcy5jb3JlLmdldE5ldHdvcmtJRCgpLCBcbiAgICAgIGJpbnRvb2xzLmNiNThEZWNvZGUodGhpcy5ibG9ja2NoYWluSUQpLCBcbiAgICAgIGF2YXhBc3NldElELFxuICAgICAgdG8sXG4gICAgICBmcm9tLFxuICAgICAgY2hhbmdlLFxuICAgICAgTm9kZUlEU3RyaW5nVG9CdWZmZXIobm9kZUlEKSxcbiAgICAgIHN0YXJ0VGltZSwgZW5kVGltZSxcbiAgICAgIHN0YWtlQW1vdW50LFxuICAgICAgcmV3YXJkTG9ja3RpbWUsXG4gICAgICByZXdhcmRUaHJlc2hvbGQsXG4gICAgICByZXdhcmRzLFxuICAgICAgZGVsZWdhdGlvbkZlZSxcbiAgICAgIG5ldyBCTigwKSwgXG4gICAgICBhdmF4QXNzZXRJRCxcbiAgICAgIG1lbW8sIGFzT2ZcbiAgICApO1xuXG4gICAgaWYoISBhd2FpdCB0aGlzLmNoZWNrR29vc2VFZ2coYnVpbHRVbnNpZ25lZFR4KSkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCBHb29zZSBFZ2cgQ2hlY2tcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJ1aWx0VW5zaWduZWRUeDtcbiAgfVxuXG4gIC8qKlxuICAgICogQ2xhc3MgcmVwcmVzZW50aW5nIGFuIHVuc2lnbmVkIFtbQ3JlYXRlU3VibmV0VHhdXSB0cmFuc2FjdGlvbi5cbiAgICAqXG4gICAgKiBAcGFyYW0gdXR4b3NldCBBIHNldCBvZiBVVFhPcyB0aGF0IHRoZSB0cmFuc2FjdGlvbiBpcyBidWlsdCBvblxuICAgICogQHBhcmFtIGZyb21BZGRyZXNzZXMgVGhlIGFkZHJlc3NlcyBiZWluZyB1c2VkIHRvIHNlbmQgdGhlIGZ1bmRzIGZyb20gdGhlIFVUWE9zIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9XG4gICAgKiBAcGFyYW0gY2hhbmdlQWRkcmVzc2VzIFRoZSBhZGRyZXNzZXMgdGhhdCBjYW4gc3BlbmQgdGhlIGNoYW5nZSByZW1haW5pbmcgZnJvbSB0aGUgc3BlbnQgVVRYT3NcbiAgICAqIEBwYXJhbSBzdWJuZXRPd25lckFkZHJlc3NlcyBBbiBhcnJheSBvZiBhZGRyZXNzZXMgZm9yIG93bmVycyBvZiB0aGUgbmV3IHN1Ym5ldFxuICAgICogQHBhcmFtIHN1Ym5ldE93bmVyVGhyZXNob2xkIEEgbnVtYmVyIGluZGljYXRpbmcgdGhlIGFtb3VudCBvZiBzaWduYXR1cmVzIHJlcXVpcmVkIHRvIGFkZCB2YWxpZGF0b3JzIHRvIGEgc3VibmV0XG4gICAgKiBAcGFyYW0gbWVtbyBPcHRpb25hbCBjb250YWlucyBhcmJpdHJhcnkgYnl0ZXMsIHVwIHRvIDI1NiBieXRlc1xuICAgICogQHBhcmFtIGFzT2YgT3B0aW9uYWwuIFRoZSB0aW1lc3RhbXAgdG8gdmVyaWZ5IHRoZSB0cmFuc2FjdGlvbiBhZ2FpbnN0IGFzIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmR1dG55L2JuLmpzL3xCTn1cbiAgICAqIFxuICAgICogQHJldHVybnMgQW4gdW5zaWduZWQgdHJhbnNhY3Rpb24gY3JlYXRlZCBmcm9tIHRoZSBwYXNzZWQgaW4gcGFyYW1ldGVycy5cbiAgICAqL1xuICBidWlsZENyZWF0ZVN1Ym5ldFR4ID0gYXN5bmMgKFxuICAgIHV0eG9zZXQ6VVRYT1NldCwgXG4gICAgZnJvbUFkZHJlc3NlczpBcnJheTxzdHJpbmc+LFxuICAgIGNoYW5nZUFkZHJlc3NlczpBcnJheTxzdHJpbmc+LFxuICAgIHN1Ym5ldE93bmVyQWRkcmVzc2VzOkFycmF5PHN0cmluZz4sXG4gICAgc3VibmV0T3duZXJUaHJlc2hvbGQ6bnVtYmVyLCBcbiAgICBtZW1vOlBheWxvYWRCYXNlfEJ1ZmZlciA9IHVuZGVmaW5lZCwgXG4gICAgYXNPZjpCTiA9IFVuaXhOb3coKVxuICApOlByb21pc2U8VW5zaWduZWRUeD4gPT4ge1xuICAgIGNvbnN0IGZyb206QXJyYXk8QnVmZmVyPiA9IHRoaXMuX2NsZWFuQWRkcmVzc0FycmF5KGZyb21BZGRyZXNzZXMsICdidWlsZENyZWF0ZVN1Ym5ldFR4JykubWFwKChhKSA9PiBiaW50b29scy5zdHJpbmdUb0FkZHJlc3MoYSkpO1xuICAgIGNvbnN0IGNoYW5nZTpBcnJheTxCdWZmZXI+ID0gdGhpcy5fY2xlYW5BZGRyZXNzQXJyYXkoY2hhbmdlQWRkcmVzc2VzLCAnYnVpbGRDcmVhdGVTdWJuZXRUeCcpLm1hcCgoYSkgPT4gYmludG9vbHMuc3RyaW5nVG9BZGRyZXNzKGEpKTtcbiAgICBjb25zdCBvd25lcnM6QXJyYXk8QnVmZmVyPiA9IHRoaXMuX2NsZWFuQWRkcmVzc0FycmF5KHN1Ym5ldE93bmVyQWRkcmVzc2VzLCAnYnVpbGRDcmVhdGVTdWJuZXRUeCcpLm1hcCgoYSkgPT4gYmludG9vbHMuc3RyaW5nVG9BZGRyZXNzKGEpKTtcblxuICAgIGlmKCBtZW1vIGluc3RhbmNlb2YgUGF5bG9hZEJhc2UpIHtcbiAgICAgIG1lbW8gPSBtZW1vLmdldFBheWxvYWQoKTtcbiAgICB9XG5cbiAgICBjb25zdCBhdmF4QXNzZXRJRDpCdWZmZXIgPSBhd2FpdCB0aGlzLmdldEFWQVhBc3NldElEKCk7XG5cbiAgICBjb25zdCBidWlsdFVuc2lnbmVkVHg6VW5zaWduZWRUeCA9IHV0eG9zZXQuYnVpbGRDcmVhdGVTdWJuZXRUeChcbiAgICAgIHRoaXMuY29yZS5nZXROZXR3b3JrSUQoKSwgXG4gICAgICBiaW50b29scy5jYjU4RGVjb2RlKHRoaXMuYmxvY2tjaGFpbklEKSwgXG4gICAgICBmcm9tLFxuICAgICAgY2hhbmdlLFxuICAgICAgb3duZXJzLFxuICAgICAgc3VibmV0T3duZXJUaHJlc2hvbGQsXG4gICAgICB0aGlzLmdldENyZWF0aW9uVHhGZWUoKSwgXG4gICAgICBhdmF4QXNzZXRJRCxcbiAgICAgIG1lbW8sIGFzT2ZcbiAgICApO1xuXG4gICAgaWYoISBhd2FpdCB0aGlzLmNoZWNrR29vc2VFZ2coYnVpbHRVbnNpZ25lZFR4LCB0aGlzLmdldENyZWF0aW9uVHhGZWUoKSkpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgR29vc2UgRWdnIENoZWNrXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBidWlsdFVuc2lnbmVkVHg7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgcHJvdGVjdGVkIF9jbGVhbkFkZHJlc3NBcnJheShhZGRyZXNzZXM6QXJyYXk8c3RyaW5nPiB8IEFycmF5PEJ1ZmZlcj4sIGNhbGxlcjpzdHJpbmcpOkFycmF5PHN0cmluZz4ge1xuICAgIGNvbnN0IGFkZHJzOkFycmF5PHN0cmluZz4gPSBbXTtcbiAgICBjb25zdCBjaGFpbmlkOnN0cmluZyA9IHRoaXMuZ2V0QmxvY2tjaGFpbkFsaWFzKCkgPyB0aGlzLmdldEJsb2NrY2hhaW5BbGlhcygpIDogdGhpcy5nZXRCbG9ja2NoYWluSUQoKTtcbiAgICBpZiAoYWRkcmVzc2VzICYmIGFkZHJlc3Nlcy5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFkZHJlc3Nlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodHlwZW9mIGFkZHJlc3Nlc1tpXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMucGFyc2VBZGRyZXNzKGFkZHJlc3Nlc1tpXSBhcyBzdHJpbmcpID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgLSBQbGF0Zm9ybVZNQVBJLiR7Y2FsbGVyfTogSW52YWxpZCBhZGRyZXNzIGZvcm1hdCAke2FkZHJlc3Nlc1tpXX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWRkcnMucHVzaChhZGRyZXNzZXNbaV0gYXMgc3RyaW5nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhZGRycy5wdXNoKGJpbnRvb2xzLmFkZHJlc3NUb1N0cmluZyh0aGlzLmNvcmUuZ2V0SFJQKCksIGNoYWluaWQsIGFkZHJlc3Nlc1tpXSBhcyBCdWZmZXIpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWRkcnM7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBjbGFzcyBzaG91bGQgbm90IGJlIGluc3RhbnRpYXRlZCBkaXJlY3RseS5cbiAgICogSW5zdGVhZCB1c2UgdGhlIFtbQXZhbGFuY2hlLmFkZEFQSV1dIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIGNvcmUgQSByZWZlcmVuY2UgdG8gdGhlIEF2YWxhbmNoZSBjbGFzc1xuICAgKiBAcGFyYW0gYmFzZXVybCBEZWZhdWx0cyB0byB0aGUgc3RyaW5nIFwiL2V4dC9QXCIgYXMgdGhlIHBhdGggdG8gYmxvY2tjaGFpbidzIGJhc2V1cmxcbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvcmU6QXZhbGFuY2hlQ29yZSwgYmFzZXVybDpzdHJpbmcgPSAnL2V4dC9iYy9QJykgeyBcbiAgICBzdXBlcihjb3JlLCBiYXNldXJsKTsgXG4gICAgdGhpcy5ibG9ja2NoYWluSUQgPSBQbGF0Zm9ybUNoYWluSUQ7XG4gICAgY29uc3QgbmV0aWQ6bnVtYmVyID0gY29yZS5nZXROZXR3b3JrSUQoKTtcbiAgICBpZiAobmV0aWQgaW4gRGVmYXVsdHMubmV0d29yayAmJiB0aGlzLmJsb2NrY2hhaW5JRCBpbiBEZWZhdWx0cy5uZXR3b3JrW25ldGlkXSkge1xuICAgICAgY29uc3QgeyBhbGlhcyB9ID0gRGVmYXVsdHMubmV0d29ya1tuZXRpZF1bdGhpcy5ibG9ja2NoYWluSURdO1xuICAgICAgdGhpcy5rZXljaGFpbiA9IG5ldyBLZXlDaGFpbih0aGlzLmNvcmUuZ2V0SFJQKCksIGFsaWFzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5rZXljaGFpbiA9IG5ldyBLZXlDaGFpbih0aGlzLmNvcmUuZ2V0SFJQKCksIHRoaXMuYmxvY2tjaGFpbklEKTtcbiAgICB9XG4gIH1cbn1cblxuIl19","\"use strict\";\n/**\n * @packageDocumentation\n * @module Common-Transactions\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EVMStandardTx = exports.EVMStandardUnsignedTx = exports.EVMStandardBaseTx = void 0;\nconst buffer_1 = require(\"buffer/\");\nconst bintools_1 = __importDefault(require(\"../utils/bintools\"));\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nconst input_1 = require(\"./input\");\nconst output_1 = require(\"./output\");\nconst constants_1 = require(\"../utils/constants\");\nconst serialization_1 = require(\"../utils/serialization\");\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\nconst serializer = serialization_1.Serialization.getInstance();\n/**\n * Class representing a base for all transactions.\n */\nclass EVMStandardBaseTx extends serialization_1.Serializable {\n    /**\n     * Class representing a StandardBaseTx which is the foundation for all transactions.\n     *\n     * @param networkid Optional networkid, [[DefaultNetworkID]]\n     * @param blockchainid Optional blockchainid, default Buffer.alloc(32, 16)\n     * @param outs Optional array of the [[TransferableOutput]]s\n     * @param ins Optional array of the [[TransferableInput]]s\n     */\n    constructor(networkid = constants_1.DefaultNetworkID, blockchainid = buffer_1.Buffer.alloc(32, 16)) {\n        super();\n        this._typeName = \"EVMStandardBaseTx\";\n        this._typeID = undefined;\n        this.networkid = buffer_1.Buffer.alloc(4);\n        this.blockchainid = buffer_1.Buffer.alloc(32);\n        /**\n         * Returns the NetworkID as a number\n         */\n        this.getNetworkID = () => this.networkid.readUInt32BE(0);\n        /**\n         * Returns the Buffer representation of the BlockchainID\n         */\n        this.getBlockchainID = () => this.blockchainid;\n        this.networkid.writeUInt32BE(networkid, 0);\n        this.blockchainid = blockchainid;\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"networkid\": serializer.encoder(this.networkid, encoding, \"Buffer\", \"decimalString\"), \"blockchainid\": serializer.encoder(this.blockchainid, encoding, \"Buffer\", \"cb58\") });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.networkid = serializer.decoder(fields[\"networkid\"], encoding, \"decimalString\", \"Buffer\", 4);\n        this.blockchainid = serializer.decoder(fields[\"blockchainid\"], encoding, \"cb58\", \"Buffer\", 32);\n    }\n    /**\n     * Returns a {@link https://github.com/feross/buffer|Buffer} representation of the [[StandardBaseTx]].\n     */\n    toBuffer() {\n        let bsize = this.networkid.length + this.blockchainid.length;\n        const barr = [this.networkid, this.blockchainid];\n        const buff = buffer_1.Buffer.concat(barr, bsize);\n        return buff;\n    }\n    /**\n     * Returns a base-58 representation of the [[StandardBaseTx]].\n     */\n    toString() {\n        return bintools.bufferToB58(this.toBuffer());\n    }\n}\nexports.EVMStandardBaseTx = EVMStandardBaseTx;\n/**\n * Class representing an unsigned transaction.\n */\nclass EVMStandardUnsignedTx extends serialization_1.Serializable {\n    constructor(transaction = undefined, codecid = 0) {\n        super();\n        this._typeName = \"StandardUnsignedTx\";\n        this._typeID = undefined;\n        this.codecid = 0;\n        /**\n         * Returns the CodecID as a number\n         */\n        this.getCodecID = () => this.codecid;\n        /**\n        * Returns the {@link https://github.com/feross/buffer|Buffer} representation of the CodecID\n        */\n        this.getCodecIDBuffer = () => {\n            let codecBuf = buffer_1.Buffer.alloc(2);\n            codecBuf.writeUInt16BE(this.codecid, 0);\n            return codecBuf;\n        };\n        /**\n         * Returns the inputTotal as a BN\n         */\n        this.getInputTotal = (assetID) => {\n            const ins = [];\n            const aIDHex = assetID.toString('hex');\n            let total = new bn_js_1.default(0);\n            ins.forEach((input) => {\n                // only check StandardAmountInputs\n                if (input.getInput() instanceof input_1.StandardAmountInput && aIDHex === input.getAssetID().toString('hex')) {\n                    const i = input.getInput();\n                    total = total.add(i.getAmount());\n                }\n            });\n            return total;\n        };\n        /**\n         * Returns the outputTotal as a BN\n         */\n        this.getOutputTotal = (assetID) => {\n            const outs = [];\n            const aIDHex = assetID.toString('hex');\n            let total = new bn_js_1.default(0);\n            outs.forEach((out) => {\n                // only check StandardAmountOutput\n                if (out.getOutput() instanceof output_1.StandardAmountOutput && aIDHex === out.getAssetID().toString('hex')) {\n                    const output = out.getOutput();\n                    total = total.add(output.getAmount());\n                }\n            });\n            return total;\n        };\n        /**\n         * Returns the number of burned tokens as a BN\n         */\n        this.getBurn = (assetID) => {\n            return this.getInputTotal(assetID).sub(this.getOutputTotal(assetID));\n        };\n        this.codecid = codecid;\n        this.transaction = transaction;\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"codecid\": serializer.encoder(this.codecid, encoding, \"number\", \"decimalString\", 2), \"transaction\": this.transaction.serialize(encoding) });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.codecid = serializer.decoder(fields[\"codecid\"], encoding, \"decimalString\", \"number\");\n    }\n    toBuffer() {\n        const codecid = this.getCodecIDBuffer();\n        const txtype = buffer_1.Buffer.alloc(4);\n        txtype.writeUInt32BE(this.transaction.getTxType(), 0);\n        const basebuff = this.transaction.toBuffer();\n        return buffer_1.Buffer.concat([codecid, txtype, basebuff], codecid.length + txtype.length + basebuff.length);\n    }\n}\nexports.EVMStandardUnsignedTx = EVMStandardUnsignedTx;\n/**\n * Class representing a signed transaction.\n */\nclass EVMStandardTx extends serialization_1.Serializable {\n    /**\n     * Class representing a signed transaction.\n     *\n     * @param unsignedTx Optional [[StandardUnsignedTx]]\n     * @param signatures Optional array of [[Credential]]s\n     */\n    constructor(unsignedTx = undefined, credentials = undefined) {\n        super();\n        this._typeName = \"StandardTx\";\n        this._typeID = undefined;\n        this.unsignedTx = undefined;\n        this.credentials = [];\n        /**\n         * Returns the [[StandardUnsignedTx]]\n         */\n        this.getUnsignedTx = () => {\n            return this.unsignedTx;\n        };\n        if (typeof unsignedTx !== 'undefined') {\n            this.unsignedTx = unsignedTx;\n            if (typeof credentials !== 'undefined') {\n                this.credentials = credentials;\n            }\n        }\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"unsignedTx\": this.unsignedTx.serialize(encoding), \"credentials\": this.credentials.map((c) => c.serialize(encoding)) });\n    }\n    ;\n    /**\n     * Returns a {@link https://github.com/feross/buffer|Buffer} representation of the [[StandardTx]].\n     */\n    toBuffer() {\n        const txbuff = this.unsignedTx.toBuffer();\n        let bsize = txbuff.length;\n        const credlen = buffer_1.Buffer.alloc(4);\n        credlen.writeUInt32BE(this.credentials.length, 0);\n        const barr = [txbuff, credlen];\n        bsize += credlen.length;\n        this.credentials.forEach((credential) => {\n            const credid = buffer_1.Buffer.alloc(4);\n            credid.writeUInt32BE(credential.getCredentialID(), 0);\n            barr.push(credid);\n            bsize += credid.length;\n            const credbuff = credential.toBuffer();\n            bsize += credbuff.length;\n            barr.push(credbuff);\n        });\n        const buff = buffer_1.Buffer.concat(barr, bsize);\n        return buff;\n    }\n    /**\n     * Takes a base-58 string containing an [[StandardTx]], parses it, populates the class, and returns the length of the Tx in bytes.\n     *\n     * @param serialized A base-58 string containing a raw [[StandardTx]]\n     *\n     * @returns The length of the raw [[StandardTx]]\n     *\n     * @remarks\n     * unlike most fromStrings, it expects the string to be serialized in cb58 format\n     */\n    fromString(serialized) {\n        return this.fromBuffer(bintools.cb58Decode(serialized));\n    }\n    /**\n     * Returns a cb58 representation of the [[StandardTx]].\n     *\n     * @remarks\n     * unlike most toStrings, this returns in cb58 serialization format\n     */\n    toString() {\n        return bintools.cb58Encode(this.toBuffer());\n    }\n}\nexports.EVMStandardTx = EVMStandardTx;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXZtdHguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tbW9uL2V2bXR4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7Ozs7OztBQUVILG9DQUFpQztBQUNqQyxpRUFBeUM7QUFFekMsa0RBQXVCO0FBRXZCLG1DQUF5RTtBQUN6RSxxQ0FBNEU7QUFDNUUsa0RBQXNEO0FBQ3RELDBEQUF5RjtBQUV6Rjs7R0FFRztBQUNILE1BQU0sUUFBUSxHQUFhLGtCQUFRLENBQUMsV0FBVyxFQUFFLENBQUM7QUFDbEQsTUFBTSxVQUFVLEdBQWtCLDZCQUFhLENBQUMsV0FBVyxFQUFFLENBQUM7QUFFOUQ7O0dBRUc7QUFDSCxNQUFzQixpQkFBOEYsU0FBUSw0QkFBWTtJQTREdEk7Ozs7Ozs7T0FPRztJQUNILFlBQVksWUFBb0IsNEJBQWdCLEVBQUUsZUFBdUIsZUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDO1FBQzNGLEtBQUssRUFBRSxDQUFDO1FBcEVBLGNBQVMsR0FBRyxtQkFBbUIsQ0FBQztRQUNoQyxZQUFPLEdBQUcsU0FBUyxDQUFDO1FBaUJwQixjQUFTLEdBQVcsZUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwQyxpQkFBWSxHQUFXLGVBQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7UUFPbEQ7O1dBRUc7UUFDSCxpQkFBWSxHQUFHLEdBQVcsRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTVEOztXQUVHO1FBQ0gsb0JBQWUsR0FBRyxHQUFXLEVBQUUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDO1FBbUNoRCxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDM0MsSUFBSSxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUM7SUFDbkMsQ0FBQztJQXBFRCxTQUFTLENBQUMsV0FBK0IsS0FBSztRQUM1QyxJQUFJLE1BQU0sR0FBVyxLQUFLLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQy9DLHVDQUNLLE1BQU0sS0FDVCxXQUFXLEVBQUUsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsZUFBZSxDQUFDLEVBQ3BGLGNBQWMsRUFBRSxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLENBQUMsSUFDbEY7SUFDSCxDQUFDO0lBQUEsQ0FBQztJQUVGLFdBQVcsQ0FBQyxNQUFjLEVBQUUsV0FBK0IsS0FBSztRQUM5RCxLQUFLLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQztRQUNwQyxJQUFJLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFLFFBQVEsRUFBRSxlQUFlLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2pHLElBQUksQ0FBQyxZQUFZLEdBQUcsVUFBVSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDakcsQ0FBQztJQW9CRDs7T0FFRztJQUNILFFBQVE7UUFDTixJQUFJLEtBQUssR0FBVyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQztRQUNyRSxNQUFNLElBQUksR0FBYSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQzNELE1BQU0sSUFBSSxHQUFXLGVBQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ2hELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVEOztPQUVHO0lBQ0gsUUFBUTtRQUNOLE9BQU8sUUFBUSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztJQUMvQyxDQUFDO0NBcUJGO0FBekVELDhDQXlFQztBQUVEOztHQUVHO0FBQ0gsTUFBc0IscUJBR3BCLFNBQVEsNEJBQVk7SUF5R3BCLFlBQVksY0FBb0IsU0FBUyxFQUFFLFVBQWtCLENBQUM7UUFDNUQsS0FBSyxFQUFFLENBQUM7UUF6R0EsY0FBUyxHQUFHLG9CQUFvQixDQUFDO1FBQ2pDLFlBQU8sR0FBRyxTQUFTLENBQUM7UUFnQnBCLFlBQU8sR0FBVyxDQUFDLENBQUM7UUFHOUI7O1dBRUc7UUFDSCxlQUFVLEdBQUcsR0FBVyxFQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUV4Qzs7VUFFRTtRQUNGLHFCQUFnQixHQUFHLEdBQVcsRUFBRTtZQUM5QixJQUFJLFFBQVEsR0FBVyxlQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3ZDLFFBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQztZQUN4QyxPQUFPLFFBQVEsQ0FBQztRQUNsQixDQUFDLENBQUE7UUFFRDs7V0FFRztRQUNILGtCQUFhLEdBQUcsQ0FBQyxPQUFlLEVBQUssRUFBRTtZQUNyQyxNQUFNLEdBQUcsR0FBZ0MsRUFBRSxDQUFDO1lBQzVDLE1BQU0sTUFBTSxHQUFXLE9BQU8sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDL0MsSUFBSSxLQUFLLEdBQU8sSUFBSSxlQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDMUIsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQWdDLEVBQUUsRUFBRTtnQkFDL0Msa0NBQWtDO2dCQUNsQyxJQUFHLEtBQUssQ0FBQyxRQUFRLEVBQUUsWUFBWSwyQkFBbUIsSUFBSSxNQUFNLEtBQUssS0FBSyxDQUFDLFVBQVUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsRUFBRTtvQkFDbkcsTUFBTSxDQUFDLEdBQUcsS0FBSyxDQUFDLFFBQVEsRUFBeUIsQ0FBQztvQkFDbEQsS0FBSyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUM7aUJBQ2xDO1lBQ0gsQ0FBQyxDQUFDLENBQUM7WUFDSCxPQUFPLEtBQUssQ0FBQztRQUNmLENBQUMsQ0FBQTtRQUVEOztXQUVHO1FBQ0gsbUJBQWMsR0FBRyxDQUFDLE9BQWUsRUFBTSxFQUFFO1lBQ3ZDLE1BQU0sSUFBSSxHQUFpQyxFQUFFLENBQUM7WUFDOUMsTUFBTSxNQUFNLEdBQVcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUMvQyxJQUFJLEtBQUssR0FBTyxJQUFJLGVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUUxQixJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBK0IsRUFBRSxFQUFFO2dCQUMvQyxrQ0FBa0M7Z0JBQ2xDLElBQUcsR0FBRyxDQUFDLFNBQVMsRUFBRSxZQUFZLDZCQUFvQixJQUFJLE1BQU0sS0FBSyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxFQUFFO29CQUNqRyxNQUFNLE1BQU0sR0FBeUIsR0FBRyxDQUFDLFNBQVMsRUFBMEIsQ0FBQztvQkFDN0UsS0FBSyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUM7aUJBQ3ZDO1lBQ0gsQ0FBQyxDQUFDLENBQUM7WUFDSCxPQUFPLEtBQUssQ0FBQztRQUNmLENBQUMsQ0FBQTtRQUVEOztXQUVHO1FBQ0gsWUFBTyxHQUFHLENBQUMsT0FBZSxFQUFNLEVBQUU7WUFDaEMsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDdkUsQ0FBQyxDQUFBO1FBZ0NDLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO0lBQ2pDLENBQUM7SUF6R0QsU0FBUyxDQUFDLFdBQStCLEtBQUs7UUFDNUMsSUFBSSxNQUFNLEdBQVcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUMvQyx1Q0FDSyxNQUFNLEtBQ1QsU0FBUyxFQUFFLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLGVBQWUsRUFBRSxDQUFDLENBQUMsRUFDbkYsYUFBYSxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUNuRDtJQUNKLENBQUM7SUFBQSxDQUFDO0lBRUYsV0FBVyxDQUFDLE1BQWMsRUFBRSxXQUErQixLQUFLO1FBQzlELEtBQUssQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxPQUFPLEdBQUcsVUFBVSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUUsUUFBUSxFQUFFLGVBQWUsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUM1RixDQUFDO0lBb0VELFFBQVE7UUFDTixNQUFNLE9BQU8sR0FBVyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztRQUNoRCxNQUFNLE1BQU0sR0FBVyxlQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLE1BQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN0RCxNQUFNLFFBQVEsR0FBVyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ3JELE9BQU8sZUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsUUFBUSxDQUFDLEVBQUUsT0FBTyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUN0RyxDQUFDO0NBb0JGO0FBakhELHNEQWlIQztBQUVEOztHQUVHO0FBQ0gsTUFBc0IsYUFPaEIsU0FBUSw0QkFBWTtJQXdFeEI7Ozs7O09BS0c7SUFDSCxZQUFZLGFBQW9CLFNBQVMsRUFBRSxjQUE0QixTQUFTO1FBQzlFLEtBQUssRUFBRSxDQUFDO1FBOUVBLGNBQVMsR0FBRyxZQUFZLENBQUM7UUFDekIsWUFBTyxHQUFHLFNBQVMsQ0FBQztRQVdwQixlQUFVLEdBQVUsU0FBUyxDQUFDO1FBQzlCLGdCQUFXLEdBQWlCLEVBQUUsQ0FBQztRQUV6Qzs7V0FFRztRQUNILGtCQUFhLEdBQUcsR0FBVSxFQUFFO1lBQzFCLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztRQUN6QixDQUFDLENBQUE7UUEyREMsSUFBSSxPQUFPLFVBQVUsS0FBSyxXQUFXLEVBQUU7WUFDckMsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7WUFDN0IsSUFBSSxPQUFPLFdBQVcsS0FBSyxXQUFXLEVBQUU7Z0JBQ3RDLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO2FBQ2hDO1NBQ0Y7SUFDSCxDQUFDO0lBbEZELFNBQVMsQ0FBQyxXQUErQixLQUFLO1FBQzVDLElBQUksTUFBTSxHQUFXLEtBQUssQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDL0MsdUNBQ0ssTUFBTSxLQUNULFlBQVksRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsRUFDakQsYUFBYSxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQ2xFO0lBQ0gsQ0FBQztJQUFBLENBQUM7SUFjRjs7T0FFRztJQUNILFFBQVE7UUFDTixNQUFNLE1BQU0sR0FBVyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ2xELElBQUksS0FBSyxHQUFXLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDbEMsTUFBTSxPQUFPLEdBQVcsZUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN4QyxPQUFPLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2xELE1BQU0sSUFBSSxHQUFhLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3pDLEtBQUssSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDO1FBQ3hCLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsVUFBc0IsRUFBRSxFQUFFO1lBQ2xELE1BQU0sTUFBTSxHQUFXLGVBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdkMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsZUFBZSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDdEQsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNsQixLQUFLLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQztZQUN2QixNQUFNLFFBQVEsR0FBVyxVQUFVLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDL0MsS0FBSyxJQUFJLFFBQVEsQ0FBQyxNQUFNLENBQUM7WUFDekIsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN0QixDQUFDLENBQUMsQ0FBQztRQUNILE1BQU0sSUFBSSxHQUFXLGVBQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ2hELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVEOzs7Ozs7Ozs7T0FTRztJQUNILFVBQVUsQ0FBQyxVQUFrQjtRQUMzQixPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO0lBQzFELENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILFFBQVE7UUFDTixPQUFPLFFBQVEsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7SUFDOUMsQ0FBQztDQWlCRjtBQTlGRCxzQ0E4RkMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICogQG1vZHVsZSBDb21tb24tVHJhbnNhY3Rpb25zXG4gKi9cblxuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyLyc7XG5pbXBvcnQgQmluVG9vbHMgZnJvbSAnLi4vdXRpbHMvYmludG9vbHMnO1xuaW1wb3J0IHsgQ3JlZGVudGlhbCB9IGZyb20gJy4vY3JlZGVudGlhbHMnO1xuaW1wb3J0IEJOIGZyb20gJ2JuLmpzJztcbmltcG9ydCB7IFN0YW5kYXJkS2V5Q2hhaW4sIFN0YW5kYXJkS2V5UGFpciB9IGZyb20gJy4va2V5Y2hhaW4nO1xuaW1wb3J0IHsgU3RhbmRhcmRBbW91bnRJbnB1dCwgU3RhbmRhcmRUcmFuc2ZlcmFibGVJbnB1dCB9IGZyb20gJy4vaW5wdXQnO1xuaW1wb3J0IHsgU3RhbmRhcmRBbW91bnRPdXRwdXQsIFN0YW5kYXJkVHJhbnNmZXJhYmxlT3V0cHV0IH0gZnJvbSAnLi9vdXRwdXQnO1xuaW1wb3J0IHsgRGVmYXVsdE5ldHdvcmtJRCB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBTZXJpYWxpemFibGUsIFNlcmlhbGl6YXRpb24sIFNlcmlhbGl6ZWRFbmNvZGluZyB9IGZyb20gJy4uL3V0aWxzL3NlcmlhbGl6YXRpb24nO1xuXG4vKipcbiAqIEBpZ25vcmVcbiAqL1xuY29uc3QgYmludG9vbHM6IEJpblRvb2xzID0gQmluVG9vbHMuZ2V0SW5zdGFuY2UoKTtcbmNvbnN0IHNlcmlhbGl6ZXI6IFNlcmlhbGl6YXRpb24gPSBTZXJpYWxpemF0aW9uLmdldEluc3RhbmNlKCk7XG5cbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgYmFzZSBmb3IgYWxsIHRyYW5zYWN0aW9ucy5cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEVWTVN0YW5kYXJkQmFzZVR4PEtQQ2xhc3MgZXh0ZW5kcyBTdGFuZGFyZEtleVBhaXIsIEtDQ2xhc3MgZXh0ZW5kcyBTdGFuZGFyZEtleUNoYWluPEtQQ2xhc3M+PiBleHRlbmRzIFNlcmlhbGl6YWJsZXtcbiAgcHJvdGVjdGVkIF90eXBlTmFtZSA9IFwiRVZNU3RhbmRhcmRCYXNlVHhcIjtcbiAgcHJvdGVjdGVkIF90eXBlSUQgPSB1bmRlZmluZWQ7XG5cbiAgc2VyaWFsaXplKGVuY29kaW5nOiBTZXJpYWxpemVkRW5jb2RpbmcgPSBcImhleFwiKTogb2JqZWN0IHtcbiAgICBsZXQgZmllbGRzOiBvYmplY3QgPSBzdXBlci5zZXJpYWxpemUoZW5jb2RpbmcpO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5maWVsZHMsXG4gICAgICBcIm5ldHdvcmtpZFwiOiBzZXJpYWxpemVyLmVuY29kZXIodGhpcy5uZXR3b3JraWQsIGVuY29kaW5nLCBcIkJ1ZmZlclwiLCBcImRlY2ltYWxTdHJpbmdcIiksXG4gICAgICBcImJsb2NrY2hhaW5pZFwiOiBzZXJpYWxpemVyLmVuY29kZXIodGhpcy5ibG9ja2NoYWluaWQsIGVuY29kaW5nLCBcIkJ1ZmZlclwiLCBcImNiNThcIilcbiAgICB9XG4gIH07XG5cbiAgZGVzZXJpYWxpemUoZmllbGRzOiBvYmplY3QsIGVuY29kaW5nOiBTZXJpYWxpemVkRW5jb2RpbmcgPSBcImhleFwiKSB7XG4gICAgc3VwZXIuZGVzZXJpYWxpemUoZmllbGRzLCBlbmNvZGluZyk7XG4gICAgdGhpcy5uZXR3b3JraWQgPSBzZXJpYWxpemVyLmRlY29kZXIoZmllbGRzW1wibmV0d29ya2lkXCJdLCBlbmNvZGluZywgXCJkZWNpbWFsU3RyaW5nXCIsIFwiQnVmZmVyXCIsIDQpO1xuICAgIHRoaXMuYmxvY2tjaGFpbmlkID0gc2VyaWFsaXplci5kZWNvZGVyKGZpZWxkc1tcImJsb2NrY2hhaW5pZFwiXSwgZW5jb2RpbmcsIFwiY2I1OFwiLCBcIkJ1ZmZlclwiLCAzMik7XG4gIH1cblxuICBwcm90ZWN0ZWQgbmV0d29ya2lkOiBCdWZmZXIgPSBCdWZmZXIuYWxsb2MoNCk7XG4gIHByb3RlY3RlZCBibG9ja2NoYWluaWQ6IEJ1ZmZlciA9IEJ1ZmZlci5hbGxvYygzMik7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGlkIG9mIHRoZSBbW1N0YW5kYXJkQmFzZVR4XV1cbiAgICovXG4gIGFic3RyYWN0IGdldFR4VHlwZTooKSA9PiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIE5ldHdvcmtJRCBhcyBhIG51bWJlclxuICAgKi9cbiAgZ2V0TmV0d29ya0lEID0gKCk6IG51bWJlciA9PiB0aGlzLm5ldHdvcmtpZC5yZWFkVUludDMyQkUoMCk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIEJ1ZmZlciByZXByZXNlbnRhdGlvbiBvZiB0aGUgQmxvY2tjaGFpbklEXG4gICAqL1xuICBnZXRCbG9ja2NoYWluSUQgPSAoKTogQnVmZmVyID0+IHRoaXMuYmxvY2tjaGFpbmlkO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gcmVwcmVzZW50YXRpb24gb2YgdGhlIFtbU3RhbmRhcmRCYXNlVHhdXS5cbiAgICovXG4gIHRvQnVmZmVyKCk6IEJ1ZmZlciB7XG4gICAgbGV0IGJzaXplOiBudW1iZXIgPSB0aGlzLm5ldHdvcmtpZC5sZW5ndGggKyB0aGlzLmJsb2NrY2hhaW5pZC5sZW5ndGg7XG4gICAgY29uc3QgYmFycjogQnVmZmVyW10gPSBbdGhpcy5uZXR3b3JraWQsIHRoaXMuYmxvY2tjaGFpbmlkXTtcbiAgICBjb25zdCBidWZmOiBCdWZmZXIgPSBCdWZmZXIuY29uY2F0KGJhcnIsIGJzaXplKTtcbiAgICByZXR1cm4gYnVmZjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgYmFzZS01OCByZXByZXNlbnRhdGlvbiBvZiB0aGUgW1tTdGFuZGFyZEJhc2VUeF1dLlxuICAgKi9cbiAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYmludG9vbHMuYnVmZmVyVG9CNTgodGhpcy50b0J1ZmZlcigpKTtcbiAgfVxuXG4gIGFic3RyYWN0IGNsb25lKCk6IHRoaXM7XG5cbiAgYWJzdHJhY3QgY3JlYXRlKC4uLmFyZ3M6YW55W10pOiB0aGlzO1xuXG4gIGFic3RyYWN0IHNlbGVjdChpZDpudW1iZXIsIC4uLmFyZ3M6YW55W10pOiB0aGlzO1xuXG4gIC8qKlxuICAgKiBDbGFzcyByZXByZXNlbnRpbmcgYSBTdGFuZGFyZEJhc2VUeCB3aGljaCBpcyB0aGUgZm91bmRhdGlvbiBmb3IgYWxsIHRyYW5zYWN0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIG5ldHdvcmtpZCBPcHRpb25hbCBuZXR3b3JraWQsIFtbRGVmYXVsdE5ldHdvcmtJRF1dXG4gICAqIEBwYXJhbSBibG9ja2NoYWluaWQgT3B0aW9uYWwgYmxvY2tjaGFpbmlkLCBkZWZhdWx0IEJ1ZmZlci5hbGxvYygzMiwgMTYpXG4gICAqIEBwYXJhbSBvdXRzIE9wdGlvbmFsIGFycmF5IG9mIHRoZSBbW1RyYW5zZmVyYWJsZU91dHB1dF1dc1xuICAgKiBAcGFyYW0gaW5zIE9wdGlvbmFsIGFycmF5IG9mIHRoZSBbW1RyYW5zZmVyYWJsZUlucHV0XV1zXG4gICAqL1xuICBjb25zdHJ1Y3RvcihuZXR3b3JraWQ6IG51bWJlciA9IERlZmF1bHROZXR3b3JrSUQsIGJsb2NrY2hhaW5pZDogQnVmZmVyID0gQnVmZmVyLmFsbG9jKDMyLCAxNikpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubmV0d29ya2lkLndyaXRlVUludDMyQkUobmV0d29ya2lkLCAwKTtcbiAgICB0aGlzLmJsb2NrY2hhaW5pZCA9IGJsb2NrY2hhaW5pZDtcbiAgfVxufVxuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhbiB1bnNpZ25lZCB0cmFuc2FjdGlvbi5cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEVWTVN0YW5kYXJkVW5zaWduZWRUeDxLUENsYXNzIGV4dGVuZHMgU3RhbmRhcmRLZXlQYWlyLCBcbktDQ2xhc3MgZXh0ZW5kcyBTdGFuZGFyZEtleUNoYWluPEtQQ2xhc3M+LCBcblNCVHggZXh0ZW5kcyBFVk1TdGFuZGFyZEJhc2VUeDxLUENsYXNzLCBLQ0NsYXNzPlxuPiBleHRlbmRzIFNlcmlhbGl6YWJsZXtcbiAgcHJvdGVjdGVkIF90eXBlTmFtZSA9IFwiU3RhbmRhcmRVbnNpZ25lZFR4XCI7XG4gIHByb3RlY3RlZCBfdHlwZUlEID0gdW5kZWZpbmVkO1xuXG4gIHNlcmlhbGl6ZShlbmNvZGluZzogU2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIik6IG9iamVjdCB7XG4gICAgbGV0IGZpZWxkczogb2JqZWN0ID0gc3VwZXIuc2VyaWFsaXplKGVuY29kaW5nKTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uZmllbGRzLFxuICAgICAgXCJjb2RlY2lkXCI6IHNlcmlhbGl6ZXIuZW5jb2Rlcih0aGlzLmNvZGVjaWQsIGVuY29kaW5nLCBcIm51bWJlclwiLCBcImRlY2ltYWxTdHJpbmdcIiwgMiksXG4gICAgICBcInRyYW5zYWN0aW9uXCI6IHRoaXMudHJhbnNhY3Rpb24uc2VyaWFsaXplKGVuY29kaW5nKVxuICAgIH07XG4gIH07XG5cbiAgZGVzZXJpYWxpemUoZmllbGRzOiBvYmplY3QsIGVuY29kaW5nOiBTZXJpYWxpemVkRW5jb2RpbmcgPSBcImhleFwiKSB7XG4gICAgc3VwZXIuZGVzZXJpYWxpemUoZmllbGRzLCBlbmNvZGluZyk7XG4gICAgdGhpcy5jb2RlY2lkID0gc2VyaWFsaXplci5kZWNvZGVyKGZpZWxkc1tcImNvZGVjaWRcIl0sIGVuY29kaW5nLCBcImRlY2ltYWxTdHJpbmdcIiwgXCJudW1iZXJcIik7XG4gIH1cblxuICBwcm90ZWN0ZWQgY29kZWNpZDogbnVtYmVyID0gMDtcbiAgcHJvdGVjdGVkIHRyYW5zYWN0aW9uOiBTQlR4O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBDb2RlY0lEIGFzIGEgbnVtYmVyXG4gICAqL1xuICBnZXRDb2RlY0lEID0gKCk6IG51bWJlciA9PiB0aGlzLmNvZGVjaWQ7XG5cbiAgLyoqXG4gICogUmV0dXJucyB0aGUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gcmVwcmVzZW50YXRpb24gb2YgdGhlIENvZGVjSURcbiAgKi9cbiAgZ2V0Q29kZWNJREJ1ZmZlciA9ICgpOiBCdWZmZXIgPT4ge1xuICAgIGxldCBjb2RlY0J1ZjogQnVmZmVyID0gQnVmZmVyLmFsbG9jKDIpO1xuICAgIGNvZGVjQnVmLndyaXRlVUludDE2QkUodGhpcy5jb2RlY2lkLCAwKTtcbiAgICByZXR1cm4gY29kZWNCdWY7XG4gIH0gXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGlucHV0VG90YWwgYXMgYSBCTiBcbiAgICovXG4gIGdldElucHV0VG90YWwgPSAoYXNzZXRJRDogQnVmZmVyKTogQk49PiB7XG4gICAgY29uc3QgaW5zOiBTdGFuZGFyZFRyYW5zZmVyYWJsZUlucHV0W10gPSBbXTtcbiAgICBjb25zdCBhSURIZXg6IHN0cmluZyA9IGFzc2V0SUQudG9TdHJpbmcoJ2hleCcpO1xuICAgIGxldCB0b3RhbDogQk4gPSBuZXcgQk4oMCk7XG4gICAgaW5zLmZvckVhY2goKGlucHV0OiBTdGFuZGFyZFRyYW5zZmVyYWJsZUlucHV0KSA9PiB7XG4gICAgICAvLyBvbmx5IGNoZWNrIFN0YW5kYXJkQW1vdW50SW5wdXRzXG4gICAgICBpZihpbnB1dC5nZXRJbnB1dCgpIGluc3RhbmNlb2YgU3RhbmRhcmRBbW91bnRJbnB1dCAmJiBhSURIZXggPT09IGlucHV0LmdldEFzc2V0SUQoKS50b1N0cmluZygnaGV4JykpIHtcbiAgICAgICAgY29uc3QgaSA9IGlucHV0LmdldElucHV0KCkgYXMgU3RhbmRhcmRBbW91bnRJbnB1dDtcbiAgICAgICAgdG90YWwgPSB0b3RhbC5hZGQoaS5nZXRBbW91bnQoKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRvdGFsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG91dHB1dFRvdGFsIGFzIGEgQk5cbiAgICovXG4gIGdldE91dHB1dFRvdGFsID0gKGFzc2V0SUQ6IEJ1ZmZlcik6IEJOID0+IHtcbiAgICBjb25zdCBvdXRzOiBTdGFuZGFyZFRyYW5zZmVyYWJsZU91dHB1dFtdID0gW107XG4gICAgY29uc3QgYUlESGV4OiBzdHJpbmcgPSBhc3NldElELnRvU3RyaW5nKCdoZXgnKTtcbiAgICBsZXQgdG90YWw6IEJOID0gbmV3IEJOKDApO1xuXG4gICAgb3V0cy5mb3JFYWNoKChvdXQ6IFN0YW5kYXJkVHJhbnNmZXJhYmxlT3V0cHV0KSA9PiB7XG4gICAgICAvLyBvbmx5IGNoZWNrIFN0YW5kYXJkQW1vdW50T3V0cHV0XG4gICAgICBpZihvdXQuZ2V0T3V0cHV0KCkgaW5zdGFuY2VvZiBTdGFuZGFyZEFtb3VudE91dHB1dCAmJiBhSURIZXggPT09IG91dC5nZXRBc3NldElEKCkudG9TdHJpbmcoJ2hleCcpKSB7XG4gICAgICAgIGNvbnN0IG91dHB1dDogU3RhbmRhcmRBbW91bnRPdXRwdXQgPSBvdXQuZ2V0T3V0cHV0KCkgYXMgU3RhbmRhcmRBbW91bnRPdXRwdXQ7XG4gICAgICAgIHRvdGFsID0gdG90YWwuYWRkKG91dHB1dC5nZXRBbW91bnQoKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRvdGFsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBidXJuZWQgdG9rZW5zIGFzIGEgQk5cbiAgICovXG4gIGdldEJ1cm4gPSAoYXNzZXRJRDogQnVmZmVyKTogQk4gPT4ge1xuICAgIHJldHVybiB0aGlzLmdldElucHV0VG90YWwoYXNzZXRJRCkuc3ViKHRoaXMuZ2V0T3V0cHV0VG90YWwoYXNzZXRJRCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIFRyYW5zYWN0aW9uXG4gICAqL1xuICBhYnN0cmFjdCBnZXRUcmFuc2FjdGlvbigpOiBTQlR4O1xuXG4gIGFic3RyYWN0IGZyb21CdWZmZXIoYnl0ZXM6IEJ1ZmZlciwgb2Zmc2V0PzogbnVtYmVyKTogbnVtYmVyO1xuXG4gIHRvQnVmZmVyKCk6IEJ1ZmZlciB7XG4gICAgY29uc3QgY29kZWNpZDogQnVmZmVyID0gdGhpcy5nZXRDb2RlY0lEQnVmZmVyKCk7XG4gICAgY29uc3QgdHh0eXBlOiBCdWZmZXIgPSBCdWZmZXIuYWxsb2MoNCk7XG4gICAgdHh0eXBlLndyaXRlVUludDMyQkUodGhpcy50cmFuc2FjdGlvbi5nZXRUeFR5cGUoKSwgMCk7XG4gICAgY29uc3QgYmFzZWJ1ZmY6IEJ1ZmZlciA9IHRoaXMudHJhbnNhY3Rpb24udG9CdWZmZXIoKTtcbiAgICByZXR1cm4gQnVmZmVyLmNvbmNhdChbY29kZWNpZCwgdHh0eXBlLCBiYXNlYnVmZl0sIGNvZGVjaWQubGVuZ3RoICsgdHh0eXBlLmxlbmd0aCArIGJhc2VidWZmLmxlbmd0aCk7XG4gIH1cblxuICAvKipcbiAgICogU2lnbnMgdGhpcyBbW1Vuc2lnbmVkVHhdXSBhbmQgcmV0dXJucyBzaWduZWQgW1tTdGFuZGFyZFR4XV1cbiAgICpcbiAgICogQHBhcmFtIGtjIEFuIFtbS2V5Q2hhaW5dXSB1c2VkIGluIHNpZ25pbmdcbiAgICpcbiAgICogQHJldHVybnMgQSBzaWduZWQgW1tTdGFuZGFyZFR4XV1cbiAgICovXG4gIGFic3RyYWN0IHNpZ24oa2M6IEtDQ2xhc3MpOiBFVk1TdGFuZGFyZFR4PFxuICAgIEtQQ2xhc3MsIFxuICAgIEtDQ2xhc3MsIFxuICAgIEVWTVN0YW5kYXJkVW5zaWduZWRUeDxLUENsYXNzLCBLQ0NsYXNzLCBTQlR4PlxuICA+O1xuXG4gIGNvbnN0cnVjdG9yKHRyYW5zYWN0aW9uOiBTQlR4ID0gdW5kZWZpbmVkLCBjb2RlY2lkOiBudW1iZXIgPSAwKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmNvZGVjaWQgPSBjb2RlY2lkO1xuICAgIHRoaXMudHJhbnNhY3Rpb24gPSB0cmFuc2FjdGlvbjtcbiAgfVxufVxuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIHNpZ25lZCB0cmFuc2FjdGlvbi5cbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEVWTVN0YW5kYXJkVHg8XG4gICAgS1BDbGFzcyBleHRlbmRzIFN0YW5kYXJkS2V5UGFpciwgXG4gICAgS0NDbGFzcyBleHRlbmRzIFN0YW5kYXJkS2V5Q2hhaW48S1BDbGFzcz4sIFxuICAgIFNVQlR4IGV4dGVuZHMgRVZNU3RhbmRhcmRVbnNpZ25lZFR4PFxuICAgICAgICBLUENsYXNzLCBcbiAgICAgICAgS0NDbGFzcywgXG4gICAgICAgIEVWTVN0YW5kYXJkQmFzZVR4PEtQQ2xhc3MsIEtDQ2xhc3M+PlxuICAgID4gZXh0ZW5kcyBTZXJpYWxpemFibGUge1xuICBwcm90ZWN0ZWQgX3R5cGVOYW1lID0gXCJTdGFuZGFyZFR4XCI7XG4gIHByb3RlY3RlZCBfdHlwZUlEID0gdW5kZWZpbmVkO1xuXG4gIHNlcmlhbGl6ZShlbmNvZGluZzogU2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIik6IG9iamVjdCB7XG4gICAgbGV0IGZpZWxkczogb2JqZWN0ID0gc3VwZXIuc2VyaWFsaXplKGVuY29kaW5nKTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uZmllbGRzLFxuICAgICAgXCJ1bnNpZ25lZFR4XCI6IHRoaXMudW5zaWduZWRUeC5zZXJpYWxpemUoZW5jb2RpbmcpLFxuICAgICAgXCJjcmVkZW50aWFsc1wiOiB0aGlzLmNyZWRlbnRpYWxzLm1hcCgoYykgPT4gYy5zZXJpYWxpemUoZW5jb2RpbmcpKVxuICAgIH1cbiAgfTtcblxuICBwcm90ZWN0ZWQgdW5zaWduZWRUeDogU1VCVHggPSB1bmRlZmluZWQ7XG4gIHByb3RlY3RlZCBjcmVkZW50aWFsczogQ3JlZGVudGlhbFtdID0gW107XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIFtbU3RhbmRhcmRVbnNpZ25lZFR4XV1cbiAgICovXG4gIGdldFVuc2lnbmVkVHggPSAoKTogU1VCVHggPT4ge1xuICAgIHJldHVybiB0aGlzLnVuc2lnbmVkVHg7XG4gIH1cblxuICBhYnN0cmFjdCBmcm9tQnVmZmVyKGJ5dGVzOiBCdWZmZXIsIG9mZnNldD86IG51bWJlcik6IG51bWJlcjtcblxuICAvKipcbiAgICogUmV0dXJucyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBbW1N0YW5kYXJkVHhdXS5cbiAgICovXG4gIHRvQnVmZmVyKCk6IEJ1ZmZlciB7XG4gICAgY29uc3QgdHhidWZmOiBCdWZmZXIgPSB0aGlzLnVuc2lnbmVkVHgudG9CdWZmZXIoKTtcbiAgICBsZXQgYnNpemU6IG51bWJlciA9IHR4YnVmZi5sZW5ndGg7XG4gICAgY29uc3QgY3JlZGxlbjogQnVmZmVyID0gQnVmZmVyLmFsbG9jKDQpO1xuICAgIGNyZWRsZW4ud3JpdGVVSW50MzJCRSh0aGlzLmNyZWRlbnRpYWxzLmxlbmd0aCwgMCk7XG4gICAgY29uc3QgYmFycjogQnVmZmVyW10gPSBbdHhidWZmLCBjcmVkbGVuXTtcbiAgICBic2l6ZSArPSBjcmVkbGVuLmxlbmd0aDtcbiAgICB0aGlzLmNyZWRlbnRpYWxzLmZvckVhY2goKGNyZWRlbnRpYWw6IENyZWRlbnRpYWwpID0+IHtcbiAgICAgIGNvbnN0IGNyZWRpZDogQnVmZmVyID0gQnVmZmVyLmFsbG9jKDQpO1xuICAgICAgY3JlZGlkLndyaXRlVUludDMyQkUoY3JlZGVudGlhbC5nZXRDcmVkZW50aWFsSUQoKSwgMCk7XG4gICAgICBiYXJyLnB1c2goY3JlZGlkKTtcbiAgICAgIGJzaXplICs9IGNyZWRpZC5sZW5ndGg7XG4gICAgICBjb25zdCBjcmVkYnVmZjogQnVmZmVyID0gY3JlZGVudGlhbC50b0J1ZmZlcigpO1xuICAgICAgYnNpemUgKz0gY3JlZGJ1ZmYubGVuZ3RoO1xuICAgICAgYmFyci5wdXNoKGNyZWRidWZmKTtcbiAgICB9KTtcbiAgICBjb25zdCBidWZmOiBCdWZmZXIgPSBCdWZmZXIuY29uY2F0KGJhcnIsIGJzaXplKTtcbiAgICByZXR1cm4gYnVmZjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUYWtlcyBhIGJhc2UtNTggc3RyaW5nIGNvbnRhaW5pbmcgYW4gW1tTdGFuZGFyZFR4XV0sIHBhcnNlcyBpdCwgcG9wdWxhdGVzIHRoZSBjbGFzcywgYW5kIHJldHVybnMgdGhlIGxlbmd0aCBvZiB0aGUgVHggaW4gYnl0ZXMuXG4gICAqXG4gICAqIEBwYXJhbSBzZXJpYWxpemVkIEEgYmFzZS01OCBzdHJpbmcgY29udGFpbmluZyBhIHJhdyBbW1N0YW5kYXJkVHhdXVxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgbGVuZ3RoIG9mIHRoZSByYXcgW1tTdGFuZGFyZFR4XV1cbiAgICpcbiAgICogQHJlbWFya3NcbiAgICogdW5saWtlIG1vc3QgZnJvbVN0cmluZ3MsIGl0IGV4cGVjdHMgdGhlIHN0cmluZyB0byBiZSBzZXJpYWxpemVkIGluIGNiNTggZm9ybWF0XG4gICAqL1xuICBmcm9tU3RyaW5nKHNlcmlhbGl6ZWQ6IHN0cmluZyk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZnJvbUJ1ZmZlcihiaW50b29scy5jYjU4RGVjb2RlKHNlcmlhbGl6ZWQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY2I1OCByZXByZXNlbnRhdGlvbiBvZiB0aGUgW1tTdGFuZGFyZFR4XV0uXG4gICAqXG4gICAqIEByZW1hcmtzXG4gICAqIHVubGlrZSBtb3N0IHRvU3RyaW5ncywgdGhpcyByZXR1cm5zIGluIGNiNTggc2VyaWFsaXphdGlvbiBmb3JtYXRcbiAgICovXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGJpbnRvb2xzLmNiNThFbmNvZGUodGhpcy50b0J1ZmZlcigpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGFzcyByZXByZXNlbnRpbmcgYSBzaWduZWQgdHJhbnNhY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB1bnNpZ25lZFR4IE9wdGlvbmFsIFtbU3RhbmRhcmRVbnNpZ25lZFR4XV1cbiAgICogQHBhcmFtIHNpZ25hdHVyZXMgT3B0aW9uYWwgYXJyYXkgb2YgW1tDcmVkZW50aWFsXV1zXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih1bnNpZ25lZFR4OiBTVUJUeCA9IHVuZGVmaW5lZCwgY3JlZGVudGlhbHM6IENyZWRlbnRpYWxbXSA9IHVuZGVmaW5lZCkge1xuICAgIHN1cGVyKCk7XG4gICAgaWYgKHR5cGVvZiB1bnNpZ25lZFR4ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy51bnNpZ25lZFR4ID0gdW5zaWduZWRUeDtcbiAgICAgIGlmICh0eXBlb2YgY3JlZGVudGlhbHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBjcmVkZW50aWFscztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ==","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExportTx = void 0;\n/**\n * @packageDocumentation\n * @module API-PlatformVM-ExportTx\n */\nconst buffer_1 = require(\"buffer/\");\nconst bintools_1 = __importDefault(require(\"../../utils/bintools\"));\nconst constants_1 = require(\"./constants\");\nconst outputs_1 = require(\"./outputs\");\nconst basetx_1 = require(\"./basetx\");\nconst constants_2 = require(\"../../utils/constants\");\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nconst serialization_1 = require(\"../../utils/serialization\");\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\nconst serializer = serialization_1.Serialization.getInstance();\n/**\n * Class representing an unsigned Export transaction.\n */\nclass ExportTx extends basetx_1.BaseTx {\n    /**\n     * Class representing an unsigned Export transaction.\n     *\n     * @param networkid Optional networkid, [[DefaultNetworkID]]\n     * @param blockchainid Optional blockchainid, default Buffer.alloc(32, 16)\n     * @param outs Optional array of the [[TransferableOutput]]s\n     * @param ins Optional array of the [[TransferableInput]]s\n     * @param memo Optional {@link https://github.com/feross/buffer|Buffer} for the memo field\n     * @param destinationChain Optional chainid which identifies where the funds will send to.\n     * @param exportOuts Array of [[TransferableOutputs]]s used in the transaction\n     */\n    constructor(networkid = constants_2.DefaultNetworkID, blockchainid = buffer_1.Buffer.alloc(32, 16), outs = undefined, ins = undefined, memo = undefined, destinationChain = undefined, exportOuts = undefined) {\n        super(networkid, blockchainid, outs, ins, memo);\n        this._typeName = \"ExportTx\";\n        this._typeID = constants_1.PlatformVMConstants.EXPORTTX;\n        this.destinationChain = buffer_1.Buffer.alloc(32);\n        this.numOuts = buffer_1.Buffer.alloc(4);\n        this.exportOuts = [];\n        /**\n         * Returns the id of the [[ExportTx]]\n         */\n        this.getTxType = () => {\n            return constants_1.PlatformVMConstants.EXPORTTX;\n        };\n        this.destinationChain = destinationChain; //do not correct, it should bomb on toBuffer if not provided\n        if (typeof exportOuts !== 'undefined' && Array.isArray(exportOuts)) {\n            for (let i = 0; i < exportOuts.length; i++) {\n                if (!(exportOuts[i] instanceof outputs_1.TransferableOutput)) {\n                    throw new Error(\"Error - ExportTx.constructor: invalid TransferableOutput in array parameter 'exportOuts'\");\n                }\n            }\n            this.exportOuts = exportOuts;\n        }\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"destinationChain\": serializer.encoder(this.destinationChain, encoding, \"Buffer\", \"cb58\"), \"exportOuts\": this.exportOuts.map((e) => e.serialize(encoding)) });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.destinationChain = serializer.decoder(fields[\"destinationChain\"], encoding, \"cb58\", \"Buffer\", 32);\n        this.exportOuts = fields[\"exportOuts\"].map((e) => {\n            let eo = new outputs_1.TransferableOutput();\n            eo.deserialize(e, encoding);\n            return eo;\n        });\n        this.numOuts = buffer_1.Buffer.alloc(4);\n        this.numOuts.writeUInt32BE(this.exportOuts.length, 0);\n    }\n    /**\n     * Returns an array of [[TransferableOutput]]s in this transaction.\n     */\n    getExportOutputs() {\n        return this.exportOuts;\n    }\n    /**\n     * Returns the total exported amount as a {@link https://github.com/indutny/bn.js/|BN}.\n     */\n    getExportTotal() {\n        let val = new bn_js_1.default(0);\n        for (let i = 0; i < this.exportOuts.length; i++) {\n            val = val.add(this.exportOuts[i].getOutput().getAmount());\n        }\n        return val;\n    }\n    getTotalOuts() {\n        return [...this.getOuts(), ...this.getExportOutputs()];\n    }\n    /**\n     * Takes a {@link https://github.com/feross/buffer|Buffer} containing an [[ExportTx]], parses it, populates the class, and returns the length of the [[ExportTx]] in bytes.\n     *\n     * @param bytes A {@link https://github.com/feross/buffer|Buffer} containing a raw [[ExportTx]]\n     *\n     * @returns The length of the raw [[ExportTx]]\n     *\n     * @remarks assume not-checksummed\n     */\n    fromBuffer(bytes, offset = 0) {\n        offset = super.fromBuffer(bytes, offset);\n        this.destinationChain = bintools.copyFrom(bytes, offset, offset + 32);\n        offset += 32;\n        this.numOuts = bintools.copyFrom(bytes, offset, offset + 4);\n        offset += 4;\n        const numOuts = this.numOuts.readUInt32BE(0);\n        for (let i = 0; i < numOuts; i++) {\n            const anOut = new outputs_1.TransferableOutput();\n            offset = anOut.fromBuffer(bytes, offset);\n            this.exportOuts.push(anOut);\n        }\n        return offset;\n    }\n    /**\n     * Returns a {@link https://github.com/feross/buffer|Buffer} representation of the [[ExportTx]].\n     */\n    toBuffer() {\n        if (typeof this.destinationChain === \"undefined\") {\n            throw new Error(\"ExportTx.toBuffer -- this.destinationChain is undefined\");\n        }\n        this.numOuts.writeUInt32BE(this.exportOuts.length, 0);\n        let barr = [super.toBuffer(), this.destinationChain, this.numOuts];\n        this.exportOuts = this.exportOuts.sort(outputs_1.TransferableOutput.comparator());\n        for (let i = 0; i < this.exportOuts.length; i++) {\n            barr.push(this.exportOuts[i].toBuffer());\n        }\n        return buffer_1.Buffer.concat(barr);\n    }\n    clone() {\n        let newbase = new ExportTx();\n        newbase.fromBuffer(this.toBuffer());\n        return newbase;\n    }\n    create(...args) {\n        return new ExportTx(...args);\n    }\n}\nexports.ExportTx = ExportTx;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhwb3J0dHguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvYXBpcy9wbGF0Zm9ybXZtL2V4cG9ydHR4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7R0FHRztBQUNILG9DQUFpQztBQUNqQyxvRUFBNEM7QUFDNUMsMkNBQWtEO0FBQ2xELHVDQUErQztBQUUvQyxxQ0FBa0M7QUFDbEMscURBQXlEO0FBQ3pELGtEQUF1QjtBQUV2Qiw2REFBOEU7QUFFOUU7O0dBRUc7QUFDSCxNQUFNLFFBQVEsR0FBRyxrQkFBUSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQ3hDLE1BQU0sVUFBVSxHQUFHLDZCQUFhLENBQUMsV0FBVyxFQUFFLENBQUM7QUFFL0M7O0dBRUc7QUFDSCxNQUFhLFFBQVMsU0FBUSxlQUFNO0lBMkdsQzs7Ozs7Ozs7OztPQVVHO0lBQ0gsWUFDRSxZQUFtQiw0QkFBZ0IsRUFBRSxlQUFzQixlQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFDL0UsT0FBaUMsU0FBUyxFQUFFLE1BQStCLFNBQVMsRUFDcEYsT0FBYyxTQUFTLEVBQUUsbUJBQTBCLFNBQVMsRUFBRSxhQUF1QyxTQUFTO1FBRTlHLEtBQUssQ0FBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7UUExSHhDLGNBQVMsR0FBRyxVQUFVLENBQUM7UUFDdkIsWUFBTyxHQUFHLCtCQUFtQixDQUFDLFFBQVEsQ0FBQztRQXNCdkMscUJBQWdCLEdBQVUsZUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUMzQyxZQUFPLEdBQVUsZUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQyxlQUFVLEdBQTZCLEVBQUUsQ0FBQztRQUVwRDs7V0FFRztRQUNILGNBQVMsR0FBRyxHQUFVLEVBQUU7WUFDdEIsT0FBTywrQkFBbUIsQ0FBQyxR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SSxDQUFDLGdCQUFnQixFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNqRixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLDRCQUFrQixDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUM7UUFDeEUsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQzVDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1NBQzVDO1FBQ0QsT0FBTyxlQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFRCxLQUFLO1FBQ0gsSUFBSSxPQUFPLEdBQVksSUFBSSxRQUFRLEVBQUUsQ0FBQztRQUN0QyxPQUFPLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1FBQ3BDLE9BQU8sT0FBZSxDQUFDO0lBQ3pCLENBQUM7SUFFRCxNQUFNLENBQUMsR0FBRyxJQUFVO1FBQ2xCLE9BQU8sSUFBSSxRQUFRLENBQUMsR0FBRyxJQUFJLENBQVMsQ0FBQztJQUN2QyxDQUFDO0NBNkJGO0FBdElELDRCQXNJQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKiBAbW9kdWxlIEFQSS1QbGF0Zm9ybVZNLUV4cG9ydFR4XG4gKi9cbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ2J1ZmZlci8nO1xuaW1wb3J0IEJpblRvb2xzIGZyb20gJy4uLy4uL3V0aWxzL2JpbnRvb2xzJztcbmltcG9ydCB7IFBsYXRmb3JtVk1Db25zdGFudHMgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBUcmFuc2ZlcmFibGVPdXRwdXQgfSBmcm9tICcuL291dHB1dHMnO1xuaW1wb3J0IHsgVHJhbnNmZXJhYmxlSW5wdXQgfSBmcm9tICcuL2lucHV0cyc7XG5pbXBvcnQgeyBCYXNlVHggfSBmcm9tICcuL2Jhc2V0eCc7XG5pbXBvcnQgeyBEZWZhdWx0TmV0d29ya0lEIH0gZnJvbSAnLi4vLi4vdXRpbHMvY29uc3RhbnRzJztcbmltcG9ydCBCTiBmcm9tICdibi5qcyc7XG5pbXBvcnQgeyBBbW91bnRPdXRwdXQgfSBmcm9tICcuLi9wbGF0Zm9ybXZtL291dHB1dHMnO1xuaW1wb3J0IHsgU2VyaWFsaXphdGlvbiwgU2VyaWFsaXplZEVuY29kaW5nIH0gZnJvbSAnLi4vLi4vdXRpbHMvc2VyaWFsaXphdGlvbic7XG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5jb25zdCBiaW50b29scyA9IEJpblRvb2xzLmdldEluc3RhbmNlKCk7XG5jb25zdCBzZXJpYWxpemVyID0gU2VyaWFsaXphdGlvbi5nZXRJbnN0YW5jZSgpO1xuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhbiB1bnNpZ25lZCBFeHBvcnQgdHJhbnNhY3Rpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBFeHBvcnRUeCBleHRlbmRzIEJhc2VUeCB7XG4gIHByb3RlY3RlZCBfdHlwZU5hbWUgPSBcIkV4cG9ydFR4XCI7XG4gIHByb3RlY3RlZCBfdHlwZUlEID0gUGxhdGZvcm1WTUNvbnN0YW50cy5FWFBPUlRUWDtcblxuICBzZXJpYWxpemUoZW5jb2Rpbmc6U2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIik6b2JqZWN0IHtcbiAgICBsZXQgZmllbGRzOm9iamVjdCA9IHN1cGVyLnNlcmlhbGl6ZShlbmNvZGluZyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmZpZWxkcyxcbiAgICAgIFwiZGVzdGluYXRpb25DaGFpblwiOiBzZXJpYWxpemVyLmVuY29kZXIodGhpcy5kZXN0aW5hdGlvbkNoYWluLCBlbmNvZGluZywgXCJCdWZmZXJcIiwgXCJjYjU4XCIpLFxuICAgICAgXCJleHBvcnRPdXRzXCI6IHRoaXMuZXhwb3J0T3V0cy5tYXAoKGUpID0+IGUuc2VyaWFsaXplKGVuY29kaW5nKSlcbiAgICB9XG4gIH07XG4gIGRlc2VyaWFsaXplKGZpZWxkczpvYmplY3QsIGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICBzdXBlci5kZXNlcmlhbGl6ZShmaWVsZHMsIGVuY29kaW5nKTtcbiAgICB0aGlzLmRlc3RpbmF0aW9uQ2hhaW4gPSBzZXJpYWxpemVyLmRlY29kZXIoZmllbGRzW1wiZGVzdGluYXRpb25DaGFpblwiXSwgZW5jb2RpbmcsIFwiY2I1OFwiLCBcIkJ1ZmZlclwiLCAzMik7XG4gICAgdGhpcy5leHBvcnRPdXRzID0gZmllbGRzW1wiZXhwb3J0T3V0c1wiXS5tYXAoKGU6b2JqZWN0KSA9PiB7XG4gICAgICBsZXQgZW86VHJhbnNmZXJhYmxlT3V0cHV0ID0gbmV3IFRyYW5zZmVyYWJsZU91dHB1dCgpO1xuICAgICAgZW8uZGVzZXJpYWxpemUoZSwgZW5jb2RpbmcpO1xuICAgICAgcmV0dXJuIGVvO1xuICAgIH0pO1xuICAgIHRoaXMubnVtT3V0cyA9IEJ1ZmZlci5hbGxvYyg0KTtcbiAgICB0aGlzLm51bU91dHMud3JpdGVVSW50MzJCRSh0aGlzLmV4cG9ydE91dHMubGVuZ3RoLCAwKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBkZXN0aW5hdGlvbkNoYWluOkJ1ZmZlciA9IEJ1ZmZlci5hbGxvYygzMik7XG4gIHByb3RlY3RlZCBudW1PdXRzOkJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyg0KTtcbiAgcHJvdGVjdGVkIGV4cG9ydE91dHM6QXJyYXk8VHJhbnNmZXJhYmxlT3V0cHV0PiA9IFtdO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBpZCBvZiB0aGUgW1tFeHBvcnRUeF1dXG4gICAqL1xuICBnZXRUeFR5cGUgPSAoKTpudW1iZXIgPT4ge1xuICAgIHJldHVybiBQbGF0Zm9ybVZNQ29uc3RhbnRzLkVYUE9SVFRYO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gYXJyYXkgb2YgW1tUcmFuc2ZlcmFibGVPdXRwdXRdXXMgaW4gdGhpcyB0cmFuc2FjdGlvbi5cbiAgICovXG4gIGdldEV4cG9ydE91dHB1dHMoKTpBcnJheTxUcmFuc2ZlcmFibGVPdXRwdXQ+IHtcbiAgICByZXR1cm4gdGhpcy5leHBvcnRPdXRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHRvdGFsIGV4cG9ydGVkIGFtb3VudCBhcyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vaW5kdXRueS9ibi5qcy98Qk59LlxuICAgKi9cbiAgZ2V0RXhwb3J0VG90YWwoKTpCTiB7XG4gICAgbGV0IHZhbDpCTiA9IG5ldyBCTigwKTtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5leHBvcnRPdXRzLmxlbmd0aDsgaSsrKXtcbiAgICAgIHZhbCA9IHZhbC5hZGQoKHRoaXMuZXhwb3J0T3V0c1tpXS5nZXRPdXRwdXQoKSBhcyBBbW91bnRPdXRwdXQpLmdldEFtb3VudCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuXG4gIGdldFRvdGFsT3V0cygpOkFycmF5PFRyYW5zZmVyYWJsZU91dHB1dD4ge1xuICAgIHJldHVybiBbLi4udGhpcy5nZXRPdXRzKCkgYXMgQXJyYXk8VHJhbnNmZXJhYmxlT3V0cHV0PiwgLi4udGhpcy5nZXRFeHBvcnRPdXRwdXRzKCldO1xuICB9XG5cbiAgLyoqXG4gICAqIFRha2VzIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gY29udGFpbmluZyBhbiBbW0V4cG9ydFR4XV0sIHBhcnNlcyBpdCwgcG9wdWxhdGVzIHRoZSBjbGFzcywgYW5kIHJldHVybnMgdGhlIGxlbmd0aCBvZiB0aGUgW1tFeHBvcnRUeF1dIGluIGJ5dGVzLlxuICAgKlxuICAgKiBAcGFyYW0gYnl0ZXMgQSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBjb250YWluaW5nIGEgcmF3IFtbRXhwb3J0VHhdXVxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgbGVuZ3RoIG9mIHRoZSByYXcgW1tFeHBvcnRUeF1dXG4gICAqXG4gICAqIEByZW1hcmtzIGFzc3VtZSBub3QtY2hlY2tzdW1tZWRcbiAgICovXG4gIGZyb21CdWZmZXIoYnl0ZXM6QnVmZmVyLCBvZmZzZXQ6bnVtYmVyID0gMCk6bnVtYmVyIHtcbiAgICBvZmZzZXQgPSBzdXBlci5mcm9tQnVmZmVyKGJ5dGVzLCBvZmZzZXQpO1xuICAgIHRoaXMuZGVzdGluYXRpb25DaGFpbiA9IGJpbnRvb2xzLmNvcHlGcm9tKGJ5dGVzLCBvZmZzZXQsIG9mZnNldCArIDMyKTtcbiAgICBvZmZzZXQgKz0gMzI7XG4gICAgdGhpcy5udW1PdXRzID0gYmludG9vbHMuY29weUZyb20oYnl0ZXMsIG9mZnNldCwgb2Zmc2V0ICsgNCk7XG4gICAgb2Zmc2V0ICs9IDQ7XG4gICAgY29uc3QgbnVtT3V0czpudW1iZXIgPSB0aGlzLm51bU91dHMucmVhZFVJbnQzMkJFKDApO1xuICAgIGZvciAobGV0IGk6bnVtYmVyID0gMDsgaSA8IG51bU91dHM7IGkrKykge1xuICAgICAgY29uc3QgYW5PdXQ6VHJhbnNmZXJhYmxlT3V0cHV0ID0gbmV3IFRyYW5zZmVyYWJsZU91dHB1dCgpO1xuICAgICAgb2Zmc2V0ID0gYW5PdXQuZnJvbUJ1ZmZlcihieXRlcywgb2Zmc2V0KTtcbiAgICAgIHRoaXMuZXhwb3J0T3V0cy5wdXNoKGFuT3V0KTtcbiAgICB9XG4gICAgcmV0dXJuIG9mZnNldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gcmVwcmVzZW50YXRpb24gb2YgdGhlIFtbRXhwb3J0VHhdXS5cbiAgICovXG4gIHRvQnVmZmVyKCk6QnVmZmVyIHtcbiAgICBpZih0eXBlb2YgdGhpcy5kZXN0aW5hdGlvbkNoYWluID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFeHBvcnRUeC50b0J1ZmZlciAtLSB0aGlzLmRlc3RpbmF0aW9uQ2hhaW4gaXMgdW5kZWZpbmVkXCIpO1xuICAgIH1cbiAgICB0aGlzLm51bU91dHMud3JpdGVVSW50MzJCRSh0aGlzLmV4cG9ydE91dHMubGVuZ3RoLCAwKTtcbiAgICBsZXQgYmFycjpBcnJheTxCdWZmZXI+ID0gW3N1cGVyLnRvQnVmZmVyKCksIHRoaXMuZGVzdGluYXRpb25DaGFpbiwgdGhpcy5udW1PdXRzXTtcbiAgICB0aGlzLmV4cG9ydE91dHMgPSB0aGlzLmV4cG9ydE91dHMuc29ydChUcmFuc2ZlcmFibGVPdXRwdXQuY29tcGFyYXRvcigpKTtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5leHBvcnRPdXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJhcnIucHVzaCh0aGlzLmV4cG9ydE91dHNbaV0udG9CdWZmZXIoKSk7XG4gICAgfVxuICAgIHJldHVybiBCdWZmZXIuY29uY2F0KGJhcnIpO1xuICB9XG5cbiAgY2xvbmUoKTp0aGlzIHtcbiAgICBsZXQgbmV3YmFzZTpFeHBvcnRUeCA9IG5ldyBFeHBvcnRUeCgpO1xuICAgIG5ld2Jhc2UuZnJvbUJ1ZmZlcih0aGlzLnRvQnVmZmVyKCkpO1xuICAgIHJldHVybiBuZXdiYXNlIGFzIHRoaXM7XG4gIH1cblxuICBjcmVhdGUoLi4uYXJnczphbnlbXSk6dGhpcyB7XG4gICAgcmV0dXJuIG5ldyBFeHBvcnRUeCguLi5hcmdzKSBhcyB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIENsYXNzIHJlcHJlc2VudGluZyBhbiB1bnNpZ25lZCBFeHBvcnQgdHJhbnNhY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSBuZXR3b3JraWQgT3B0aW9uYWwgbmV0d29ya2lkLCBbW0RlZmF1bHROZXR3b3JrSURdXVxuICAgKiBAcGFyYW0gYmxvY2tjaGFpbmlkIE9wdGlvbmFsIGJsb2NrY2hhaW5pZCwgZGVmYXVsdCBCdWZmZXIuYWxsb2MoMzIsIDE2KVxuICAgKiBAcGFyYW0gb3V0cyBPcHRpb25hbCBhcnJheSBvZiB0aGUgW1tUcmFuc2ZlcmFibGVPdXRwdXRdXXNcbiAgICogQHBhcmFtIGlucyBPcHRpb25hbCBhcnJheSBvZiB0aGUgW1tUcmFuc2ZlcmFibGVJbnB1dF1dc1xuICAgKiBAcGFyYW0gbWVtbyBPcHRpb25hbCB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBmb3IgdGhlIG1lbW8gZmllbGRcbiAgICogQHBhcmFtIGRlc3RpbmF0aW9uQ2hhaW4gT3B0aW9uYWwgY2hhaW5pZCB3aGljaCBpZGVudGlmaWVzIHdoZXJlIHRoZSBmdW5kcyB3aWxsIHNlbmQgdG8uXG4gICAqIEBwYXJhbSBleHBvcnRPdXRzIEFycmF5IG9mIFtbVHJhbnNmZXJhYmxlT3V0cHV0c11dcyB1c2VkIGluIHRoZSB0cmFuc2FjdGlvblxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgbmV0d29ya2lkOm51bWJlciA9IERlZmF1bHROZXR3b3JrSUQsIGJsb2NrY2hhaW5pZDpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoMzIsIDE2KSwgXG4gICAgb3V0czpBcnJheTxUcmFuc2ZlcmFibGVPdXRwdXQ+ID0gdW5kZWZpbmVkLCBpbnM6QXJyYXk8VHJhbnNmZXJhYmxlSW5wdXQ+ID0gdW5kZWZpbmVkLFxuICAgIG1lbW86QnVmZmVyID0gdW5kZWZpbmVkLCBkZXN0aW5hdGlvbkNoYWluOkJ1ZmZlciA9IHVuZGVmaW5lZCwgZXhwb3J0T3V0czpBcnJheTxUcmFuc2ZlcmFibGVPdXRwdXQ+ID0gdW5kZWZpbmVkXG4gICkge1xuICAgIHN1cGVyKG5ldHdvcmtpZCwgYmxvY2tjaGFpbmlkLCBvdXRzLCBpbnMsIG1lbW8pO1xuICAgIHRoaXMuZGVzdGluYXRpb25DaGFpbiA9IGRlc3RpbmF0aW9uQ2hhaW47IC8vZG8gbm90IGNvcnJlY3QsIGl0IHNob3VsZCBib21iIG9uIHRvQnVmZmVyIGlmIG5vdCBwcm92aWRlZFxuICAgIGlmICh0eXBlb2YgZXhwb3J0T3V0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgQXJyYXkuaXNBcnJheShleHBvcnRPdXRzKSkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBleHBvcnRPdXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICghKGV4cG9ydE91dHNbaV0gaW5zdGFuY2VvZiBUcmFuc2ZlcmFibGVPdXRwdXQpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgLSBFeHBvcnRUeC5jb25zdHJ1Y3RvcjogaW52YWxpZCBUcmFuc2ZlcmFibGVPdXRwdXQgaW4gYXJyYXkgcGFyYW1ldGVyICdleHBvcnRPdXRzJ1wiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5leHBvcnRPdXRzID0gZXhwb3J0T3V0cztcbiAgICB9XG4gIH1cbn0iXX0=","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./api\"), exports);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvYXBpcy9tZXRyaWNzL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBLHdDQUFzQiIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vYXBpJztcbiJdfQ==","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Tx = exports.UnsignedTx = exports.SelectTxClass = void 0;\n/**\n * @packageDocumentation\n * @module API-PlatformVM-Transactions\n */\nconst buffer_1 = require(\"buffer/\");\nconst bintools_1 = __importDefault(require(\"../../utils/bintools\"));\nconst constants_1 = require(\"./constants\");\nconst credentials_1 = require(\"./credentials\");\nconst tx_1 = require(\"../../common/tx\");\nconst create_hash_1 = __importDefault(require(\"create-hash\"));\nconst basetx_1 = require(\"./basetx\");\nconst importtx_1 = require(\"./importtx\");\nconst exporttx_1 = require(\"./exporttx\");\nconst serialization_1 = require(\"../../utils/serialization\");\nconst validationtx_1 = require(\"./validationtx\");\nconst createsubnettx_1 = require(\"./createsubnettx\");\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\nconst serializer = serialization_1.Serialization.getInstance();\n/**\n * Takes a buffer representing the output and returns the proper [[BaseTx]] instance.\n *\n * @param txtype The id of the transaction type\n *\n * @returns An instance of an [[BaseTx]]-extended class.\n */\nexports.SelectTxClass = (txtype, ...args) => {\n    if (txtype === constants_1.PlatformVMConstants.BASETX) {\n        return new basetx_1.BaseTx(...args);\n    }\n    else if (txtype === constants_1.PlatformVMConstants.IMPORTTX) {\n        return new importtx_1.ImportTx(...args);\n    }\n    else if (txtype === constants_1.PlatformVMConstants.EXPORTTX) {\n        return new exporttx_1.ExportTx(...args);\n    }\n    else if (txtype === constants_1.PlatformVMConstants.ADDDELEGATORTX) {\n        return new validationtx_1.AddDelegatorTx(...args);\n    }\n    else if (txtype === constants_1.PlatformVMConstants.ADDVALIDATORTX) {\n        return new validationtx_1.AddValidatorTx(...args);\n    }\n    else if (txtype === constants_1.PlatformVMConstants.CREATESUBNETTX) {\n        return new createsubnettx_1.CreateSubnetTx(...args);\n    }\n    /* istanbul ignore next */\n    throw new Error(`Error - SelectTxClass: unknown txtype ${txtype}`);\n};\nclass UnsignedTx extends tx_1.StandardUnsignedTx {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"UnsignedTx\";\n        this._typeID = undefined;\n    }\n    //serialize is inherited\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.transaction = exports.SelectTxClass(fields[\"transaction\"][\"_typeID\"]);\n        this.transaction.deserialize(fields[\"transaction\"], encoding);\n    }\n    getTransaction() {\n        return this.transaction;\n    }\n    fromBuffer(bytes, offset = 0) {\n        this.codecid = bintools.copyFrom(bytes, offset, offset + 2).readUInt16BE(0);\n        offset += 2;\n        const txtype = bintools.copyFrom(bytes, offset, offset + 4).readUInt32BE(0);\n        offset += 4;\n        this.transaction = exports.SelectTxClass(txtype);\n        return this.transaction.fromBuffer(bytes, offset);\n    }\n    /**\n     * Signs this [[UnsignedTx]] and returns signed [[StandardTx]]\n     *\n     * @param kc An [[KeyChain]] used in signing\n     *\n     * @returns A signed [[StandardTx]]\n     */\n    sign(kc) {\n        const txbuff = this.toBuffer();\n        const msg = buffer_1.Buffer.from(create_hash_1.default('sha256').update(txbuff).digest());\n        const sigs = this.transaction.sign(msg, kc);\n        return new Tx(this, sigs);\n    }\n}\nexports.UnsignedTx = UnsignedTx;\nclass Tx extends tx_1.StandardTx {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"Tx\";\n        this._typeID = undefined;\n    }\n    //serialize is inherited\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.unsignedTx = new UnsignedTx();\n        this.unsignedTx.deserialize(fields[\"unsignedTx\"], encoding);\n        this.credentials = [];\n        for (let i = 0; i < fields[\"credentials\"].length; i++) {\n            const cred = credentials_1.SelectCredentialClass(fields[\"credentials\"][i][\"_typeID\"]);\n            cred.deserialize(fields[\"credentials\"][i], encoding);\n            this.credentials.push(cred);\n        }\n    }\n    /**\n     * Takes a {@link https://github.com/feross/buffer|Buffer} containing an [[Tx]], parses it, populates the class, and returns the length of the Tx in bytes.\n     *\n     * @param bytes A {@link https://github.com/feross/buffer|Buffer} containing a raw [[Tx]]\n     * @param offset A number representing the starting point of the bytes to begin parsing\n     *\n     * @returns The length of the raw [[Tx]]\n     */\n    fromBuffer(bytes, offset = 0) {\n        this.unsignedTx = new UnsignedTx();\n        offset = this.unsignedTx.fromBuffer(bytes, offset);\n        const numcreds = bintools.copyFrom(bytes, offset, offset + 4).readUInt32BE(0);\n        offset += 4;\n        this.credentials = [];\n        for (let i = 0; i < numcreds; i++) {\n            const credid = bintools.copyFrom(bytes, offset, offset + 4).readUInt32BE(0);\n            offset += 4;\n            const cred = credentials_1.SelectCredentialClass(credid);\n            offset = cred.fromBuffer(bytes, offset);\n            this.credentials.push(cred);\n        }\n        return offset;\n    }\n}\nexports.Tx = Tx;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvYXBpcy9wbGF0Zm9ybXZtL3R4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7R0FHRztBQUNILG9DQUFpQztBQUNqQyxvRUFBNEM7QUFDNUMsMkNBQWtEO0FBQ2xELCtDQUFzRDtBQUV0RCx3Q0FBaUU7QUFFakUsOERBQXFDO0FBQ3JDLHFDQUFrQztBQUNsQyx5Q0FBc0M7QUFDdEMseUNBQXNDO0FBQ3RDLDZEQUE4RTtBQUM5RSxpREFBZ0U7QUFDaEUscURBQWtEO0FBRWxEOztHQUVHO0FBQ0gsTUFBTSxRQUFRLEdBQUcsa0JBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUN4QyxNQUFNLFVBQVUsR0FBRyw2QkFBYSxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBRS9DOzs7Ozs7R0FNRztBQUNVLFFBQUEsYUFBYSxHQUFHLENBQUMsTUFBYSxFQUFFLEdBQUcsSUFBZSxFQUFTLEVBQUU7SUFDeEUsSUFBSSxNQUFNLEtBQUssK0JBQW1CLENBQUMsTUFBTSxFQUFFO1FBQ3pDLE9BQU8sSUFBSSxlQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztLQUM1QjtTQUFNLElBQUksTUFBTSxLQUFLLCtCQUFtQixDQUFDLFFBQVEsRUFBRTtRQUNsRCxPQUFPLElBQUksbUJBQVEsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO0tBQzlCO1NBQU0sSUFBSSxNQUFNLEtBQUssK0JBQW1CLENBQUMsUUFBUSxFQUFFO1FBQ2xELE9BQU8sSUFBSSxtQkFBUSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7S0FDOUI7U0FBTSxJQUFJLE1BQU0sS0FBSywrQkFBbUIsQ0FBQyxjQUFjLEVBQUU7UUFDeEQsT0FBTyxJQUFJLDZCQUFjLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztLQUNwQztTQUFNLElBQUksTUFBTSxLQUFLLCtCQUFtQixDQUFDLGNBQWMsRUFBRTtRQUN4RCxPQUFPLElBQUksNkJBQWMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO0tBQ3BDO1NBQU0sSUFBSSxNQUFNLEtBQUssK0JBQW1CLENBQUMsY0FBYyxFQUFFO1FBQ3hELE9BQU8sSUFBSSwrQkFBYyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7S0FDcEM7SUFDRCwwQkFBMEI7SUFDMUIsTUFBTSxJQUFJLEtBQUssQ0FBQyx5Q0FBeUMsTUFBTSxFQUFFLENBQUMsQ0FBQztBQUNyRSxDQUFDLENBQUM7QUFFRixNQUFhLFVBQVcsU0FBUSx1QkFBNkM7SUFBN0U7O1FBQ1ksY0FBUyxHQUFHLFlBQVksQ0FBQztRQUN6QixZQUFPLEdBQUcsU0FBUyxDQUFDO0lBb0NoQyxDQUFDO0lBbENDLHdCQUF3QjtJQUV4QixXQUFXLENBQUMsTUFBYSxFQUFFLFdBQThCLEtBQUs7UUFDNUQsS0FBSyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDcEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxxQkFBYSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1FBQ25FLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNoRSxDQUFDO0lBRUQsY0FBYztRQUNaLE9BQU8sSUFBSSxDQUFDLFdBQXFCLENBQUM7SUFDcEMsQ0FBQztJQUVELFVBQVUsQ0FBQyxLQUFZLEVBQUUsU0FBZ0IsQ0FBQztRQUN4QyxJQUFJLENBQUMsT0FBTyxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVFLE1BQU0sSUFBSSxDQUFDLENBQUM7UUFDWixNQUFNLE1BQU0sR0FBVSxRQUFRLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuRixNQUFNLElBQUksQ0FBQyxDQUFDO1FBQ1osSUFBSSxDQUFDLFdBQVcsR0FBRyxxQkFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3pDLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ3BELENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCxJQUFJLENBQUMsRUFBVztRQUNkLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUMvQixNQUFNLEdBQUcsR0FBVSxlQUFNLENBQUMsSUFBSSxDQUFDLHFCQUFVLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7UUFDN0UsTUFBTSxJQUFJLEdBQXFCLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUM5RCxPQUFPLElBQUksRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUM1QixDQUFDO0NBQ0Y7QUF0Q0QsZ0NBc0NDO0FBRUQsTUFBYSxFQUFHLFNBQVEsZUFBeUM7SUFBakU7O1FBQ1ksY0FBUyxHQUFHLElBQUksQ0FBQztRQUNqQixZQUFPLEdBQUcsU0FBUyxDQUFDO0lBd0NoQyxDQUFDO0lBdENDLHdCQUF3QjtJQUV4QixXQUFXLENBQUMsTUFBYSxFQUFFLFdBQThCLEtBQUs7UUFDNUQsS0FBSyxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDcEMsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLFVBQVUsRUFBRSxDQUFDO1FBQ25DLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztRQUM1RCxJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQztRQUN0QixLQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBQztZQUNuRCxNQUFNLElBQUksR0FBYyxtQ0FBcUIsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUNuRixJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztZQUNyRCxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUM3QjtJQUNILENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gsVUFBVSxDQUFDLEtBQVksRUFBRSxTQUFnQixDQUFDO1FBQ3hDLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxVQUFVLEVBQUUsQ0FBQztRQUNuQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ25ELE1BQU0sUUFBUSxHQUFVLFFBQVEsQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JGLE1BQU0sSUFBSSxDQUFDLENBQUM7UUFDWixJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQztRQUN0QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsUUFBUSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ2pDLE1BQU0sTUFBTSxHQUFVLFFBQVEsQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ25GLE1BQU0sSUFBSSxDQUFDLENBQUM7WUFDWixNQUFNLElBQUksR0FBYyxtQ0FBcUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN0RCxNQUFNLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFDeEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDN0I7UUFDRCxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDO0NBRUY7QUExQ0QsZ0JBMENDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqIEBtb2R1bGUgQVBJLVBsYXRmb3JtVk0tVHJhbnNhY3Rpb25zXG4gKi9cbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ2J1ZmZlci8nO1xuaW1wb3J0IEJpblRvb2xzIGZyb20gJy4uLy4uL3V0aWxzL2JpbnRvb2xzJztcbmltcG9ydCB7IFBsYXRmb3JtVk1Db25zdGFudHMgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBTZWxlY3RDcmVkZW50aWFsQ2xhc3MgfSBmcm9tICcuL2NyZWRlbnRpYWxzJztcbmltcG9ydCB7IEtleUNoYWluLCBLZXlQYWlyIH0gZnJvbSAnLi9rZXljaGFpbic7XG5pbXBvcnQgeyBTdGFuZGFyZFR4LCBTdGFuZGFyZFVuc2lnbmVkVHggfSBmcm9tICcuLi8uLi9jb21tb24vdHgnO1xuaW1wb3J0IHsgQ3JlZGVudGlhbCB9IGZyb20gJy4uLy4uL2NvbW1vbi9jcmVkZW50aWFscyc7XG5pbXBvcnQgY3JlYXRlSGFzaCBmcm9tICdjcmVhdGUtaGFzaCc7XG5pbXBvcnQgeyBCYXNlVHggfSBmcm9tICcuL2Jhc2V0eCc7XG5pbXBvcnQgeyBJbXBvcnRUeCB9IGZyb20gJy4vaW1wb3J0dHgnO1xuaW1wb3J0IHsgRXhwb3J0VHggfSBmcm9tICcuL2V4cG9ydHR4JztcbmltcG9ydCB7IFNlcmlhbGl6YXRpb24sIFNlcmlhbGl6ZWRFbmNvZGluZyB9IGZyb20gJy4uLy4uL3V0aWxzL3NlcmlhbGl6YXRpb24nO1xuaW1wb3J0IHsgQWRkRGVsZWdhdG9yVHgsIEFkZFZhbGlkYXRvclR4IH0gZnJvbSAnLi92YWxpZGF0aW9udHgnO1xuaW1wb3J0IHsgQ3JlYXRlU3VibmV0VHggfSBmcm9tICcuL2NyZWF0ZXN1Ym5ldHR4JztcblxuLyoqXG4gKiBAaWdub3JlXG4gKi9cbmNvbnN0IGJpbnRvb2xzID0gQmluVG9vbHMuZ2V0SW5zdGFuY2UoKTtcbmNvbnN0IHNlcmlhbGl6ZXIgPSBTZXJpYWxpemF0aW9uLmdldEluc3RhbmNlKCk7XG5cbi8qKlxuICogVGFrZXMgYSBidWZmZXIgcmVwcmVzZW50aW5nIHRoZSBvdXRwdXQgYW5kIHJldHVybnMgdGhlIHByb3BlciBbW0Jhc2VUeF1dIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB0eHR5cGUgVGhlIGlkIG9mIHRoZSB0cmFuc2FjdGlvbiB0eXBlXG4gKlxuICogQHJldHVybnMgQW4gaW5zdGFuY2Ugb2YgYW4gW1tCYXNlVHhdXS1leHRlbmRlZCBjbGFzcy5cbiAqL1xuZXhwb3J0IGNvbnN0IFNlbGVjdFR4Q2xhc3MgPSAodHh0eXBlOm51bWJlciwgLi4uYXJnczpBcnJheTxhbnk+KTpCYXNlVHggPT4ge1xuICBpZiAodHh0eXBlID09PSBQbGF0Zm9ybVZNQ29uc3RhbnRzLkJBU0VUWCkge1xuICAgIHJldHVybiBuZXcgQmFzZVR4KC4uLmFyZ3MpO1xuICB9IGVsc2UgaWYgKHR4dHlwZSA9PT0gUGxhdGZvcm1WTUNvbnN0YW50cy5JTVBPUlRUWCkge1xuICAgIHJldHVybiBuZXcgSW1wb3J0VHgoLi4uYXJncyk7XG4gIH0gZWxzZSBpZiAodHh0eXBlID09PSBQbGF0Zm9ybVZNQ29uc3RhbnRzLkVYUE9SVFRYKSB7XG4gICAgcmV0dXJuIG5ldyBFeHBvcnRUeCguLi5hcmdzKTtcbiAgfSBlbHNlIGlmICh0eHR5cGUgPT09IFBsYXRmb3JtVk1Db25zdGFudHMuQUREREVMRUdBVE9SVFgpIHtcbiAgICByZXR1cm4gbmV3IEFkZERlbGVnYXRvclR4KC4uLmFyZ3MpO1xuICB9IGVsc2UgaWYgKHR4dHlwZSA9PT0gUGxhdGZvcm1WTUNvbnN0YW50cy5BRERWQUxJREFUT1JUWCkge1xuICAgIHJldHVybiBuZXcgQWRkVmFsaWRhdG9yVHgoLi4uYXJncyk7XG4gIH0gZWxzZSBpZiAodHh0eXBlID09PSBQbGF0Zm9ybVZNQ29uc3RhbnRzLkNSRUFURVNVQk5FVFRYKSB7XG4gICAgcmV0dXJuIG5ldyBDcmVhdGVTdWJuZXRUeCguLi5hcmdzKTtcbiAgfSBcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciAtIFNlbGVjdFR4Q2xhc3M6IHVua25vd24gdHh0eXBlICR7dHh0eXBlfWApO1xufTtcblxuZXhwb3J0IGNsYXNzIFVuc2lnbmVkVHggZXh0ZW5kcyBTdGFuZGFyZFVuc2lnbmVkVHg8S2V5UGFpciwgS2V5Q2hhaW4sIEJhc2VUeD4ge1xuICBwcm90ZWN0ZWQgX3R5cGVOYW1lID0gXCJVbnNpZ25lZFR4XCI7XG4gIHByb3RlY3RlZCBfdHlwZUlEID0gdW5kZWZpbmVkO1xuXG4gIC8vc2VyaWFsaXplIGlzIGluaGVyaXRlZFxuXG4gIGRlc2VyaWFsaXplKGZpZWxkczpvYmplY3QsIGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICBzdXBlci5kZXNlcmlhbGl6ZShmaWVsZHMsIGVuY29kaW5nKTtcbiAgICB0aGlzLnRyYW5zYWN0aW9uID0gU2VsZWN0VHhDbGFzcyhmaWVsZHNbXCJ0cmFuc2FjdGlvblwiXVtcIl90eXBlSURcIl0pO1xuICAgIHRoaXMudHJhbnNhY3Rpb24uZGVzZXJpYWxpemUoZmllbGRzW1widHJhbnNhY3Rpb25cIl0sIGVuY29kaW5nKTtcbiAgfVxuXG4gIGdldFRyYW5zYWN0aW9uKCk6QmFzZVR4e1xuICAgIHJldHVybiB0aGlzLnRyYW5zYWN0aW9uIGFzIEJhc2VUeDtcbiAgfSBcblxuICBmcm9tQnVmZmVyKGJ5dGVzOkJ1ZmZlciwgb2Zmc2V0Om51bWJlciA9IDApOm51bWJlciB7XG4gICAgdGhpcy5jb2RlY2lkID0gYmludG9vbHMuY29weUZyb20oYnl0ZXMsIG9mZnNldCwgb2Zmc2V0ICsgMikucmVhZFVJbnQxNkJFKDApO1xuICAgIG9mZnNldCArPSAyO1xuICAgIGNvbnN0IHR4dHlwZTpudW1iZXIgPSBiaW50b29scy5jb3B5RnJvbShieXRlcywgb2Zmc2V0LCBvZmZzZXQgKyA0KS5yZWFkVUludDMyQkUoMCk7XG4gICAgb2Zmc2V0ICs9IDQ7XG4gICAgdGhpcy50cmFuc2FjdGlvbiA9IFNlbGVjdFR4Q2xhc3ModHh0eXBlKTtcbiAgICByZXR1cm4gdGhpcy50cmFuc2FjdGlvbi5mcm9tQnVmZmVyKGJ5dGVzLCBvZmZzZXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNpZ25zIHRoaXMgW1tVbnNpZ25lZFR4XV0gYW5kIHJldHVybnMgc2lnbmVkIFtbU3RhbmRhcmRUeF1dXG4gICAqXG4gICAqIEBwYXJhbSBrYyBBbiBbW0tleUNoYWluXV0gdXNlZCBpbiBzaWduaW5nXG4gICAqXG4gICAqIEByZXR1cm5zIEEgc2lnbmVkIFtbU3RhbmRhcmRUeF1dXG4gICAqL1xuICBzaWduKGtjOktleUNoYWluKTpUeCB7XG4gICAgY29uc3QgdHhidWZmID0gdGhpcy50b0J1ZmZlcigpO1xuICAgIGNvbnN0IG1zZzpCdWZmZXIgPSBCdWZmZXIuZnJvbShjcmVhdGVIYXNoKCdzaGEyNTYnKS51cGRhdGUodHhidWZmKS5kaWdlc3QoKSk7XG4gICAgY29uc3Qgc2lnczpBcnJheTxDcmVkZW50aWFsPiA9IHRoaXMudHJhbnNhY3Rpb24uc2lnbihtc2csIGtjKTtcbiAgICByZXR1cm4gbmV3IFR4KHRoaXMsIHNpZ3MpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUeCBleHRlbmRzIFN0YW5kYXJkVHg8S2V5UGFpciwgS2V5Q2hhaW4sIFVuc2lnbmVkVHg+IHtcbiAgcHJvdGVjdGVkIF90eXBlTmFtZSA9IFwiVHhcIjtcbiAgcHJvdGVjdGVkIF90eXBlSUQgPSB1bmRlZmluZWQ7XG5cbiAgLy9zZXJpYWxpemUgaXMgaW5oZXJpdGVkXG5cbiAgZGVzZXJpYWxpemUoZmllbGRzOm9iamVjdCwgZW5jb2Rpbmc6U2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIikge1xuICAgIHN1cGVyLmRlc2VyaWFsaXplKGZpZWxkcywgZW5jb2RpbmcpO1xuICAgIHRoaXMudW5zaWduZWRUeCA9IG5ldyBVbnNpZ25lZFR4KCk7XG4gICAgdGhpcy51bnNpZ25lZFR4LmRlc2VyaWFsaXplKGZpZWxkc1tcInVuc2lnbmVkVHhcIl0sIGVuY29kaW5nKTtcbiAgICB0aGlzLmNyZWRlbnRpYWxzID0gW107XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGZpZWxkc1tcImNyZWRlbnRpYWxzXCJdLmxlbmd0aDsgaSsrKXtcbiAgICAgIGNvbnN0IGNyZWQ6Q3JlZGVudGlhbCA9IFNlbGVjdENyZWRlbnRpYWxDbGFzcyhmaWVsZHNbXCJjcmVkZW50aWFsc1wiXVtpXVtcIl90eXBlSURcIl0pO1xuICAgICAgY3JlZC5kZXNlcmlhbGl6ZShmaWVsZHNbXCJjcmVkZW50aWFsc1wiXVtpXSwgZW5jb2RpbmcpO1xuICAgICAgdGhpcy5jcmVkZW50aWFscy5wdXNoKGNyZWQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUYWtlcyBhIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IGNvbnRhaW5pbmcgYW4gW1tUeF1dLCBwYXJzZXMgaXQsIHBvcHVsYXRlcyB0aGUgY2xhc3MsIGFuZCByZXR1cm5zIHRoZSBsZW5ndGggb2YgdGhlIFR4IGluIGJ5dGVzLlxuICAgKlxuICAgKiBAcGFyYW0gYnl0ZXMgQSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBjb250YWluaW5nIGEgcmF3IFtbVHhdXVxuICAgKiBAcGFyYW0gb2Zmc2V0IEEgbnVtYmVyIHJlcHJlc2VudGluZyB0aGUgc3RhcnRpbmcgcG9pbnQgb2YgdGhlIGJ5dGVzIHRvIGJlZ2luIHBhcnNpbmdcbiAgICpcbiAgICogQHJldHVybnMgVGhlIGxlbmd0aCBvZiB0aGUgcmF3IFtbVHhdXVxuICAgKi9cbiAgZnJvbUJ1ZmZlcihieXRlczpCdWZmZXIsIG9mZnNldDpudW1iZXIgPSAwKTpudW1iZXIge1xuICAgIHRoaXMudW5zaWduZWRUeCA9IG5ldyBVbnNpZ25lZFR4KCk7XG4gICAgb2Zmc2V0ID0gdGhpcy51bnNpZ25lZFR4LmZyb21CdWZmZXIoYnl0ZXMsIG9mZnNldCk7XG4gICAgY29uc3QgbnVtY3JlZHM6bnVtYmVyID0gYmludG9vbHMuY29weUZyb20oYnl0ZXMsIG9mZnNldCwgb2Zmc2V0ICsgNCkucmVhZFVJbnQzMkJFKDApO1xuICAgIG9mZnNldCArPSA0O1xuICAgIHRoaXMuY3JlZGVudGlhbHMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWNyZWRzOyBpKyspIHtcbiAgICAgIGNvbnN0IGNyZWRpZDpudW1iZXIgPSBiaW50b29scy5jb3B5RnJvbShieXRlcywgb2Zmc2V0LCBvZmZzZXQgKyA0KS5yZWFkVUludDMyQkUoMCk7XG4gICAgICBvZmZzZXQgKz0gNDtcbiAgICAgIGNvbnN0IGNyZWQ6Q3JlZGVudGlhbCA9IFNlbGVjdENyZWRlbnRpYWxDbGFzcyhjcmVkaWQpO1xuICAgICAgb2Zmc2V0ID0gY3JlZC5mcm9tQnVmZmVyKGJ5dGVzLCBvZmZzZXQpO1xuICAgICAgdGhpcy5jcmVkZW50aWFscy5wdXNoKGNyZWQpO1xuICAgIH1cbiAgICByZXR1cm4gb2Zmc2V0O1xuICB9XG5cbn1cbiJdfQ==","\"use strict\";\n/**\n * @packageDocumentation\n * @module API-PlatformVM-Constants\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PlatformVMConstants = void 0;\nclass PlatformVMConstants {\n}\nexports.PlatformVMConstants = PlatformVMConstants;\nPlatformVMConstants.LATESTCODEC = 0;\nPlatformVMConstants.SECPFXID = 0;\nPlatformVMConstants.SECPXFEROUTPUTID = 7;\nPlatformVMConstants.SUBNETAUTHID = 10;\nPlatformVMConstants.SECPOWNEROUTPUTID = 11;\nPlatformVMConstants.STAKEABLELOCKOUTID = 22;\nPlatformVMConstants.SECPINPUTID = 5;\nPlatformVMConstants.STAKEABLELOCKINID = 21;\nPlatformVMConstants.LOCKEDSTAKEABLES = [PlatformVMConstants.STAKEABLELOCKINID, PlatformVMConstants.STAKEABLELOCKOUTID];\nPlatformVMConstants.BASETX = 0;\nPlatformVMConstants.ADDVALIDATORTX = 12;\nPlatformVMConstants.ADDSUBNETVALIDATORTX = 13;\nPlatformVMConstants.ADDDELEGATORTX = 14;\nPlatformVMConstants.CREATECHAINTX = 15;\nPlatformVMConstants.CREATESUBNETTX = 16;\nPlatformVMConstants.IMPORTTX = 17;\nPlatformVMConstants.EXPORTTX = 18;\nPlatformVMConstants.ADVANCETIMETX = 19;\nPlatformVMConstants.REWARDVALIDATORTX = 20;\nPlatformVMConstants.SECPCREDENTIAL = 9;\nPlatformVMConstants.ASSETIDLEN = 32;\nPlatformVMConstants.BLOCKCHAINIDLEN = 32;\nPlatformVMConstants.SYMBOLMAXLEN = 4;\nPlatformVMConstants.ASSETNAMELEN = 128;\nPlatformVMConstants.ADDRESSLENGTH = 20;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uc3RhbnRzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2FwaXMvcGxhdGZvcm12bS9jb25zdGFudHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7O0FBRUgsTUFBYSxtQkFBbUI7O0FBQWhDLGtEQWtEQztBQWpEUSwrQkFBVyxHQUFVLENBQUMsQ0FBQztBQUV2Qiw0QkFBUSxHQUFVLENBQUMsQ0FBQztBQUVwQixvQ0FBZ0IsR0FBVSxDQUFDLENBQUM7QUFFNUIsZ0NBQVksR0FBVSxFQUFFLENBQUM7QUFFekIscUNBQWlCLEdBQVUsRUFBRSxDQUFDO0FBRTlCLHNDQUFrQixHQUFVLEVBQUUsQ0FBQztBQUUvQiwrQkFBVyxHQUFVLENBQUMsQ0FBQztBQUV2QixxQ0FBaUIsR0FBVSxFQUFFLENBQUM7QUFFOUIsb0NBQWdCLEdBQWlCLENBQUMsbUJBQW1CLENBQUMsaUJBQWlCLEVBQUUsbUJBQW1CLENBQUMsa0JBQWtCLENBQUMsQ0FBQztBQUVqSCwwQkFBTSxHQUFVLENBQUMsQ0FBQztBQUVsQixrQ0FBYyxHQUFVLEVBQUUsQ0FBQztBQUUzQix3Q0FBb0IsR0FBVSxFQUFFLENBQUM7QUFFakMsa0NBQWMsR0FBVSxFQUFFLENBQUM7QUFFM0IsaUNBQWEsR0FBVSxFQUFFLENBQUM7QUFFMUIsa0NBQWMsR0FBVSxFQUFFLENBQUM7QUFFM0IsNEJBQVEsR0FBVSxFQUFFLENBQUM7QUFFckIsNEJBQVEsR0FBVSxFQUFFLENBQUM7QUFFckIsaUNBQWEsR0FBVSxFQUFFLENBQUM7QUFFMUIscUNBQWlCLEdBQVUsRUFBRSxDQUFDO0FBRTlCLGtDQUFjLEdBQVUsQ0FBQyxDQUFDO0FBRTFCLDhCQUFVLEdBQVUsRUFBRSxDQUFDO0FBRXZCLG1DQUFlLEdBQVUsRUFBRSxDQUFDO0FBRTVCLGdDQUFZLEdBQVUsQ0FBQyxDQUFDO0FBRXhCLGdDQUFZLEdBQVUsR0FBRyxDQUFDO0FBRTFCLGlDQUFhLEdBQVUsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqIEBtb2R1bGUgQVBJLVBsYXRmb3JtVk0tQ29uc3RhbnRzXG4gKi9cblxuZXhwb3J0IGNsYXNzIFBsYXRmb3JtVk1Db25zdGFudHMge1xuICBzdGF0aWMgTEFURVNUQ09ERUM6bnVtYmVyID0gMDtcblxuICBzdGF0aWMgU0VDUEZYSUQ6bnVtYmVyID0gMDtcblxuICBzdGF0aWMgU0VDUFhGRVJPVVRQVVRJRDpudW1iZXIgPSA3O1xuICBcbiAgc3RhdGljIFNVQk5FVEFVVEhJRDpudW1iZXIgPSAxMDtcblxuICBzdGF0aWMgU0VDUE9XTkVST1VUUFVUSUQ6bnVtYmVyID0gMTE7XG5cbiAgc3RhdGljIFNUQUtFQUJMRUxPQ0tPVVRJRDpudW1iZXIgPSAyMjtcblxuICBzdGF0aWMgU0VDUElOUFVUSUQ6bnVtYmVyID0gNTtcblxuICBzdGF0aWMgU1RBS0VBQkxFTE9DS0lOSUQ6bnVtYmVyID0gMjE7XG5cbiAgc3RhdGljIExPQ0tFRFNUQUtFQUJMRVM6QXJyYXk8bnVtYmVyPiA9IFtQbGF0Zm9ybVZNQ29uc3RhbnRzLlNUQUtFQUJMRUxPQ0tJTklELCBQbGF0Zm9ybVZNQ29uc3RhbnRzLlNUQUtFQUJMRUxPQ0tPVVRJRF07XG5cbiAgc3RhdGljIEJBU0VUWDpudW1iZXIgPSAwO1xuXG4gIHN0YXRpYyBBRERWQUxJREFUT1JUWDpudW1iZXIgPSAxMjtcblxuICBzdGF0aWMgQUREU1VCTkVUVkFMSURBVE9SVFg6bnVtYmVyID0gMTM7XG5cbiAgc3RhdGljIEFERERFTEVHQVRPUlRYOm51bWJlciA9IDE0O1xuXG4gIHN0YXRpYyBDUkVBVEVDSEFJTlRYOm51bWJlciA9IDE1O1xuXG4gIHN0YXRpYyBDUkVBVEVTVUJORVRUWDpudW1iZXIgPSAxNjtcblxuICBzdGF0aWMgSU1QT1JUVFg6bnVtYmVyID0gMTc7XG5cbiAgc3RhdGljIEVYUE9SVFRYOm51bWJlciA9IDE4O1xuXG4gIHN0YXRpYyBBRFZBTkNFVElNRVRYOm51bWJlciA9IDE5O1xuXG4gIHN0YXRpYyBSRVdBUkRWQUxJREFUT1JUWDpudW1iZXIgPSAyMDtcblxuICBzdGF0aWMgU0VDUENSRURFTlRJQUw6bnVtYmVyID0gOTtcblxuICBzdGF0aWMgQVNTRVRJRExFTjpudW1iZXIgPSAzMjtcblxuICBzdGF0aWMgQkxPQ0tDSEFJTklETEVOOm51bWJlciA9IDMyO1xuXG4gIHN0YXRpYyBTWU1CT0xNQVhMRU46bnVtYmVyID0gNDtcblxuICBzdGF0aWMgQVNTRVROQU1FTEVOOm51bWJlciA9IDEyODtcblxuICBzdGF0aWMgQUREUkVTU0xFTkdUSDpudW1iZXIgPSAyMDtcbn1cbiJdfQ==","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StandardTx = exports.StandardUnsignedTx = exports.StandardBaseTx = void 0;\n/**\n * @packageDocumentation\n * @module Common-Transactions\n */\nconst buffer_1 = require(\"buffer/\");\nconst bintools_1 = __importDefault(require(\"../utils/bintools\"));\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nconst input_1 = require(\"./input\");\nconst output_1 = require(\"./output\");\nconst constants_1 = require(\"../utils/constants\");\nconst serialization_1 = require(\"../utils/serialization\");\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\nconst serializer = serialization_1.Serialization.getInstance();\n/**\n * Class representing a base for all transactions.\n */\nclass StandardBaseTx extends serialization_1.Serializable {\n    /**\n     * Class representing a StandardBaseTx which is the foundation for all transactions.\n     *\n     * @param networkid Optional networkid, [[DefaultNetworkID]]\n     * @param blockchainid Optional blockchainid, default Buffer.alloc(32, 16)\n     * @param outs Optional array of the [[TransferableOutput]]s\n     * @param ins Optional array of the [[TransferableInput]]s\n     * @param memo Optional {@link https://github.com/feross/buffer|Buffer} for the memo field\n     */\n    constructor(networkid = constants_1.DefaultNetworkID, blockchainid = buffer_1.Buffer.alloc(32, 16), outs = undefined, ins = undefined, memo = undefined) {\n        super();\n        this._typeName = \"StandardBaseTx\";\n        this._typeID = undefined;\n        this.networkid = buffer_1.Buffer.alloc(4);\n        this.blockchainid = buffer_1.Buffer.alloc(32);\n        this.numouts = buffer_1.Buffer.alloc(4);\n        this.numins = buffer_1.Buffer.alloc(4);\n        this.memo = buffer_1.Buffer.alloc(4);\n        /**\n         * Returns the NetworkID as a number\n         */\n        this.getNetworkID = () => this.networkid.readUInt32BE(0);\n        /**\n         * Returns the Buffer representation of the BlockchainID\n         */\n        this.getBlockchainID = () => this.blockchainid;\n        /**\n         * Returns the {@link https://github.com/feross/buffer|Buffer} representation of the memo\n         */\n        this.getMemo = () => this.memo;\n        this.networkid.writeUInt32BE(networkid, 0);\n        this.blockchainid = blockchainid;\n        if (typeof memo === \"undefined\") {\n            this.memo = buffer_1.Buffer.alloc(4);\n            this.memo.writeUInt32BE(0, 0);\n        }\n        else {\n            this.memo = memo;\n        }\n        if (typeof ins !== 'undefined' && typeof outs !== 'undefined') {\n            this.numouts.writeUInt32BE(outs.length, 0);\n            this.outs = outs.sort(output_1.StandardTransferableOutput.comparator());\n            this.numins.writeUInt32BE(ins.length, 0);\n            this.ins = ins.sort(input_1.StandardTransferableInput.comparator());\n        }\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"networkid\": serializer.encoder(this.networkid, encoding, \"Buffer\", \"decimalString\"), \"blockchainid\": serializer.encoder(this.blockchainid, encoding, \"Buffer\", \"cb58\"), \"outs\": this.outs.map((o) => o.serialize(encoding)), \"ins\": this.ins.map((i) => i.serialize(encoding)), \"memo\": serializer.encoder(this.memo, encoding, \"Buffer\", \"hex\") });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.networkid = serializer.decoder(fields[\"networkid\"], encoding, \"decimalString\", \"Buffer\", 4);\n        this.blockchainid = serializer.decoder(fields[\"blockchainid\"], encoding, \"cb58\", \"Buffer\", 32);\n        this.memo = serializer.decoder(fields[\"memo\"], encoding, \"hex\", \"Buffer\");\n    }\n    /**\n     * Returns a {@link https://github.com/feross/buffer|Buffer} representation of the [[StandardBaseTx]].\n     */\n    toBuffer() {\n        this.outs.sort(output_1.StandardTransferableOutput.comparator());\n        this.ins.sort(input_1.StandardTransferableInput.comparator());\n        this.numouts.writeUInt32BE(this.outs.length, 0);\n        this.numins.writeUInt32BE(this.ins.length, 0);\n        let bsize = this.networkid.length + this.blockchainid.length + this.numouts.length;\n        const barr = [this.networkid, this.blockchainid, this.numouts];\n        for (let i = 0; i < this.outs.length; i++) {\n            const b = this.outs[i].toBuffer();\n            barr.push(b);\n            bsize += b.length;\n        }\n        barr.push(this.numins);\n        bsize += this.numins.length;\n        for (let i = 0; i < this.ins.length; i++) {\n            const b = this.ins[i].toBuffer();\n            barr.push(b);\n            bsize += b.length;\n        }\n        let memolen = buffer_1.Buffer.alloc(4);\n        memolen.writeUInt32BE(this.memo.length, 0);\n        barr.push(memolen);\n        bsize += 4;\n        barr.push(this.memo);\n        bsize += this.memo.length;\n        const buff = buffer_1.Buffer.concat(barr, bsize);\n        return buff;\n    }\n    /**\n     * Returns a base-58 representation of the [[StandardBaseTx]].\n     */\n    toString() {\n        return bintools.bufferToB58(this.toBuffer());\n    }\n}\nexports.StandardBaseTx = StandardBaseTx;\n/**\n * Class representing an unsigned transaction.\n */\nclass StandardUnsignedTx extends serialization_1.Serializable {\n    constructor(transaction = undefined, codecid = 0) {\n        super();\n        this._typeName = \"StandardUnsignedTx\";\n        this._typeID = undefined;\n        this.codecid = 0;\n        /**\n         * Returns the CodecID as a number\n         */\n        this.getCodecID = () => this.codecid;\n        /**\n        * Returns the {@link https://github.com/feross/buffer|Buffer} representation of the CodecID\n        */\n        this.getCodecIDBuffer = () => {\n            let codecBuf = buffer_1.Buffer.alloc(2);\n            codecBuf.writeUInt16BE(this.codecid, 0);\n            return codecBuf;\n        };\n        /**\n         * Returns the inputTotal as a BN\n         */\n        this.getInputTotal = (assetID) => {\n            const ins = this.getTransaction().getIns();\n            const aIDHex = assetID.toString('hex');\n            let total = new bn_js_1.default(0);\n            for (let i = 0; i < ins.length; i++) {\n                // only check StandardAmountInputs\n                if (ins[i].getInput() instanceof input_1.StandardAmountInput && aIDHex === ins[i].getAssetID().toString('hex')) {\n                    const input = ins[i].getInput();\n                    total = total.add(input.getAmount());\n                }\n            }\n            return total;\n        };\n        /**\n         * Returns the outputTotal as a BN\n         */\n        this.getOutputTotal = (assetID) => {\n            const outs = this.getTransaction().getTotalOuts();\n            const aIDHex = assetID.toString('hex');\n            let total = new bn_js_1.default(0);\n            for (let i = 0; i < outs.length; i++) {\n                // only check StandardAmountOutput\n                if (outs[i].getOutput() instanceof output_1.StandardAmountOutput && aIDHex === outs[i].getAssetID().toString('hex')) {\n                    const output = outs[i].getOutput();\n                    total = total.add(output.getAmount());\n                }\n            }\n            return total;\n        };\n        /**\n         * Returns the number of burned tokens as a BN\n         */\n        this.getBurn = (assetID) => {\n            return this.getInputTotal(assetID).sub(this.getOutputTotal(assetID));\n        };\n        this.codecid = codecid;\n        this.transaction = transaction;\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"codecid\": serializer.encoder(this.codecid, encoding, \"number\", \"decimalString\", 2), \"transaction\": this.transaction.serialize(encoding) });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.codecid = serializer.decoder(fields[\"codecid\"], encoding, \"decimalString\", \"number\");\n    }\n    toBuffer() {\n        const codecid = this.getCodecIDBuffer();\n        const txtype = buffer_1.Buffer.alloc(4);\n        txtype.writeUInt32BE(this.transaction.getTxType(), 0);\n        const basebuff = this.transaction.toBuffer();\n        return buffer_1.Buffer.concat([codecid, txtype, basebuff], codecid.length + txtype.length + basebuff.length);\n    }\n}\nexports.StandardUnsignedTx = StandardUnsignedTx;\n/**\n * Class representing a signed transaction.\n */\nclass StandardTx extends serialization_1.Serializable {\n    /**\n     * Class representing a signed transaction.\n     *\n     * @param unsignedTx Optional [[StandardUnsignedTx]]\n     * @param signatures Optional array of [[Credential]]s\n     */\n    constructor(unsignedTx = undefined, credentials = undefined) {\n        super();\n        this._typeName = \"StandardTx\";\n        this._typeID = undefined;\n        this.unsignedTx = undefined;\n        this.credentials = [];\n        /**\n         * Returns the [[StandardUnsignedTx]]\n         */\n        this.getUnsignedTx = () => {\n            return this.unsignedTx;\n        };\n        if (typeof unsignedTx !== 'undefined') {\n            this.unsignedTx = unsignedTx;\n            if (typeof credentials !== 'undefined') {\n                this.credentials = credentials;\n            }\n        }\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"unsignedTx\": this.unsignedTx.serialize(encoding), \"credentials\": this.credentials.map((c) => c.serialize(encoding)) });\n    }\n    ;\n    /**\n     * Returns a {@link https://github.com/feross/buffer|Buffer} representation of the [[StandardTx]].\n     */\n    toBuffer() {\n        const txbuff = this.unsignedTx.toBuffer();\n        let bsize = txbuff.length;\n        const credlen = buffer_1.Buffer.alloc(4);\n        credlen.writeUInt32BE(this.credentials.length, 0);\n        const barr = [txbuff, credlen];\n        bsize += credlen.length;\n        for (let i = 0; i < this.credentials.length; i++) {\n            const credid = buffer_1.Buffer.alloc(4);\n            credid.writeUInt32BE(this.credentials[i].getCredentialID(), 0);\n            barr.push(credid);\n            bsize += credid.length;\n            const credbuff = this.credentials[i].toBuffer();\n            bsize += credbuff.length;\n            barr.push(credbuff);\n        }\n        const buff = buffer_1.Buffer.concat(barr, bsize);\n        return buff;\n    }\n    /**\n     * Takes a base-58 string containing an [[StandardTx]], parses it, populates the class, and returns the length of the Tx in bytes.\n     *\n     * @param serialized A base-58 string containing a raw [[StandardTx]]\n     *\n     * @returns The length of the raw [[StandardTx]]\n     *\n     * @remarks\n     * unlike most fromStrings, it expects the string to be serialized in cb58 format\n     */\n    fromString(serialized) {\n        return this.fromBuffer(bintools.cb58Decode(serialized));\n    }\n    /**\n     * Returns a cb58 representation of the [[StandardTx]].\n     *\n     * @remarks\n     * unlike most toStrings, this returns in cb58 serialization format\n     */\n    toString() {\n        return bintools.cb58Encode(this.toBuffer());\n    }\n}\nexports.StandardTx = StandardTx;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tbW9uL3R4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7R0FHRztBQUNILG9DQUFpQztBQUNqQyxpRUFBeUM7QUFFekMsa0RBQXVCO0FBRXZCLG1DQUF5RTtBQUN6RSxxQ0FBNEU7QUFDNUUsa0RBQXNEO0FBQ3RELDBEQUF5RjtBQUV6Rjs7R0FFRztBQUNILE1BQU0sUUFBUSxHQUFHLGtCQUFRLENBQUMsV0FBVyxFQUFFLENBQUM7QUFDeEMsTUFBTSxVQUFVLEdBQUcsNkJBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUUvQzs7R0FFRztBQUNILE1BQXNCLGNBQTJGLFNBQVEsNEJBQVk7SUEwSG5JOzs7Ozs7OztPQVFHO0lBQ0gsWUFBWSxZQUFtQiw0QkFBZ0IsRUFBRSxlQUFzQixlQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxPQUF5QyxTQUFTLEVBQUUsTUFBdUMsU0FBUyxFQUFFLE9BQWMsU0FBUztRQUN4TixLQUFLLEVBQUUsQ0FBQztRQW5JQSxjQUFTLEdBQUcsZ0JBQWdCLENBQUM7UUFDN0IsWUFBTyxHQUFHLFNBQVMsQ0FBQztRQXNCcEIsY0FBUyxHQUFVLGVBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkMsaUJBQVksR0FBVSxlQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3ZDLFlBQU8sR0FBVSxlQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRWpDLFdBQU0sR0FBVSxlQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRWhDLFNBQUksR0FBVSxlQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBT3hDOztXQUVHO1FBQ0gsaUJBQVksR0FBRyxHQUFVLEVBQUUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVks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LENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO0lBQzlDLENBQUM7Q0FpQkY7QUE5RkQsZ0NBOEZDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqIEBtb2R1bGUgQ29tbW9uLVRyYW5zYWN0aW9uc1xuICovXG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tICdidWZmZXIvJztcbmltcG9ydCBCaW5Ub29scyBmcm9tICcuLi91dGlscy9iaW50b29scyc7XG5pbXBvcnQgeyBDcmVkZW50aWFsIH0gZnJvbSAnLi9jcmVkZW50aWFscyc7XG5pbXBvcnQgQk4gZnJvbSAnYm4uanMnO1xuaW1wb3J0IHsgU3RhbmRhcmRLZXlDaGFpbiwgU3RhbmRhcmRLZXlQYWlyIH0gZnJvbSAnLi9rZXljaGFpbic7XG5pbXBvcnQgeyBTdGFuZGFyZEFtb3VudElucHV0LCBTdGFuZGFyZFRyYW5zZmVyYWJsZUlucHV0IH0gZnJvbSAnLi9pbnB1dCc7XG5pbXBvcnQgeyBTdGFuZGFyZEFtb3VudE91dHB1dCwgU3RhbmRhcmRUcmFuc2ZlcmFibGVPdXRwdXQgfSBmcm9tICcuL291dHB1dCc7XG5pbXBvcnQgeyBEZWZhdWx0TmV0d29ya0lEIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzJztcbmltcG9ydCB7IFNlcmlhbGl6YWJsZSwgU2VyaWFsaXphdGlvbiwgU2VyaWFsaXplZEVuY29kaW5nIH0gZnJvbSAnLi4vdXRpbHMvc2VyaWFsaXphdGlvbic7XG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5jb25zdCBiaW50b29scyA9IEJpblRvb2xzLmdldEluc3RhbmNlKCk7XG5jb25zdCBzZXJpYWxpemVyID0gU2VyaWFsaXphdGlvbi5nZXRJbnN0YW5jZSgpO1xuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIGJhc2UgZm9yIGFsbCB0cmFuc2FjdGlvbnMuXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTdGFuZGFyZEJhc2VUeDxLUENsYXNzIGV4dGVuZHMgU3RhbmRhcmRLZXlQYWlyLCBLQ0NsYXNzIGV4dGVuZHMgU3RhbmRhcmRLZXlDaGFpbjxLUENsYXNzPj4gZXh0ZW5kcyBTZXJpYWxpemFibGV7XG4gIHByb3RlY3RlZCBfdHlwZU5hbWUgPSBcIlN0YW5kYXJkQmFzZVR4XCI7XG4gIHByb3RlY3RlZCBfdHlwZUlEID0gdW5kZWZpbmVkO1xuXG4gIHNlcmlhbGl6ZShlbmNvZGluZzpTZXJpYWxpemVkRW5jb2RpbmcgPSBcImhleFwiKTpvYmplY3Qge1xuICAgIGxldCBmaWVsZHM6b2JqZWN0ID0gc3VwZXIuc2VyaWFsaXplKGVuY29kaW5nKTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uZmllbGRzLFxuICAgICAgXCJuZXR3b3JraWRcIjogc2VyaWFsaXplci5lbmNvZGVyKHRoaXMubmV0d29ya2lkLCBlbmNvZGluZywgXCJCdWZmZXJcIiwgXCJkZWNpbWFsU3RyaW5nXCIpLFxuICAgICAgXCJibG9ja2NoYWluaWRcIjogc2VyaWFsaXplci5lbmNvZGVyKHRoaXMuYmxvY2tjaGFpbmlkLCBlbmNvZGluZywgXCJCdWZmZXJcIiwgXCJjYjU4XCIpLFxuICAgICAgXCJvdXRzXCI6IHRoaXMub3V0cy5tYXAoKG8pID0+IG8uc2VyaWFsaXplKGVuY29kaW5nKSksXG4gICAgICBcImluc1wiOiB0aGlzLmlucy5tYXAoKGkpID0+IGkuc2VyaWFsaXplKGVuY29kaW5nKSksXG4gICAgICBcIm1lbW9cIjogc2VyaWFsaXplci5lbmNvZGVyKHRoaXMubWVtbywgZW5jb2RpbmcsIFwiQnVmZmVyXCIsIFwiaGV4XCIpXG4gICAgfVxuICB9O1xuXG4gIGRlc2VyaWFsaXplKGZpZWxkczpvYmplY3QsIGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICBzdXBlci5kZXNlcmlhbGl6ZShmaWVsZHMsIGVuY29kaW5nKTtcbiAgICB0aGlzLm5ldHdvcmtpZCA9IHNlcmlhbGl6ZXIuZGVjb2RlcihmaWVsZHNbXCJuZXR3b3JraWRcIl0sIGVuY29kaW5nLCBcImRlY2ltYWxTdHJpbmdcIiwgXCJCdWZmZXJcIiwgNCk7XG4gICAgdGhpcy5ibG9ja2NoYWluaWQgPSBzZXJpYWxpemVyLmRlY29kZXIoZmllbGRzW1wiYmxvY2tjaGFpbmlkXCJdLCBlbmNvZGluZywgXCJjYjU4XCIsIFwiQnVmZmVyXCIsIDMyKTtcbiAgICB0aGlzLm1lbW8gPSBzZXJpYWxpemVyLmRlY29kZXIoZmllbGRzW1wibWVtb1wiXSwgZW5jb2RpbmcsIFwiaGV4XCIsIFwiQnVmZmVyXCIpO1xuICB9XG5cblxuICBwcm90ZWN0ZWQgbmV0d29ya2lkOkJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyg0KTtcbiAgcHJvdGVjdGVkIGJsb2NrY2hhaW5pZDpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoMzIpO1xuICBwcm90ZWN0ZWQgbnVtb3V0czpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoNCk7XG4gIHByb3RlY3RlZCBvdXRzOkFycmF5PFN0YW5kYXJkVHJhbnNmZXJhYmxlT3V0cHV0PjtcbiAgcHJvdGVjdGVkIG51bWluczpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoNCk7XG4gIHByb3RlY3RlZCBpbnM6QXJyYXk8U3RhbmRhcmRUcmFuc2ZlcmFibGVJbnB1dD47XG4gIHByb3RlY3RlZCBtZW1vOkJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyg0KTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgaWQgb2YgdGhlIFtbU3RhbmRhcmRCYXNlVHhdXVxuICAgKi9cbiAgYWJzdHJhY3QgZ2V0VHhUeXBlOigpID0+IG51bWJlcjtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgTmV0d29ya0lEIGFzIGEgbnVtYmVyXG4gICAqL1xuICBnZXROZXR3b3JrSUQgPSAoKTpudW1iZXIgPT4gdGhpcy5uZXR3b3JraWQucmVhZFVJbnQzMkJFKDApO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBCdWZmZXIgcmVwcmVzZW50YXRpb24gb2YgdGhlIEJsb2NrY2hhaW5JRFxuICAgKi9cbiAgZ2V0QmxvY2tjaGFpbklEID0gKCk6QnVmZmVyID0+IHRoaXMuYmxvY2tjaGFpbmlkO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBhcnJheSBvZiBbW1N0YW5kYXJkVHJhbnNmZXJhYmxlSW5wdXRdXXNcbiAgICovXG4gIGFic3RyYWN0IGdldElucygpOkFycmF5PFN0YW5kYXJkVHJhbnNmZXJhYmxlSW5wdXQ+O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBhcnJheSBvZiBbW1N0YW5kYXJkVHJhbnNmZXJhYmxlT3V0cHV0XV1zXG4gICAqL1xuICBhYnN0cmFjdCBnZXRPdXRzKCk6QXJyYXk8U3RhbmRhcmRUcmFuc2ZlcmFibGVPdXRwdXQ+O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBhcnJheSBvZiBjb21iaW5lZCB0b3RhbCBbW1N0YW5kYXJkVHJhbnNmZXJhYmxlT3V0cHV0XV1zXG4gICAqL1xuICBhYnN0cmFjdCBnZXRUb3RhbE91dHMoKTpBcnJheTxTdGFuZGFyZFRyYW5zZmVyYWJsZU91dHB1dD47XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtZW1vIFxuICAgKi9cbiAgZ2V0TWVtbyA9ICgpOkJ1ZmZlciA9PiB0aGlzLm1lbW87XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSByZXByZXNlbnRhdGlvbiBvZiB0aGUgW1tTdGFuZGFyZEJhc2VUeF1dLlxuICAgKi9cbiAgdG9CdWZmZXIoKTpCdWZmZXIge1xuICAgIHRoaXMub3V0cy5zb3J0KFN0YW5kYXJkVHJhbnNmZXJhYmxlT3V0cHV0LmNvbXBhcmF0b3IoKSk7XG4gICAgdGhpcy5pbnMuc29ydChTdGFuZGFyZFRyYW5zZmVyYWJsZUlucHV0LmNvbXBhcmF0b3IoKSk7XG4gICAgdGhpcy5udW1vdXRzLndyaXRlVUludDMyQkUodGhpcy5vdXRzLmxlbmd0aCwgMCk7XG4gICAgdGhpcy5udW1pbnMud3JpdGVVSW50MzJCRSh0aGlzLmlucy5sZW5ndGgsIDApO1xuICAgIGxldCBic2l6ZTpudW1iZXIgPSB0aGlzLm5ldHdvcmtpZC5sZW5ndGggKyB0aGlzLmJsb2NrY2hhaW5pZC5sZW5ndGggKyB0aGlzLm51bW91dHMubGVuZ3RoO1xuICAgIGNvbnN0IGJhcnI6QXJyYXk8QnVmZmVyPiA9IFt0aGlzLm5ldHdvcmtpZCwgdGhpcy5ibG9ja2NoYWluaWQsIHRoaXMubnVtb3V0c107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm91dHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGI6QnVmZmVyID0gdGhpcy5vdXRzW2ldLnRvQnVmZmVyKCk7XG4gICAgICBiYXJyLnB1c2goYik7XG4gICAgICBic2l6ZSArPSBiLmxlbmd0aDtcbiAgICB9XG4gICAgYmFyci5wdXNoKHRoaXMubnVtaW5zKTtcbiAgICBic2l6ZSArPSB0aGlzLm51bWlucy5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmlucy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYjpCdWZmZXIgPSB0aGlzLmluc1tpXS50b0J1ZmZlcigpO1xuICAgICAgYmFyci5wdXNoKGIpO1xuICAgICAgYnNpemUgKz0gYi5sZW5ndGg7XG4gICAgfVxuICAgIGxldCBtZW1vbGVuOkJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyg0KTtcbiAgICBtZW1vbGVuLndyaXRlVUludDMyQkUodGhpcy5tZW1vLmxlbmd0aCwgMCk7XG4gICAgYmFyci5wdXNoKG1lbW9sZW4pO1xuICAgIGJzaXplICs9IDQ7XG4gICAgYmFyci5wdXNoKHRoaXMubWVtbyk7XG4gICAgYnNpemUgKz0gdGhpcy5tZW1vLmxlbmd0aDtcbiAgICBjb25zdCBidWZmOkJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoYmFyciwgYnNpemUpO1xuICAgIHJldHVybiBidWZmO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBiYXNlLTU4IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBbW1N0YW5kYXJkQmFzZVR4XV0uXG4gICAqL1xuICB0b1N0cmluZygpOnN0cmluZyB7XG4gICAgcmV0dXJuIGJpbnRvb2xzLmJ1ZmZlclRvQjU4KHRoaXMudG9CdWZmZXIoKSk7XG4gIH1cblxuICAvKipcbiAgICogVGFrZXMgdGhlIGJ5dGVzIG9mIGFuIFtbVW5zaWduZWRUeF1dIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIFtbQ3JlZGVudGlhbF1dc1xuICAgKlxuICAgKiBAcGFyYW0gbXNnIEEgQnVmZmVyIGZvciB0aGUgW1tVbnNpZ25lZFR4XV1cbiAgICogQHBhcmFtIGtjIEFuIFtbS2V5Q2hhaW5dXSB1c2VkIGluIHNpZ25pbmdcbiAgICpcbiAgICogQHJldHVybnMgQW4gYXJyYXkgb2YgW1tDcmVkZW50aWFsXV1zXG4gICAqL1xuICBhYnN0cmFjdCBzaWduKG1zZzpCdWZmZXIsIGtjOlN0YW5kYXJkS2V5Q2hhaW48S1BDbGFzcz4pOkFycmF5PENyZWRlbnRpYWw+O1xuXG4gIGFic3RyYWN0IGNsb25lKCk6dGhpcztcblxuICBhYnN0cmFjdCBjcmVhdGUoLi4uYXJnczphbnlbXSk6dGhpcztcblxuICBhYnN0cmFjdCBzZWxlY3QoaWQ6bnVtYmVyLCAuLi5hcmdzOmFueVtdKTp0aGlzO1xuXG4gIC8qKlxuICAgKiBDbGFzcyByZXByZXNlbnRpbmcgYSBTdGFuZGFyZEJhc2VUeCB3aGljaCBpcyB0aGUgZm91bmRhdGlvbiBmb3IgYWxsIHRyYW5zYWN0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIG5ldHdvcmtpZCBPcHRpb25hbCBuZXR3b3JraWQsIFtbRGVmYXVsdE5ldHdvcmtJRF1dXG4gICAqIEBwYXJhbSBibG9ja2NoYWluaWQgT3B0aW9uYWwgYmxvY2tjaGFpbmlkLCBkZWZhdWx0IEJ1ZmZlci5hbGxvYygzMiwgMTYpXG4gICAqIEBwYXJhbSBvdXRzIE9wdGlvbmFsIGFycmF5IG9mIHRoZSBbW1RyYW5zZmVyYWJsZU91dHB1dF1dc1xuICAgKiBAcGFyYW0gaW5zIE9wdGlvbmFsIGFycmF5IG9mIHRoZSBbW1RyYW5zZmVyYWJsZUlucHV0XV1zXG4gICAqIEBwYXJhbSBtZW1vIE9wdGlvbmFsIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlcnxCdWZmZXJ9IGZvciB0aGUgbWVtbyBmaWVsZFxuICAgKi9cbiAgY29uc3RydWN0b3IobmV0d29ya2lkOm51bWJlciA9IERlZmF1bHROZXR3b3JrSUQsIGJsb2NrY2hhaW5pZDpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoMzIsIDE2KSwgb3V0czpBcnJheTxTdGFuZGFyZFRyYW5zZmVyYWJsZU91dHB1dD4gPSB1bmRlZmluZWQsIGluczpBcnJheTxTdGFuZGFyZFRyYW5zZmVyYWJsZUlucHV0PiA9IHVuZGVmaW5lZCwgbWVtbzpCdWZmZXIgPSB1bmRlZmluZWQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubmV0d29ya2lkLndyaXRlVUludDMyQkUobmV0d29ya2lkLCAwKTtcbiAgICB0aGlzLmJsb2NrY2hhaW5pZCA9IGJsb2NrY2hhaW5pZDtcbiAgICBpZih0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICB0aGlzLm1lbW8gPSBCdWZmZXIuYWxsb2MoNCk7XG4gICAgICB0aGlzLm1lbW8ud3JpdGVVSW50MzJCRSgwLDApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1lbW8gPSBtZW1vO1xuICAgIH1cbiAgICBcbiAgICBpZiAodHlwZW9mIGlucyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG91dHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm51bW91dHMud3JpdGVVSW50MzJCRShvdXRzLmxlbmd0aCwgMCk7XG4gICAgICB0aGlzLm91dHMgPSBvdXRzLnNvcnQoU3RhbmRhcmRUcmFuc2ZlcmFibGVPdXRwdXQuY29tcGFyYXRvcigpKTtcbiAgICAgIHRoaXMubnVtaW5zLndyaXRlVUludDMyQkUoaW5zLmxlbmd0aCwgMCk7XG4gICAgICB0aGlzLmlucyA9IGlucy5zb3J0KFN0YW5kYXJkVHJhbnNmZXJhYmxlSW5wdXQuY29tcGFyYXRvcigpKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYW4gdW5zaWduZWQgdHJhbnNhY3Rpb24uXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTdGFuZGFyZFVuc2lnbmVkVHg8S1BDbGFzcyBleHRlbmRzIFN0YW5kYXJkS2V5UGFpciwgXG5LQ0NsYXNzIGV4dGVuZHMgU3RhbmRhcmRLZXlDaGFpbjxLUENsYXNzPiwgXG5TQlR4IGV4dGVuZHMgU3RhbmRhcmRCYXNlVHg8S1BDbGFzcywgS0NDbGFzcz5cbj4gZXh0ZW5kcyBTZXJpYWxpemFibGV7XG4gIHByb3RlY3RlZCBfdHlwZU5hbWUgPSBcIlN0YW5kYXJkVW5zaWduZWRUeFwiO1xuICBwcm90ZWN0ZWQgX3R5cGVJRCA9IHVuZGVmaW5lZDtcblxuICBzZXJpYWxpemUoZW5jb2Rpbmc6U2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIik6b2JqZWN0IHtcbiAgICBsZXQgZmllbGRzOm9iamVjdCA9IHN1cGVyLnNlcmlhbGl6ZShlbmNvZGluZyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmZpZWxkcyxcbiAgICAgIFwiY29kZWNpZFwiOiBzZXJpYWxpemVyLmVuY29kZXIodGhpcy5jb2RlY2lkLCBlbmNvZGluZywgXCJudW1iZXJcIiwgXCJkZWNpbWFsU3RyaW5nXCIsIDIpLFxuICAgICAgXCJ0cmFuc2FjdGlvblwiOiB0aGlzLnRyYW5zYWN0aW9uLnNlcmlhbGl6ZShlbmNvZGluZylcbiAgICB9O1xuICB9O1xuXG4gIGRlc2VyaWFsaXplKGZpZWxkczpvYmplY3QsIGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICBzdXBlci5kZXNlcmlhbGl6ZShmaWVsZHMsIGVuY29kaW5nKTtcbiAgICB0aGlzLmNvZGVjaWQgPSBzZXJpYWxpemVyLmRlY29kZXIoZmllbGRzW1wiY29kZWNpZFwiXSwgZW5jb2RpbmcsIFwiZGVjaW1hbFN0cmluZ1wiLCBcIm51bWJlclwiKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBjb2RlY2lkOm51bWJlciA9IDA7XG4gIHByb3RlY3RlZCB0cmFuc2FjdGlvbjpTQlR4O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBDb2RlY0lEIGFzIGEgbnVtYmVyXG4gICAqL1xuICBnZXRDb2RlY0lEID0gKCk6bnVtYmVyID0+IHRoaXMuY29kZWNpZDtcblxuICAvKipcbiAgKiBSZXR1cm5zIHRoZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSByZXByZXNlbnRhdGlvbiBvZiB0aGUgQ29kZWNJRFxuICAqL1xuICBnZXRDb2RlY0lEQnVmZmVyID0gKCk6QnVmZmVyID0+IHtcbiAgICBsZXQgY29kZWNCdWY6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDIpO1xuICAgIGNvZGVjQnVmLndyaXRlVUludDE2QkUodGhpcy5jb2RlY2lkLCAwKTtcbiAgICByZXR1cm4gY29kZWNCdWY7XG4gIH0gXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGlucHV0VG90YWwgYXMgYSBCTiBcbiAgICovXG4gIGdldElucHV0VG90YWwgPSAoYXNzZXRJRDpCdWZmZXIpOkJOPT4ge1xuICAgIGNvbnN0IGluczpBcnJheTxTdGFuZGFyZFRyYW5zZmVyYWJsZUlucHV0PiA9IHRoaXMuZ2V0VHJhbnNhY3Rpb24oKS5nZXRJbnMoKTtcbiAgICBjb25zdCBhSURIZXg6c3RyaW5nID0gYXNzZXRJRC50b1N0cmluZygnaGV4Jyk7XG4gICAgbGV0IHRvdGFsOkJOID0gbmV3IEJOKDApO1xuXG4gICAgZm9yKGxldCBpOm51bWJlciA9IDA7IGkgPCBpbnMubGVuZ3RoOyBpKyspe1xuICAgICAgIFxuXG4gICAgICAvLyBvbmx5IGNoZWNrIFN0YW5kYXJkQW1vdW50SW5wdXRzXG4gICAgICBpZihpbnNbaV0uZ2V0SW5wdXQoKSBpbnN0YW5jZW9mIFN0YW5kYXJkQW1vdW50SW5wdXQgJiYgYUlESGV4ID09PSBpbnNbaV0uZ2V0QXNzZXRJRCgpLnRvU3RyaW5nKCdoZXgnKSkge1xuICAgICAgICBjb25zdCBpbnB1dCA9IGluc1tpXS5nZXRJbnB1dCgpIGFzIFN0YW5kYXJkQW1vdW50SW5wdXQ7XG4gICAgICAgIHRvdGFsID0gdG90YWwuYWRkKGlucHV0LmdldEFtb3VudCgpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRvdGFsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG91dHB1dFRvdGFsIGFzIGEgQk5cbiAgICovXG4gIGdldE91dHB1dFRvdGFsID0gKGFzc2V0SUQ6QnVmZmVyKTpCTiA9PiB7XG4gICAgY29uc3Qgb3V0czpBcnJheTxTdGFuZGFyZFRyYW5zZmVyYWJsZU91dHB1dD4gPSB0aGlzLmdldFRyYW5zYWN0aW9uKCkuZ2V0VG90YWxPdXRzKCk7XG4gICAgY29uc3QgYUlESGV4OnN0cmluZyA9IGFzc2V0SUQudG9TdHJpbmcoJ2hleCcpO1xuICAgIGxldCB0b3RhbDpCTiA9IG5ldyBCTigwKTtcblxuICAgIGZvcihsZXQgaTpudW1iZXIgPSAwOyBpIDwgb3V0cy5sZW5ndGg7IGkrKyl7XG5cbiAgICAgIC8vIG9ubHkgY2hlY2sgU3RhbmRhcmRBbW91bnRPdXRwdXRcbiAgICAgIGlmKG91dHNbaV0uZ2V0T3V0cHV0KCkgaW5zdGFuY2VvZiBTdGFuZGFyZEFtb3VudE91dHB1dCAmJiBhSURIZXggPT09IG91dHNbaV0uZ2V0QXNzZXRJRCgpLnRvU3RyaW5nKCdoZXgnKSkge1xuICAgICAgICBjb25zdCBvdXRwdXQ6U3RhbmRhcmRBbW91bnRPdXRwdXQgPSBvdXRzW2ldLmdldE91dHB1dCgpIGFzIFN0YW5kYXJkQW1vdW50T3V0cHV0O1xuICAgICAgICB0b3RhbCA9IHRvdGFsLmFkZChvdXRwdXQuZ2V0QW1vdW50KCkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG90YWw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGJ1cm5lZCB0b2tlbnMgYXMgYSBCTlxuICAgKi9cbiAgZ2V0QnVybiA9IChhc3NldElEOkJ1ZmZlcik6Qk4gPT4ge1xuICAgIHJldHVybiB0aGlzLmdldElucHV0VG90YWwoYXNzZXRJRCkuc3ViKHRoaXMuZ2V0T3V0cHV0VG90YWwoYXNzZXRJRCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIFRyYW5zYWN0aW9uXG4gICAqL1xuICBhYnN0cmFjdCBnZXRUcmFuc2FjdGlvbigpOlNCVHg7XG5cbiAgYWJzdHJhY3QgZnJvbUJ1ZmZlcihieXRlczpCdWZmZXIsIG9mZnNldD86bnVtYmVyKTpudW1iZXI7XG5cbiAgdG9CdWZmZXIoKTpCdWZmZXIge1xuICAgIGNvbnN0IGNvZGVjaWQ6QnVmZmVyID0gdGhpcy5nZXRDb2RlY0lEQnVmZmVyKCk7XG4gICAgY29uc3QgdHh0eXBlOkJ1ZmZlciA9IEJ1ZmZlci5hbGxvYyg0KTtcbiAgICB0eHR5cGUud3JpdGVVSW50MzJCRSh0aGlzLnRyYW5zYWN0aW9uLmdldFR4VHlwZSgpLCAwKTtcbiAgICBjb25zdCBiYXNlYnVmZiA9IHRoaXMudHJhbnNhY3Rpb24udG9CdWZmZXIoKTtcbiAgICByZXR1cm4gQnVmZmVyLmNvbmNhdChbY29kZWNpZCwgdHh0eXBlLCBiYXNlYnVmZl0sIGNvZGVjaWQubGVuZ3RoICsgdHh0eXBlLmxlbmd0aCArIGJhc2VidWZmLmxlbmd0aCk7XG4gIH1cblxuICAvKipcbiAgICogU2lnbnMgdGhpcyBbW1Vuc2lnbmVkVHhdXSBhbmQgcmV0dXJucyBzaWduZWQgW1tTdGFuZGFyZFR4XV1cbiAgICpcbiAgICogQHBhcmFtIGtjIEFuIFtbS2V5Q2hhaW5dXSB1c2VkIGluIHNpZ25pbmdcbiAgICpcbiAgICogQHJldHVybnMgQSBzaWduZWQgW1tTdGFuZGFyZFR4XV1cbiAgICovXG4gIGFic3RyYWN0IHNpZ24oa2M6S0NDbGFzcyk6U3RhbmRhcmRUeDxcbiAgICBLUENsYXNzLCBcbiAgICBLQ0NsYXNzLCBcbiAgICBTdGFuZGFyZFVuc2lnbmVkVHg8S1BDbGFzcywgS0NDbGFzcywgU0JUeD5cbiAgPjtcblxuICBjb25zdHJ1Y3Rvcih0cmFuc2FjdGlvbjpTQlR4ID0gdW5kZWZpbmVkLCBjb2RlY2lkOm51bWJlciA9IDApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuY29kZWNpZCA9IGNvZGVjaWQ7XG4gICAgdGhpcy50cmFuc2FjdGlvbiA9IHRyYW5zYWN0aW9uO1xuICB9XG59XG5cbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgc2lnbmVkIHRyYW5zYWN0aW9uLlxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgU3RhbmRhcmRUeDxcbiAgICBLUENsYXNzIGV4dGVuZHMgU3RhbmRhcmRLZXlQYWlyLCBcbiAgICBLQ0NsYXNzIGV4dGVuZHMgU3RhbmRhcmRLZXlDaGFpbjxLUENsYXNzPiwgXG4gICAgU1VCVHggZXh0ZW5kcyBTdGFuZGFyZFVuc2lnbmVkVHg8XG4gICAgICAgIEtQQ2xhc3MsIFxuICAgICAgICBLQ0NsYXNzLCBcbiAgICAgICAgU3RhbmRhcmRCYXNlVHg8S1BDbGFzcywgS0NDbGFzcz4+XG4gICAgPiBleHRlbmRzIFNlcmlhbGl6YWJsZSB7XG4gIHByb3RlY3RlZCBfdHlwZU5hbWUgPSBcIlN0YW5kYXJkVHhcIjtcbiAgcHJvdGVjdGVkIF90eXBlSUQgPSB1bmRlZmluZWQ7XG5cbiAgc2VyaWFsaXplKGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpOm9iamVjdCB7XG4gICAgbGV0IGZpZWxkczpvYmplY3QgPSBzdXBlci5zZXJpYWxpemUoZW5jb2RpbmcpO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5maWVsZHMsXG4gICAgICBcInVuc2lnbmVkVHhcIjogdGhpcy51bnNpZ25lZFR4LnNlcmlhbGl6ZShlbmNvZGluZyksXG4gICAgICBcImNyZWRlbnRpYWxzXCI6IHRoaXMuY3JlZGVudGlhbHMubWFwKChjKSA9PiBjLnNlcmlhbGl6ZShlbmNvZGluZykpXG4gICAgfVxuICB9O1xuXG4gIHByb3RlY3RlZCB1bnNpZ25lZFR4OlNVQlR4ID0gdW5kZWZpbmVkO1xuICBwcm90ZWN0ZWQgY3JlZGVudGlhbHM6QXJyYXk8Q3JlZGVudGlhbD4gPSBbXTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgW1tTdGFuZGFyZFVuc2lnbmVkVHhdXVxuICAgKi9cbiAgZ2V0VW5zaWduZWRUeCA9ICgpOlNVQlR4ID0+IHtcbiAgICByZXR1cm4gdGhpcy51bnNpZ25lZFR4O1xuICB9XG5cbiAgYWJzdHJhY3QgZnJvbUJ1ZmZlcihieXRlczpCdWZmZXIsIG9mZnNldD86bnVtYmVyKTpudW1iZXI7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSByZXByZXNlbnRhdGlvbiBvZiB0aGUgW1tTdGFuZGFyZFR4XV0uXG4gICAqL1xuICB0b0J1ZmZlcigpOkJ1ZmZlciB7XG4gICAgY29uc3QgdHhidWZmOkJ1ZmZlciA9IHRoaXMudW5zaWduZWRUeC50b0J1ZmZlcigpO1xuICAgIGxldCBic2l6ZTpudW1iZXIgPSB0eGJ1ZmYubGVuZ3RoO1xuICAgIGNvbnN0IGNyZWRsZW46QnVmZmVyID0gQnVmZmVyLmFsbG9jKDQpO1xuICAgIGNyZWRsZW4ud3JpdGVVSW50MzJCRSh0aGlzLmNyZWRlbnRpYWxzLmxlbmd0aCwgMCk7XG4gICAgY29uc3QgYmFycjpBcnJheTxCdWZmZXI+ID0gW3R4YnVmZiwgY3JlZGxlbl07XG4gICAgYnNpemUgKz0gY3JlZGxlbi5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNyZWRlbnRpYWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjcmVkaWQ6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDQpO1xuICAgICAgY3JlZGlkLndyaXRlVUludDMyQkUodGhpcy5jcmVkZW50aWFsc1tpXS5nZXRDcmVkZW50aWFsSUQoKSwgMCk7XG4gICAgICBiYXJyLnB1c2goY3JlZGlkKTtcbiAgICAgIGJzaXplICs9IGNyZWRpZC5sZW5ndGg7XG4gICAgICBjb25zdCBjcmVkYnVmZjpCdWZmZXIgPSB0aGlzLmNyZWRlbnRpYWxzW2ldLnRvQnVmZmVyKCk7XG4gICAgICBic2l6ZSArPSBjcmVkYnVmZi5sZW5ndGg7XG4gICAgICBiYXJyLnB1c2goY3JlZGJ1ZmYpO1xuICAgIH1cbiAgICBjb25zdCBidWZmOkJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoYmFyciwgYnNpemUpO1xuICAgIHJldHVybiBidWZmO1xuICB9XG5cbiAgLyoqXG4gICAqIFRha2VzIGEgYmFzZS01OCBzdHJpbmcgY29udGFpbmluZyBhbiBbW1N0YW5kYXJkVHhdXSwgcGFyc2VzIGl0LCBwb3B1bGF0ZXMgdGhlIGNsYXNzLCBhbmQgcmV0dXJucyB0aGUgbGVuZ3RoIG9mIHRoZSBUeCBpbiBieXRlcy5cbiAgICpcbiAgICogQHBhcmFtIHNlcmlhbGl6ZWQgQSBiYXNlLTU4IHN0cmluZyBjb250YWluaW5nIGEgcmF3IFtbU3RhbmRhcmRUeF1dXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSBsZW5ndGggb2YgdGhlIHJhdyBbW1N0YW5kYXJkVHhdXVxuICAgKlxuICAgKiBAcmVtYXJrc1xuICAgKiB1bmxpa2UgbW9zdCBmcm9tU3RyaW5ncywgaXQgZXhwZWN0cyB0aGUgc3RyaW5nIHRvIGJlIHNlcmlhbGl6ZWQgaW4gY2I1OCBmb3JtYXRcbiAgICovXG4gIGZyb21TdHJpbmcoc2VyaWFsaXplZDpzdHJpbmcpOm51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZnJvbUJ1ZmZlcihiaW50b29scy5jYjU4RGVjb2RlKHNlcmlhbGl6ZWQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY2I1OCByZXByZXNlbnRhdGlvbiBvZiB0aGUgW1tTdGFuZGFyZFR4XV0uXG4gICAqXG4gICAqIEByZW1hcmtzXG4gICAqIHVubGlrZSBtb3N0IHRvU3RyaW5ncywgdGhpcyByZXR1cm5zIGluIGNiNTggc2VyaWFsaXphdGlvbiBmb3JtYXRcbiAgICovXG4gIHRvU3RyaW5nKCk6c3RyaW5nIHtcbiAgICByZXR1cm4gYmludG9vbHMuY2I1OEVuY29kZSh0aGlzLnRvQnVmZmVyKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsYXNzIHJlcHJlc2VudGluZyBhIHNpZ25lZCB0cmFuc2FjdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHVuc2lnbmVkVHggT3B0aW9uYWwgW1tTdGFuZGFyZFVuc2lnbmVkVHhdXVxuICAgKiBAcGFyYW0gc2lnbmF0dXJlcyBPcHRpb25hbCBhcnJheSBvZiBbW0NyZWRlbnRpYWxdXXNcbiAgICovXG4gIGNvbnN0cnVjdG9yKHVuc2lnbmVkVHg6U1VCVHggPSB1bmRlZmluZWQsIGNyZWRlbnRpYWxzOkFycmF5PENyZWRlbnRpYWw+ID0gdW5kZWZpbmVkKSB7XG4gICAgc3VwZXIoKTtcbiAgICBpZiAodHlwZW9mIHVuc2lnbmVkVHggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLnVuc2lnbmVkVHggPSB1bnNpZ25lZFR4O1xuICAgICAgaWYgKHR5cGVvZiBjcmVkZW50aWFscyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5jcmVkZW50aWFscyA9IGNyZWRlbnRpYWxzO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Credential = exports.Signature = exports.SigIdx = void 0;\n/**\n * @packageDocumentation\n * @module Common-Signature\n */\nconst nbytes_1 = require(\"./nbytes\");\nconst buffer_1 = require(\"buffer/\");\nconst bintools_1 = __importDefault(require(\"../utils/bintools\"));\nconst serialization_1 = require(\"../utils/serialization\");\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\nconst serializer = serialization_1.Serialization.getInstance();\n/**\n * Type representing a [[Signature]] index used in [[Input]]\n */\nclass SigIdx extends nbytes_1.NBytes {\n    /**\n     * Type representing a [[Signature]] index used in [[Input]]\n     */\n    constructor() {\n        super();\n        this._typeName = \"SigIdx\";\n        this._typeID = undefined;\n        this.source = buffer_1.Buffer.alloc(20);\n        this.bytes = buffer_1.Buffer.alloc(4);\n        this.bsize = 4;\n        /**\n         * Sets the source address for the signature\n         */\n        this.setSource = (address) => {\n            this.source = address;\n        };\n        /**\n         * Retrieves the source address for the signature\n         */\n        this.getSource = () => this.source;\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"source\": serializer.encoder(this.source, encoding, \"Buffer\", \"hex\") });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.source = serializer.decoder(fields[\"source\"], encoding, \"hex\", \"Buffer\");\n    }\n    clone() {\n        let newbase = new SigIdx();\n        newbase.fromBuffer(this.toBuffer());\n        return newbase;\n    }\n    create(...args) {\n        return new SigIdx();\n    }\n}\nexports.SigIdx = SigIdx;\n/**\n * Signature for a [[Tx]]\n */\nclass Signature extends nbytes_1.NBytes {\n    /**\n     * Signature for a [[Tx]]\n     */\n    constructor() {\n        super();\n        this._typeName = \"Signature\";\n        this._typeID = undefined;\n        //serialize and deserialize both are inherited\n        this.bytes = buffer_1.Buffer.alloc(65);\n        this.bsize = 65;\n    }\n    clone() {\n        let newbase = new Signature();\n        newbase.fromBuffer(this.toBuffer());\n        return newbase;\n    }\n    create(...args) {\n        return new Signature();\n    }\n}\nexports.Signature = Signature;\nclass Credential extends serialization_1.Serializable {\n    constructor(sigarray = undefined) {\n        super();\n        this._typeName = \"Credential\";\n        this._typeID = undefined;\n        this.sigArray = [];\n        /**\n           * Adds a signature to the credentials and returns the index off the added signature.\n           */\n        this.addSignature = (sig) => {\n            this.sigArray.push(sig);\n            return this.sigArray.length - 1;\n        };\n        if (typeof sigarray !== 'undefined') {\n            /* istanbul ignore next */\n            this.sigArray = sigarray;\n        }\n    }\n    serialize(encoding = \"hex\") {\n        let fields = super.serialize(encoding);\n        return Object.assign(Object.assign({}, fields), { \"sigArray\": this.sigArray.map((s) => s.serialize(encoding)) });\n    }\n    ;\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.sigArray = fields[\"sigArray\"].map((s) => {\n            let sig = new Signature();\n            sig.deserialize(s, encoding);\n            return sig;\n        });\n    }\n    fromBuffer(bytes, offset = 0) {\n        const siglen = bintools.copyFrom(bytes, offset, offset + 4).readUInt32BE(0);\n        offset += 4;\n        this.sigArray = [];\n        for (let i = 0; i < siglen; i++) {\n            const sig = new Signature();\n            offset = sig.fromBuffer(bytes, offset);\n            this.sigArray.push(sig);\n        }\n        return offset;\n    }\n    toBuffer() {\n        const siglen = buffer_1.Buffer.alloc(4);\n        siglen.writeInt32BE(this.sigArray.length, 0);\n        const barr = [siglen];\n        let bsize = siglen.length;\n        for (let i = 0; i < this.sigArray.length; i++) {\n            const sigbuff = this.sigArray[i].toBuffer();\n            bsize += sigbuff.length;\n            barr.push(sigbuff);\n        }\n        return buffer_1.Buffer.concat(barr, bsize);\n    }\n}\nexports.Credential = Credential;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlZGVudGlhbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tbW9uL2NyZWRlbnRpYWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7R0FHRztBQUNILHFDQUFrQztBQUNsQyxvQ0FBaUM7QUFDakMsaUVBQXlDO0FBQ3pDLDBEQUF5RjtBQUd6Rjs7R0FFRztBQUNILE1BQU0sUUFBUSxHQUFZLGtCQUFRLENBQUMsV0FBVyxFQUFFLENBQUM7QUFDakQsTUFBTSxVQUFVLEdBQUcsNkJBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUUvQzs7R0FFRztBQUNILE1BQWEsTUFBTyxTQUFRLGVBQU07SUEyQ2hDOztPQUVHO0lBQ0g7UUFDSSxLQUFLLEVBQUUsQ0FBQztRQTlDRixjQUFTLEdBQUcsUUFBUSxDQUFDO1FBQ3JCLFlBQU8sR0FBRyxTQUFTLENBQUM7UUFjcEIsV0FBTSxHQUFVLGVBQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDakMsVUFBSyxHQUFHLGVBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEIsVUFBSyxHQUFHLENBQUMsQ0FBQztRQUVwQjs7V0FFRztRQUNILGNBQVMsR0FBRyxDQUFDLE9BQWMsRUFBRSxFQUFFO1lBQzNCLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDO1FBQzFCLENBQUMsQ0FBQztRQUVGOztXQUVHO1FBQ0gsY0FBUyxHQUFHLEdBQVUsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7SUFrQnJDLENBQUM7SUE1Q0QsU0FBUyxDQUFDLFdBQThCLEtBQUs7UUFDM0MsSUFBSSxNQUFNLEdBQVUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUM5Qyx1Q0FDSyxNQUFNLEtBQ1QsUUFBUSxFQUFFLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFF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LENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNuRCxLQUFLLElBQUksT0FBTyxDQUFDLE1BQU0sQ0FBQztZQUN4QixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQ3BCO1FBQ0QsT0FBTyxlQUFNLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNwQyxDQUFDO0NBZUY7QUF0RUQsZ0NBc0VDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqIEBtb2R1bGUgQ29tbW9uLVNpZ25hdHVyZVxuICovXG5pbXBvcnQgeyBOQnl0ZXMgfSBmcm9tICcuL25ieXRlcyc7XG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tICdidWZmZXIvJztcbmltcG9ydCBCaW5Ub29scyBmcm9tICcuLi91dGlscy9iaW50b29scyc7XG5pbXBvcnQgeyBTZXJpYWxpemFibGUsIFNlcmlhbGl6YXRpb24sIFNlcmlhbGl6ZWRFbmNvZGluZyB9IGZyb20gJy4uL3V0aWxzL3NlcmlhbGl6YXRpb24nO1xuXG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5jb25zdCBiaW50b29sczpCaW5Ub29scyA9IEJpblRvb2xzLmdldEluc3RhbmNlKCk7XG5jb25zdCBzZXJpYWxpemVyID0gU2VyaWFsaXphdGlvbi5nZXRJbnN0YW5jZSgpO1xuXG4vKipcbiAqIFR5cGUgcmVwcmVzZW50aW5nIGEgW1tTaWduYXR1cmVdXSBpbmRleCB1c2VkIGluIFtbSW5wdXRdXVxuICovXG5leHBvcnQgY2xhc3MgU2lnSWR4IGV4dGVuZHMgTkJ5dGVzIHtcbiAgcHJvdGVjdGVkIF90eXBlTmFtZSA9IFwiU2lnSWR4XCI7XG4gIHByb3RlY3RlZCBfdHlwZUlEID0gdW5kZWZpbmVkO1xuXG4gIHNlcmlhbGl6ZShlbmNvZGluZzpTZXJpYWxpemVkRW5jb2RpbmcgPSBcImhleFwiKTpvYmplY3Qge1xuICAgIGxldCBmaWVsZHM6b2JqZWN0ID0gc3VwZXIuc2VyaWFsaXplKGVuY29kaW5nKTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uZmllbGRzLFxuICAgICAgXCJzb3VyY2VcIjogc2VyaWFsaXplci5lbmNvZGVyKHRoaXMuc291cmNlLCBlbmNvZGluZywgXCJCdWZmZXJcIiwgXCJoZXhcIilcbiAgICB9XG4gIH07XG4gIGRlc2VyaWFsaXplKGZpZWxkczpvYmplY3QsIGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpIHtcbiAgICBzdXBlci5kZXNlcmlhbGl6ZShmaWVsZHMsIGVuY29kaW5nKTtcbiAgICB0aGlzLnNvdXJjZSA9IHNlcmlhbGl6ZXIuZGVjb2RlcihmaWVsZHNbXCJzb3VyY2VcIl0sIGVuY29kaW5nLCBcImhleFwiLCBcIkJ1ZmZlclwiKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzb3VyY2U6QnVmZmVyID0gQnVmZmVyLmFsbG9jKDIwKTtcbiAgcHJvdGVjdGVkIGJ5dGVzID0gQnVmZmVyLmFsbG9jKDQpO1xuICBwcm90ZWN0ZWQgYnNpemUgPSA0O1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBzb3VyY2UgYWRkcmVzcyBmb3IgdGhlIHNpZ25hdHVyZVxuICAgKi9cbiAgc2V0U291cmNlID0gKGFkZHJlc3M6QnVmZmVyKSA9PiB7XG4gICAgICB0aGlzLnNvdXJjZSA9IGFkZHJlc3M7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyB0aGUgc291cmNlIGFkZHJlc3MgZm9yIHRoZSBzaWduYXR1cmVcbiAgICovXG4gIGdldFNvdXJjZSA9ICgpOkJ1ZmZlciA9PiB0aGlzLnNvdXJjZTtcblxuICBjbG9uZSgpOnRoaXMge1xuICAgIGxldCBuZXdiYXNlOlNpZ0lkeCA9IG5ldyBTaWdJZHgoKTtcbiAgICBuZXdiYXNlLmZyb21CdWZmZXIodGhpcy50b0J1ZmZlcigpKTtcbiAgICByZXR1cm4gbmV3YmFzZSBhcyB0aGlzO1xuICB9XG5cbiAgY3JlYXRlKC4uLmFyZ3M6YW55W10pOnRoaXMge1xuICAgIHJldHVybiBuZXcgU2lnSWR4KCkgYXMgdGhpcztcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFR5cGUgcmVwcmVzZW50aW5nIGEgW1tTaWduYXR1cmVdXSBpbmRleCB1c2VkIGluIFtbSW5wdXRdXVxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgICBzdXBlcigpO1xuICB9XG59XG5cbi8qKlxuICogU2lnbmF0dXJlIGZvciBhIFtbVHhdXVxuICovXG5leHBvcnQgY2xhc3MgU2lnbmF0dXJlIGV4dGVuZHMgTkJ5dGVzIHtcbiAgcHJvdGVjdGVkIF90eXBlTmFtZSA9IFwiU2lnbmF0dXJlXCI7XG4gIHByb3RlY3RlZCBfdHlwZUlEID0gdW5kZWZpbmVkO1xuXG4gIC8vc2VyaWFsaXplIGFuZCBkZXNlcmlhbGl6ZSBib3RoIGFyZSBpbmhlcml0ZWRcblxuICBwcm90ZWN0ZWQgYnl0ZXMgPSBCdWZmZXIuYWxsb2MoNjUpO1xuICBwcm90ZWN0ZWQgYnNpemUgPSA2NTtcblxuICBjbG9uZSgpOnRoaXMge1xuICAgIGxldCBuZXdiYXNlOlNpZ25hdHVyZSA9IG5ldyBTaWduYXR1cmUoKTtcbiAgICBuZXdiYXNlLmZyb21CdWZmZXIodGhpcy50b0J1ZmZlcigpKTtcbiAgICByZXR1cm4gbmV3YmFzZSBhcyB0aGlzO1xuICB9XG5cbiAgY3JlYXRlKC4uLmFyZ3M6YW55W10pOnRoaXMge1xuICAgIHJldHVybiBuZXcgU2lnbmF0dXJlKCkgYXMgdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTaWduYXR1cmUgZm9yIGEgW1tUeF1dXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgIHN1cGVyKCk7XG4gIH1cbn1cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENyZWRlbnRpYWwgZXh0ZW5kcyBTZXJpYWxpemFibGV7XG4gIHByb3RlY3RlZCBfdHlwZU5hbWUgPSBcIkNyZWRlbnRpYWxcIjtcbiAgcHJvdGVjdGVkIF90eXBlSUQgPSB1bmRlZmluZWQ7XG5cbiAgc2VyaWFsaXplKGVuY29kaW5nOlNlcmlhbGl6ZWRFbmNvZGluZyA9IFwiaGV4XCIpOm9iamVjdCB7XG4gICAgbGV0IGZpZWxkczpvYmplY3QgPSBzdXBlci5zZXJpYWxpemUoZW5jb2RpbmcpO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5maWVsZHMsXG4gICAgICBcInNpZ0FycmF5XCI6IHRoaXMuc2lnQXJyYXkubWFwKChzKSA9PiBzLnNlcmlhbGl6ZShlbmNvZGluZykpXG4gICAgfVxuICB9O1xuICBkZXNlcmlhbGl6ZShmaWVsZHM6b2JqZWN0LCBlbmNvZGluZzpTZXJpYWxpemVkRW5jb2RpbmcgPSBcImhleFwiKSB7XG4gICAgc3VwZXIuZGVzZXJpYWxpemUoZmllbGRzLCBlbmNvZGluZyk7XG4gICAgdGhpcy5zaWdBcnJheSA9IGZpZWxkc1tcInNpZ0FycmF5XCJdLm1hcCgoczpvYmplY3QpID0+IHtcbiAgICAgIGxldCBzaWc6U2lnbmF0dXJlID0gbmV3IFNpZ25hdHVyZSgpO1xuICAgICAgc2lnLmRlc2VyaWFsaXplKHMsIGVuY29kaW5nKTtcbiAgICAgIHJldHVybiBzaWc7XG4gICAgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2lnQXJyYXk6QXJyYXk8U2lnbmF0dXJlPiA9IFtdO1xuXG4gIGFic3RyYWN0IGdldENyZWRlbnRpYWxJRCgpOm51bWJlcjtcblxuICAvKipcbiAgICAgKiBBZGRzIGEgc2lnbmF0dXJlIHRvIHRoZSBjcmVkZW50aWFscyBhbmQgcmV0dXJucyB0aGUgaW5kZXggb2ZmIHRoZSBhZGRlZCBzaWduYXR1cmUuXG4gICAgICovXG4gIGFkZFNpZ25hdHVyZSA9IChzaWc6U2lnbmF0dXJlKTpudW1iZXIgPT4ge1xuICAgIHRoaXMuc2lnQXJyYXkucHVzaChzaWcpO1xuICAgIHJldHVybiB0aGlzLnNpZ0FycmF5Lmxlbmd0aCAtIDE7XG4gIH07XG5cbiAgZnJvbUJ1ZmZlcihieXRlcywgb2Zmc2V0Om51bWJlciA9IDApOm51bWJlciB7XG4gICAgY29uc3Qgc2lnbGVuOm51bWJlciA9IGJpbnRvb2xzLmNvcHlGcm9tKGJ5dGVzLCBvZmZzZXQsIG9mZnNldCArIDQpLnJlYWRVSW50MzJCRSgwKTtcbiAgICBvZmZzZXQgKz0gNDtcbiAgICB0aGlzLnNpZ0FycmF5ID0gW107XG4gICAgZm9yIChsZXQgaTpudW1iZXIgPSAwOyBpIDwgc2lnbGVuOyBpKyspIHtcbiAgICAgIGNvbnN0IHNpZzpTaWduYXR1cmUgPSBuZXcgU2lnbmF0dXJlKCk7XG4gICAgICBvZmZzZXQgPSBzaWcuZnJvbUJ1ZmZlcihieXRlcywgb2Zmc2V0KTtcbiAgICAgIHRoaXMuc2lnQXJyYXkucHVzaChzaWcpO1xuICAgIH1cbiAgICByZXR1cm4gb2Zmc2V0O1xuICB9XG5cbiAgdG9CdWZmZXIoKTpCdWZmZXIge1xuICAgIGNvbnN0IHNpZ2xlbjpCdWZmZXIgPSBCdWZmZXIuYWxsb2MoNCk7XG4gICAgc2lnbGVuLndyaXRlSW50MzJCRSh0aGlzLnNpZ0FycmF5Lmxlbmd0aCwgMCk7XG4gICAgY29uc3QgYmFycjpBcnJheTxCdWZmZXI+ID0gW3NpZ2xlbl07XG4gICAgbGV0IGJzaXplOm51bWJlciA9IHNpZ2xlbi5sZW5ndGg7XG4gICAgZm9yIChsZXQgaTpudW1iZXIgPSAwOyBpIDwgdGhpcy5zaWdBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgc2lnYnVmZjpCdWZmZXIgPSB0aGlzLnNpZ0FycmF5W2ldLnRvQnVmZmVyKCk7XG4gICAgICBic2l6ZSArPSBzaWdidWZmLmxlbmd0aDtcbiAgICAgIGJhcnIucHVzaChzaWdidWZmKTtcbiAgICB9XG4gICAgcmV0dXJuIEJ1ZmZlci5jb25jYXQoYmFyciwgYnNpemUpO1xuICB9XG5cbiAgYWJzdHJhY3QgY2xvbmUoKTp0aGlzO1xuXG4gIGFic3RyYWN0IGNyZWF0ZSguLi5hcmdzOmFueVtdKTp0aGlzO1xuXG4gIGFic3RyYWN0IHNlbGVjdChpZDpudW1iZXIsIC4uLmFyZ3M6YW55W10pOkNyZWRlbnRpYWw7XG5cbiAgY29uc3RydWN0b3Ioc2lnYXJyYXk6QXJyYXk8U2lnbmF0dXJlPiA9IHVuZGVmaW5lZCkge1xuICAgIHN1cGVyKCk7XG4gICAgaWYgKHR5cGVvZiBzaWdhcnJheSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICB0aGlzLnNpZ0FycmF5ID0gc2lnYXJyYXk7XG4gICAgfVxuICB9XG59Il19","\"use strict\";\n/**\n * @packageDocumentation\n * @module API-PlatformVM-Credentials\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SECPCredential = exports.SelectCredentialClass = void 0;\nconst constants_1 = require(\"./constants\");\nconst credentials_1 = require(\"../../common/credentials\");\n/**\n * Takes a buffer representing the credential and returns the proper [[Credential]] instance.\n *\n * @param credid A number representing the credential ID parsed prior to the bytes passed in\n *\n * @returns An instance of an [[Credential]]-extended class.\n */\nexports.SelectCredentialClass = (credid, ...args) => {\n    if (credid === constants_1.PlatformVMConstants.SECPCREDENTIAL) {\n        return new SECPCredential(...args);\n    }\n    /* istanbul ignore next */\n    throw new Error(`Error - SelectCredentialClass: unknown credid ${credid}`);\n};\nclass SECPCredential extends credentials_1.Credential {\n    constructor() {\n        super(...arguments);\n        this._typeName = \"SECPCredential\";\n        this._typeID = constants_1.PlatformVMConstants.SECPCREDENTIAL;\n    }\n    //serialize and deserialize both are inherited\n    getCredentialID() {\n        return this._typeID;\n    }\n    clone() {\n        let newbase = new SECPCredential();\n        newbase.fromBuffer(this.toBuffer());\n        return newbase;\n    }\n    create(...args) {\n        return new SECPCredential(...args);\n    }\n    select(id, ...args) {\n        let newbasetx = exports.SelectCredentialClass(id, ...args);\n        return newbasetx;\n    }\n}\nexports.SECPCredential = SECPCredential;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlZGVudGlhbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvYXBpcy9wbGF0Zm9ybXZtL2NyZWRlbnRpYWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7OztBQUVILDJDQUFrRDtBQUNsRCwwREFBc0Q7QUFFdEQ7Ozs7OztHQU1HO0FBQ1UsUUFBQSxxQkFBcUIsR0FBRyxDQUFDLE1BQWEsRUFBRSxHQUFHLElBQWUsRUFBYSxFQUFFO0lBQ3BGLElBQUksTUFBTSxLQUFLLCtCQUFtQixDQUFDLGNBQWMsRUFBRTtRQUNqRCxPQUFPLElBQUksY0FBYyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7S0FDcEM7SUFDRCwwQkFBMEI7SUFDMUIsTUFBTSxJQUFJLEtBQUssQ0FBQyxpREFBaUQsTUFBTSxFQUFFLENBQUMsQ0FBQztBQUM3RSxDQUFDLENBQUM7QUFFRixNQUFhLGNBQWUsU0FBUSx3QkFBVTtJQUE5Qzs7UUFDWSxjQUFTLEdBQUcsZ0JBQWdCLENBQUM7UUFDN0IsWUFBTyxHQUFHLCtCQUFtQixDQUFDLGNBQWMsQ0FBQztJQXVCekQsQ0FBQztJQXJCQyw4Q0FBOEM7SUFFOUMsZUFBZTtRQUNiLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUN0QixDQUFDO0lBR0QsS0FBSztRQUNILElBQUksT0FBTyxHQUFrQixJQUFJLGNBQWMsRUFBRSxDQUFDO1FBQ2xELE9BQU8sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7UUFDcEMsT0FBTyxPQUFlLENBQUM7SUFDekIsQ0FBQztJQUVELE1BQU0sQ0FBQyxHQUFHLElBQVU7UUFDbEIsT0FBTyxJQUFJLGNBQWMsQ0FBQyxHQUFHLElBQUksQ0FBUyxDQUFDO0lBQzdDLENBQUM7SUFFRCxNQUFNLENBQUMsRUFBUyxFQUFFLEdBQUcsSUFBVTtRQUM3QixJQUFJLFNBQVMsR0FBYyw2QkFBcUIsQ0FBQyxFQUFFLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUM5RCxPQUFPLFNBQVMsQ0FBQztJQUNuQixDQUFDO0NBQ0Y7QUF6QkQsd0NBeUJDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqIEBtb2R1bGUgQVBJLVBsYXRmb3JtVk0tQ3JlZGVudGlhbHNcbiAqL1xuXG5pbXBvcnQgeyBQbGF0Zm9ybVZNQ29uc3RhbnRzIH0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgQ3JlZGVudGlhbCB9IGZyb20gJy4uLy4uL2NvbW1vbi9jcmVkZW50aWFscyc7XG5cbi8qKlxuICogVGFrZXMgYSBidWZmZXIgcmVwcmVzZW50aW5nIHRoZSBjcmVkZW50aWFsIGFuZCByZXR1cm5zIHRoZSBwcm9wZXIgW1tDcmVkZW50aWFsXV0gaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIGNyZWRpZCBBIG51bWJlciByZXByZXNlbnRpbmcgdGhlIGNyZWRlbnRpYWwgSUQgcGFyc2VkIHByaW9yIHRvIHRoZSBieXRlcyBwYXNzZWQgaW5cbiAqXG4gKiBAcmV0dXJucyBBbiBpbnN0YW5jZSBvZiBhbiBbW0NyZWRlbnRpYWxdXS1leHRlbmRlZCBjbGFzcy5cbiAqL1xuZXhwb3J0IGNvbnN0IFNlbGVjdENyZWRlbnRpYWxDbGFzcyA9IChjcmVkaWQ6bnVtYmVyLCAuLi5hcmdzOkFycmF5PGFueT4pOkNyZWRlbnRpYWwgPT4ge1xuICBpZiAoY3JlZGlkID09PSBQbGF0Zm9ybVZNQ29uc3RhbnRzLlNFQ1BDUkVERU5USUFMKSB7XG4gICAgcmV0dXJuIG5ldyBTRUNQQ3JlZGVudGlhbCguLi5hcmdzKTtcbiAgfVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIC0gU2VsZWN0Q3JlZGVudGlhbENsYXNzOiB1bmtub3duIGNyZWRpZCAke2NyZWRpZH1gKTtcbn07XG5cbmV4cG9ydCBjbGFzcyBTRUNQQ3JlZGVudGlhbCBleHRlbmRzIENyZWRlbnRpYWwge1xuICBwcm90ZWN0ZWQgX3R5cGVOYW1lID0gXCJTRUNQQ3JlZGVudGlhbFwiO1xuICBwcm90ZWN0ZWQgX3R5cGVJRCA9IFBsYXRmb3JtVk1Db25zdGFudHMuU0VDUENSRURFTlRJQUw7XG5cbiAgLy9zZXJpYWxpemUgYW5kIGRlc2VyaWFsaXplIGJvdGggYXJlIGluaGVyaXRlZFxuXG4gIGdldENyZWRlbnRpYWxJRCgpOm51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3R5cGVJRDtcbiAgfVxuXG5cbiAgY2xvbmUoKTp0aGlzIHtcbiAgICBsZXQgbmV3YmFzZTpTRUNQQ3JlZGVudGlhbCA9IG5ldyBTRUNQQ3JlZGVudGlhbCgpO1xuICAgIG5ld2Jhc2UuZnJvbUJ1ZmZlcih0aGlzLnRvQnVmZmVyKCkpO1xuICAgIHJldHVybiBuZXdiYXNlIGFzIHRoaXM7XG4gIH1cblxuICBjcmVhdGUoLi4uYXJnczphbnlbXSk6dGhpcyB7XG4gICAgcmV0dXJuIG5ldyBTRUNQQ3JlZGVudGlhbCguLi5hcmdzKSBhcyB0aGlzO1xuICB9XG5cbiAgc2VsZWN0KGlkOm51bWJlciwgLi4uYXJnczphbnlbXSk6Q3JlZGVudGlhbCB7XG4gICAgbGV0IG5ld2Jhc2V0eDpDcmVkZW50aWFsID0gU2VsZWN0Q3JlZGVudGlhbENsYXNzKGlkLCAuLi5hcmdzKTtcbiAgICByZXR1cm4gbmV3YmFzZXR4O1xuICB9XG59XG5cbiJdfQ==","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseTx = void 0;\n/**\n * @packageDocumentation\n * @module API-PlatformVM-BaseTx\n */\nconst buffer_1 = require(\"buffer/\");\nconst bintools_1 = __importDefault(require(\"../../utils/bintools\"));\nconst constants_1 = require(\"./constants\");\nconst outputs_1 = require(\"./outputs\");\nconst inputs_1 = require(\"./inputs\");\nconst credentials_1 = require(\"./credentials\");\nconst tx_1 = require(\"../../common/tx\");\nconst credentials_2 = require(\"../../common/credentials\");\nconst constants_2 = require(\"../../utils/constants\");\nconst tx_2 = require(\"../platformvm/tx\");\nconst serialization_1 = require(\"../../utils/serialization\");\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\nconst serializer = serialization_1.Serialization.getInstance();\n/**\n * Class representing a base for all transactions.\n */\nclass BaseTx extends tx_1.StandardBaseTx {\n    /**\n     * Class representing a BaseTx which is the foundation for all transactions.\n     *\n     * @param networkid Optional networkid, [[DefaultNetworkID]]\n     * @param blockchainid Optional blockchainid, default Buffer.alloc(32, 16)\n     * @param outs Optional array of the [[TransferableOutput]]s\n     * @param ins Optional array of the [[TransferableInput]]s\n     * @param memo Optional {@link https://github.com/feross/buffer|Buffer} for the memo field\n     */\n    constructor(networkid = constants_2.DefaultNetworkID, blockchainid = buffer_1.Buffer.alloc(32, 16), outs = undefined, ins = undefined, memo = undefined) {\n        super(networkid, blockchainid, outs, ins, memo);\n        this._typeName = \"BaseTx\";\n        this._typeID = constants_1.PlatformVMConstants.CREATESUBNETTX;\n        /**\n         * Returns the id of the [[BaseTx]]\n         */\n        this.getTxType = () => {\n            return constants_1.PlatformVMConstants.BASETX;\n        };\n    }\n    deserialize(fields, encoding = \"hex\") {\n        super.deserialize(fields, encoding);\n        this.outs = fields[\"outs\"].map((o) => {\n            let newOut = new outputs_1.TransferableOutput();\n            newOut.deserialize(o, encoding);\n            return newOut;\n        });\n        this.ins = fields[\"ins\"].map((i) => {\n            let newIn = new inputs_1.TransferableInput();\n            newIn.deserialize(i, encoding);\n            return newIn;\n        });\n        this.numouts = buffer_1.Buffer.alloc(4);\n        this.numouts.writeUInt32BE(this.outs.length, 0);\n        this.numins = buffer_1.Buffer.alloc(4);\n        this.numins.writeUInt32BE(this.ins.length, 0);\n    }\n    getOuts() {\n        return this.outs;\n    }\n    getIns() {\n        return this.ins;\n    }\n    getTotalOuts() {\n        return this.getOuts();\n    }\n    /**\n     * Takes a {@link https://github.com/feross/buffer|Buffer} containing an [[BaseTx]], parses it, populates the class, and returns the length of the BaseTx in bytes.\n     *\n     * @param bytes A {@link https://github.com/feross/buffer|Buffer} containing a raw [[BaseTx]]\n     *\n     * @returns The length of the raw [[BaseTx]]\n     *\n     * @remarks assume not-checksummed\n     */\n    fromBuffer(bytes, offset = 0) {\n        this.networkid = bintools.copyFrom(bytes, offset, offset + 4);\n        offset += 4;\n        this.blockchainid = bintools.copyFrom(bytes, offset, offset + 32);\n        offset += 32;\n        this.numouts = bintools.copyFrom(bytes, offset, offset + 4);\n        offset += 4;\n        const outcount = this.numouts.readUInt32BE(0);\n        this.outs = [];\n        for (let i = 0; i < outcount; i++) {\n            const xferout = new outputs_1.TransferableOutput();\n            offset = xferout.fromBuffer(bytes, offset);\n            this.outs.push(xferout);\n        }\n        this.numins = bintools.copyFrom(bytes, offset, offset + 4);\n        offset += 4;\n        const incount = this.numins.readUInt32BE(0);\n        this.ins = [];\n        for (let i = 0; i < incount; i++) {\n            const xferin = new inputs_1.TransferableInput();\n            offset = xferin.fromBuffer(bytes, offset);\n            this.ins.push(xferin);\n        }\n        let memolen = bintools.copyFrom(bytes, offset, offset + 4).readUInt32BE(0);\n        offset += 4;\n        this.memo = bintools.copyFrom(bytes, offset, offset + memolen);\n        offset += memolen;\n        return offset;\n    }\n    /**\n     * Takes the bytes of an [[UnsignedTx]] and returns an array of [[Credential]]s\n     *\n     * @param msg A Buffer for the [[UnsignedTx]]\n     * @param kc An [[KeyChain]] used in signing\n     *\n     * @returns An array of [[Credential]]s\n     */\n    sign(msg, kc) {\n        const sigs = [];\n        for (let i = 0; i < this.ins.length; i++) {\n            const cred = credentials_1.SelectCredentialClass(this.ins[i].getInput().getCredentialID());\n            const sigidxs = this.ins[i].getInput().getSigIdxs();\n            for (let j = 0; j < sigidxs.length; j++) {\n                const keypair = kc.getKey(sigidxs[j].getSource());\n                const signval = keypair.sign(msg);\n                const sig = new credentials_2.Signature();\n                sig.fromBuffer(signval);\n                cred.addSignature(sig);\n            }\n            sigs.push(cred);\n        }\n        return sigs;\n    }\n    clone() {\n        let newbase = new BaseTx();\n        newbase.fromBuffer(this.toBuffer());\n        return newbase;\n    }\n    create(...args) {\n        return new BaseTx(...args);\n    }\n    select(id, ...args) {\n        let newbasetx = tx_2.SelectTxClass(id, ...args);\n        return newbasetx;\n    }\n}\nexports.BaseTx = BaseTx;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZXR4LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2FwaXMvcGxhdGZvcm12bS9iYXNldHgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7OztHQUdHO0FBQ0gsb0NBQWlDO0FBQ2pDLG9FQUE0QztBQUM1QywyQ0FBa0Q7QUFDbEQsdUNBQStDO0FBQy9DLHFDQUE2QztBQUM3QywrQ0FBc0Q7QUFFdEQsd0NBQWlEO0FBQ2pELDBEQUF5RTtBQUN6RSxxREFBeUQ7QUFDekQseUNBQWlEO0FBQ2pELDZEQUE4RTtBQUU5RTs7R0FFRztBQUNILE1BQU0sUUFBUSxHQUFHLGtCQUFRLENBQUMsV0FBVyxFQUFFLENBQUM7QUFDeEMsTUFBTSxVQUFVLEdBQUcsNkJBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUUvQzs7R0FFRztBQUNILE1BQWEsTUFBTyxTQUFRLG1CQUFpQztJQTBIM0Q7Ozs7Ozs7O09BUUc7SUFDSCxZQUFZLFlBQW1CLDRCQUFnQixFQUFFLGVBQXNCLGVBQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLE9BQWlDLFNBQVMsRUFBRSxNQUErQixTQUFTLEVBQUUsT0FBYyxTQUFTO1FBQ3hNLEtBQUssQ0FBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFuSXhDLGNBQVMsR0FBRyxRQUFRLENBQUM7UUFDckIsWUFBTyxHQUFHLCtCQUFtQixDQUFDLGNBQWMsQ0FBQztRQWlDdkQ7O1dBRUc7UUFDSCxjQUFTLEdBQUcsR0FBVSxFQUFFO1lBQ3RCLE9BQU8sK0JBQW1CLENBQUMsTUFBTSxDQUFDO1FBQ3BDLENBQUMsQ0FBQTtJQTZGRCxDQUFDO0lBaklELFdBQVcsQ0FBQyxNQUFhLEVBQUUsV0FBOEIsS0FBSztRQUM1RCxLQUFLLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQztRQUNwQyxJ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LEVBQUUsQ0FBQztZQUNsRSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDdkMsTUFBTSxPQUFPLEdBQVcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQztnQkFDMUQsTUFBTSxPQUFPLEdBQVUsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDekMsTUFBTSxHQUFHLEdBQWEsSUFBSSx1QkFBUyxFQUFFLENBQUM7Z0JBQ3RDLEdBQUcsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQ3hCLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDeEI7WUFDRCxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ2pCO1FBQ0QsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsS0FBSztRQUNILElBQUksT0FBTyxHQUFVLElBQUksTUFBTSxFQUFFLENBQUM7UUFDbEMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztRQUNwQyxPQUFPLE9BQWUsQ0FBQztJQUN6QixDQUFDO0lBRUQsTUFBTSxDQUFDLEdBQUcsSUFBVTtRQUNsQixPQUFPLElBQUksTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFTLENBQUM7SUFDckMsQ0FBQztJQUVELE1BQU0sQ0FBQyxFQUFTLEVBQUUsR0FBRyxJQUFVO1FBQzdCLElBQUksU0FBUyxHQUFVLGtCQUFhLENBQUMsRUFBRSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFDbEQsT0FBTyxTQUFpQixDQUFDO0lBQzNCLENBQUM7Q0FjRjtBQXRJRCx3QkFzSUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICogQG1vZHVsZSBBUEktUGxhdGZvcm1WTS1CYXNlVHhcbiAqL1xuaW1wb3J0IHsgQnVmZmVyIH0gZnJvbSAnYnVmZmVyLyc7XG5pbXBvcnQgQmluVG9vbHMgZnJvbSAnLi4vLi4vdXRpbHMvYmludG9vbHMnO1xuaW1wb3J0IHsgUGxhdGZvcm1WTUNvbnN0YW50cyB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IFRyYW5zZmVyYWJsZU91dHB1dCB9IGZyb20gJy4vb3V0cHV0cyc7XG5pbXBvcnQgeyBUcmFuc2ZlcmFibGVJbnB1dCB9IGZyb20gJy4vaW5wdXRzJztcbmltcG9ydCB7IFNlbGVjdENyZWRlbnRpYWxDbGFzcyB9IGZyb20gJy4vY3JlZGVudGlhbHMnO1xuaW1wb3J0IHsgS2V5Q2hhaW4sIEtleVBhaXIgfSBmcm9tICcuL2tleWNoYWluJztcbmltcG9ydCB7IFN0YW5kYXJkQmFzZVR4IH0gZnJvbSAnLi4vLi4vY29tbW9uL3R4JztcbmltcG9ydCB7IFNpZ25hdHVyZSwgU2lnSWR4LCBDcmVkZW50aWFsIH0gZnJvbSAnLi4vLi4vY29tbW9uL2NyZWRlbnRpYWxzJztcbmltcG9ydCB7IERlZmF1bHROZXR3b3JrSUQgfSBmcm9tICcuLi8uLi91dGlscy9jb25zdGFudHMnO1xuaW1wb3J0IHsgU2VsZWN0VHhDbGFzcyB9IGZyb20gJy4uL3BsYXRmb3Jtdm0vdHgnO1xuaW1wb3J0IHsgU2VyaWFsaXphdGlvbiwgU2VyaWFsaXplZEVuY29kaW5nIH0gZnJvbSAnLi4vLi4vdXRpbHMvc2VyaWFsaXphdGlvbic7XG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5jb25zdCBiaW50b29scyA9IEJpblRvb2xzLmdldEluc3RhbmNlKCk7XG5jb25zdCBzZXJpYWxpemVyID0gU2VyaWFsaXphdGlvbi5nZXRJbnN0YW5jZSgpO1xuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIGJhc2UgZm9yIGFsbCB0cmFuc2FjdGlvbnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlVHggZXh0ZW5kcyBTdGFuZGFyZEJhc2VUeDxLZXlQYWlyLCBLZXlDaGFpbj57XG4gIHByb3RlY3RlZCBfdHlwZU5hbWUgPSBcIkJhc2VUeFwiO1xuICBwcm90ZWN0ZWQgX3R5cGVJRCA9IFBsYXRmb3JtVk1Db25zdGFudHMuQ1JFQVRFU1VCTkVUVFg7XG5cbiAgZGVzZXJpYWxpemUoZmllbGRzOm9iamVjdCwgZW5jb2Rpbmc6U2VyaWFsaXplZEVuY29kaW5nID0gXCJoZXhcIikge1xuICAgIHN1cGVyLmRlc2VyaWFsaXplKGZpZWxkcywgZW5jb2RpbmcpO1xuICAgIHRoaXMub3V0cyA9IGZpZWxkc1tcIm91dHNcIl0ubWFwKChvOlRyYW5zZmVyYWJsZU91dHB1dCkgPT4ge1xuICAgICAgbGV0IG5ld091dDpUcmFuc2ZlcmFibGVPdXRwdXQgPSBuZXcgVHJhbnNmZXJhYmxlT3V0cHV0KCk7XG4gICAgICBuZXdPdXQuZGVzZXJpYWxpemUobywgZW5jb2RpbmcpO1xuICAgICAgcmV0dXJuIG5ld091dDtcbiAgICB9KTtcbiAgICB0aGlzLmlucyA9IGZpZWxkc1tcImluc1wiXS5tYXAoKGk6VHJhbnNmZXJhYmxlSW5wdXQpID0+IHtcbiAgICAgIGxldCBuZXdJbjpUcmFuc2ZlcmFibGVJbnB1dCA9IG5ldyBUcmFuc2ZlcmFibGVJbnB1dCgpO1xuICAgICAgbmV3SW4uZGVzZXJpYWxpemUoaSwgZW5jb2RpbmcpO1xuICAgICAgcmV0dXJuIG5ld0luO1xuICAgIH0pO1xuICAgIHRoaXMubnVtb3V0cyA9IEJ1ZmZlci5hbGxvYyg0KTtcbiAgICB0aGlzLm51bW91dHMud3JpdGVVSW50MzJCRSh0aGlzLm91dHMubGVuZ3RoLCAwKTtcbiAgICB0aGlzLm51bWlucyA9IEJ1ZmZlci5hbGxvYyg0KTtcbiAgICB0aGlzLm51bWlucy53cml0ZVVJbnQzMkJFKHRoaXMuaW5zLmxlbmd0aCwgMCk7XG4gIH1cblxuICBnZXRPdXRzKCk6QXJyYXk8VHJhbnNmZXJhYmxlT3V0cHV0PiB7XG4gICAgcmV0dXJuIHRoaXMub3V0cyBhcyBBcnJheTxUcmFuc2ZlcmFibGVPdXRwdXQ+O1xuICB9XG5cbiAgZ2V0SW5zKCk6QXJyYXk8VHJhbnNmZXJhYmxlSW5wdXQ+IHtcbiAgICByZXR1cm4gdGhpcy5pbnMgYXMgQXJyYXk8VHJhbnNmZXJhYmxlSW5wdXQ+O1xuICB9XG5cblxuICBnZXRUb3RhbE91dHMoKTpBcnJheTxUcmFuc2ZlcmFibGVPdXRwdXQ+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRPdXRzKCkgYXMgQXJyYXk8VHJhbnNmZXJhYmxlT3V0cHV0PjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBpZCBvZiB0aGUgW1tCYXNlVHhdXVxuICAgKi9cbiAgZ2V0VHhUeXBlID0gKCk6bnVtYmVyID0+IHtcbiAgICByZXR1cm4gUGxhdGZvcm1WTUNvbnN0YW50cy5CQVNFVFg7XG4gIH1cblxuICAvKipcbiAgICogVGFrZXMgYSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBjb250YWluaW5nIGFuIFtbQmFzZVR4XV0sIHBhcnNlcyBpdCwgcG9wdWxhdGVzIHRoZSBjbGFzcywgYW5kIHJldHVybnMgdGhlIGxlbmd0aCBvZiB0aGUgQmFzZVR4IGluIGJ5dGVzLlxuICAgKlxuICAgKiBAcGFyYW0gYnl0ZXMgQSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXJ8QnVmZmVyfSBjb250YWluaW5nIGEgcmF3IFtbQmFzZVR4XV1cbiAgICpcbiAgICogQHJldHVybnMgVGhlIGxlbmd0aCBvZiB0aGUgcmF3IFtbQmFzZVR4XV1cbiAgICpcbiAgICogQHJlbWFya3MgYXNzdW1lIG5vdC1jaGVja3N1bW1lZFxuICAgKi9cbiAgZnJvbUJ1ZmZlcihieXRlczpCdWZmZXIsIG9mZnNldDpudW1iZXIgPSAwKTpudW1iZXIge1xuICAgIHRoaXMubmV0d29ya2lkID0gYmludG9vbHMuY29weUZyb20oYnl0ZXMsIG9mZnNldCwgb2Zmc2V0ICsgNCk7XG4gICAgb2Zmc2V0ICs9IDQ7XG4gICAgdGhpcy5ibG9ja2NoYWluaWQgPSBiaW50b29scy5jb3B5RnJvbShieXRlcywgb2Zmc2V0LCBvZmZzZXQgKyAzMik7XG4gICAgb2Zmc2V0ICs9IDMyO1xuICAgIHRoaXMubnVtb3V0cyA9IGJpbnRvb2xzLmNvcHlGcm9tKGJ5dGVzLCBvZmZzZXQsIG9mZnNldCArIDQpO1xuICAgIG9mZnNldCArPSA0O1xuICAgIGNvbnN0IG91dGNvdW50Om51bWJlciA9IHRoaXMubnVtb3V0cy5yZWFkVUludDMyQkUoMCk7XG4gICAgdGhpcy5vdXRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdXRjb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCB4ZmVyb3V0OlRyYW5zZmVyYWJsZU91dHB1dCA9IG5ldyBUcmFuc2ZlcmFibGVPdXRwdXQoKTtcbiAgICAgIG9mZnNldCA9IHhmZXJvdXQuZnJvbUJ1ZmZlcihieXRlcywgb2Zmc2V0KTtcbiAgICAgIHRoaXMub3V0cy5wdXNoKHhmZXJvdXQpO1xuICAgIH1cblxuICAgIHRoaXMubnVtaW5zID0gYmludG9vbHMuY29weUZyb20oYnl0ZXMsIG9mZnNldCwgb2Zmc2V0ICsgNCk7XG4gICAgb2Zmc2V0ICs9IDQ7XG4gICAgY29uc3QgaW5jb3VudDpudW1iZXIgPSB0aGlzLm51bWlucy5yZWFkVUludDMyQkUoMCk7XG4gICAgdGhpcy5pbnMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluY291bnQ7IGkrKykge1xuICAgICAgY29uc3QgeGZlcmluOlRyYW5zZmVyYWJsZUlucHV0ID0gbmV3IFRyYW5zZmVyYWJsZUlucHV0KCk7XG4gICAgICBvZmZzZXQgPSB4ZmVyaW4uZnJvbUJ1ZmZlcihieXRlcywgb2Zmc2V0KTtcbiAgICAgIHRoaXMuaW5zLnB1c2goeGZlcmluKTtcbiAgICB9XG4gICAgbGV0IG1lbW9sZW46bnVtYmVyID0gYmludG9vbHMuY29weUZyb20oYnl0ZXMsIG9mZnNldCwgb2Zmc2V0ICsgNCkucmVhZFVJbnQzMkJFKDApO1xuICAgIG9mZnNldCArPSA0O1xuICAgIHRoaXMubWVtbyA9IGJpbnRvb2xzLmNvcHlGcm9tKGJ5dGVzLCBvZmZzZXQsIG9mZnNldCArIG1lbW9sZW4pO1xuICAgIG9mZnNldCArPSBtZW1vbGVuO1xuICAgIHJldHVybiBvZmZzZXQ7XG4gIH1cblxuICAvKipcbiAgICogVGFrZXMgdGhlIGJ5dGVzIG9mIGFuIFtbVW5zaWduZWRUeF1dIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIFtbQ3JlZGVudGlhbF1dc1xuICAgKlxuICAgKiBAcGFyYW0gbXNnIEEgQnVmZmVyIGZvciB0aGUgW1tVbnNpZ25lZFR4XV1cbiAgICogQHBhcmFtIGtjIEFuIFtbS2V5Q2hhaW5dXSB1c2VkIGluIHNpZ25pbmdcbiAgICpcbiAgICogQHJldHVybnMgQW4gYXJyYXkgb2YgW1tDcmVkZW50aWFsXV1zXG4gICAqL1xuICBzaWduKG1zZzpCdWZmZXIsIGtjOktleUNoYWluKTpBcnJheTxDcmVkZW50aWFsPiB7XG4gICAgY29uc3Qgc2lnczpBcnJheTxDcmVkZW50aWFsPiA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNyZWQ6Q3JlZGVudGlhbCA9IFNlbGVjdENyZWRlbnRpYWxDbGFzcyh0aGlzLmluc1tpXS5nZXRJbnB1dCgpLmdldENyZWRlbnRpYWxJRCgpKTtcbiAgICAgIGNvbnN0IHNpZ2lkeHM6QXJyYXk8U2lnSWR4PiA9IHRoaXMuaW5zW2ldLmdldElucHV0KCkuZ2V0U2lnSWR4cygpO1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaWdpZHhzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGNvbnN0IGtleXBhaXI6S2V5UGFpciA9IGtjLmdldEtleShzaWdpZHhzW2pdLmdldFNvdXJjZSgpKTtcbiAgICAgICAgY29uc3Qgc2lnbnZhbDpCdWZmZXIgPSBrZXlwYWlyLnNpZ24obXNnKTtcbiAgICAgICAgY29uc3Qgc2lnOlNpZ25hdHVyZSA9IG5ldyBTaWduYXR1cmUoKTtcbiAgICAgICAgc2lnLmZyb21CdWZmZXIoc2lnbnZhbCk7XG4gICAgICAgIGNyZWQuYWRkU2lnbmF0dXJlKHNpZyk7XG4gICAgICB9XG4gICAgICBzaWdzLnB1c2goY3JlZCk7XG4gICAgfVxuICAgIHJldHVybiBzaWdzO1xuICB9XG5cbiAgY2xvbmUoKTp0aGlzIHtcbiAgICBsZXQgbmV3YmFzZTpCYXNlVHggPSBuZXcgQmFzZVR4KCk7XG4gICAgbmV3YmFzZS5mcm9tQnVmZmVyKHRoaXMudG9CdWZmZXIoKSk7XG4gICAgcmV0dXJuIG5ld2Jhc2UgYXMgdGhpcztcbiAgfVxuXG4gIGNyZWF0ZSguLi5hcmdzOmFueVtdKTp0aGlzIHtcbiAgICByZXR1cm4gbmV3IEJhc2VUeCguLi5hcmdzKSBhcyB0aGlzO1xuICB9XG5cbiAgc2VsZWN0KGlkOm51bWJlciwgLi4uYXJnczphbnlbXSk6dGhpcyB7XG4gICAgbGV0IG5ld2Jhc2V0eDpCYXNlVHggPSBTZWxlY3RUeENsYXNzKGlkLCAuLi5hcmdzKTtcbiAgICByZXR1cm4gbmV3YmFzZXR4IGFzIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgQmFzZVR4IHdoaWNoIGlzIHRoZSBmb3VuZGF0aW9uIGZvciBhbGwgdHJhbnNhY3Rpb25zLlxuICAgKlxuICAgKiBAcGFyYW0gbmV0d29ya2lkIE9wdGlvbmFsIG5ldHdvcmtpZCwgW1tEZWZhdWx0TmV0d29ya0lEXV1cbiAgICogQHBhcmFtIGJsb2NrY2hhaW5pZCBPcHRpb25hbCBibG9ja2NoYWluaWQsIGRlZmF1bHQgQnVmZmVyLmFsbG9jKDMyLCAxNilcbiAgICogQHBhcmFtIG91dHMgT3B0aW9uYWwgYXJyYXkgb2YgdGhlIFtbVHJhbnNmZXJhYmxlT3V0cHV0XV1zXG4gICAqIEBwYXJhbSBpbnMgT3B0aW9uYWwgYXJyYXkgb2YgdGhlIFtbVHJhbnNmZXJhYmxlSW5wdXRdXXNcbiAgICogQHBhcmFtIG1lbW8gT3B0aW9uYWwge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyfEJ1ZmZlcn0gZm9yIHRoZSBtZW1vIGZpZWxkXG4gICAqL1xuICBjb25zdHJ1Y3RvcihuZXR3b3JraWQ6bnVtYmVyID0gRGVmYXVsdE5ldHdvcmtJRCwgYmxvY2tjaGFpbmlkOkJ1ZmZlciA9IEJ1ZmZlci5hbGxvYygzMiwgMTYpLCBvdXRzOkFycmF5PFRyYW5zZmVyYWJsZU91dHB1dD4gPSB1bmRlZmluZWQsIGluczpBcnJheTxUcmFuc2ZlcmFibGVJbnB1dD4gPSB1bmRlZmluZWQsIG1lbW86QnVmZmVyID0gdW5kZWZpbmVkKSB7XG4gICAgc3VwZXIobmV0d29ya2lkLCBibG9ja2NoYWluaWQsIG91dHMsIGlucywgbWVtbyk7XG4gIH1cbn0iXX0=","\"use strict\";\n/**\n * @packageDocumentation\n * @module Common-RESTAPI\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RESTAPI = void 0;\nconst bintools_1 = __importDefault(require(\"../utils/bintools\"));\nconst apibase_1 = require(\"./apibase\");\n/**\n * @ignore\n */\nconst bintools = bintools_1.default.getInstance();\nclass RESTAPI extends apibase_1.APIBase {\n    /**\n       *\n       * @param core Reference to the Avalanche instance using this endpoint\n       * @param baseurl Path of the APIs baseurl - ex: \"/ext/bc/avm\"\n       * @param contentType Optional Determines the type of the entity attached to the\n       * incoming request\n       * @param acceptType Optional Determines the type of representation which is\n       * desired on the client side\n       */\n    constructor(core, baseurl, contentType = 'application/json;charset=UTF-8', acceptType = undefined) {\n        super(core, baseurl);\n        this.prepHeaders = (contentType, acceptType) => {\n            const headers = {};\n            if (contentType !== undefined) {\n                headers['Content-Type'] = contentType;\n            }\n            else {\n                headers['Content-Type'] = this.contentType;\n            }\n            if (acceptType !== undefined) {\n                headers[\"Accept\"] = acceptType;\n            }\n            else if (this.acceptType !== undefined) {\n                headers[\"Accept\"] = this.acceptType;\n            }\n            return headers;\n        };\n        this.axConf = () => {\n            return {\n                baseURL: `${this.core.getProtocol()}://${this.core.getIP()}:${this.core.getPort()}`,\n                responseType: 'json',\n            };\n        };\n        this.get = (baseurl, contentType, acceptType) => __awaiter(this, void 0, void 0, function* () {\n            const ep = baseurl || this.baseurl;\n            let headers = this.prepHeaders(contentType, acceptType);\n            return this.core.get(ep, {}, headers, this.axConf()).then((resp) => resp);\n        });\n        this.post = (method, params, baseurl, contentType, acceptType) => __awaiter(this, void 0, void 0, function* () {\n            const ep = baseurl || this.baseurl;\n            const rpc = {};\n            rpc.method = method;\n            // Set parameters if exists\n            if (params) {\n                rpc.params = params;\n            }\n            const headers = this.prepHeaders(contentType, acceptType);\n            return this.core.post(ep, {}, JSON.stringify(rpc), headers, this.axConf())\n                .then((resp) => resp);\n        });\n        this.put = (method, params, baseurl, contentType, acceptType) => __awaiter(this, void 0, void 0, function* () {\n            const ep = baseurl || this.baseurl;\n            const rpc = {};\n            rpc.method = method;\n            // Set parameters if exists\n            if (params) {\n                rpc.params = params;\n            }\n            const headers = this.prepHeaders(contentType, acceptType);\n            return this.core.put(ep, {}, JSON.stringify(rpc), headers, this.axConf())\n                .then((resp) => resp);\n        });\n        this.delete = (method, params, baseurl, contentType, acceptType) => __awaiter(this, void 0, void 0, function* () {\n            const ep = baseurl || this.baseurl;\n            const rpc = {};\n            rpc.method = method;\n            // Set parameters if exists\n            if (params) {\n                rpc.params = params;\n            }\n            const headers = this.prepHeaders(contentType, acceptType);\n            return this.core.delete(ep, {}, headers, this.axConf()).then((resp) => resp);\n        });\n        this.patch = (method, params, baseurl, contentType, acceptType) => __awaiter(this, void 0, void 0, function* () {\n            const ep = baseurl || this.baseurl;\n            const rpc = {};\n            rpc.method = method;\n            // Set parameters if exists\n            if (params) {\n                rpc.params = params;\n            }\n            const headers = this.prepHeaders(contentType, acceptType);\n            return this.core.patch(ep, {}, JSON.stringify(rpc), headers, this.axConf())\n                .then((resp) => resp);\n        });\n        /**\n           * Returns the type of the entity attached to the incoming request\n           */\n        this.getContentType = () => this.contentType;\n        /**\n           * Returns what type of representation is desired at the client side\n           */\n        this.getAcceptType = () => this.acceptType;\n        this.contentType = contentType;\n        this.acceptType = acceptType;\n    }\n}\nexports.RESTAPI = RESTAPI;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzdGFwaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tb24vcmVzdGFwaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7OztHQUdHOzs7Ozs7Ozs7Ozs7Ozs7QUFHSCxpRUFBeUM7QUFFekMsdUNBQXlEO0FBRXpEOztHQUVHO0FBQ0gsTUFBTSxRQUFRLEdBQUcsa0JBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUV4QyxNQUFhLE9BQVEsU0FBUSxpQkFBTztJQXFIbEM7Ozs7Ozs7O1NBUUs7SUFDTCxZQUFZLElBQWtCLEVBQzVCLE9BQWMsRUFDZCxjQUFxQixnQ0FBZ0MsRUFDckQsYUFBb0IsU0FBUztRQUM3QixLQUFLLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBN0hiLGdCQUFXLEdBQUcsQ0FBQyxXQUFtQixFQUFFLFVBQWtCLEVBQVMsRUFBRTtZQUN6RSxNQUFNLE9BQU8sR0FBVSxFQUFFLENBQUM7WUFDMUIsSUFBSSxXQUFXLEtBQUssU0FBUyxFQUFFO2dCQUM3QixPQUFPLENBQUMsY0FBYyxDQUFDLEdBQUcsV0FBVyxDQUFDO2FBQ3ZDO2lCQUFNO2dCQUNMLE9BQU8sQ0FBQyxjQUFjLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO2FBQzVDO1lBRUQsSUFBSSxVQUFVLEtBQUssU0FBUyxFQUFFO2dCQUM1QixPQUFPLENBQUMsUUFBUSxDQUFDLEdBQUcsVUFBVSxDQUFDO2FBQ2hDO2lCQUFNLElBQUksSUFBSSxDQUFDLFVBQVUsS0FBSyxTQUFTLEVBQUU7Z0JBQ3hDLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO2FBQ3JDO1lBQ0QsT0FBTyxPQUFPLENBQUM7UUFDakIsQ0FBQyxDQUFBO1FBRVMsV0FBTSxHQUFHLEdBQXNCLEVBQUU7WUFDekMsT0FBUTtnQkFDTixPQUFPLEVBQUUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxN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YUFFSztRQUNMLGtCQUFhLEdBQUcsR0FBVSxFQUFFLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQztRQWdCM0MsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7SUFDL0IsQ0FBQztDQUNGO0FBdElELDBCQXNJQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKiBAbW9kdWxlIENvbW1vbi1SRVNUQVBJXG4gKi9cblxuaW1wb3J0IHsgQXhpb3NSZXF1ZXN0Q29uZmlnIH0gZnJvbSAnYXhpb3MnO1xuaW1wb3J0IEJpblRvb2xzIGZyb20gJy4uL3V0aWxzL2JpbnRvb2xzJztcbmltcG9ydCBBdmFsYW5jaGVDb3JlIGZyb20gJy4uL2F2YWxhbmNoZSc7XG5pbXBvcnQgeyBBUElCYXNlLCBSZXF1ZXN0UmVzcG9uc2VEYXRhIH0gZnJvbSAnLi9hcGliYXNlJztcblxuLyoqXG4gKiBAaWdub3JlXG4gKi9cbmNvbnN0IGJpbnRvb2xzID0gQmluVG9vbHMuZ2V0SW5zdGFuY2UoKTtcblxuZXhwb3J0IGNsYXNzIFJFU1RBUEkgZXh0ZW5kcyBBUElCYXNlIHtcbiAgcHJvdGVjdGVkIGNvbnRlbnRUeXBlOnN0cmluZztcblxuICBwcm90ZWN0ZWQgYWNjZXB0VHlwZTpzdHJpbmc7XG5cbiAgcHJvdGVjdGVkIHByZXBIZWFkZXJzID0gKGNvbnRlbnRUeXBlPzpzdHJpbmcsIGFjY2VwdFR5cGU/OnN0cmluZyk6b2JqZWN0ID0+IHtcbiAgICBjb25zdCBoZWFkZXJzOm9iamVjdCA9IHt9O1xuICAgIGlmIChjb250ZW50VHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9IGNvbnRlbnRUeXBlO1xuICAgIH0gZWxzZSB7XG4gICAgICBoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9IHRoaXMuY29udGVudFR5cGU7XG4gICAgfVxuXG4gICAgaWYgKGFjY2VwdFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaGVhZGVyc1tcIkFjY2VwdFwiXSA9IGFjY2VwdFR5cGU7XG4gICAgfSBlbHNlIGlmICh0aGlzLmFjY2VwdFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaGVhZGVyc1tcIkFjY2VwdFwiXSA9IHRoaXMuYWNjZXB0VHlwZTtcbiAgICB9XG4gICAgcmV0dXJuIGhlYWRlcnM7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXhDb25mID0gKCk6QXhpb3NSZXF1ZXN0Q29uZmlnID0+IHtcbiAgICByZXR1cm4gIHtcbiAgICAgIGJhc2VVUkw6IGAke3RoaXMuY29yZS5nZXRQcm90b2NvbCgpfTovLyR7dGhpcy5jb3JlLmdldElQKCl9OiR7dGhpcy5jb3JlLmdldFBvcnQoKX1gLFxuICAgICAgcmVzcG9uc2VUeXBlOiAnanNvbicsXG4gICAgfTtcblxuICB9XG5cbiAgZ2V0ID0gYXN5bmMgKGJhc2V1cmw/OnN0cmluZywgY29udGVudFR5cGU/OnN0cmluZywgYWNjZXB0VHlwZT86c3RyaW5nKTpQcm9taXNlPFJlcXVlc3RSZXNwb25zZURhdGE+ID0+IHtcbiAgICBjb25zdCBlcDpzdHJpbmcgPSBiYXNldXJsIHx8IHRoaXMuYmFzZXVybDtcblxuICAgIGxldCBoZWFkZXJzOm9iamVjdCA9IHRoaXMucHJlcEhlYWRlcnMoY29udGVudFR5cGUsIGFjY2VwdFR5cGUpO1xuXG4gICAgcmV0dXJuIHRoaXMuY29yZS5nZXQoZXAsIHt9LCBoZWFkZXJzLCB0aGlzLmF4Q29uZigpKS50aGVuKChyZXNwOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3ApO1xuICB9O1xuXG4gIHBvc3QgPSBhc3luYyAobWV0aG9kOnN0cmluZywgcGFyYW1zPzpBcnJheTxvYmplY3Q+IHwgb2JqZWN0LCBiYXNldXJsPzpzdHJpbmcsXG4gICAgY29udGVudFR5cGU/OnN0cmluZywgYWNjZXB0VHlwZT86c3RyaW5nKTpQcm9taXNlPFJlcXVlc3RSZXNwb25zZURhdGE+ID0+IHtcbiAgICBjb25zdCBlcDpzdHJpbmcgPSBiYXNldXJsIHx8IHRoaXMuYmFzZXVybDtcbiAgICBjb25zdCBycGM6YW55ID0ge307XG4gICAgcnBjLm1ldGhvZCA9IG1ldGhvZDtcblxuICAgIC8vIFNldCBwYXJhbWV0ZXJzIGlmIGV4aXN0c1xuICAgIGlmIChwYXJhbXMpIHtcbiAgICAgIHJwYy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgfVxuXG4gICAgY29uc3QgaGVhZGVyczpvYmplY3QgPSB0aGlzLnByZXBIZWFkZXJzKGNvbnRlbnRUeXBlLCBhY2NlcHRUeXBlKTtcblxuICAgIHJldHVybiB0aGlzLmNvcmUucG9zdChlcCwge30sIEpTT04uc3RyaW5naWZ5KHJwYyksIGhlYWRlcnMsIHRoaXMuYXhDb25mKCkpXG4gICAgICAudGhlbigocmVzcDpSZXF1ZXN0UmVzcG9uc2VEYXRhKSA9PiByZXNwKTtcbiAgfTtcblxuICBwdXQgPSBhc3luYyAobWV0aG9kOnN0cmluZyxcbiAgICBwYXJhbXM/OkFycmF5PG9iamVjdD4gfCBvYmplY3QsXG4gICAgYmFzZXVybD86c3RyaW5nLFxuICAgIGNvbnRlbnRUeXBlPzpzdHJpbmcsXG4gICAgYWNjZXB0VHlwZT86c3RyaW5nKTpQcm9taXNlPFJlcXVlc3RSZXNwb25zZURhdGE+ID0+IHtcbiAgICBjb25zdCBlcDpzdHJpbmcgPSBiYXNldXJsIHx8IHRoaXMuYmFzZXVybDtcbiAgICBjb25zdCBycGM6YW55ID0ge307XG4gICAgcnBjLm1ldGhvZCA9IG1ldGhvZDtcblxuICAgIC8vIFNldCBwYXJhbWV0ZXJzIGlmIGV4aXN0c1xuICAgIGlmIChwYXJhbXMpIHtcbiAgICAgIHJwYy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgfVxuXG4gICAgY29uc3QgaGVhZGVyczpvYmplY3QgPSB0aGlzLnByZXBIZWFkZXJzKGNvbnRlbnRUeXBlLCBhY2NlcHRUeXBlKTtcblxuICAgIHJldHVybiB0aGlzLmNvcmUucHV0KGVwLCB7fSwgSlNPTi5zdHJpbmdpZnkocnBjKSwgaGVhZGVycywgdGhpcy5heENvbmYoKSlcbiAgICAgIC50aGVuKChyZXNwOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3ApO1xuICB9O1xuXG4gIGRlbGV0ZSA9IGFzeW5jIChtZXRob2Q6c3RyaW5nLCBwYXJhbXM/OkFycmF5PG9iamVjdD4gfCBvYmplY3QsIGJhc2V1cmw/OnN0cmluZyxcbiAgICBjb250ZW50VHlwZT86c3RyaW5nLCBhY2NlcHRUeXBlPzpzdHJpbmcpOlByb21pc2U8UmVxdWVzdFJlc3BvbnNlRGF0YT4gPT4ge1xuICAgIGNvbnN0IGVwOnN0cmluZyA9IGJhc2V1cmwgfHwgdGhpcy5iYXNldXJsO1xuICAgIGNvbnN0IHJwYzphbnkgPSB7fTtcbiAgICBycGMubWV0aG9kID0gbWV0aG9kO1xuXG4gICAgLy8gU2V0IHBhcmFtZXRlcnMgaWYgZXhpc3RzXG4gICAgaWYgKHBhcmFtcykge1xuICAgICAgcnBjLnBhcmFtcyA9IHBhcmFtcztcbiAgICB9XG5cbiAgICBjb25zdCBoZWFkZXJzOm9iamVjdCA9IHRoaXMucHJlcEhlYWRlcnMoY29udGVudFR5cGUsIGFjY2VwdFR5cGUpO1xuXG4gICAgcmV0dXJuIHRoaXMuY29yZS5kZWxldGUoZXAsIHt9LCBoZWFkZXJzLCB0aGlzLmF4Q29uZigpKS50aGVuKChyZXNwOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3ApO1xuICB9O1xuXG4gIHBhdGNoID0gYXN5bmMgKG1ldGhvZDpzdHJpbmcsIHBhcmFtcz86QXJyYXk8b2JqZWN0PiB8IG9iamVjdCwgYmFzZXVybD86c3RyaW5nLFxuICAgIGNvbnRlbnRUeXBlPzpzdHJpbmcsIGFjY2VwdFR5cGU/OnN0cmluZyk6UHJvbWlzZTxSZXF1ZXN0UmVzcG9uc2VEYXRhPiA9PiB7XG4gICAgY29uc3QgZXA6c3RyaW5nID0gYmFzZXVybCB8fCB0aGlzLmJhc2V1cmw7XG4gICAgY29uc3QgcnBjOmFueSA9IHt9O1xuICAgIHJwYy5tZXRob2QgPSBtZXRob2Q7XG5cbiAgICAvLyBTZXQgcGFyYW1ldGVycyBpZiBleGlzdHNcbiAgICBpZiAocGFyYW1zKSB7XG4gICAgICBycGMucGFyYW1zID0gcGFyYW1zO1xuICAgIH1cblxuICAgIGNvbnN0IGhlYWRlcnM6b2JqZWN0ID0gdGhpcy5wcmVwSGVhZGVycyhjb250ZW50VHlwZSwgYWNjZXB0VHlwZSk7XG5cbiAgICByZXR1cm4gdGhpcy5jb3JlLnBhdGNoKGVwLCB7fSwgSlNPTi5zdHJpbmdpZnkocnBjKSwgaGVhZGVycywgdGhpcy5heENvbmYoKSlcbiAgICAgIC50aGVuKChyZXNwOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3ApO1xuICB9O1xuXG4gIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHR5cGUgb2YgdGhlIGVudGl0eSBhdHRhY2hlZCB0byB0aGUgaW5jb21pbmcgcmVxdWVzdFxuICAgICAqL1xuICBnZXRDb250ZW50VHlwZSA9ICgpOnN0cmluZyA9PiB0aGlzLmNvbnRlbnRUeXBlO1xuXG4gIC8qKlxuICAgICAqIFJldHVybnMgd2hhdCB0eXBlIG9mIHJlcHJlc2VudGF0aW9uIGlzIGRlc2lyZWQgYXQgdGhlIGNsaWVudCBzaWRlXG4gICAgICovXG4gIGdldEFjY2VwdFR5cGUgPSAoKTpzdHJpbmcgPT4gdGhpcy5hY2NlcHRUeXBlO1xuXG4gIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvcmUgUmVmZXJlbmNlIHRvIHRoZSBBdmFsYW5jaGUgaW5zdGFuY2UgdXNpbmcgdGhpcyBlbmRwb2ludFxuICAgICAqIEBwYXJhbSBiYXNldXJsIFBhdGggb2YgdGhlIEFQSXMgYmFzZXVybCAtIGV4OiBcIi9leHQvYmMvYXZtXCJcbiAgICAgKiBAcGFyYW0gY29udGVudFR5cGUgT3B0aW9uYWwgRGV0ZXJtaW5lcyB0aGUgdHlwZSBvZiB0aGUgZW50aXR5IGF0dGFjaGVkIHRvIHRoZVxuICAgICAqIGluY29taW5nIHJlcXVlc3RcbiAgICAgKiBAcGFyYW0gYWNjZXB0VHlwZSBPcHRpb25hbCBEZXRlcm1pbmVzIHRoZSB0eXBlIG9mIHJlcHJlc2VudGF0aW9uIHdoaWNoIGlzXG4gICAgICogZGVzaXJlZCBvbiB0aGUgY2xpZW50IHNpZGVcbiAgICAgKi9cbiAgY29uc3RydWN0b3IoY29yZTpBdmFsYW5jaGVDb3JlLFxuICAgIGJhc2V1cmw6c3RyaW5nLFxuICAgIGNvbnRlbnRUeXBlOnN0cmluZyA9ICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgnLFxuICAgIGFjY2VwdFR5cGU6c3RyaW5nID0gdW5kZWZpbmVkKSB7XG4gICAgc3VwZXIoY29yZSwgYmFzZXVybCk7XG4gICAgdGhpcy5jb250ZW50VHlwZSA9IGNvbnRlbnRUeXBlO1xuICAgIHRoaXMuYWNjZXB0VHlwZSA9IGFjY2VwdFR5cGU7XG4gIH1cbn1cblxuXG5cblxuXG5cbiJdfQ==","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KeystoreAPI = void 0;\nconst jrpcapi_1 = require(\"../../common/jrpcapi\");\n/**\n * Class for interacting with a node API that is using the node's KeystoreAPI.\n *\n * **WARNING**: The KeystoreAPI is to be used by the node-owner as the data is stored locally on the node. Do not trust the root user. If you are not the node-owner, do not use this as your wallet.\n *\n * @category RPCAPIs\n *\n * @remarks This extends the [[JRPCAPI]] class. This class should not be directly called. Instead, use the [[Avalanche.addAPI]] function to register this interface with Avalanche.\n */\nclass KeystoreAPI extends jrpcapi_1.JRPCAPI {\n    /**\n       * This class should not be instantiated directly. Instead use the [[Avalanche.addAPI]] method.\n       *\n       * @param core A reference to the Avalanche class\n       * @param baseurl Defaults to the string \"/ext/keystore\" as the path to blockchain's baseurl\n       */\n    constructor(core, baseurl = '/ext/keystore') {\n        super(core, baseurl);\n        /**\n           * Creates a user in the node's database.\n           *\n           * @param username Name of the user to create\n           * @param password Password for the user\n           *\n           * @returns Promise for a boolean with true on success\n           */\n        this.createUser = (username, password) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                username,\n                password,\n            };\n            return this.callMethod('keystore.createUser', params)\n                .then((response) => response.data.result.success);\n        });\n        /**\n           * Exports a user. The user can be imported to another node with keystore.importUser .\n           *\n           * @param username The name of the user to export\n           * @param password The password of the user to export\n           *\n           * @returns Promise with a string importable using importUser\n           */\n        this.exportUser = (username, password) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                username,\n                password,\n            };\n            return this.callMethod('keystore.exportUser', params)\n                .then((response) => response.data.result.user);\n        });\n        /**\n           * Imports a user file into the node's user database and assigns it to a username.\n           *\n           * @param username The name the user file should be imported into\n           * @param user cb58 serialized string represetning a user's data\n           * @param password The user's password\n           *\n           * @returns A promise with a true-value on success.\n           */\n        this.importUser = (username, user, password) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                username,\n                user,\n                password,\n            };\n            return this.callMethod('keystore.importUser', params)\n                .then((response) => response.data.result.success);\n        });\n        /**\n           * Lists the names of all users on the node.\n           *\n           * @returns Promise of an array with all user names.\n           */\n        this.listUsers = () => __awaiter(this, void 0, void 0, function* () {\n            return this.callMethod('keystore.listUsers')\n                .then((response) => response.data.result.users);\n        });\n        /**\n           * Deletes a user in the node's database.\n           *\n           * @param username Name of the user to delete\n           * @param password Password for the user\n           *\n           * @returns Promise for a boolean with true on success\n           */\n        this.deleteUser = (username, password) => __awaiter(this, void 0, void 0, function* () {\n            const params = {\n                username,\n                password,\n            };\n            return this.callMethod('keystore.deleteUser', params)\n                .then((response) => response.data.result.success);\n        });\n    }\n}\nexports.KeystoreAPI = KeystoreAPI;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2FwaXMva2V5c3RvcmUvYXBpLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUtBLGtEQUErQztBQUcvQzs7Ozs7Ozs7R0FRRztBQUNILE1BQWEsV0FBWSxTQUFRLGlCQUFPO0lBK0V0Qzs7Ozs7U0FLSztJQUNMLFlBQVksSUFBa0IsRUFBRSxVQUFpQixlQUFlO1FBQUksS0FBSyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztRQXBGekY7Ozs7Ozs7YUFPSztRQUNMLGVBQVUsR0FBRyxDQUFPLFFBQWUsRUFBRSxRQUFlLEVBQW1CLEVBQUU7WUFDdkUsTUFBTSxNQUFNLEdBQU87Z0JBQ2pCLFFBQVE7Z0JBQ1IsUUFBUTthQUNULENBQUM7WUFDRixPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMscUJBQXFCLEVBQUUsTUFBTSxDQUFDO2lCQUNsRCxJQUFJLENBQUMsQ0FBQyxRQUE0QixFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMxRSxDQUFDLENBQUEsQ0FBQztRQUVGOzs7Ozs7O2FBT0s7UUFDTCxlQUFVLEdBQUcsQ0FBTyxRQUFlLEVBQUUsUUFBZSxFQUFrQixFQUFFO1lBQ3RFLE1BQU0sTUFBTSxHQUFPO2dCQUNqQixRQUFRO2dCQUNSLFFBQVE7YUFDVCxDQUFDO1lBQ0YsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLHFCQUFxQixFQUFFLE1BQU0sQ0FBQztpQkFDbEQsSUFBSSxDQUFDLENBQUMsUUFBNEIsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdkUsQ0FBQyxDQUFBLENBQUM7UUFFRjs7Ozs7Ozs7YUFRSztRQUNMLGVBQVUsR0FBRyxDQUFPLFFBQWUsRUFBRSxJQUFXLEVBQUUsUUFBZSxFQUFtQixFQUFFO1lBQ3BGLE1BQU0sTUFBTSxHQUFPO2dCQUNqQixRQUFRO2dCQUNSLElBQUk7Z0JBQ0osUUFBUTthQUNULENBQUM7WUFDRixPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMscUJBQXFCLEVBQUUsTUFBTSxDQUFDO2lCQUNsRCxJQUFJLENBQUMsQ0FBQyxRQUE0QixFQUFFLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMxRSxDQUFDLENBQUEsQ0FBQztRQUVGOzs7O2FBSUs7UUFDTCxjQUFTLEdBQUcsR0FBZ0MsRUFBRTtZQUFDLE9BQUEsSUFBSSxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsQ0FBQztpQkFDakYsSUFBSSxDQUFDLENBQUMsUUFBNEIsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUE7VUFBQSxDQUFDO1FBRXRFOzs7Ozs7O2FBT0s7UUFDTCxlQUFVLEdBQUcsQ0FBTyxRQUFlLEVBQUUsUUFBZSxFQUFtQixFQUFFO1lBQ3ZFLE1BQU0sTUFBTSxHQUFPO2dCQUNqQixRQUFRO2dCQUNSLFFBQVE7YUFDVCxDQUFDO1lBQ0YsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLHFCQUFxQixFQUFFLE1BQU0sQ0FBQztpQkFDbEQsSUFBSSxDQUFDLENBQUMsUUFBNEIsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDMUUsQ0FBQyxDQUFBLENBQUM7SUFRd0YsQ0FBQztDQUM1RjtBQXRGRCxrQ0FzRkMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICogQG1vZHVsZSBBUEktS2V5c3RvcmVcbiAqL1xuaW1wb3J0IEF2YWxhbmNoZUNvcmUgZnJvbSAnLi4vLi4vYXZhbGFuY2hlJztcbmltcG9ydCB7IEpSUENBUEkgfSBmcm9tICcuLi8uLi9jb21tb24vanJwY2FwaSc7XG5pbXBvcnQgeyBSZXF1ZXN0UmVzcG9uc2VEYXRhIH0gZnJvbSAnLi4vLi4vY29tbW9uL2FwaWJhc2UnO1xuXG4vKipcbiAqIENsYXNzIGZvciBpbnRlcmFjdGluZyB3aXRoIGEgbm9kZSBBUEkgdGhhdCBpcyB1c2luZyB0aGUgbm9kZSdzIEtleXN0b3JlQVBJLlxuICpcbiAqICoqV0FSTklORyoqOiBUaGUgS2V5c3RvcmVBUEkgaXMgdG8gYmUgdXNlZCBieSB0aGUgbm9kZS1vd25lciBhcyB0aGUgZGF0YSBpcyBzdG9yZWQgbG9jYWxseSBvbiB0aGUgbm9kZS4gRG8gbm90IHRydXN0IHRoZSByb290IHVzZXIuIElmIHlvdSBhcmUgbm90IHRoZSBub2RlLW93bmVyLCBkbyBub3QgdXNlIHRoaXMgYXMgeW91ciB3YWxsZXQuXG4gKlxuICogQGNhdGVnb3J5IFJQQ0FQSXNcbiAqXG4gKiBAcmVtYXJrcyBUaGlzIGV4dGVuZHMgdGhlIFtbSlJQQ0FQSV1dIGNsYXNzLiBUaGlzIGNsYXNzIHNob3VsZCBub3QgYmUgZGlyZWN0bHkgY2FsbGVkLiBJbnN0ZWFkLCB1c2UgdGhlIFtbQXZhbGFuY2hlLmFkZEFQSV1dIGZ1bmN0aW9uIHRvIHJlZ2lzdGVyIHRoaXMgaW50ZXJmYWNlIHdpdGggQXZhbGFuY2hlLlxuICovXG5leHBvcnQgY2xhc3MgS2V5c3RvcmVBUEkgZXh0ZW5kcyBKUlBDQVBJIHtcbiAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHVzZXIgaW4gdGhlIG5vZGUncyBkYXRhYmFzZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB1c2VybmFtZSBOYW1lIG9mIHRoZSB1c2VyIHRvIGNyZWF0ZVxuICAgICAqIEBwYXJhbSBwYXNzd29yZCBQYXNzd29yZCBmb3IgdGhlIHVzZXJcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgZm9yIGEgYm9vbGVhbiB3aXRoIHRydWUgb24gc3VjY2Vzc1xuICAgICAqL1xuICBjcmVhdGVVc2VyID0gYXN5bmMgKHVzZXJuYW1lOnN0cmluZywgcGFzc3dvcmQ6c3RyaW5nKTpQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICBjb25zdCBwYXJhbXM6YW55ID0ge1xuICAgICAgdXNlcm5hbWUsXG4gICAgICBwYXNzd29yZCxcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLmNhbGxNZXRob2QoJ2tleXN0b3JlLmNyZWF0ZVVzZXInLCBwYXJhbXMpXG4gICAgICAudGhlbigocmVzcG9uc2U6UmVxdWVzdFJlc3BvbnNlRGF0YSkgPT4gcmVzcG9uc2UuZGF0YS5yZXN1bHQuc3VjY2Vzcyk7XG4gIH07XG5cbiAgLyoqXG4gICAgICogRXhwb3J0cyBhIHVzZXIuIFRoZSB1c2VyIGNhbiBiZSBpbXBvcnRlZCB0byBhbm90aGVyIG5vZGUgd2l0aCBrZXlzdG9yZS5pbXBvcnRVc2VyIC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB1c2VybmFtZSBUaGUgbmFtZSBvZiB0aGUgdXNlciB0byBleHBvcnRcbiAgICAgKiBAcGFyYW0gcGFzc3dvcmQgVGhlIHBhc3N3b3JkIG9mIHRoZSB1c2VyIHRvIGV4cG9ydFxuICAgICAqXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB3aXRoIGEgc3RyaW5nIGltcG9ydGFibGUgdXNpbmcgaW1wb3J0VXNlclxuICAgICAqL1xuICBleHBvcnRVc2VyID0gYXN5bmMgKHVzZXJuYW1lOnN0cmluZywgcGFzc3dvcmQ6c3RyaW5nKTpQcm9taXNlPHN0cmluZz4gPT4ge1xuICAgIGNvbnN0IHBhcmFtczphbnkgPSB7XG4gICAgICB1c2VybmFtZSxcbiAgICAgIHBhc3N3b3JkLFxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuY2FsbE1ldGhvZCgna2V5c3RvcmUuZXhwb3J0VXNlcicsIHBhcmFtcylcbiAgICAgIC50aGVuKChyZXNwb25zZTpSZXF1ZXN0UmVzcG9uc2VEYXRhKSA9PiByZXNwb25zZS5kYXRhLnJlc3VsdC51c2VyKTtcbiAgfTtcblxuICAvKipcbiAgICAgKiBJbXBvcnRzIGEgdXNlciBmaWxlIGludG8gdGhlIG5vZGUncyB1c2VyIGRhdGFiYXNlIGFuZCBhc3NpZ25zIGl0IHRvIGEgdXNlcm5hbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdXNlcm5hbWUgVGhlIG5hbWUgdGhlIHVzZXIgZmlsZSBzaG91bGQgYmUgaW1wb3J0ZWQgaW50b1xuICAgICAqIEBwYXJhbSB1c2VyIGNiNTggc2VyaWFsaXplZCBzdHJpbmcgcmVwcmVzZXRuaW5nIGEgdXNlcidzIGRhdGFcbiAgICAgKiBAcGFyYW0gcGFzc3dvcmQgVGhlIHVzZXIncyBwYXNzd29yZFxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHdpdGggYSB0cnVlLXZhbHVlIG9uIHN1Y2Nlc3MuXG4gICAgICovXG4gIGltcG9ydFVzZXIgPSBhc3luYyAodXNlcm5hbWU6c3RyaW5nLCB1c2VyOnN0cmluZywgcGFzc3dvcmQ6c3RyaW5nKTpQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICBjb25zdCBwYXJhbXM6YW55ID0ge1xuICAgICAgdXNlcm5hbWUsXG4gICAgICB1c2VyLFxuICAgICAgcGFzc3dvcmQsXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5jYWxsTWV0aG9kKCdrZXlzdG9yZS5pbXBvcnRVc2VyJywgcGFyYW1zKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlOlJlcXVlc3RSZXNwb25zZURhdGEpID0+IHJlc3BvbnNlLmRhdGEucmVzdWx0LnN1Y2Nlc3MpO1xuICB9O1xuXG4gIC8qKlxuICAgICAqIExpc3RzIHRoZSBuYW1lcyBvZiBhbGwgdXNlcnMgb24gdGhlIG5vZGUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIG9mIGFuIGFycmF5IHdpdGggYWxsIHVzZXIgbmFtZXMuXG4gICAgICovXG4gIGxpc3RVc2VycyA9IGFzeW5jICgpOlByb21pc2U8QXJyYXk8c3RyaW5nPj4gPT4gdGhpcy5jYWxsTWV0aG9kKCdrZXlzdG9yZS5saXN0VXNlcnMnKVxuICAgIC50aGVuKChyZXNwb25zZTpSZXF1ZXN0UmVzcG9uc2VEYXRhKSA9PiByZXNwb25zZS5kYXRhLnJlc3VsdC51c2Vycyk7XG5cbiAgLyoqXG4gICAgICogRGVsZXRlcyBhIHVzZXIgaW4gdGhlIG5vZGUncyBkYXRhYmFzZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB1c2VybmFtZSBOYW1lIG9mIHRoZSB1c2VyIHRvIGRlbGV0ZVxuICAgICAqIEBwYXJhbSBwYXNzd29yZCBQYXNzd29yZCBmb3IgdGhlIHVzZXJcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgZm9yIGEgYm9vbGVhbiB3aXRoIHRydWUgb24gc3VjY2Vzc1xuICAgICAqL1xuICBkZWxldGVVc2VyID0gYXN5bmMgKHVzZXJuYW1lOnN0cmluZywgcGFzc3dvcmQ6c3RyaW5nKTpQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgICBjb25zdCBwYXJhbXM6YW55ID0ge1xuICAgICAgdXNlcm5hbWUsXG4gICAgICBwYXNzd29yZCxcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLmNhbGxNZXRob2QoJ2tleXN0b3JlLmRlbGV0ZVVzZXInLCBwYXJhbXMpXG4gICAgICAudGhlbigocmVzcG9uc2U6UmVxdWVzdFJlc3BvbnNlRGF0YSkgPT4gcmVzcG9uc2UuZGF0YS5yZXN1bHQuc3VjY2Vzcyk7XG4gIH07XG5cbiAgLyoqXG4gICAgICogVGhpcyBjbGFzcyBzaG91bGQgbm90IGJlIGluc3RhbnRpYXRlZCBkaXJlY3RseS4gSW5zdGVhZCB1c2UgdGhlIFtbQXZhbGFuY2hlLmFkZEFQSV1dIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb3JlIEEgcmVmZXJlbmNlIHRvIHRoZSBBdmFsYW5jaGUgY2xhc3NcbiAgICAgKiBAcGFyYW0gYmFzZXVybCBEZWZhdWx0cyB0byB0aGUgc3RyaW5nIFwiL2V4dC9rZXlzdG9yZVwiIGFzIHRoZSBwYXRoIHRvIGJsb2NrY2hhaW4ncyBiYXNldXJsXG4gICAgICovXG4gIGNvbnN0cnVjdG9yKGNvcmU6QXZhbGFuY2hlQ29yZSwgYmFzZXVybDpzdHJpbmcgPSAnL2V4dC9rZXlzdG9yZScpIHsgc3VwZXIoY29yZSwgYmFzZXVybCk7IH1cbn0iXX0="],"sourceRoot":""}